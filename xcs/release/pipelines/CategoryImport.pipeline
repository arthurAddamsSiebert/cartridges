<?xml version="1.0" encoding="UTF-8"?>
<!--This pipeline is used by the eMC to perform the XML import of catalog categories.
@Group Catalog-->

<pipeline:Pipeline xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pipeline="http://www.intershop.de/pipeline/2010"
    name="CategoryImport" type="process">
<!--@Location 1,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start4" name="ASCII" callMode="Private">
<!--@BendPoints 3,2-->
    <nodeSuccessors name="next" next="CallNode6"/>
    <parameters name="StoreName" type="java.lang.String" optional="true"/>
    <parameters name="Interactor" type="com.intershop.beehive.core.capi.impex.ImpexInteractor"
        optional="true"/>
  </nodes>
<!--@Location 1,1-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode6">
<!--@BendPoints 3,4-->
    <nodeSuccessors name="next" next="Call2"/>
    <nodeSuccessors name="error-no-permission" next="End12"/>
    <nodeSuccessors name="error" next="End13"/>
    <startNode referencedName="CategoryImport-PrepareASCIIImport"/>
  </nodes>
<!--@Location 1,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call2">
<!--@BendPoints 3,7-->
    <nodeSuccessors name="next" next="JoinNode3"/>
    <startNode referencedName="CategoryImport-ASCIIConversion"/>
  </nodes>
<!--@Location 3,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode3">
<!--@BendPoints 7,8-->
    <nodeSuccessors name="next" next="CallNode1"/>
  </nodes>
<!--@Location 3,4-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode1">
    <nodeSuccessors name="next" next="CallNode2"/>
    <nodeSuccessors name="error" next="JoinNode14"/>
    <startNode referencedName="CategoryImport-Verify"/>
  </nodes>
<!--@Location 3,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode2">
    <nodeSuccessors name="next" next="JoinNode12"/>
    <nodeSuccessors name="error" next="JoinNode4"/>
    <startNode referencedName="CategoryImport-Statistics"/>
  </nodes>
<!--@Location 3,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode12">
<!--@BendPoints 7,16-->
    <nodeSuccessors name="next" next="CallNode3"/>
  </nodes>
<!--@Location 3,8-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode3">
<!--@BendPoints 7,18-->
    <nodeSuccessors name="next" next="CallNode4"/>
    <nodeSuccessors name="error" next="JoinNode6"/>
    <startNode referencedName="CategoryImport-ImportCategories"/>
  </nodes>
<!--@Location 3,9-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode4">
    <nodeSuccessors name="next" next="JoinNode5"/>
    <nodeSuccessors name="error" next="JoinNode7"/>
    <startNode referencedName="CategoryImport-ImportCategoriesRelations"/>
  </nodes>
<!--@Location 3,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode5">
<!--@BendPoints 7,22-->
    <nodeSuccessors name="next" next="Call3"/>
  </nodes>
<!--@Location 3,11-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call3">
    <nodeSuccessors name="next" next="End1"/>
    <startNode referencedName="CategoryImport-Cleanup"/>
  </nodes>
<!--@Location 3,12-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End1"/>
<!--@Location 4,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode7">
    <nodeSuccessors name="next" next="JoinNode5"/>
  </nodes>
<!--@Location 4,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode6">
    <nodeSuccessors name="next" next="JoinNode7"/>
  </nodes>
<!--@Location 4,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode4">
    <nodeSuccessors name="next" next="JoinNode6"/>
  </nodes>
<!--@Location 4,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode14">
    <nodeSuccessors name="next" next="JoinNode4"/>
  </nodes>
<!--@Location 2,1-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End12" name="error-no-permission"/>
<!--@Location 2,2-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End13" name="error"/>
<!--@Location 8,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start5" name="ASCIIConversion" callMode="Private">
    <nodeSuccessors name="next" next="OpenFile7"/>
  </nodes>
<!--@Location 8,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="OpenFile7">
    <configurationValues name="FileID" value="asciifile"/>
    <configurationValues name="PipeletID" value="OpenASCIIFile"/>
    <configurationValues name="StreamID" value="asciiIn"/>
    <configurationValues name="Type" value="SOURCE"/>
    <configurationValues name="UIDescription" value="OpenASCIIFile"/>
    <pipelet href="enfinity:/core/pipelets/OpenFile.xml"/>
    <nodeSuccessors name="next" next="OpenFile6"/>
<!--@BendPoints 25,3-->
    <nodeSuccessors name="pipelet_error" next="Join6"/>
  </nodes>
<!--@Location 8,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="OpenFile6">
    <configurationValues name="FileID" value="xmlfile"/>
    <configurationValues name="PipeletID" value="OpenXMLFile"/>
    <configurationValues name="StreamID" value="xmlOut"/>
    <configurationValues name="Type" value="TEMP_OUT"/>
    <configurationValues name="UIDescription" value="OpenXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/OpenFile.xml"/>
    <nodeSuccessors name="next" next="ASCIIConvert1"/>
<!--@BendPoints 21,5-->
    <nodeSuccessors name="pipelet_error" next="Join5"/>
  </nodes>
<!--@Location 8,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ASCIIConvert1">
    <configurationValues name="FieldDelimiter" value=";"/>
    <configurationValues name="FormatLine" value="1"/>
    <configurationValues name="Iterator.Name" value="data"/>
    <configurationValues name="PipeletID" value="ASCIIConversion"/>
    <configurationValues name="SkipLines" value="1"/>
    <configurationValues name="SourceID" value="asciiIn"/>
    <configurationValues name="TargetID" value="xmlOut"/>
    <configurationValues name="UIDescription" value="ASCIIConvert"/>
    <pipelet href="enfinity:/core/pipelets/ASCIIConvert.xml"/>
    <nodeSuccessors name="next" next="CloseFile14"/>
    <nodeSuccessors name="pipelet_error" next="CloseFile12"/>
  </nodes>
<!--@Location 8,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile14">
    <configurationValues name="PipeletID" value="CloseXMLFileConversion"/>
    <configurationValues name="StreamID" value="xmlOut"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="CloseFile13"/>
  </nodes>
<!--@Location 8,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile13">
    <configurationValues name="PipeletID" value="CloseASCIIFileConversion"/>
    <configurationValues name="StreamID" value="asciiIn"/>
    <configurationValues name="UIDescription" value="CloseASCIIFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="End15"/>
  </nodes>
<!--@Location 8,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End15"/>
<!--@Location 9,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile12">
    <configurationValues name="PipeletID" value="CloseXMLFileConvertError"/>
    <configurationValues name="StreamID" value="xmlOut"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="Join5"/>
  </nodes>
<!--@Location 10,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join5">
    <nodeSuccessors name="next" next="CloseFile11"/>
  </nodes>
<!--@Location 11,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile11">
    <configurationValues name="PipeletID" value="CloseASCIIFileConvertError"/>
    <configurationValues name="StreamID" value="asciiIn"/>
    <configurationValues name="UIDescription" value="CloseASCIIFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="Join6"/>
  </nodes>
<!--@Location 12,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join6">
    <nodeSuccessors name="next" next="Call1"/>
  </nodes>
<!--@Location 12,4-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call1">
    <nodeSuccessors name="next" next="Stop1"/>
    <startNode referencedName="CategoryImport-Cleanup"/>
  </nodes>
<!--@Location 12,5-->
  <nodes xsi:type="pipeline:StopNode" nodeID="Stop1"/>
<!--@Location 15,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start6" name="Cleanup" callMode="Private">
<!--@BendPoints 31,2-->
    <nodeSuccessors name="next" next="CleanUpStagingTables2"/>
  </nodes>
<!--@Location 15,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CleanUpStagingTables2">
    <pipelet href="enfinity:/core/pipelets/CleanUpStagingTables.xml"/>
    <nodeSuccessors name="next" next="JoinNode8"/>
  </nodes>
<!--@Location 15,2-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode8">
<!--@BendPoints 31,6-->
    <nodeSuccessors name="next" next="UnlockImport2"/>
  </nodes>
<!--@Location 15,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UnlockImport2">
    <configurationValues name="PipeletID" value="UnlockImport"/>
    <configurationValues name="UIDescription" value="UnlockImport"/>
    <pipelet href="enfinity:/core/pipelets/UnlockImport.xml"/>
    <nodeSuccessors name="next" next="Join10"/>
<!--@BendPoints 32,7 32,9-->
    <nodeSuccessors name="pipelet_error" next="Join10"/>
  </nodes>
<!--@Location 15,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join10">
    <nodeSuccessors name="next" next="CloseLoggers2"/>
  </nodes>
<!--@Location 15,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseLoggers2">
    <configurationValues name="PipeletID" value="CloseLoggers"/>
    <configurationValues name="UIDescription" value="Close Loggers"/>
    <pipelet href="enfinity:/core/pipelets/CloseLoggers.xml"/>
    <nodeSuccessors name="next" next="Join13"/>
<!--@BendPoints 32,11 32,13-->
    <nodeSuccessors name="pipelet_error" next="Join13"/>
  </nodes>
<!--@Location 15,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join13">
    <nodeSuccessors name="next" next="End5"/>
  </nodes>
<!--@Location 15,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End5"/>
<!--@Location 14,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start7" name="CloseLogger" callMode="Private">
<!--@BendPoints 29,9-->
    <nodeSuccessors name="next" next="Join10"/>
  </nodes>
<!--@Location 5,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start3" name="DBInit" callMode="Private">
<!--@BendPoints 11,2-->
    <nodeSuccessors name="next" next="CallNode8"/>
  </nodes>
<!--@Location 5,1-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode8">
<!--@BendPoints 11,8-->
    <nodeSuccessors name="next" next="CallNode5"/>
    <nodeSuccessors name="error" next="End10"/>
    <startNode referencedName="CategoryImport-PrepareDBInit"/>
  </nodes>
<!--@Location 5,4-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode5">
<!--@BendPoints 11,15-->
    <nodeSuccessors name="next" next="JoinNode12"/>
    <nodeSuccessors name="error" next="JoinNode14"/>
    <startNode referencedName="CategoryImport-VerifyQ"/>
  </nodes>
<!--@Location 6,2-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End10" name="error"/>
<!--@Location 16,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start2" name="Error" callMode="Private">
<!--@BendPoints 33,5-->
    <nodeSuccessors name="next" next="JoinNode8"/>
  </nodes>
<!--@Location 24,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode0" strict="true" visibility="Protected"
      name="GetCategoryAssignmentDomain" callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode0"/>
    <parameters name="CategoryAssignmentDomainName" type="java.lang.String" optional="true"/>
    <parameters name="Controller" type="com.intershop.beehive.core.capi.impex.Controller"/>
  </nodes>
<!--@Location 24,1-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode0" conditionKey="CategoryAssignmentDomainName">
    <nodeSuccessors name="decision_yes" next="GetDomainByName0"/>
    <nodeSuccessors name="decision_no" next="LogMessage0"/>
  </nodes>
<!--@Location 24,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainByName0">
    <pipelet href="enfinity:/core/pipelets/GetDomainByName.xml"/>
    <nodeSuccessors name="next" next="EndNode8"/>
    <nodeSuccessors name="pipelet_error" next="LogMessage0"/>
    <parameterBindings name="DomainName" objectPath="CategoryAssignmentDomainName"/>
    <returnValueBindings name="Domain" objectPath="CategoryAssignmentDomain"/>
  </nodes>
<!--@Location 24,3-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode8" strict="true">
    <returnValues name="CategoryAssignmentDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
  </nodes>
<!--@Location 25,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="LogMessage0">
    <configurationValues name="Level" value="Error"/>
    <pipelet href="enfinity:/core/pipelets/LogMessage.xml"/>
    <nodeSuccessors name="next" next="EndNode0"/>
    <parameterBindings name="MessageParam1" objectPath="CurrentDomain:DomainName"/>
    <parameterBindings name="MessageParam2" objectPath="CurrentApplication:UrlIdentifier"/>
    <parameterBindings name="MessageText" constant="Category assignment domain was not found. CurrentDomain: {}; App: {};"/>
  </nodes>
<!--@Location 25,3-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode0" name="error" strict="true"/>
<!--@Location 9,19-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start8" name="ImportCategories" callMode="Private">
<!--@BendPoints 19,40-->
    <nodeSuccessors name="next" next="OpenFile8"/>
  </nodes>
<!--@Location 9,20-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="OpenFile8">
    <configurationValues name="FileID" value="xmlfile"/>
    <configurationValues name="PipeletID" value="OpenXMLFileImportCategories"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="Type" value="SOURCE"/>
    <configurationValues name="UIDescription" value="OpenFile"/>
    <pipelet href="enfinity:/core/pipelets/OpenFile.xml"/>
<!--@BendPoints 19,42-->
    <nodeSuccessors name="next" next="Import3"/>
<!--@BendPoints 23,41-->
    <nodeSuccessors name="pipelet_error" next="Join16"/>
  </nodes>
<!--@Location 9,21-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Import3">
    <configurationValues name="Bulker.Class" value="com.intershop.beehive.xcs.internal.impex.catalog.ElementBulkerORMCatalogCategory"/>
    <configurationValues name="ContentHandler.Class" value="com.intershop.beehive.xcs.internal.impex.catalog.XMLParseContentHandlerCatalogCategory"/>
    <configurationValues name="ImportManager.Class" value="com.intershop.beehive.core.internal.impex.orm.ORMImportMgr"/>
    <configurationValues name="PipeletID" value="ORMImportCategories"/>
    <configurationValues name="SourceID" value="source"/>
    <configurationValues name="StatisticsID" value="statistics"/>
    <configurationValues name="UIDescription" value="ORM Import categories"/>
    <configurationValues name="Validator.Class" value="com.intershop.beehive.xcs.internal.impex.catalog.ElementValidatorCatalogCategory"/>
    <pipelet href="enfinity:/core/pipelets/Import.xml"/>
<!--@BendPoints 19,44-->
    <nodeSuccessors name="next" next="CloseFile15"/>
<!--@BendPoints 20,43-->
    <nodeSuccessors name="pipelet_error" next="CloseFile16"/>
  </nodes>
<!--@Location 9,22-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile15">
    <configurationValues name="PipeletID" value="CloseXMLFileImportCategories"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
<!--@BendPoints 19,46-->
    <nodeSuccessors name="next" next="End4"/>
  </nodes>
<!--@Location 9,23-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End4"/>
<!--@Location 10,21-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile16">
    <configurationValues name="PipeletID" value="CloseXMLFileImportCategoriesError"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="Join16"/>
  </nodes>
<!--@Location 11,21-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join16">
    <nodeSuccessors name="next" next="EndNode4"/>
  </nodes>
<!--@Location 11,23-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode4" name="error"/>
<!--@Location 13,19-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start9" name="ImportCategoriesRelations"
      callMode="Private">
<!--@BendPoints 27,40-->
    <nodeSuccessors name="next" next="OpenFile9"/>
  </nodes>
<!--@Location 13,20-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="OpenFile9">
    <configurationValues name="FileID" value="xmlfile"/>
    <configurationValues name="PipeletID" value="OpenXMLFileImportCategorieRelations"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="Type" value="SOURCE"/>
    <configurationValues name="UIDescription" value="OpenFile"/>
    <pipelet href="enfinity:/core/pipelets/OpenFile.xml"/>
<!--@BendPoints 27,42-->
    <nodeSuccessors name="next" next="Import1"/>
<!--@BendPoints 31,41-->
    <nodeSuccessors name="pipelet_error" next="Join17"/>
  </nodes>
<!--@Location 13,21-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Import1">
    <configurationValues name="Bulker.Class" value="com.intershop.beehive.xcs.internal.impex.catalog.ElementBulkerORMCatalogCategoryRelation"/>
    <configurationValues name="ContentHandler.Class" value="com.intershop.beehive.xcs.internal.impex.catalog.XMLParseContentHandlerCatalogCategoryRelation"/>
    <configurationValues name="ImportManager.Class" value="com.intershop.beehive.core.internal.impex.orm.ORMImportMgr"/>
    <configurationValues name="PipeletID" value="ORMImportCategorieRelations"/>
    <configurationValues name="SourceID" value="source"/>
    <configurationValues name="StatisticsID" value="statistics"/>
    <configurationValues name="UIDescription" value="ORM Import categories"/>
    <configurationValues name="Validator.Class" value="com.intershop.beehive.xcs.internal.impex.catalog.ElementValidatorCatalogCategoryRelation"/>
    <pipelet href="enfinity:/core/pipelets/Import.xml"/>
<!--@BendPoints 27,44-->
    <nodeSuccessors name="next" next="CloseFile18"/>
<!--@BendPoints 28,43-->
    <nodeSuccessors name="pipelet_error" next="CloseFile17"/>
  </nodes>
<!--@Location 13,22-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile18">
    <configurationValues name="PipeletID" value="CloseXMLFileImportCategorieRelations"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
<!--@BendPoints 27,46-->
    <nodeSuccessors name="next" next="End6"/>
  </nodes>
<!--@Location 13,23-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End6"/>
<!--@Location 14,21-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile17">
    <configurationValues name="PipeletID" value="CloseXMLFileImportCategorieRelationsError"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="Join17"/>
  </nodes>
<!--@Location 15,21-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join17">
    <nodeSuccessors name="next" next="EndNode5"/>
  </nodes>
<!--@Location 15,23-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode5" name="error"/>
<!--@Location 18,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start11" name="PrepareASCIIImport"
      callMode="Private">
    <nodeSuccessors name="next" next="AccessControl4"/>
    <parameters name="StoreName" type="java.lang.String" optional="true"/>
    <parameters name="Interactor" type="com.intershop.beehive.core.capi.impex.ImpexInteractor"
        optional="true"/>
  </nodes>
<!--@Location 18,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AccessControl4">
    <configurationValues name="AccessControlPermission" value="MANAGE_CATALOG"/>
    <configurationValues name="PerformAccessControl" value="true"/>
    <configurationValues name="PerformIPRangeCheck" value="false"/>
    <configurationValues name="RequireHTTPS" value="false"/>
    <pipelet href="enfinity:/core/pipelets/AccessControl.xml"/>
    <nodeSuccessors name="next" next="CreateImpexUnitFileStructure4"/>
    <nodeSuccessors name="pipelet_error" next="End17"/>
  </nodes>
<!--@Location 18,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateImpexUnitFileStructure4">
    <pipelet href="enfinity:/core/pipelets/CreateImpexUnitFileStructure.xml"/>
    <nodeSuccessors name="next" next="DetermineConfiguration4"/>
    <nodeSuccessors name="pipelet_error" next="End16"/>
  </nodes>
<!--@Location 18,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DetermineConfiguration4">
    <configurationValues name="CartridgeName" value="xcs"/>
    <configurationValues name="Controller.Class" value="com.intershop.beehive.core.capi.impex.Controller"/>
    <configurationValues name="File" value="CategoryASCIIImport.properties"/>
    <configurationValues name="PerformAccessControl" value="true"/>
    <configurationValues name="PipeletID" value="DetermineConfiguration"/>
    <configurationValues name="PropertyMapping" value="CreateFileLogger.File=FileLogger.File;CreateFileLogger.RolloverSize=FileLogger.RolloverSize;CreateFileLogger.Truncate=FileLogger.Truncate;CreateFileLogger.Level=FileLogger.Level;DetermineConfiguration.SessionLocale=SessionLocale;DetermineConfiguration.File=PropertyFileName;runVerification=RunVerification;ASCIIConversion.Format=ASCIIConversion.FormatDefinition;ASCIIConversion.Template=ASCIIConversion.MappingTemplate;ASCIIConversion.FormatLine=ASCIIConversion.FormatLinePosition;ASCIIConversion.SkipLines=ASCIIConversion.NumberSkipLines;xmlfile=TempFile;asciifile=SourceFile;SQLLDRFinishCategories.DumpFiles.Delete=LoaderCleanup.DumpFiles.Delete;SQLLDRFinishCategories.LogFiles.Delete=LoaderCleanup.LogFiles.Delete;SQLLDRFinishCategories.ScriptFiles.Delete=LoaderCleanup.LogFiles.Delete;SQLLDRFinishCategories.ControlFiles.Delete=LoaderCleanup.LogFiles.Delete;SQLLDRFinishCategoryRelations.DumpFiles.Delete=LoaderCleanup.DumpFiles.Delete;SQLLDRFinishCategoryRelations.LogFiles.Delete=LoaderCleanup.LogFiles.Delete;SQLLDRFinishCategoryRelations.ScriptFiles.Delete=LoaderCleanup.LogFiles.Delete;SQLLDRFinishCategoryRelations.ControlFiles.Delete=LoaderCleanup.LogFiles.Delete"/>
    <configurationValues name="UIDescription" value="DetermineConfiguration"/>
    <pipelet href="enfinity:/core/pipelets/DetermineConfiguration.xml"/>
<!--@BendPoints 37,9-->
    <nodeSuccessors name="next" next="JoinNode2"/>
    <nodeSuccessors name="pipelet_error" next="End11"/>
  </nodes>
<!--@Location 20,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode2">
    <nodeSuccessors name="next" next="CreateFileLogger4"/>
  </nodes>
<!--@Location 20,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateFileLogger4">
    <configurationValues name="BufferSize" value="1024"/>
    <configurationValues name="Facility" value="default"/>
    <configurationValues name="FlushTime" value="0"/>
    <configurationValues name="Level" value="ERROR | WARN"/>
    <configurationValues name="PipeletID" value="CreateFileLogger"/>
    <configurationValues name="RolloverSize" value="102400"/>
    <configurationValues name="UIDescription" value="CreateFileLogger"/>
    <pipelet href="enfinity:/core/pipelets/CreateFileLogger.xml"/>
    <nodeSuccessors name="next" next="JoinNode13"/>
  </nodes>
<!--@Location 20,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode13">
<!--@BendPoints 41,16-->
    <nodeSuccessors name="next" next="LockImport5"/>
  </nodes>
<!--@Location 20,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="LockImport5">
    <configurationValues name="IsDomainSpecific" value="true"/>
    <configurationValues name="PipeletID" value="LockImport"/>
    <configurationValues name="ResourceList" value="Categories"/>
    <configurationValues name="Timeout" value="60"/>
    <configurationValues name="UIDescription" value="LockImport"/>
    <pipelet href="enfinity:/core/pipelets/LockImport.xml"/>
    <nodeSuccessors name="next" next="End20"/>
<!--@BendPoints 42,17-->
    <nodeSuccessors name="pipelet_error" next="Jump4"/>
  </nodes>
<!--@Location 20,9-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End20"/>
<!--@Location 21,8-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="Jump4">
    <startNode referencedName="CategoryImport-CloseLogger"/>
  </nodes>
<!--@Location 19,3-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End11" name="error"/>
<!--@Location 19,2-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End16" name="error"/>
<!--@Location 19,1-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End17" name="error-no-permission"/>
<!--@Location 22,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start12" name="PrepareDBInit" callMode="Private">
    <nodeSuccessors name="next" next="CreateImpexUnitFileStructure1"/>
  </nodes>
<!--@Location 22,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateImpexUnitFileStructure1">
    <pipelet href="enfinity:/core/pipelets/CreateImpexUnitFileStructure.xml"/>
    <nodeSuccessors name="next" next="DetermineConfiguration1"/>
    <nodeSuccessors name="pipelet_error" next="End8"/>
  </nodes>
<!--@Location 22,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DetermineConfiguration1">
    <configurationValues name="CartridgeName" value="xcs"/>
    <configurationValues name="Controller.Class" value="com.intershop.beehive.core.capi.impex.Controller"/>
    <configurationValues name="File" value="DBInit-CategoryImport.properties"/>
    <configurationValues name="PerformAccessControl" value="false"/>
    <configurationValues name="PipeletID" value="DetermineConfigurationDBInit"/>
    <configurationValues name="PropertyMapping" value="xmlfile=sourcefile"/>
    <configurationValues name="UIDescription" value="DetermineConfiguration"/>
    <pipelet href="enfinity:/core/pipelets/DetermineConfiguration.xml"/>
    <nodeSuccessors name="next" next="CallNode0"/>
    <nodeSuccessors name="pipelet_error" next="End14"/>
  </nodes>
<!--@Location 22,4-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode0">
    <nodeSuccessors name="next" next="DecisionNode1"/>
    <nodeSuccessors name="error" next="EndNode9"/>
    <startNode referencedName="CategoryImport-GetCategoryAssignmentDomain"/>
  </nodes>
<!--@Location 22,5-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode1" conditionKey="CategoryAssignmentDomain">
    <nodeSuccessors name="decision_yes" next="CallNode9"/>
    <nodeSuccessors name="decision_no" next="CreateLogger2"/>
  </nodes>
<!--@Location 22,6-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode9">
    <nodeSuccessors name="next" next="CreateLogger2"/>
    <parameterBindings name="PreferenceDomain" objectPath="CategoryAssignmentDomain"/>
    <startNode referencedName="ProcessImage-DetermineImageDefinitionDomain"/>
  </nodes>
<!--@Location 22,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateLogger2">
    <configurationValues name="Class" value="com.intershop.beehive.core.internal.impex.NativeLogger"/>
    <configurationValues name="Facility" value="default"/>
    <configurationValues name="Level" value="ERROR|WARN"/>
    <configurationValues name="PipeletID" value="CreateLogger"/>
    <configurationValues name="UIDescription" value="CreateLogger"/>
    <pipelet href="enfinity:/core/pipelets/CreateLogger.xml"/>
<!--@BendPoints 44,15-->
    <nodeSuccessors name="next" next="JoinNode13"/>
  </nodes>
<!--@Location 23,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode9" name="error"/>
<!--@Location 23,3-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End14" name="error"/>
<!--@Location 23,2-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End8" name="error"/>
<!--@Location 20,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start10" name="PrepareXMLImport" callMode="Private">
    <nodeSuccessors name="next" next="AccessControl3"/>
    <parameters name="StoreName" type="java.lang.String" optional="true"/>
    <parameters name="Interactor" type="com.intershop.beehive.core.capi.impex.ImpexInteractor"
        optional="true"/>
  </nodes>
<!--@Location 20,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AccessControl3">
    <configurationValues name="AccessControlPermission" value="MANAGE_CATALOG"/>
    <configurationValues name="PerformAccessControl" value="true"/>
    <configurationValues name="PerformIPRangeCheck" value="false"/>
    <configurationValues name="RequireHTTPS" value="false"/>
    <pipelet href="enfinity:/core/pipelets/AccessControl.xml"/>
    <nodeSuccessors name="next" next="CreateImpexUnitFileStructure5"/>
    <nodeSuccessors name="pipelet_error" next="End7"/>
  </nodes>
<!--@Location 20,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateImpexUnitFileStructure5">
    <pipelet href="enfinity:/core/pipelets/CreateImpexUnitFileStructure.xml"/>
    <nodeSuccessors name="next" next="DetermineConfiguration5"/>
    <nodeSuccessors name="pipelet_error" next="End19"/>
  </nodes>
<!--@Location 20,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DetermineConfiguration5">
    <configurationValues name="CartridgeName" value="xcs"/>
    <configurationValues name="Controller.Class" value="com.intershop.beehive.core.capi.impex.Controller"/>
    <configurationValues name="File" value="CategoryImport.properties"/>
    <configurationValues name="PerformAccessControl" value="true"/>
    <configurationValues name="PipeletID" value="DetermineConfiguration"/>
    <configurationValues name="PropertyMapping" value="CreateFileLogger.File=FileLogger.File;CreateFileLogger.RolloverSize=FileLogger.RolloverSize;CreateFileLogger.Truncate=FileLogger.Truncate;CreateFileLogger.Level=FileLogger.Level;DetermineConfiguration.SessionLocale=SessionLocale;DetermineConfiguration.File=PropertyFileName;runVerification=RunVerification;xmlfile=SourceFile;SQLLDRFinishCategories.DumpFiles.Delete=LoaderCleanup.DumpFiles.Delete;SQLLDRFinishCategories.LogFiles.Delete=LoaderCleanup.LogFiles.Delete;SQLLDRFinishCategories.ScriptFiles.Delete=LoaderCleanup.LogFiles.Delete;SQLLDRFinishCategories.ControlFiles.Delete=LoaderCleanup.LogFiles.Delete;SQLLDRFinishCategoryRelations.DumpFiles.Delete=LoaderCleanup.DumpFiles.Delete;SQLLDRFinishCategoryRelations.LogFiles.Delete=LoaderCleanup.LogFiles.Delete;SQLLDRFinishCategoryRelations.ScriptFiles.Delete=LoaderCleanup.LogFiles.Delete;SQLLDRFinishCategoryRelations.ControlFiles.Delete=LoaderCleanup.LogFiles.Delete"/>
    <configurationValues name="UIDescription" value="DetermineConfiguration"/>
    <pipelet href="enfinity:/core/pipelets/DetermineConfiguration.xml"/>
    <nodeSuccessors name="next" next="JoinNode2"/>
    <nodeSuccessors name="pipelet_error" next="End18"/>
  </nodes>
<!--@Location 21,3-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End18" name="error"/>
<!--@Location 21,2-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End19" name="error"/>
<!--@Location 21,1-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End7" name="error-no-permission"/>
<!--@Location 3,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start1" name="Start" callMode="Private">
<!--@BendPoints 7,2-->
    <nodeSuccessors name="next" next="CallNode7"/>
    <parameters name="StoreName" type="java.lang.String" optional="true"/>
    <parameters name="Interactor" type="com.intershop.beehive.core.capi.impex.ImpexInteractor"
        optional="true"/>
  </nodes>
<!--@Location 3,1-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode7">
    <nodeSuccessors name="next" next="JoinNode3"/>
    <nodeSuccessors name="error-no-permission" next="End2"/>
    <nodeSuccessors name="error" next="End3"/>
    <startNode referencedName="CategoryImport-PrepareXMLImport"/>
  </nodes>
<!--@Location 4,1-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End2" name="error-no-permission"/>
<!--@Location 4,2-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End3" name="error"/>
<!--@Location 15,8-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode3" name="Statistics" callMode="Private">
<!--@BendPoints 31,18-->
    <nodeSuccessors name="next" next="OpenFile3"/>
  </nodes>
<!--@Location 15,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="OpenFile3">
    <configurationValues name="FileID" value="xmlfile"/>
    <configurationValues name="PipeletID" value="OpenXMLFileStatistic"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="Type" value="SOURCE|TEMP"/>
    <configurationValues name="UIDescription" value="OpenXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/OpenFile.xml"/>
    <nodeSuccessors name="next" next="CollectXMLStatistics2"/>
<!--@BendPoints 35,19-->
    <nodeSuccessors name="pipelet_error" next="Join1"/>
  </nodes>
<!--@Location 15,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CollectXMLStatistics2">
    <configurationValues name="PipeletID" value="CollectXMLStatistics"/>
    <configurationValues name="SourceID" value="source"/>
    <configurationValues name="StatisticsID" value="statistics"/>
    <configurationValues name="UIDescription" value="CollectXMLStatistics"/>
    <pipelet href="enfinity:/core/pipelets/CollectXMLStatistics.xml"/>
    <nodeSuccessors name="next" next="CloseFile5"/>
    <nodeSuccessors name="pipelet_error" next="CloseFile6"/>
  </nodes>
<!--@Location 15,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile5">
    <configurationValues name="PipeletID" value="CloseXMLFileStatistic"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
<!--@BendPoints 31,24-->
    <nodeSuccessors name="next" next="EndNode6"/>
  </nodes>
<!--@Location 15,12-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode6"/>
<!--@Location 16,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile6">
    <configurationValues name="PipeletID" value="CloseXMLFileStatisticsError"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="Join1"/>
  </nodes>
<!--@Location 17,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join1">
<!--@BendPoints 35,24-->
    <nodeSuccessors name="next" next="EndNode7"/>
  </nodes>
<!--@Location 17,12-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode7" name="error"/>
<!--@Location 10,8-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode1" name="Verify" callMode="Private">
<!--@BendPoints 21,18-->
    <nodeSuccessors name="next" next="Decision3"/>
  </nodes>
<!--@Location 10,9-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision3" conditionKey="runVerification"
      operator="str_eq" conditionValue="1">
    <nodeSuccessors name="decision_yes" next="OpenFile2"/>
    <nodeSuccessors name="decision_no" next="JoinNode11"/>
  </nodes>
<!--@Location 10,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="OpenFile2">
    <configurationValues name="FileID" value="xmlfile"/>
    <configurationValues name="PipeletID" value="OpenXMLFileStatisticVerify"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="Type" value="SOURCE|TEMP"/>
    <configurationValues name="UIDescription" value="OpenXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/OpenFile.xml"/>
    <nodeSuccessors name="next" next="CollectXMLStatistics3"/>
  </nodes>
<!--@Location 10,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CollectXMLStatistics3">
    <configurationValues name="PipeletID" value="CollectXMLStatisticsVerify"/>
    <configurationValues name="SourceID" value="source"/>
    <configurationValues name="StatisticsID" value="statisticsVerify"/>
    <configurationValues name="UIDescription" value="CollectXMLStatistics"/>
    <pipelet href="enfinity:/core/pipelets/CollectXMLStatistics.xml"/>
    <nodeSuccessors name="next" next="CloseFile2"/>
    <nodeSuccessors name="pipelet_error" next="CloseFile4"/>
  </nodes>
<!--@Location 10,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile2">
    <configurationValues name="PipeletID" value="CloseXMLFileStatisticsVerify"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
<!--@BendPoints 21,27-->
    <nodeSuccessors name="next" next="JoinNode10"/>
  </nodes>
<!--@Location 9,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode10">
    <nodeSuccessors name="next" next="OpenFile4"/>
  </nodes>
<!--@Location 9,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="OpenFile4">
    <configurationValues name="FileID" value="xmlfile"/>
    <configurationValues name="PipeletID" value="OpenXMLFileVerify"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="Type" value="SOURCE|TEMP"/>
    <configurationValues name="UIDescription" value="OpenXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/OpenFile.xml"/>
    <nodeSuccessors name="next" next="XMLVerify1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode9"/>
  </nodes>
<!--@Location 9,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="XMLVerify1">
    <configurationValues name="PipeletID" value="XMLVerify"/>
    <configurationValues name="SourceID" value="source"/>
    <configurationValues name="StatisticsID" value="statisticsVerify"/>
    <configurationValues name="UIDescription" value="XMLVerify"/>
    <pipelet href="enfinity:/core/pipelets/XMLVerify.xml"/>
    <nodeSuccessors name="next" next="CloseFile7"/>
    <nodeSuccessors name="pipelet_error" next="CloseFile8"/>
  </nodes>
<!--@Location 9,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile7">
    <configurationValues name="PipeletID" value="CloseXMLFileVerify"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
<!--@BendPoints 19,34-->
    <nodeSuccessors name="next" next="EndNode1"/>
  </nodes>
<!--@Location 9,17-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode1"/>
<!--@Location 10,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile8">
    <configurationValues name="PipeletID" value="CloseXMLFileVerifyError"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="JoinNode1"/>
  </nodes>
<!--@Location 12,15-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode1">
    <nodeSuccessors name="next" next="EndNode2"/>
  </nodes>
<!--@Location 12,17-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode2" name="error"/>
<!--@Location 12,14-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode9">
    <nodeSuccessors name="next" next="JoinNode1"/>
  </nodes>
<!--@Location 11,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile4">
    <configurationValues name="PipeletID" value="CloseXMLFileStatisticsVerifyError"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
<!--@BendPoints 25,23-->
    <nodeSuccessors name="next" next="JoinNode9"/>
  </nodes>
<!--@Location 9,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode11">
<!--@BendPoints 19,20-->
    <nodeSuccessors name="next" next="EndNode3"/>
  </nodes>
<!--@Location 9,10-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode3"/>
<!--@Location 8,8-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode2" name="VerifyQ" callMode="Private">
<!--@BendPoints 17,18-->
    <nodeSuccessors name="next" next="Decision2"/>
  </nodes>
<!--@displayNearNode@For runVerification=
null, validation will take place
@Location 8,9-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision2" conditionKey="runVerification"
      operator="str_eq" conditionValue="1">
<!--@BendPoints 17,27-->
    <nodeSuccessors name="decision_yes" next="JoinNode10"/>
    <nodeSuccessors name="decision_no" next="JoinNode11"/>
  </nodes>
</pipeline:Pipeline>
