<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>Managing Data Replication Processes</title>
      <link rel="stylesheet" type="text/css" href="static/css/styles.css">
   </head>
   <body>
      <h1 id="task_rep">Managing Data Replication Processes</h1>
      <div class="section-toc">
         <ul>
            <li><a href="#task_rep_viewProc">Viewing Replication Processes</a></li>
            <li><a href="#task_rep_create">Creating Replication Process</a></li>
            <li><a href="#task_rep_undo">Undoing Replication Process</a></li>
            <li><a href="#task_rep_viewTask">Viewing Replication Tasks</a></li>
         </ul>
      </div>
      <p id="d12e1676">To execute tasks in the Data Replication module, you must be logged in using a role with the <span class="code">STAGING_ADMINISTRATOR</span> access privilege. Generally, <span class="emphasis">admin@Operations</span> is assigned this access right.
      </p>
      <div class="note" id="d12e1684">
         <div class="adm-type">Note:</div>
         <p id="d12e1685">Before starting data replication processes, make sure your system has been properly prepared and a data replication process
            of type "Initial" has been execued. For details, refer to the <a href="https://support.intershop.com/kb/index.php/Display/2X7897">Data Replication</a> documentation in the Intershop Knowledge Base.
         </p>
      </div>
      <p id="d12e1690">Concurrent mass data operations and individually triggered "single-object" operations may produce inconsistent data. Intershop
         Commerce Management features a specific object-locking mechanism to prevent concurrent modifications of the same data. In
         case a user intends to edit an object that is already locked by another process, Intershop Commerce Management shows a warning
         and, depending on the operation, provides options to either
      </p>
      <ul class="disc" id="d12e1692">
         <li id="d12e1693">
            <p id="d12e1694">steal the lock, where the "calling" process takes priority and can run,</p>
         </li>
         <li id="d12e1696">
            <p id="d12e1697">wait a specified time and then fail, where the "calling" process waits the defined time for the previous lock to be released
               in order to run afterwards, or fails if the timeout is reached.
            </p>
         </li>
         <li id="d12e1699">
            <p id="d12e1700">fail, where the "calling" process is terminated immediately.</p>
         </li>
      </ul>
      <h2 id="task_rep_viewProc">Viewing Replication Processes</h2>
      <p id="d12e1705">To view all replication processes that have been defined select Data Replication | Data Replication Processes. This displays
         a list of replication processes defined on the system. The list can be filtered by the following process states:
      </p>
      <table id="d12e1707">
         <caption id="d12e1708">Table 7: Replication Process States</caption>
         <colgroup span="1">
            <col width="25%" span="1">
            <col width="75%" span="1">
         </colgroup>
         <thead id="d12e1713">
            <tr id="d12e1714">
               <th id="d12e1715">Process State</th>
               <th id="d12e1717">Description</th>
            </tr>
         </thead>
         <tbody id="d12e1719">
            <tr id="d12e1720">
               <td id="d12e1721">Waiting</td>
               <td id="d12e1723">All replication processes that have not been started yet.</td>
            </tr>
            <tr id="d12e1725">
               <td id="d12e1726">In Progress</td>
               <td id="d12e1728">All replication processes that have been started and are currently in progress</td>
            </tr>
            <tr id="d12e1730">
               <td id="d12e1731">Completed</td>
               <td id="d12e1733">All replication processes that have been completed successfully</td>
            </tr>
            <tr id="d12e1735">
               <td id="d12e1736">Failed</td>
               <td id="d12e1738">All replication processes that have failed. In case a replication process fails, it is rolled back automatically.</td>
            </tr>
         </tbody>
      </table>
      <p id="d12e1740">Click a replication process in the list to view details.</p>
      <h2 id="task_rep_create">Creating Replication Process</h2>
      <p id="d12e1745">To create a new replication process:</p>
      <ol id="d12e1747">
         <li id="d12e1748">
            <p id="d12e1749">In the navigation bar, select Data Replication | Data Replication Processes.</p>
            <p id="d12e1751">A list of existing replication processes is displayed.</p>
         </li>
         <li id="d12e1753">
            <p id="d12e1754">Click New.</p>
            <p id="d12e1756">This starts the replication process creation wizard.</p>
         </li>
         <li id="d12e1758">
            <p id="d12e1759">Provide a description for the replication process, then click Next.</p>
            <p id="d12e1761">A list of available target systems is displayed.</p>
         </li>
         <li id="d12e1763">
            <p id="d12e1764">Select the target system and the locking conflict resolution, then click Next.</p>
            <p id="d12e1766">Only one target system can be selected for each replication process.</p>
            <p id="d12e1768">For information about the locking conflict resolution options, see the list above.</p>
         </li>
         <li id="d12e1770">
            <p id="d12e1771">Select the replication process type from the drop-down list.</p>
            <p id="d12e1773">When selecting the type "Undo" or "Data Publishing", it is not possible and necessary to assign replication tasks to the current
               process. In these cases, click Next.
            </p>
         </li>
         <li id="d12e1775">
            <p id="d12e1776">Click New to assign replication tasks to this process.</p>
            <p id="d12e1778">A list of all replication tasks of type "Waiting" is displayed.</p>
         </li>
         <li id="d12e1780">
            <p id="d12e1781">Select the replication tasks and click Assign, then Next.</p>
            <p id="d12e1783">Note that "Select All" selects all tasks on the current page.</p>
         </li>
         <li id="d12e1785">
            <p id="d12e1786">Define the activation rules for this replication processes.</p>
            <p id="d12e1788">Replication processes can be started manually, or as a scheduled job at a pre-defined time.</p>
         </li>
      </ol>
      <p id="d12e1790">Data replication process types are summarized in the following table.</p>
      <table id="d12e1792">
         <caption id="d12e1793">Table 8: Data Replication: Process Types</caption>
         <colgroup span="1">
            <col width="25%" span="1">
            <col width="75%" span="1">
         </colgroup>
         <thead id="d12e1798">
            <tr id="d12e1799">
               <th id="d12e1800">Replication Type</th>
               <th id="d12e1802">Description</th>
            </tr>
         </thead>
         <tbody id="d12e1804">
            <tr id="d12e1805">
               <td id="d12e1806">Data Transfer</td>
               <td id="d12e1808">This process transfers the data to the target system but does not trigger a table switch or a switch of data replication directories.</td>
            </tr>
            <tr id="d12e1810">
               <td id="d12e1811">Data Publishing</td>
               <td id="d12e1813">This process publishes data that have already been transferred to the target system. The process triggers all necessary table
                  and directory switches as well as concomitant database commits to persist the changes. Note data publishing can only be executed
                  on the results of a process of type "Data Transfer" executed immediately before. Note that for certain replication groups,
                  data transfer and publishing cannot be separated.
               </td>
            </tr>
            <tr id="d12e1815">
               <td id="d12e1816">Data Transfer &amp; Publishing</td>
               <td id="d12e1818">This process accomplishes a complete replication process, including data transfer and publication. The following replication
                  groups must be replicated using a process of the type "Data Transfer &amp; Publishing": 
                  <ul class="disc" id="d12e1820">
                     <li id="d12e1821">
                        <p id="d12e1822">Sales Organization/Partners: Organizations, Channels, Master Repository</p>
                     </li>
                     <li id="d12e1824">
                        <p id="d12e1825">Sales Channel: Consumers, Affiliate Partners, Promotions</p>
                     </li>
                  </ul>
                  					
               </td>
            </tr>
            <tr id="d12e1829">
               <td id="d12e1830">Undo</td>
               <td id="d12e1832">An Undo process rolls back a data replication process of type "Data Publishing" or "Data Transfer &amp; Publishing", which has
                  been completed succesfully. Undo restores the target system state prior to executing the data replication task that is rolled
                  back. Undo can only roll back the most recent data replication process. Note that Undo cannot be used with replication groups
                  that involve user data, namely: 
                  <ul class="disc" id="d12e1834">
                     <li id="d12e1835">
                        <p id="d12e1836">Sales Organization/Partners: Organizations, Channels, Master Repository</p>
                     </li>
                     <li id="d12e1838">
                        <p id="d12e1839">Sales Channel: Consumers, Affiliate Partners, Promotions</p>
                     </li>
                  </ul>
                  					
               </td>
            </tr>
         </tbody>
      </table>
      <h2 id="task_rep_undo">Undoing Replication Process</h2>
      <p id="d12e1846">To undo a replication process, create and execute a new replication process of type "Undo", as described in <a href="task_rep.html#task_rep_create">Creating Replication Process</a>.
      </p>
      <div class="note" id="d12e1850">
         <div class="adm-type">Note:</div>
         <p id="d12e1851">Undo can only roll back replication processes involving data publication ("Data Publishing" or "Data Transfer &amp; Publishing").
            Undo cannot be used with replication groups that involve user data. Undo always rolls back the most recent replication process
            that has been executed. It is not possible to roll back a replication process if other replication processes have already
            been executed afterwards.
         </p>
      </div>
      <h2 id="task_rep_viewTask">Viewing Replication Tasks</h2>
      <p id="d12e1856">The system administrator can</p>
      <ul class="disc" id="d12e1858">
         <li id="d12e1859">
            <p id="d12e1860">view data replication tasks submitted by the data replication managers of the organizations working on the system, </p>
         </li>
         <li id="d12e1862">
            <p id="d12e1863">view comments that have been created by the respective data replication managers, or attach new comments,</p>
         </li>
         <li id="d12e1865">
            <p id="d12e1866">view the status history of replication tasks,</p>
         </li>
         <li id="d12e1868">
            <p id="d12e1869">discard data replication tasks,</p>
         </li>
         <li id="d12e1871">
            <p id="d12e1872">undo or redo failed replication tasks.</p>
         </li>
      </ul>
      <p id="d12e1874">To view all replication tasks that have been submitted by data replication managers, select Data Replication | Data Replication
         Tasks. The list that is displayed can be filtered by the following task states:
      </p>
      <table id="d12e1876">
         <caption id="d12e1877">Table 9: Replication Task States</caption>
         <colgroup span="1">
            <col width="20%" span="1">
            <col width="80%" span="1">
         </colgroup>
         <thead id="d12e1882">
            <tr id="d12e1883">
               <th id="d12e1884">Task State</th>
               <th id="d12e1886">Description</th>
            </tr>
         </thead>
         <tbody id="d12e1888">
            <tr id="d12e1889">
               <td id="d12e1890">Waiting</td>
               <td id="d12e1892">All replication tasks whose start data has been reached but whose execution has not been started.</td>
            </tr>
            <tr id="d12e1894">
               <td id="d12e1895">In Progress</td>
               <td id="d12e1897">All replication tasks whose execution has started</td>
            </tr>
            <tr id="d12e1899">
               <td id="d12e1900">Completed</td>
               <td id="d12e1902">All replication tasks that have been executed successfully</td>
            </tr>
            <tr id="d12e1904">
               <td id="d12e1905">Failed</td>
               <td id="d12e1907">All replication tasks whose execution has failed.</td>
            </tr>
            <tr id="d12e1909">
               <td id="d12e1910">Pending</td>
               <td id="d12e1912">All replication tasks whose start date has not been reached.</td>
            </tr>
            <tr id="d12e1914">
               <td id="d12e1915">Obsolete</td>
               <td id="d12e1917">All replication tasks that have been discarded, either by the system administrator or by the respective data replication manager.</td>
            </tr>
         </tbody>
      </table>
      <div class="note" id="d12e1919">
         <div class="adm-type">Note:</div>
         <p id="d12e1920">The status of a replication task is updated by the scheduled job <span class="emphasis">ReplicationTaskStateSynchronization</span>, which belongs to the SLDSystem site. Depending on the configuration of this job, the state of a replication task may not
            change immediately after the event triggering the transition to another state took place.
         </p>
      </div>
      <p id="d12e1925">Click a replication task in the list to view its details, including the status history.</p>
   </body>
</html>