<?xml version="1.0" encoding="UTF-8"?>
<!--Overwrites code from the existing quote processing pipeline
@Group Quotes-->

<pipeline:Pipeline xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pipeline="http://www.intershop.de/pipeline/2010"
    name="ProcessQuote" overrideMode="Inherit" type="Process">
<!--@Location 4,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode6" strict="true" name="CopyQuoteItem"
      callMode="Private">
    <nodeSuccessors name="next" next="CreateProductListItem1"/>
    <parameters name="Quote" type="com.intershop.component.mvc.capi.product.ProductList"/>
    <parameters name="Product" type="com.intershop.beehive.xcs.capi.product.Product"/>
<!--If this parameter is set a dependent product list item is created.-->
    <parameters name="ParentProductListItem" type="com.intershop.component.mvc.capi.product.ProductListItem"
        optional="true"/>
    <parameters name="Locale" type="com.intershop.beehive.core.capi.localization.LocaleInformation"/>
    <parameters name="QuoteAttributeGroup" type="com.intershop.component.foundation.capi.attributegroup.AttributeGroup"
        optional="true"/>
    <parameters name="PLI" type="com.intershop.component.mvc.capi.product.ProductListItem"/>
  </nodes>
<!--@Location 4,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateProductListItem1">
    <pipelet href="enfinity:/bc_mvc/pipelets/CreateProductListItem.xml"/>
    <nodeSuccessors name="next" next="UpdateProductListItem1"/>
    <parameterBindings name="ProductList" objectPath="Quote"/>
  </nodes>
<!--@Location 4,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateProductListItem1">
    <pipelet href="enfinity:/bc_mvc/pipelets/UpdateProductListItem.xml"/>
    <nodeSuccessors name="next" next="CopyProductIdentifiers3"/>
    <parameterBindings name="BasedOnNetPrice" objectPath="PLI:BasedOnNetPrice"/>
    <parameterBindings name="Description" objectPath="PLI:Description"/>
    <parameterBindings name="DisplayName" objectPath="PLI:DisplayName"/>
    <parameterBindings name="NegotiationQuantity" objectPath="PLI:NegotiationQuantity"/>
    <parameterBindings name="NegotiationSinglePricePC" objectPath="PLI:NegotiationSinglePricePC"/>
    <parameterBindings name="OriginQuantity" objectPath="PLI:OriginQuantity"/>
    <parameterBindings name="OriginSinglePricePC" objectPath="PLI:OriginSinglePricePC"/>
    <parameterBindings name="ProductLineItem" nullBinding="true"/>
    <parameterBindings name="Public" objectPath="PLI:Public"/>
    <parameterBindings name="Quantity" objectPath="PLI:Quantity"/>
    <parameterBindings name="SinglePricePC" objectPath="PLI:SinglePricePC"/>
    <parameterBindings name="TaxClassID" objectPath="PLI:TaxClassID"/>
  </nodes>
<!--@Location 4,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CopyProductIdentifiers3">
    <configurationValues name="DefaultIdentifierType" value="SellerID"/>
    <pipelet href="enfinity:/bc_mvc/pipelets/CopyProductIdentifiers.xml"/>
<!--@BendPoints 9,8-->
    <nodeSuccessors name="next" next="CopyProductIdentifiers2"/>
    <parameterBindings name="Source" objectPath="Product"/>
    <parameterBindings name="Target" objectPath="ProductListItem"/>
  </nodes>
<!--@Location 4,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CopyProductIdentifiers2">
    <pipelet href="enfinity:/bc_mvc/pipelets/CopyProductIdentifiers.xml"/>
<!--@BendPoints 9,10-->
    <nodeSuccessors name="next" next="CopyProductAttributes1"/>
    <parameterBindings name="Source" objectPath="Product"/>
    <parameterBindings name="Target" objectPath="ProductListItem"/>
  </nodes>
<!--@Location 4,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CopyProductAttributes1">
    <pipelet href="enfinity:/bc_mvc/pipelets/CopyProductAttributes.xml"/>
    <nodeSuccessors name="next" next="UpdateCustomAttribute2"/>
    <parameterBindings name="AttributeGroup" objectPath="QuoteAttributeGroup"/>
    <parameterBindings name="ExtensibleObject" objectPath="ProductListItem"/>
  </nodes>
<!--@Location 4,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateCustomAttribute2">
    <configurationValues name="DefaultAttributeName" value="NeedsQuotation"/>
    <configurationValues name="DefaultAttributeType" value="Boolean"/>
    <configurationValues name="DefaultAttributeValue" value="false"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateCustomAttribute.xml"/>
    <nodeSuccessors name="next" next="EndNode8"/>
    <parameterBindings name="AttributeName" nullBinding="true"/>
    <parameterBindings name="AttributeType" nullBinding="true"/>
    <parameterBindings name="AttributeValue" objectPath="Product:NeedsQuotation"/>
    <parameterBindings name="ExtensibleObject" objectPath="ProductListItem"/>
    <parameterBindings name="LocaleInformation" nullBinding="true"/>
  </nodes>
<!--@Location 4,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode8" strict="true">
    <returnValues name="ProductListItem" type="com.intershop.component.mvc.capi.product.ProductListItem"
        optional="true"/>
  </nodes>
<!--@Location 22,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode1" strict="true" name="CreateDependentQuoteItems"
      callMode="Private">
<!--@BendPoints 45,4-->
    <nodeSuccessors name="next" next="LoopNode1"/>
    <parameters name="Quote" type="com.intershop.component.mvc.capi.product.ProductList"/>
<!--If this parameter is set a dependent product list item is created.-->
    <parameters name="ParentProductListItem" type="com.intershop.component.mvc.capi.product.ProductListItem"/>
    <parameters name="LineItem" type="com.intershop.beehive.bts.capi.orderprocess.ProductLineItem"
        optional="true"/>
    <parameters name="Locale" type="com.intershop.beehive.core.capi.localization.LocaleInformation"/>
    <parameters name="QuoteAttributeGroup" type="com.intershop.component.foundation.capi.attributegroup.AttributeGroup"
        optional="true"/>
  </nodes>
<!--@Location 22,2-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode1" loop="LineItem:DependentProductLineItems">
    <nodeSuccessors name="next" next="EndNode4"/>
    <entry key="PLI">
<!--@BendPoints 45,6-->
      <nodeSuccessors name="loop_entry_next" next="CallNode5"/>
    </entry>
  </nodes>
<!--@Location 22,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode5">
<!--@BendPoints 45,8 44,8 44,5-->
    <nodeSuccessors name="next" next="LoopNode1_Entry"/>
    <parameterBindings name="LineItem" objectPath="PLI"/>
    <startNode referencedName="ProcessQuote-CreateQuoteItem"/>
  </nodes>
<!--@Location 23,2-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode4" strict="true"/>
<!--@Location 22,5-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode11" strict="true" name="CreateDependentQuoteItemsFromListItem"
      callMode="Private">
<!--@BendPoints 45,12-->
    <nodeSuccessors name="next" next="LoopNode3"/>
    <parameters name="Quote" type="com.intershop.component.mvc.capi.product.ProductList"/>
<!--If this parameter is set a dependent product list item is created.-->
    <parameters name="ParentProductListItem" type="com.intershop.component.mvc.capi.product.ProductListItem"/>
    <parameters name="ListItem" type="com.intershop.component.mvc.capi.product.ProductListItem"
        optional="true"/>
    <parameters name="Locale" type="com.intershop.beehive.core.capi.localization.LocaleInformation"/>
    <parameters name="QuoteAttributeGroup" type="com.intershop.component.foundation.capi.attributegroup.AttributeGroup"
        optional="true"/>
  </nodes>
<!--@Location 22,6-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode3" loop="ListItem:DependentListItems">
    <nodeSuccessors name="next" next="EndNode14"/>
    <entry key="PLI">
      <nodeSuccessors name="loop_entry_next" next="GetProductByProductRef3"/>
    </entry>
  </nodes>
<!--@Location 22,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductByProductRef3">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductByProductRef.xml"/>
    <nodeSuccessors name="next" next="CallNode18"/>
    <parameterBindings name="ProductRef" objectPath="ListItem:ProductRef"/>
    <parameterBindings name="ProductRefID" nullBinding="true"/>
    <parameterBindings name="ProductRefIDs" nullBinding="true"/>
    <parameterBindings name="ProductRefs" nullBinding="true"/>
    <returnValueBindings name="Product" objectPath="Product"/>
    <returnValueBindings name="Products" nullBinding="true"/>
    <returnValueBindings name="ProductsHash" nullBinding="true"/>
  </nodes>
<!--@Location 22,8-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode18">
<!--@BendPoints 45,16 44,16 44,13-->
    <nodeSuccessors name="next" next="LoopNode3_Entry"/>
    <startNode referencedName="ProcessQuote-CopyQuoteItem"/>
  </nodes>
<!--@Location 23,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode14" strict="true"/>
<!--@Location 5,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode8" strict="true" name="CreateQuote"
      callMode="Private">
    <nodeSuccessors name="next" next="CallNode16"/>
    <parameters name="OwningDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
    <parameters name="CurrentUser" type="com.intershop.beehive.core.capi.user.User"
        optional="true"/>
    <parameters name="Domain" type="com.intershop.beehive.core.capi.domain.Domain"/>
    <parameters name="CurrentOrganization" type="com.intershop.component.organization.capi.Organization"/>
  </nodes>
<!--@Location 5,1-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode16">
    <nodeSuccessors name="NEXT" next="CallNode17"/>
    <nodeSuccessors name="NOT_FOUND" next="JoinNode16"/>
    <startNode referencedName="ProcessQuote-GetFirstNewQuote"/>
  </nodes>
<!--@Location 6,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode17">
    <nodeSuccessors name="next" next="GetAttributeGroupByID1"/>
    <startNode referencedName="ProcessQuote-GetDomainPreferences"/>
  </nodes>
<!--@Location 5,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetAttributeGroupByID1">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetAttributeGroupByID.xml"/>
    <nodeSuccessors name="next" next="JoinNode19"/>
<!--@BendPoints 13,25-->
    <nodeSuccessors name="pipelet_error" next="CreateAttributeGroup0"/>
    <parameterBindings name="Domain" objectPath="OwningDomain"/>
    <parameterBindings name="ID" constant="QUOTE_ITEM_ATTRIBUTES"/>
    <returnValueBindings name="AttributeGroup" objectPath="QuoteAttributeGroup"/>
  </nodes>
<!--@Location 5,15-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode19">
    <nodeSuccessors name="next" next="EndNode10"/>
  </nodes>
<!--@Location 5,16-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode10" strict="true">
    <returnValues name="Quote" type="com.intershop.component.mvc.capi.product.ProductList"/>
    <returnValues name="QuoteAttributeGroup" type="java.lang.Object"/>
    <returnValues name="QuoteAutoNegotiation" type="java.lang.Object"/>
  </nodes>
<!--@Location 6,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateAttributeGroup0">
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateAttributeGroup.xml"/>
    <nodeSuccessors name="next" next="UpdateAttributeGroup0"/>
    <parameterBindings name="Domain" objectPath="OwningDomain"/>
    <parameterBindings name="ID" constant="QUOTE_ITEM_ATTRIBUTES"/>
    <returnValueBindings name="AttributeGroup" objectPath="QuoteAttributeGroup"/>
  </nodes>
<!--@Location 6,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateAttributeGroup0">
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateAttributeGroup.xml"/>
<!--@BendPoints 13,31-->
    <nodeSuccessors name="next" next="JoinNode19"/>
    <parameterBindings name="AttributeGroup" objectPath="QuoteAttributeGroup"/>
    <parameterBindings name="DisplayName" constant="Quote Item Attributes"/>
  </nodes>
<!--@Location 5,2-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode16">
    <nodeSuccessors name="next" next="CreateProductList1"/>
  </nodes>
<!--@Location 5,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateProductList1">
    <configurationValues name="DefaultTypeCode" value="4"/>
    <pipelet href="enfinity:/bc_mvc/pipelets/CreateProductList.xml"/>
    <nodeSuccessors name="next" next="JoinNode18"/>
    <parameterBindings name="Domain" objectPath="OwningDomain"/>
    <parameterBindings name="Scope" objectPath="CurrentUser:Profile"/>
    <returnValueBindings name="ProductList" objectPath="Quote"/>
  </nodes>
<!--@Location 5,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode18">
    <nodeSuccessors name="next" next="CallNode10"/>
  </nodes>
<!--@Location 5,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode10">
<!--@BendPoints 11,12-->
    <nodeSuccessors name="next" next="CreateDocumentNumber1"/>
    <startNode referencedName="ProcessQuote-GetDomainPreferences"/>
  </nodes>
<!--@Location 5,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateDocumentNumber1">
    <configurationValues name="DomainSpecific" value="true"/>
    <configurationValues name="SeriesIdentifier" value="Quote.DocumentNo"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateDocumentNumber.xml"/>
<!--@BendPoints 11,14-->
    <nodeSuccessors name="next" next="GetCurrentDate1"/>
  </nodes>
<!--@Location 5,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetCurrentDate1">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetCurrentDate.xml"/>
<!--@BendPoints 11,16-->
    <nodeSuccessors name="next" next="CalculateDate1"/>
    <returnValueBindings name="CurrentDate" objectPath="ValidFromDate"/>
  </nodes>
<!--@Location 5,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CalculateDate1">
    <configurationValues name="CalculationMethod" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CalculateDate.xml"/>
<!--@BendPoints 11,18-->
    <nodeSuccessors name="next" next="GetLocale1"/>
    <parameterBindings name="Date" objectPath="ValidFromDate"/>
    <parameterBindings name="Days" objectPath="QuoteLifeTime"/>
    <parameterBindings name="Hours" nullBinding="true"/>
    <parameterBindings name="Milliseconds" nullBinding="true"/>
    <parameterBindings name="Minutes" nullBinding="true"/>
    <parameterBindings name="Seconds" nullBinding="true"/>
    <returnValueBindings name="CalculatedDate" objectPath="ValidToDate"/>
  </nodes>
<!--@Location 5,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetLocale1">
    <configurationValues name="LocaleFallback" value="Request Locale"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetLocale.xml"/>
<!--@BendPoints 11,20-->
    <nodeSuccessors name="next" next="CreateProductListEvent1"/>
    <parameterBindings name="LocaleId" nullBinding="true"/>
  </nodes>
<!--@Location 5,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateProductListEvent1">
    <pipelet href="enfinity:/bc_mvc/pipelets/CreateProductListEvent.xml"/>
    <nodeSuccessors name="next" next="UpdateProductList3"/>
    <parameterBindings name="ProductList" objectPath="Quote"/>
    <parameterBindings name="TypeCode" constant="CreatedByBuyer"/>
    <parameterBindings name="User" objectPath="CurrentUser"/>
  </nodes>
<!--@Location 5,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateProductList3">
    <pipelet href="enfinity:/bc_mvc/pipelets/UpdateProductList.xml"/>
    <nodeSuccessors name="next" next="GetAttributeGroupByID1"/>
    <parameterBindings name="DisplayName" objectPath="DocumentNumber"/>
    <parameterBindings name="Fixed" nullBinding="true"/>
    <parameterBindings name="IsPublic" nullBinding="true"/>
    <parameterBindings name="Modified" nullBinding="true"/>
    <parameterBindings name="NegotiationTotal" nullBinding="true"/>
    <parameterBindings name="OriginTotal" nullBinding="true"/>
    <parameterBindings name="ProductList" objectPath="Quote"/>
    <parameterBindings name="Scope" nullBinding="true"/>
    <parameterBindings name="ShortDescription" nullBinding="true"/>
    <parameterBindings name="State" constant="(Integer)0"/>
    <parameterBindings name="Total" nullBinding="true"/>
    <parameterBindings name="TypeCode" nullBinding="true"/>
    <parameterBindings name="ValidFrom" objectPath="ValidFromDate"/>
    <parameterBindings name="ValidTo" objectPath="ValidToDate"/>
  </nodes>
<!--@Location 7,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode2" strict="true" name="CreateQuoteFromCart"
      callMode="Private">
    <nodeSuccessors name="next" next="CallNode4"/>
<!--The domain for the new quote.-->
    <parameters name="Domain" type="com.intershop.beehive.core.capi.domain.Domain"/>
<!--The user to create a quote for.-->
    <parameters name="CurrentUser" type="com.intershop.beehive.core.capi.user.User"/>
<!--The owning domain to create a quote for.-->
    <parameters name="OwningDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
    <parameters name="CurrentCart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"
        optional="true"/>
    <parameters name="RemoveLineItemsFromCart" type="java.lang.String" optional="true"/>
    <parameters name="CurrentCartBO" type="com.intershop.component.basket.capi.BasketBO"/>
    <parameters name="CurrentOrganization" type="com.intershop.component.organization.capi.Organization"/>
  </nodes>
<!--@Location 7,1-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode4">
    <nodeSuccessors name="next" next="GetLocale_Ggm6sMLUEee2Q8n6f0HwEQ"/>
    <startNode referencedName="This:CreateQuote"/>
  </nodes>
<!--@Location 7,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetLocale_Ggm6sMLUEee2Q8n6f0HwEQ">
    <configurationValues name="LocaleFallback" value="Request Locale"/>
    <pipelet href="enfinity:/core/pipelets/GetLocale.xml"/>
    <nodeSuccessors name="next" next="LoopNode0"/>
    <parameterBindings name="LocaleId" nullBinding="true"/>
  </nodes>
<!--@Location 7,3-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode0" loop="CurrentCart:IndependentProductLineItems">
<!--@BendPoints 19,7 19,8-->
    <nodeSuccessors name="next" next="UpdateProductList0"/>
    <entry key="PLI">
      <nodeSuccessors name="loop_entry_next" next="PipeletNode_nlJaMML2Eee2Q8n6f0HwEQ"/>
    </entry>
  </nodes>
<!--@Location 7,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="PipeletNode_nlJaMML2Eee2Q8n6f0HwEQ">
    <pipelet href="enfinity:/bc_quote/pipelets/CheckPLIForQuote.xml"/>
    <nodeSuccessors name="next" next="GetProductByProductRef1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode_-lvFIMLvEee2Q8n6f0HwEQ"/>
    <parameterBindings name="BasketBO" objectPath="CurrentCartBO"/>
    <parameterBindings name="ProductListItem" objectPath="PLI"/>
  </nodes>
<!--@Location 7,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductByProductRef1">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductByProductRef.xml"/>
    <nodeSuccessors name="next" next="CallNode3"/>
<!--@BendPoints 17,13-->
    <nodeSuccessors name="pipelet_error" next="JoinNode4"/>
    <parameterBindings name="ProductRef" objectPath="PLI:OfferProductRef"/>
    <parameterBindings name="ProductRefID" nullBinding="true"/>
    <parameterBindings name="ProductRefIDs" nullBinding="true"/>
    <parameterBindings name="ProductRefs" nullBinding="true"/>
    <returnValueBindings name="Product" objectPath="Product"/>
    <returnValueBindings name="Products" nullBinding="true"/>
    <returnValueBindings name="ProductsHash" nullBinding="true"/>
  </nodes>
<!--@Location 7,7-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode3">
<!--@BendPoints 15,16-->
    <nodeSuccessors name="next" next="CallNode2"/>
    <nodeSuccessors name="ERROR" next="JoinNode4"/>
    <startNode referencedName="ProcessQuote-GetValidToDate"/>
  </nodes>
<!--@Location 7,8-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode2">
    <nodeSuccessors name="next" next="CallNode0"/>
    <parameterBindings name="LineItem" objectPath="PLI"/>
    <parameterBindings name="ParentProductListItem" nullBinding="true"/>
    <startNode referencedName="ProcessQuote-CreateQuoteItem"/>
  </nodes>
<!--@Location 7,9-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode0">
    <nodeSuccessors name="next" next="DecisionNode1"/>
    <parameterBindings name="LineItem" objectPath="PLI"/>
    <parameterBindings name="ParentProductListItem" objectPath="ProductListItem"/>
    <startNode referencedName="ProcessQuote-CreateDependentQuoteItems"/>
  </nodes>
<!--@Location 7,10-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode1" conditionKey="RemoveLineItemsFromCart">
    <nodeSuccessors name="decision_yes" next="RemoveProductLineItemFromBasket0"/>
    <nodeSuccessors name="decision_no" next="JoinNode3"/>
  </nodes>
<!--@Location 7,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemoveProductLineItemFromBasket0">
    <pipelet href="enfinity:/bts/pipelets/RemoveProductLineItemFromBasket.xml"/>
    <nodeSuccessors name="next" next="JoinNode5"/>
    <parameterBindings name="Basket" objectPath="CurrentCart"/>
    <parameterBindings name="LineItemID" objectPath="PLI:UUID"/>
  </nodes>
<!--@Location 7,12-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode5">
<!--@BendPoints 14,25 14,10-->
    <nodeSuccessors name="next" next="JoinNode_-lvFIMLvEee2Q8n6f0HwEQ"/>
  </nodes>
<!--@Location 6,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode_-lvFIMLvEee2Q8n6f0HwEQ">
    <nodeSuccessors name="next" next="JoinNode_e0qEsMLlEee2Q8n6f0HwEQ"/>
  </nodes>
<!--@Location 6,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode_e0qEsMLlEee2Q8n6f0HwEQ">
    <nodeSuccessors name="next" next="LoopNode0_Entry"/>
  </nodes>
<!--@Location 8,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode3">
<!--@BendPoints 17,25-->
    <nodeSuccessors name="next" next="JoinNode5"/>
  </nodes>
<!--@Location 8,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode4">
<!--@BendPoints 17,16-->
    <nodeSuccessors name="next" next="SetDictionaryValue_II1cwMLUEee2Q8n6f0HwEQ"/>
  </nodes>
<!--@Location 8,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue_II1cwMLUEee2Q8n6f0HwEQ">
    <configurationValues name="Name" value="ErrorCode"/>
    <configurationValues name="Value" value="ProductOutDated"/>
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/core/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 17,18-->
    <nodeSuccessors name="next" next="AddEntryToMap_Kz5U0MLUEee2Q8n6f0HwEQ"/>
  </nodes>
<!--@Location 8,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddEntryToMap_Kz5U0MLUEee2Q8n6f0HwEQ">
    <pipelet href="enfinity:/core/pipelets/AddEntryToMap.xml"/>
    <nodeSuccessors name="next" next="JoinNode3"/>
    <parameterBindings name="InMap" objectPath="ProductErrorMap"/>
    <parameterBindings name="Key" objectPath="PLI:OfferProductRef"/>
    <parameterBindings name="Value" objectPath="PLI:OfferProductRef"/>
    <returnValueBindings name="Keys" objectPath="ProductErrorKeys"/>
    <returnValueBindings name="OutMap" objectPath="ProductErrorMap"/>
  </nodes>
<!--@Location 9,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateProductList0">
    <pipelet href="enfinity:/bc_mvc/pipelets/UpdateProductList.xml"/>
<!--@BendPoints 19,10-->
    <nodeSuccessors name="next" next="CalculateProductListTotal0"/>
    <parameterBindings name="DisplayName" nullBinding="true"/>
    <parameterBindings name="DocumentNumber" nullBinding="true"/>
    <parameterBindings name="Fixed" nullBinding="true"/>
    <parameterBindings name="IsPublic" nullBinding="true"/>
    <parameterBindings name="Modified" nullBinding="true"/>
    <parameterBindings name="NegotiationTotal" objectPath="CurrentCartBO:SubtotalAmount"/>
    <parameterBindings name="OriginTotal" objectPath="CurrentCartBO:SubtotalAmount"/>
    <parameterBindings name="ProductList" objectPath="Quote"/>
    <parameterBindings name="Scope" nullBinding="true"/>
    <parameterBindings name="ShortDescription" nullBinding="true"/>
    <parameterBindings name="State" nullBinding="true"/>
    <parameterBindings name="Total" objectPath="CurrentCartBO:SubtotalAmount"/>
    <parameterBindings name="TypeCode" nullBinding="true"/>
    <parameterBindings name="ValidFrom" nullBinding="true"/>
    <parameterBindings name="ValidTo" nullBinding="true"/>
  </nodes>
<!--@Location 9,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CalculateProductListTotal0">
    <configurationValues name="CalculateProductListItemPrices" value="true"/>
    <pipelet href="enfinity:/bc_mvc/pipelets/CalculateProductListTotal.xml"/>
    <nodeSuccessors name="next" next="DecisionNode3"/>
    <parameterBindings name="ProductList" objectPath="Quote"/>
  </nodes>
<!--@Location 9,6-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode3" conditionKey="Quote:IndependentItems"
      operator="has_elements">
<!--@BendPoints 19,18-->
    <nodeSuccessors name="decision_yes" next="EndNode1"/>
<!--@BendPoints 21,13-->
    <nodeSuccessors name="decision_no" next="CallNode1"/>
  </nodes>
<!--@Location 9,11-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode1" strict="true">
    <returnValues name="Quote" type="com.intershop.component.mvc.capi.product.ProductList"/>
    <returnValues name="QuoteAutoNegotiation" type="java.lang.Integer"/>
    <returnValues name="ProductErrorKeys" type="java.util.Iterator" optional="true"/>
    <returnValues name="ProductErrorMap" type="java.util.Map" optional="true"/>
    <returnValues name="ErrorCode" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 10,7-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode1">
    <nodeSuccessors name="next" next="SetDictionaryValue_J3NqIMLUEee2Q8n6f0HwEQ"/>
    <startNode referencedName="ProcessQuote-DeleteQuote"/>
  </nodes>
<!--@Location 10,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue_J3NqIMLUEee2Q8n6f0HwEQ">
    <configurationValues name="Name" value="GeneralErrorCode"/>
    <configurationValues name="Value" value="QuoteCreationError"/>
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/core/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="EndNode3"/>
  </nodes>
<!--@Location 10,9-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode3" name="ERROR" strict="true">
    <returnValues name="ProductErrorKeys" type="java.util.Iterator" optional="true"/>
    <returnValues name="ProductErrorMap" type="java.util.Map" optional="true"/>
    <returnValues name="ErrorCode" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 25,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode5" strict="true" name="CreateQuoteFromQuote"
      callMode="Private">
    <nodeSuccessors name="next" next="CallNode12"/>
<!--The domain for the new quote.-->
    <parameters name="Domain" type="com.intershop.beehive.core.capi.domain.Domain"/>
<!--The user to create a quote for.-->
    <parameters name="CurrentUser" type="com.intershop.beehive.core.capi.user.User"/>
<!--The owning domain to create a quote for.-->
    <parameters name="OwningDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
    <parameters name="CurrentQuote" type="com.intershop.component.mvc.capi.product.ProductList"/>
    <parameters name="CurrentOrganization" type="com.intershop.component.organization.capi.Organization"/>
  </nodes>
<!--@Location 25,1-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode12">
    <nodeSuccessors name="next" next="GetLocale3"/>
    <startNode referencedName="This:CreateQuote"/>
  </nodes>
<!--@Location 25,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetLocale3">
    <configurationValues name="LocaleFallback" value="Request Locale"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetLocale.xml"/>
    <nodeSuccessors name="next" next="LoopNode2"/>
    <parameterBindings name="LocaleId" nullBinding="true"/>
  </nodes>
<!--@Location 25,3-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode2" loop="CurrentQuote:IndependentItems">
<!--@BendPoints 55,7 55,8-->
    <nodeSuccessors name="next" next="UpdateProductList1"/>
    <entry key="PLI">
      <nodeSuccessors name="loop_entry_next" next="GetProductByProductRef2"/>
    </entry>
  </nodes>
<!--@Location 25,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductByProductRef2">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductByProductRef.xml"/>
    <nodeSuccessors name="next" next="CallNode8"/>
<!--@BendPoints 53,9-->
    <nodeSuccessors name="pipelet_error" next="JoinNode7"/>
    <parameterBindings name="ProductRef" objectPath="PLI:ProductRef"/>
    <parameterBindings name="ProductRefID" nullBinding="true"/>
    <parameterBindings name="ProductRefIDs" nullBinding="true"/>
    <parameterBindings name="ProductRefs" nullBinding="true"/>
    <returnValueBindings name="Product" objectPath="Product"/>
    <returnValueBindings name="Products" nullBinding="true"/>
    <returnValueBindings name="ProductsHash" nullBinding="true"/>
  </nodes>
<!--@Location 25,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode8">
<!--@BendPoints 51,12-->
    <nodeSuccessors name="next" next="CallNode7"/>
    <nodeSuccessors name="ERROR" next="JoinNode7"/>
    <startNode referencedName="ProcessQuote-GetValidToDate"/>
  </nodes>
<!--@Location 25,6-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode7">
    <nodeSuccessors name="next" next="CallNode6"/>
    <parameterBindings name="LineItem" objectPath="PLI"/>
    <parameterBindings name="ParentProductListItem" nullBinding="true"/>
    <startNode referencedName="ProcessQuote-CopyQuoteItem"/>
  </nodes>
<!--@Location 25,7-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode6">
    <nodeSuccessors name="next" next="JoinNode2"/>
    <parameterBindings name="ListItem" objectPath="PLI"/>
    <parameterBindings name="ParentProductListItem" objectPath="ProductListItem"/>
    <startNode referencedName="ProcessQuote-CreateDependentQuoteItemsFromListItem"/>
  </nodes>
<!--@Location 25,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode2">
<!--@BendPoints 50,17 50,7-->
    <nodeSuccessors name="next" next="LoopNode2_Entry"/>
  </nodes>
<!--@Location 26,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode7">
<!--@BendPoints 53,12-->
    <nodeSuccessors name="next" next="SetDictionaryValue3"/>
  </nodes>
<!--@Location 26,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue3">
    <configurationValues name="Name" value="ErrorCode"/>
    <configurationValues name="Value" value="ProductOutDated"/>
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 53,14-->
    <nodeSuccessors name="next" next="AddEntryToMap1"/>
  </nodes>
<!--@Location 26,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddEntryToMap1">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddEntryToMap.xml"/>
    <nodeSuccessors name="next" next="JoinNode6"/>
    <parameterBindings name="InMap" objectPath="ProductErrorMap"/>
    <parameterBindings name="Key" objectPath="PLI:ProductRef"/>
    <parameterBindings name="Value" objectPath="PLI:ProductRef"/>
    <returnValueBindings name="Keys" objectPath="ProductErrorKeys"/>
    <returnValueBindings name="OutMap" objectPath="ProductErrorMap"/>
  </nodes>
<!--@Location 26,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode6">
    <nodeSuccessors name="next" next="JoinNode2"/>
  </nodes>
<!--@Location 27,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateProductList1">
    <pipelet href="enfinity:/bc_mvc/pipelets/UpdateProductList.xml"/>
<!--@BendPoints 55,10-->
    <nodeSuccessors name="next" next="CalculateProductListTotal1"/>
    <parameterBindings name="DisplayName" nullBinding="true"/>
    <parameterBindings name="DocumentNumber" nullBinding="true"/>
    <parameterBindings name="Fixed" nullBinding="true"/>
    <parameterBindings name="IsPublic" nullBinding="true"/>
    <parameterBindings name="Modified" nullBinding="true"/>
    <parameterBindings name="NegotiationTotal" objectPath="CurrentQuote:OriginTotal"/>
    <parameterBindings name="OriginTotal" objectPath="CurrentQuote:OriginTotal"/>
    <parameterBindings name="ProductList" objectPath="Quote"/>
    <parameterBindings name="Scope" nullBinding="true"/>
    <parameterBindings name="ShortDescription" nullBinding="true"/>
    <parameterBindings name="State" nullBinding="true"/>
    <parameterBindings name="Total" objectPath="CurrentQuote:OriginTotal"/>
    <parameterBindings name="TypeCode" nullBinding="true"/>
    <parameterBindings name="ValidFrom" nullBinding="true"/>
    <parameterBindings name="ValidTo" nullBinding="true"/>
  </nodes>
<!--@Location 27,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CalculateProductListTotal1">
    <configurationValues name="CalculateProductListItemPrices" value="true"/>
    <pipelet href="enfinity:/bc_mvc/pipelets/CalculateProductListTotal.xml"/>
    <nodeSuccessors name="next" next="DecisionNode4"/>
    <parameterBindings name="ProductList" objectPath="Quote"/>
  </nodes>
<!--@Location 27,6-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode4" conditionKey="Quote:IndependentItems"
      operator="has_elements">
<!--@BendPoints 55,18-->
    <nodeSuccessors name="decision_yes" next="EndNode6"/>
<!--@BendPoints 57,13-->
    <nodeSuccessors name="decision_no" next="CallNode9"/>
  </nodes>
<!--@Location 27,9-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode6" strict="true">
    <returnValues name="Quote" type="com.intershop.component.mvc.capi.product.ProductList"/>
    <returnValues name="QuoteAutoNegotiation" type="java.lang.Integer"/>
    <returnValues name="ProductErrorKeys" type="java.util.Iterator" optional="true"/>
    <returnValues name="ProductErrorMap" type="java.util.Map" optional="true"/>
    <returnValues name="ErrorCode" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 28,7-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode9">
    <nodeSuccessors name="next" next="SetDictionaryValue2"/>
    <startNode referencedName="ProcessQuote-DeleteQuote"/>
  </nodes>
<!--@Location 28,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue2">
    <configurationValues name="Name" value="GeneralErrorCode"/>
    <configurationValues name="Value" value="QuoteCreationError"/>
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="EndNode7"/>
  </nodes>
<!--@Location 28,9-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode7" name="ERROR" strict="true">
    <returnValues name="ProductErrorKeys" type="java.util.Iterator" optional="true"/>
    <returnValues name="ProductErrorMap" type="java.util.Map" optional="true"/>
    <returnValues name="ErrorCode" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 2,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode7" strict="true" name="CreateQuoteItem"
      callMode="Private">
<!--@BendPoints 5,2-->
    <nodeSuccessors name="next" next="GetProductByProductRef0"/>
    <parameters name="Quote" type="com.intershop.component.mvc.capi.product.ProductList"/>
    <parameters name="LineItem" type="java.lang.Object"/>
<!--If this parameter is set a dependent product list item is created.-->
    <parameters name="ParentProductListItem" type="com.intershop.component.mvc.capi.product.ProductListItem"
        optional="true"/>
    <parameters name="Locale" type="com.intershop.beehive.core.capi.localization.LocaleInformation"/>
    <parameters name="QuoteAttributeGroup" type="com.intershop.component.foundation.capi.attributegroup.AttributeGroup"
        optional="true"/>
  </nodes>
<!--@Location 2,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductByProductRef0">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductByProductRef.xml"/>
    <nodeSuccessors name="next" next="CreateProductListItem0"/>
    <parameterBindings name="ProductRef" objectPath="LineItem:OfferProductRef"/>
    <parameterBindings name="ProductRefID" nullBinding="true"/>
    <parameterBindings name="ProductRefIDs" nullBinding="true"/>
    <parameterBindings name="ProductRefs" nullBinding="true"/>
    <returnValueBindings name="Product" objectPath="Product"/>
    <returnValueBindings name="Products" nullBinding="true"/>
    <returnValueBindings name="ProductsHash" nullBinding="true"/>
  </nodes>
<!--@Location 2,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateProductListItem0">
    <pipelet href="enfinity:/bc_mvc/pipelets/CreateProductListItem.xml"/>
    <nodeSuccessors name="next" next="DecisionNode0"/>
    <parameterBindings name="ProductList" objectPath="Quote"/>
  </nodes>
<!--@Location 2,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode0" conditionKey="ProductListItem:QuantityNull"
      operator="str_eq" conditionValue="false">
    <nodeSuccessors name="decision_yes" next="CalculateQuantity0"/>
<!--@BendPoints 7,9-->
    <nodeSuccessors name="decision_no" next="JoinNode0"/>
  </nodes>
<!--@Location 2,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CalculateQuantity0">
    <configurationValues name="OperationType" value="addition"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CalculateQuantity.xml"/>
    <nodeSuccessors name="next" next="JoinNode1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode0"/>
    <parameterBindings name="OperandA" objectPath="ProductListItem:Quantity"/>
    <parameterBindings name="OperandB" objectPath="LineItem:Quantity"/>
    <returnValueBindings name="Result" objectPath="LineItemQty"/>
  </nodes>
<!--@Location 2,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode1">
    <nodeSuccessors name="next" next="UpdateProductListItem0"/>
  </nodes>
<!--@Location 2,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateProductListItem0">
    <pipelet href="enfinity:/bc_mvc/pipelets/UpdateProductListItem.xml"/>
    <nodeSuccessors name="next" next="UpdateCustomAttribute_7yF7MO68EeaRwOZN9YazjQ"/>
    <parameterBindings name="BasedOnNetPrice" objectPath="LineItem:BasedOnNetPrice"/>
    <parameterBindings name="Description" objectPath="Product:ShortDescription"/>
    <parameterBindings name="DisplayName" objectPath="Product:Name"/>
    <parameterBindings name="NegotiationQuantity" objectPath="LineItemQty"/>
    <parameterBindings name="NegotiationSinglePricePC" objectPath="LineItem:SingleBasePricePC"/>
    <parameterBindings name="OriginQuantity" objectPath="LineItemQty"/>
    <parameterBindings name="OriginSinglePricePC" objectPath="LineItem:SingleBasePricePC"/>
    <parameterBindings name="ProductLineItem" nullBinding="true"/>
    <parameterBindings name="Public" constant="(Boolean)false"/>
    <parameterBindings name="Quantity" objectPath="LineItemQty"/>
    <parameterBindings name="SinglePricePC" objectPath="LineItem:SingleBasePricePC"/>
    <parameterBindings name="TaxClassID" objectPath="Product:TaxClassID"/>
  </nodes>
<!--@Location 2,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateCustomAttribute_7yF7MO68EeaRwOZN9YazjQ">
    <configurationValues name="DefaultAttributeName" value="NeedsQuotation"/>
    <configurationValues name="DefaultAttributeType" value="Boolean"/>
    <configurationValues name="DefaultAttributeValue" value="false"/>
    <pipelet href="enfinity:/core/pipelets/UpdateCustomAttribute.xml"/>
    <nodeSuccessors name="next" next="CopyProductIdentifiers1"/>
    <parameterBindings name="AttributeName" nullBinding="true"/>
    <parameterBindings name="AttributeType" nullBinding="true"/>
    <parameterBindings name="AttributeValue" objectPath="Product:NeedsQuotation"/>
    <parameterBindings name="ExtensibleObject" objectPath="ProductListItem"/>
    <parameterBindings name="LocaleInformation" nullBinding="true"/>
  </nodes>
<!--@Location 2,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CopyProductIdentifiers1">
    <configurationValues name="DefaultIdentifierType" value="SellerID"/>
    <pipelet href="enfinity:/bc_mvc/pipelets/CopyProductIdentifiers.xml"/>
<!--@BendPoints 5,22-->
    <nodeSuccessors name="next" next="CopyProductIdentifiers0"/>
    <parameterBindings name="Source" objectPath="Product"/>
    <parameterBindings name="Target" objectPath="ProductListItem"/>
  </nodes>
<!--@Location 2,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CopyProductIdentifiers0">
    <pipelet href="enfinity:/bc_mvc/pipelets/CopyProductIdentifiers.xml"/>
<!--@BendPoints 5,24-->
    <nodeSuccessors name="next" next="CopyProductAttributes0"/>
    <parameterBindings name="Source" objectPath="Product"/>
    <parameterBindings name="Target" objectPath="ProductListItem"/>
  </nodes>
<!--@Location 2,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CopyProductAttributes0">
    <pipelet href="enfinity:/bc_mvc/pipelets/CopyProductAttributes.xml"/>
    <nodeSuccessors name="next" next="CallNode21"/>
    <parameterBindings name="AttributeGroup" objectPath="QuoteAttributeGroup"/>
    <parameterBindings name="ExtensibleObject" objectPath="ProductListItem"/>
  </nodes>
<!--@Location 2,13-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode21">
    <nodeSuccessors name="next" next="CallNode20"/>
    <startNode referencedName="ProcessB2CProduct-GetProductBO"/>
  </nodes>
<!--@Location 2,14-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode20">
    <nodeSuccessors name="next" next="CallNode22"/>
    <parameterBindings name="User" objectPath="CurrentUser"/>
    <startNode referencedName="BusinessObjectUtils-GetUserBO"/>
  </nodes>
<!--@Location 2,15-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode22">
    <nodeSuccessors name="next" next="GetProductTaxRate1"/>
    <startNode referencedName="BusinessObjectUtils-GetCustomerBO"/>
  </nodes>
<!--@Location 2,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductTaxRate1">
    <pipelet href="enfinity:/bc_b2b/pipelets/GetProductTaxRate.xml"/>
    <nodeSuccessors name="next" next="UpdateCustomAttribute4"/>
    <returnValueBindings name="TaxRate" objectPath="TaxRateValue"/>
  </nodes>
<!--@Location 2,17-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateCustomAttribute4">
    <configurationValues name="DefaultAttributeType" value="Decimal"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateCustomAttribute.xml"/>
    <nodeSuccessors name="next" next="EndNode0"/>
    <parameterBindings name="AttributeName" constant="TaxRate"/>
    <parameterBindings name="AttributeType" nullBinding="true"/>
    <parameterBindings name="AttributeValue" objectPath="TaxRateValue"/>
    <parameterBindings name="ExtensibleObject" objectPath="ProductListItem"/>
    <parameterBindings name="LocaleInformation" nullBinding="true"/>
  </nodes>
<!--@Location 2,18-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode0" strict="true">
    <returnValues name="ProductListItem" type="com.intershop.component.mvc.capi.product.ProductListItem"
        optional="true"/>
  </nodes>
<!--@Location 3,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode0">
<!--@BendPoints 7,12-->
    <nodeSuccessors name="next" next="KeyMapper0"/>
  </nodes>
<!--@Location 3,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper0">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 7,15-->
    <nodeSuccessors name="next" next="JoinNode1"/>
    <parameterBindings name="InValue_1" objectPath="LineItem:Quantity"/>
    <returnValueBindings name="OutValue_1" objectPath="LineItemQty"/>
  </nodes>
<!--@Location 15,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode9" name="CreateQuoteItemFromProduct"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode2"/>
  </nodes>
<!--@Location 15,1-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode2" conditionKey="SKUs">
    <nodeSuccessors name="decision_yes" next="JoinNode17"/>
    <nodeSuccessors name="decision_no" next="GetFormSelection3"/>
  </nodes>
<!--@Location 15,2-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode17">
    <nodeSuccessors name="next" next="JoinNode23"/>
  </nodes>
<!--@Location 15,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode23">
    <nodeSuccessors name="next" next="RemoveDuplicates0"/>
  </nodes>
<!--@Location 15,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemoveDuplicates0">
    <pipelet href="enfinity:/bc_foundation/pipelets/RemoveDuplicates.xml"/>
    <nodeSuccessors name="next" next="CallNode24"/>
    <parameterBindings name="InputIterator" objectPath="SKUs"/>
    <returnValueBindings name="OutputIterator" objectPath="SKUs"/>
  </nodes>
<!--@Location 15,6-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode24">
    <nodeSuccessors name="next" next="CallNode25"/>
    <parameterBindings name="User" objectPath="CurrentUser"/>
    <startNode referencedName="BusinessObjectUtils-GetUserBO"/>
  </nodes>
<!--@Location 15,7-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode25">
    <nodeSuccessors name="next" next="GetLocale4"/>
    <startNode referencedName="BusinessObjectUtils-GetCustomerBO"/>
  </nodes>
<!--@Location 15,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetLocale4">
    <pipelet href="enfinity:/core/pipelets/GetLocale.xml"/>
    <nodeSuccessors name="next" next="KeyMapper_xz6EIFTgEeeXf_GMPicnnQ"/>
    <parameterBindings name="LocaleId" nullBinding="true"/>
  </nodes>
<!--@Location 15,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper_xz6EIFTgEeeXf_GMPicnnQ">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="LoopNode4"/>
    <parameterBindings name="InValue_1" objectPath="CurrentRequest:Currency"/>
    <returnValueBindings name="OutValue_1" objectPath="Currency"/>
  </nodes>
<!--@Location 15,10-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode4" loop="SKUs">
    <nodeSuccessors name="next" next="EndNode15"/>
    <entry key="ProductLoopSKU">
      <nodeSuccessors name="loop_entry_next" next="GetProductBySKU0"/>
    </entry>
  </nodes>
<!--@Location 15,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductBySKU0">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductBySKU.xml"/>
    <nodeSuccessors name="next" next="CallNode13"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode22"/>
    <parameterBindings name="Domain" objectPath="CurrentOrganization:OwningDomain"/>
    <parameterBindings name="SKU" objectPath="ProductLoopSKU"/>
  </nodes>
<!--@Location 15,12-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode13">
    <nodeSuccessors name="next" next="DecisionNode7"/>
    <startNode referencedName="ProcessB2CProduct-GetProductBO"/>
  </nodes>
<!--@Location 15,13-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode7" conditionKey="ProductBO:isRetailSet"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="JoinNode21"/>
<!--@BendPoints 31,29-->
    <nodeSuccessors name="decision_no" next="KeyMapper3"/>
  </nodes>
<!--@Location 14,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode21">
    <nodeSuccessors name="next" next="JoinNode22"/>
  </nodes>
<!--@Location 14,11-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode22">
<!--@BendPoints 29,21-->
    <nodeSuccessors name="next" next="LoopNode4_Entry"/>
  </nodes>
<!--@Location 15,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper3">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="CreateProductListItem2"/>
    <parameterBindings name="InValue_1" objectPath="ProductBO:Extension(&quot;Pricing&quot;):Price(&quot;SalePrice&quot;, CustomerBO, Currency):Price"/>
    <returnValueBindings name="OutValue_1" objectPath="ProductPrice"/>
  </nodes>
<!--@Location 15,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateProductListItem2">
    <pipelet href="enfinity:/bc_mvc/pipelets/CreateProductListItem.xml"/>
    <nodeSuccessors name="next" next="ConcatenateStrings3"/>
    <parameterBindings name="ProductList" objectPath="Quote"/>
  </nodes>
<!--@Location 15,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings3">
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="DecisionNode5"/>
    <parameterBindings name="String0" constant="Quantity_"/>
    <parameterBindings name="String1" objectPath="ProductLoopSKU"/>
    <returnValueBindings name="Concatenated" objectPath="QuantityString"/>
  </nodes>
<!--@Location 15,17-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode5" conditionKey="CurrentRequest:PipelineDictionary:get(QuantityString)">
    <nodeSuccessors name="decision_yes" next="KeyMapper4"/>
    <nodeSuccessors name="decision_no" next="KeyMapper5"/>
  </nodes>
<!--@Location 15,18-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper4">
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="JoinNode20"/>
    <parameterBindings name="InValue_1" objectPath="CurrentRequest:PipelineDictionary:get(QuantityString)"/>
    <returnValueBindings name="OutValue_1" objectPath="QuantityValue"/>
  </nodes>
<!--@Location 15,19-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode20">
    <nodeSuccessors name="next" next="CreateQuantity0"/>
  </nodes>
<!--@Location 15,20-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateQuantity0">
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateQuantity.xml"/>
    <nodeSuccessors name="next" next="CalculateQuantity_eZK6MMLzEeesE-jibFu2xA"/>
    <parameterBindings name="Unit" objectPath="Product:PriceQuantity:Unit"/>
    <parameterBindings name="Value" objectPath="QuantityValue"/>
  </nodes>
<!--@Location 15,21-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CalculateQuantity_eZK6MMLzEeesE-jibFu2xA">
    <configurationValues name="OperationType" value="addition"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CalculateQuantity.xml"/>
    <nodeSuccessors name="next" next="UpdateProductListItem2"/>
    <nodeSuccessors name="pipelet_error" next="UpdateProductListItem2"/>
    <parameterBindings name="OperandA" objectPath="Quantity"/>
    <parameterBindings name="OperandB" objectPath="ProductListItem:Quantity"/>
    <returnValueBindings name="Result" objectPath="Quantity"/>
  </nodes>
<!--@Location 15,22-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateProductListItem2">
    <pipelet href="enfinity:/bc_mvc/pipelets/UpdateProductListItem.xml"/>
    <nodeSuccessors name="next" next="CopyProductIdentifiers5"/>
    <parameterBindings name="BasedOnNetPrice" constant="(Boolean)true"/>
    <parameterBindings name="Description" objectPath="Product:ShortDescription"/>
    <parameterBindings name="DisplayName" objectPath="Product:Name"/>
    <parameterBindings name="NegotiationQuantity" objectPath="Quantity"/>
    <parameterBindings name="NegotiationSinglePricePC" objectPath="ProductPrice"/>
    <parameterBindings name="OriginQuantity" objectPath="Quantity"/>
    <parameterBindings name="OriginSinglePricePC" objectPath="ProductPrice"/>
    <parameterBindings name="ProductLineItem" nullBinding="true"/>
    <parameterBindings name="Public" constant="(Boolean)false"/>
    <parameterBindings name="Quantity" objectPath="Quantity"/>
    <parameterBindings name="SinglePricePC" objectPath="ProductPrice"/>
    <parameterBindings name="TaxClassID" objectPath="Product:TaxClassID"/>
  </nodes>
<!--@Location 15,23-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CopyProductIdentifiers5">
    <configurationValues name="DefaultIdentifierType" value="SellerID"/>
    <pipelet href="enfinity:/bc_mvc/pipelets/CopyProductIdentifiers.xml"/>
<!--@BendPoints 31,48-->
    <nodeSuccessors name="next" next="CopyProductIdentifiers4"/>
    <parameterBindings name="Source" objectPath="Product"/>
    <parameterBindings name="Target" objectPath="ProductListItem"/>
  </nodes>
<!--@Location 15,24-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CopyProductIdentifiers4">
    <pipelet href="enfinity:/bc_mvc/pipelets/CopyProductIdentifiers.xml"/>
    <nodeSuccessors name="next" next="CopyProductAttributes2"/>
    <parameterBindings name="Source" objectPath="Product"/>
    <parameterBindings name="Target" objectPath="ProductListItem"/>
  </nodes>
<!--@Location 15,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CopyProductAttributes2">
    <pipelet href="enfinity:/bc_mvc/pipelets/CopyProductAttributes.xml"/>
    <nodeSuccessors name="next" next="UpdateProductList4"/>
    <parameterBindings name="AttributeGroup" objectPath="QuoteAttributeGroup"/>
    <parameterBindings name="ExtensibleObject" objectPath="ProductListItem"/>
  </nodes>
<!--@Location 15,26-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateProductList4">
    <pipelet href="enfinity:/bc_mvc/pipelets/UpdateProductList.xml"/>
    <nodeSuccessors name="next" next="CalculateProductListTotal2"/>
    <parameterBindings name="DisplayName" nullBinding="true"/>
    <parameterBindings name="DocumentNumber" nullBinding="true"/>
    <parameterBindings name="Fixed" nullBinding="true"/>
    <parameterBindings name="IsPublic" nullBinding="true"/>
    <parameterBindings name="Modified" nullBinding="true"/>
    <parameterBindings name="NegotiationTotal" objectPath="ProductPrice"/>
    <parameterBindings name="OriginTotal" objectPath="ProductPrice"/>
    <parameterBindings name="ProductList" objectPath="Quote"/>
    <parameterBindings name="Scope" nullBinding="true"/>
    <parameterBindings name="ShortDescription" nullBinding="true"/>
    <parameterBindings name="State" nullBinding="true"/>
    <parameterBindings name="Total" objectPath="ProductPrice"/>
    <parameterBindings name="TypeCode" nullBinding="true"/>
    <parameterBindings name="ValidFrom" nullBinding="true"/>
    <parameterBindings name="ValidTo" nullBinding="true"/>
  </nodes>
<!--@Location 15,27-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CalculateProductListTotal2">
    <configurationValues name="CalculateProductListItemPrices" value="true"/>
    <pipelet href="enfinity:/bc_mvc/pipelets/CalculateProductListTotal.xml"/>
    <nodeSuccessors name="next" next="UpdateCustomAttribute1"/>
    <parameterBindings name="ProductList" objectPath="Quote"/>
  </nodes>
<!--@Location 15,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateCustomAttribute1">
    <configurationValues name="DefaultAttributeName" value="NeedsQuotation"/>
    <configurationValues name="DefaultAttributeType" value="Boolean"/>
    <configurationValues name="DefaultAttributeValue" value="false"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateCustomAttribute.xml"/>
    <nodeSuccessors name="next" next="CallNode19"/>
    <parameterBindings name="AttributeName" nullBinding="true"/>
    <parameterBindings name="AttributeType" nullBinding="true"/>
    <parameterBindings name="AttributeValue" objectPath="Product:NeedsQuotation"/>
    <parameterBindings name="ExtensibleObject" objectPath="ProductListItem"/>
    <parameterBindings name="LocaleInformation" nullBinding="true"/>
  </nodes>
<!--@Location 15,29-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode19">
    <nodeSuccessors name="next" next="CallNode23"/>
    <parameterBindings name="User" objectPath="CurrentUser"/>
    <startNode referencedName="BusinessObjectUtils-GetUserBO"/>
  </nodes>
<!--@Location 15,30-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode23">
    <nodeSuccessors name="next" next="GetProductTaxRate0"/>
    <startNode referencedName="BusinessObjectUtils-GetCustomerBO"/>
  </nodes>
<!--@Location 15,31-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductTaxRate0">
    <pipelet href="enfinity:/bc_b2b/pipelets/GetProductTaxRate.xml"/>
    <nodeSuccessors name="next" next="UpdateCustomAttribute5"/>
    <returnValueBindings name="TaxRate" objectPath="TaxRateValue"/>
  </nodes>
<!--@Location 15,32-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateCustomAttribute5">
    <configurationValues name="DefaultAttributeType" value="Decimal"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateCustomAttribute.xml"/>
<!--@BendPoints 29,59-->
    <nodeSuccessors name="next" next="JoinNode21"/>
    <parameterBindings name="AttributeName" constant="TaxRate"/>
    <parameterBindings name="AttributeType" nullBinding="true"/>
    <parameterBindings name="AttributeValue" objectPath="TaxRateValue"/>
    <parameterBindings name="ExtensibleObject" objectPath="ProductListItem"/>
    <parameterBindings name="LocaleInformation" nullBinding="true"/>
  </nodes>
<!--@Location 16,18-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper5">
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
<!--@BendPoints 33,39-->
    <nodeSuccessors name="next" next="JoinNode20"/>
    <parameterBindings name="InValue_1" constant="1"/>
    <returnValueBindings name="OutValue_1" objectPath="QuantityValue"/>
  </nodes>
<!--@Location 16,10-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode15"/>
<!--@Location 16,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetFormSelection3">
    <configurationValues name="DefaultParameterName" value="SKU"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetFormSelection.xml"/>
    <nodeSuccessors name="next" next="DecisionNode6"/>
    <parameterBindings name="ParameterName" nullBinding="true"/>
    <returnValueBindings name="Selection" objectPath="SKUs"/>
  </nodes>
<!--@Location 16,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode6" conditionKey="SKUs"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="JoinNode17"/>
    <nodeSuccessors name="decision_no" next="ExchangeSessionObject0"/>
  </nodes>
<!--@Location 16,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject0">
    <configurationValues name="ProcessMethod" value="Get Object from Session"/>
    <configurationValues name="SessionObjectName" value="ProductsForQuoting"/>
    <pipelet href="enfinity:/core/pipelets/ExchangeSessionObject.xml"/>
    <nodeSuccessors name="next" next="ExchangeSessionObject1"/>
    <returnValueBindings name="LoadObject" objectPath="SKUs"/>
  </nodes>
<!--@Location 16,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject1">
    <configurationValues name="ProcessMethod" value="Get Object from Session"/>
    <configurationValues name="SessionObjectName" value="ProductsForQuoting"/>
    <pipelet href="enfinity:/core/pipelets/ExchangeSessionObject.xml"/>
    <nodeSuccessors name="next" next="JoinNode23"/>
    <parameterBindings name="SessionObjectName" objectPath="ProductsForQuoting"/>
  </nodes>
<!--@Location 29,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode10" strict="true" name="GetFirstNewQuote"
      callMode="Private">
    <nodeSuccessors name="next" next="CallNode14"/>
    <parameters name="CurrentOrganization" type="com.intershop.component.organization.capi.Organization"/>
  </nodes>
<!--@Location 29,1-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode14">
    <nodeSuccessors name="next" next="UpdateDictionary0"/>
    <startNode referencedName="ViewQuoteList-PrepareSearch"/>
  </nodes>
<!--@Location 29,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateDictionary0">
    <configurationValues name="Name_01" value="State"/>
    <pipelet href="enfinity:/core/pipelets/UpdateDictionary.xml"/>
    <nodeSuccessors name="next" next="CallNode15"/>
    <parameterBindings name="InDictionary" objectPath="QuoteSearchParameters"/>
    <parameterBindings name="Value_01" constant="0"/>
    <returnValueBindings name="OutDictionary" objectPath="QuoteSearchParameters"/>
  </nodes>
<!--@Location 29,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode15">
    <nodeSuccessors name="next" next="GetFirstElementOfIterator0"/>
    <startNode referencedName="ProcessQuoteSearch-SearchQuotesByOwner"/>
  </nodes>
<!--@Location 29,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetFirstElementOfIterator0">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetFirstElementOfIterator.xml"/>
    <nodeSuccessors name="next" next="EndNode11"/>
    <nodeSuccessors name="pipelet_error" next="EndNode13"/>
    <parameterBindings name="Iterator" objectPath="Quotes"/>
    <returnValueBindings name="FirstElement" objectPath="Quote"/>
  </nodes>
<!--@Location 29,5-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode11" name="NEXT" strict="true">
    <returnValues name="Quote" type="java.lang.Object" optional="true"/>
  </nodes>
<!--@Location 28,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode13" name="NOT_FOUND" strict="true"/>
<!--Updates prices and quantities of a quote

@Location 0,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode3" name="UpdateQuoteByQuoter"
      callMode="Private">
    <nodeSuccessors name="next" next="GetFormSelection0"/>
  </nodes>
<!--@Location 0,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetFormSelection0">
    <configurationValues name="DefaultParameterName" value="Items"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetFormSelection.xml"/>
    <nodeSuccessors name="next" next="GetDomainPreference_ImXnYOJoEeiX0L7K3JJxXg"/>
    <parameterBindings name="ParameterName" nullBinding="true"/>
    <returnValueBindings name="Selection" objectPath="Items"/>
  </nodes>
<!--@Location 0,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference_ImXnYOJoEeiX0L7K3JJxXg">
    <configurationValues name="DefaultPreferenceKey" value="QuoteLifeTime"/>
    <configurationValues name="Type" value="Integer"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="GetCurrentDate_B5hRsOJkEeiX0L7K3JJxXg"/>
    <parameterBindings name="PreferenceDomain" objectPath="CurrentDomain"/>
    <parameterBindings name="PreferenceKey" nullBinding="true"/>
    <returnValueBindings name="PreferenceIntValue" objectPath="QuoteLifeTime"/>
  </nodes>
<!--@Location 0,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetCurrentDate_B5hRsOJkEeiX0L7K3JJxXg">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetCurrentDate.xml"/>
    <nodeSuccessors name="next" next="CalculateDate_G7yRsOJkEeiX0L7K3JJxXg"/>
    <returnValueBindings name="CurrentDate" objectPath="ValidFromDate"/>
  </nodes>
<!--@Location 0,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CalculateDate_G7yRsOJkEeiX0L7K3JJxXg">
    <configurationValues name="CalculationMethod" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CalculateDate.xml"/>
    <nodeSuccessors name="next" next="UpdateProductList_huk-wOJkEeiX0L7K3JJxXg"/>
    <parameterBindings name="Date" objectPath="ValidFromDate"/>
    <parameterBindings name="Days" objectPath="QuoteLifeTime"/>
    <parameterBindings name="Hours" nullBinding="true"/>
    <parameterBindings name="Milliseconds" nullBinding="true"/>
    <parameterBindings name="Minutes" nullBinding="true"/>
    <parameterBindings name="Seconds" nullBinding="true"/>
    <returnValueBindings name="CalculatedDate" objectPath="ValidToDate"/>
  </nodes>
<!--@Location 0,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateProductList_huk-wOJkEeiX0L7K3JJxXg">
    <pipelet href="enfinity:/bc_mvc/pipelets/UpdateProductList.xml"/>
    <nodeSuccessors name="next" next="UpdateQuoteLineItemQuantities0"/>
    <parameterBindings name="DisplayName" nullBinding="true"/>
    <parameterBindings name="DocumentNumber" nullBinding="true"/>
    <parameterBindings name="Fixed" nullBinding="true"/>
    <parameterBindings name="IsPublic" nullBinding="true"/>
    <parameterBindings name="Modified" nullBinding="true"/>
    <parameterBindings name="NegotiationTotal" nullBinding="true"/>
    <parameterBindings name="OriginTotal" nullBinding="true"/>
    <parameterBindings name="OwningDomain" objectPath="CurrentOrganization:OwningDomain"/>
    <parameterBindings name="ProductList" objectPath="Quote"/>
    <parameterBindings name="Scope" nullBinding="true"/>
    <parameterBindings name="ShortDescription" nullBinding="true"/>
    <parameterBindings name="State" nullBinding="true"/>
    <parameterBindings name="Total" nullBinding="true"/>
    <parameterBindings name="TypeCode" nullBinding="true"/>
    <parameterBindings name="ValidFrom" objectPath="ValidFromDate"/>
    <parameterBindings name="ValidTo" objectPath="ValidToDate"/>
  </nodes>
<!--@Location 0,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateQuoteLineItemQuantities0">
    <configurationValues name="Mode" value="quoter"/>
    <pipelet href="enfinity:/bc_b2b/pipelets/UpdateQuoteQuantitiesAndPrice.xml"/>
    <nodeSuccessors name="next" next="EndNode2"/>
  </nodes>
<!--@Location 0,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode2"/>
<!--Updates prices and quantities of a quote

@Location 1,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode4" name="UpdateQuoteBySeller"
      callMode="Private">
    <nodeSuccessors name="next" next="GetFormSelection1"/>
  </nodes>
<!--@Location 1,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetFormSelection1">
    <configurationValues name="DefaultParameterName" value="Items"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetFormSelection.xml"/>
    <nodeSuccessors name="next" next="UpdateQuoteQuantitiesAndPrice0"/>
    <parameterBindings name="ParameterName" nullBinding="true"/>
    <returnValueBindings name="Selection" objectPath="Items"/>
  </nodes>
<!--@Location 1,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateQuoteQuantitiesAndPrice0">
    <configurationValues name="Mode" value="seller"/>
    <pipelet href="enfinity:/bc_b2b/pipelets/UpdateQuoteQuantitiesAndPrice.xml"/>
    <nodeSuccessors name="next" next="UpdateCustomAttribute0"/>
  </nodes>
<!--@Location 1,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateCustomAttribute0">
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateCustomAttribute.xml"/>
    <nodeSuccessors name="next" next="CallNode11"/>
    <parameterBindings name="AttributeName" constant="SellerComment"/>
    <parameterBindings name="AttributeType" constant="String"/>
    <parameterBindings name="AttributeValue" objectPath="SellerComment"/>
    <parameterBindings name="ExtensibleObject" objectPath="Quote"/>
    <parameterBindings name="LocaleInformation" objectPath="Locale"/>
  </nodes>
<!--@Location 1,4-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode11">
    <nodeSuccessors name="next" next="UpdateProductList2"/>
    <startNode referencedName="This:ValidateDates"/>
  </nodes>
<!--@Location 1,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateProductList2">
    <pipelet href="enfinity:/bc_mvc/pipelets/UpdateProductList.xml"/>
    <nodeSuccessors name="next" next="EndNode5"/>
    <parameterBindings name="DisplayName" nullBinding="true"/>
    <parameterBindings name="DocumentNumber" nullBinding="true"/>
    <parameterBindings name="Fixed" nullBinding="true"/>
    <parameterBindings name="IsPublic" nullBinding="true"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <parameterBindings name="Modified" nullBinding="true"/>
    <parameterBindings name="NegotiationTotal" nullBinding="true"/>
    <parameterBindings name="OriginTotal" nullBinding="true"/>
    <parameterBindings name="OwningDomain" nullBinding="true"/>
    <parameterBindings name="ProductList" objectPath="Quote"/>
    <parameterBindings name="Scope" nullBinding="true"/>
    <parameterBindings name="ShortDescription" nullBinding="true"/>
    <parameterBindings name="State" nullBinding="true"/>
    <parameterBindings name="Total" nullBinding="true"/>
    <parameterBindings name="TypeCode" nullBinding="true"/>
  </nodes>
<!--@Location 1,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode5"/>
<!--@Location 18,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode0" name="ValidateDates" callMode="Private">
    <nodeSuccessors name="next" next="ConcatenateStrings1"/>
  </nodes>
<!--@Location 18,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings1">
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="CheckForEmptyString3"/>
    <parameterBindings name="String0" objectPath="DateFormatString"/>
    <parameterBindings name="String1" constant=","/>
    <parameterBindings name="String2" objectPath="TimeFormatString"/>
    <returnValueBindings name="Concatenated" objectPath="DatePattern"/>
  </nodes>
<!--@Location 18,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckForEmptyString3">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckForEmptyString.xml"/>
    <nodeSuccessors name="next" next="CheckForEmptyString0"/>
<!--@BendPoints 42,5 42,19-->
    <nodeSuccessors name="pipelet_error" next="JoinNode10"/>
    <parameterBindings name="FilledString" objectPath="QuoteForm_StartDate"/>
  </nodes>
<!--@Location 18,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckForEmptyString0">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckForEmptyString.xml"/>
    <nodeSuccessors name="next" next="VerifyDate1"/>
<!--@BendPoints 41,7-->
    <nodeSuccessors name="pipelet_error" next="JoinNode8"/>
    <parameterBindings name="FilledString" objectPath="QuoteForm_StartTime"/>
  </nodes>
<!--@Location 18,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="VerifyDate1">
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyDate.xml"/>
    <nodeSuccessors name="next" next="ConcatenateStrings2"/>
    <nodeSuccessors name="pipelet_error" next="SetDictionaryValue6"/>
    <parameterBindings name="DatePattern" objectPath="TimeFormatString"/>
    <parameterBindings name="DateString" objectPath="QuoteForm_StartTime"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <returnValueBindings name="Date" nullBinding="true"/>
    <returnValueBindings name="ErrorCode" objectPath="StartTime_ErrorCode"/>
  </nodes>
<!--@Location 18,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings2">
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="JoinNode11"/>
    <parameterBindings name="String0" objectPath="QuoteForm_StartDate"/>
    <parameterBindings name="String1" constant=","/>
    <parameterBindings name="String2" objectPath="QuoteForm_StartTime"/>
    <returnValueBindings name="Concatenated" objectPath="ValidFromString"/>
  </nodes>
<!--@Location 18,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode11">
    <nodeSuccessors name="next" next="VerifyDate0"/>
  </nodes>
<!--@Location 18,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="VerifyDate0">
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyDate.xml"/>
    <nodeSuccessors name="next" next="JoinNode15"/>
    <nodeSuccessors name="pipelet_error" next="SetDictionaryValue7"/>
    <parameterBindings name="DateString" objectPath="ValidFromString"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <returnValueBindings name="Date" objectPath="ValidFrom"/>
    <returnValueBindings name="ErrorCode" objectPath="ValidFrom_ErrorCode"/>
  </nodes>
<!--@Location 18,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode15">
    <nodeSuccessors name="next" next="JoinNode10"/>
  </nodes>
<!--@Location 18,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode10">
    <nodeSuccessors name="next" next="CheckForEmptyString1"/>
  </nodes>
<!--@Location 18,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckForEmptyString1">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckForEmptyString.xml"/>
    <nodeSuccessors name="next" next="CheckForEmptyString2"/>
<!--@BendPoints 42,21 42,35-->
    <nodeSuccessors name="pipelet_error" next="JoinNode12"/>
    <parameterBindings name="FilledString" objectPath="QuoteForm_EndDate"/>
  </nodes>
<!--@Location 18,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckForEmptyString2">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckForEmptyString.xml"/>
    <nodeSuccessors name="next" next="VerifyDate2"/>
<!--@BendPoints 41,23-->
    <nodeSuccessors name="pipelet_error" next="JoinNode13"/>
    <parameterBindings name="FilledString" objectPath="QuoteForm_EndTime"/>
  </nodes>
<!--@Location 18,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="VerifyDate2">
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyDate.xml"/>
    <nodeSuccessors name="next" next="ConcatenateStrings0"/>
    <nodeSuccessors name="pipelet_error" next="SetDictionaryValue5"/>
    <parameterBindings name="DatePattern" objectPath="TimeFormatString"/>
    <parameterBindings name="DateString" objectPath="QuoteForm_EndTime"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <returnValueBindings name="Date" nullBinding="true"/>
    <returnValueBindings name="ErrorCode" objectPath="EndTime_ErrorCode"/>
  </nodes>
<!--@Location 18,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings0">
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="JoinNode9"/>
    <parameterBindings name="String0" objectPath="QuoteForm_EndDate"/>
    <parameterBindings name="String1" constant=","/>
    <parameterBindings name="String2" objectPath="QuoteForm_EndTime"/>
    <returnValueBindings name="Concatenated" objectPath="ValidToString"/>
  </nodes>
<!--@Location 18,14-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode9">
    <nodeSuccessors name="next" next="VerifyDate3"/>
  </nodes>
<!--@Location 18,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="VerifyDate3">
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyDate.xml"/>
    <nodeSuccessors name="next" next="JoinNode14"/>
    <nodeSuccessors name="pipelet_error" next="SetDictionaryValue4"/>
    <parameterBindings name="DateString" objectPath="ValidToString"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <returnValueBindings name="Date" objectPath="ValidTo"/>
    <returnValueBindings name="ErrorCode" objectPath="ValidTo_ErrorCode"/>
  </nodes>
<!--@Location 18,16-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode14">
    <nodeSuccessors name="next" next="JoinNode12"/>
  </nodes>
<!--@Location 18,17-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode12">
    <nodeSuccessors name="next" next="EndNode9"/>
  </nodes>
<!--@Location 18,18-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode9"/>
<!--@Location 19,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue4">
    <configurationValues name="Name" value="ErrorCode"/>
    <configurationValues name="Value" value="DateFormatError"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 40,31 40,33-->
    <nodeSuccessors name="next" next="JoinNode14"/>
  </nodes>
<!--@Location 19,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue5">
    <configurationValues name="Name" value="ErrorCode"/>
    <configurationValues name="Value" value="DateFormatError"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode13"/>
  </nodes>
<!--@Location 20,12-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode13">
    <nodeSuccessors name="next" next="KeyMapper1"/>
  </nodes>
<!--@Location 20,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper1">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 41,29-->
    <nodeSuccessors name="next" next="JoinNode9"/>
    <parameterBindings name="InValue_1" objectPath="QuoteForm_EndDate"/>
    <returnValueBindings name="OutValue_1" objectPath="ValidToString"/>
  </nodes>
<!--@Location 19,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue7">
    <configurationValues name="Name" value="ErrorCode"/>
    <configurationValues name="Value" value="DateFormatError"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 40,15 40,17-->
    <nodeSuccessors name="next" next="JoinNode15"/>
  </nodes>
<!--@Location 19,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue6">
    <configurationValues name="Name" value="ErrorCode"/>
    <configurationValues name="Value" value="DateFormatError"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode8"/>
  </nodes>
<!--@Location 20,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode8">
    <nodeSuccessors name="next" next="KeyMapper2"/>
  </nodes>
<!--@Location 20,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper2">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 41,13-->
    <nodeSuccessors name="next" next="JoinNode11"/>
    <parameterBindings name="InValue_1" objectPath="QuoteForm_StartDate"/>
    <returnValueBindings name="OutValue_1" objectPath="ValidFromString"/>
  </nodes>
</pipeline:Pipeline>
