<%@  page buffer="none" import="java.util.*,java.io.*,com.intershop.beehive.core.internal.template.*,com.intershop.beehive.core.internal.template.isml.*,com.intershop.beehive.core.capi.log.*,com.intershop.beehive.core.capi.resource.*,com.intershop.beehive.core.capi.util.UUIDMgr,com.intershop.beehive.core.capi.util.XMLHelper,com.intershop.beehive.foundation.util.*,com.intershop.beehive.core.internal.url.*,com.intershop.beehive.core.internal.resource.*,com.intershop.beehive.core.internal.wsrp.*,com.intershop.beehive.core.capi.pipeline.PipelineDictionary,com.intershop.beehive.core.capi.naming.NamingMgr,com.intershop.beehive.core.capi.pagecache.PageCacheMgr,com.intershop.beehive.core.capi.request.SessionMgr,com.intershop.beehive.core.internal.request.SessionMgrImpl,com.intershop.beehive.core.pipelet.PipelineConstants" extends="com.intershop.beehive.core.internal.template.AbstractTemplate" %><% 
boolean _boolean_result=false;
TemplateExecutionConfig context = getTemplateExecutionConfig();
createTemplatePageConfig(context.getServletRequest());
printHeader(out);
 %><% %><%@ page contentType="text/html;charset=utf-8" %><%setEncodingType("text/html"); %><div class="ipay-fastpayLogo"><img src="<%=context.getFormattedValue(context.webRoot(),null)%>/images/FastPAY_logo.png" width="107" height="17" alt="<%=context.getFormattedValue(localizeText(context.getFormattedValue("ISHPayFastPayAddress.ISHPAYLogo.alt",null)),null)%>"/></div><% {out.flush();processLocalIncludeByServer((com.intershop.beehive.core.capi.request.ServletResponse)response,"payment_demo/ishpay/inc/ISHPayOrderDetails", null, "4");} %><% URLPipelineAction action1 = new URLPipelineAction(context.getFormattedValue(url(true,(new URLPipelineAction(context.getFormattedValue("ISHPayRedirect-FastPayAddress",null)))),null));String site1 = null;String serverGroup1 = null;String actionValue1 = context.getFormattedValue(url(true,(new URLPipelineAction(context.getFormattedValue("ISHPayRedirect-FastPayAddress",null)))),null);if (site1 == null){  site1 = action1.getDomain();  if (site1 == null)  {      site1 = com.intershop.beehive.core.capi.request.Request.getCurrent().getRequestSite().getDomainName();  }}if (serverGroup1 == null){  serverGroup1 = action1.getServerGroup();  if (serverGroup1 == null)  {      serverGroup1 = com.intershop.beehive.core.capi.request.Request.getCurrent().getRequestSite().getServerGroup();  }}out.print("<form");out.print(" method=\"");out.print("post");out.print("\"");out.print(" action=\"");out.print(context.getFormattedValue(url(true,(new URLPipelineAction(context.getFormattedValue("ISHPayRedirect-FastPayAddress",null)))),null));out.print("\"");out.print(" name=\"");out.print("FastPayLoginForm");out.print("\"");out.print(">");out.print(context.prepareWACSRFTag(actionValue1, site1, serverGroup1,true)); %><div>
<h3><% {out.write(localizeISText("ISHPayFastPayAddress.Addresses","",null,null,null,null,null,null,null,null,null,null,null));} %></h3>
<p><% {out.write(localizeISText("ISHPayFastPayAddress.PleaseSelectAnInvoiceAndAShippingAddress","",null,null,null,null,null,null,null,null,null,null,null));} %></p>
<fieldset>
<div class="ipay-field">
<label class="ipay-label-select"><% {out.write(localizeISText("ISHPayFastPayAddress.InvoiceAddress.label","",null,null,null,null,null,null,null,null,null,null,null));} %></label><select 
name="invoice_address" class="ipay-js-selectAddress" ><% _boolean_result=false;try {_boolean_result=((Boolean)((disableErrorMessages().isDefined(getObject("ita_fname"))))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",16,e);}if (_boolean_result) { %><option value="<%=context.getFormattedValue(encodeString(context.getFormattedValue(context.getFormattedValue(getObject("ita_fname"),null) + context.getFormattedValue("|",null) + context.getFormattedValue(getObject("ita_lname"),null) + context.getFormattedValue("|",null) + context.getFormattedValue(getObject("ita_street"),null) + context.getFormattedValue("|",null) + context.getFormattedValue(getObject("ita_pcode"),null) + context.getFormattedValue("|",null) + context.getFormattedValue(getObject("ita_city"),null) + context.getFormattedValue("|",null) + context.getFormattedValue(getObject("ita_countrycode"),null) + context.getFormattedValue("|",null) + context.getFormattedValue(getObject("email"),null) + context.getFormattedValue("|",null) + context.getFormattedValue(getObject("phone"),null),null)),null)%>" selected="selected"><% {String value = null;try{value=context.getFormattedValue(getObject("ita_fname"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {17}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> <% {String value = null;try{value=context.getFormattedValue(getObject("ita_lname"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {17}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>, <% {String value = null;try{value=context.getFormattedValue(getObject("ita_street"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {17}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> - <% {String value = null;try{value=context.getFormattedValue(getObject("ita_fname"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {17}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> <% {String value = null;try{value=context.getFormattedValue(getObject("ita_lname"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {17}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> | <% {String value = null;try{value=context.getFormattedValue(getObject("ita_street"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {17}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> | <% {String value = null;try{value=context.getFormattedValue(getObject("ita_pcode"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {17}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> <% {String value = null;try{value=context.getFormattedValue(getObject("ita_city"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {17}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> | <% {String value = null;try{value=context.getFormattedValue(getObject("ita_country"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {17}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> <% {out.write(localizeISText("ISHPayFastPayAddress.SavedAddressFrom.option","",null,getObject("Repository:DisplayName"),null,null,null,null,null,null,null,null,null));} %></option><% } %><option value="John|Doe|Berliner Str. 22|12345|Berlin|DE|john_doe@test.intershop.de|012345678910" selected="selected"><% {out.write(localizeISText("ISHPayFastPayAddress.JohnDoeBerlinerStr22JohnDoeBerlinerStr22.option","",null,null,null,null,null,null,null,null,null,null,null));} %> <% {out.write(localizeISText("order.payment.shop.country","",null,null,null,null,null,null,null,null,null,null,null));} %></option>
<option value="Jane|Doe|Hamburger Str. 22|54321|Hamburg|DE|john_doe@test.intershop.de|012345678910"><% {out.write(localizeISText("ISHPayFastPayAddress.JaneDoeHamburgerStr22JaneDoeHamburgerStr.option","",null,null,null,null,null,null,null,null,null,null,null));} %> <% {out.write(localizeISText("order.payment.shop.country","",null,null,null,null,null,null,null,null,null,null,null));} %></option>
</select>
</div>
<div class="ipay-field">
<label class="ipay-label-select"><% {out.write(localizeISText("ISHPayFastPayAddress.ShippingAddress.label","",null,null,null,null,null,null,null,null,null,null,null));} %></label><select 
name="shipping_address" class="ipay-js-selectAddress" ><% _boolean_result=false;try {_boolean_result=((Boolean)((disableErrorMessages().isDefined(getObject("sfa_fname"))))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",26,e);}if (_boolean_result) { %><option value="<% {String value = null;try{value=context.getFormattedValue(getObject("sfa_fname"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>|<% {String value = null;try{value=context.getFormattedValue(getObject("sfa_lname"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>|<% {String value = null;try{value=context.getFormattedValue(getObject("sfa_street"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>|<% {String value = null;try{value=context.getFormattedValue(getObject("sfa_pcode"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>|<% {String value = null;try{value=context.getFormattedValue(getObject("sfa_city"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>|<% {String value = null;try{value=context.getFormattedValue(getObject("sfa_countrycode"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>|<% {String value = null;try{value=context.getFormattedValue(getObject("email"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>|<% {String value = null;try{value=context.getFormattedValue(getObject("phone"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" selected="selected"><% {String value = null;try{value=context.getFormattedValue(getObject("sfa_fname"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> <% {String value = null;try{value=context.getFormattedValue(getObject("sfa_lname"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>, <% {String value = null;try{value=context.getFormattedValue(getObject("sfa_street"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> - <% {String value = null;try{value=context.getFormattedValue(getObject("sfa_fname"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> <% {String value = null;try{value=context.getFormattedValue(getObject("sfa_lname"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> | <% {String value = null;try{value=context.getFormattedValue(getObject("sfa_street"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> | <% {String value = null;try{value=context.getFormattedValue(getObject("ita_pcode"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> <% {String value = null;try{value=context.getFormattedValue(getObject("sfa_city"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> | <% {String value = null;try{value=context.getFormattedValue(getObject("sfa_country"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> <% {out.write(localizeISText("ISHPayFastPayAddress.SavedAddressFrom.option","",null,getObject("Repository:DisplayName"),null,null,null,null,null,null,null,null,null));} %></option><% } %><option value="John|Doe|Berliner Str. 22|12345|Berlin|DE|john_doe@test.intershop.de|012345678910" selected="selected"><% {out.write(localizeISText("ISHPayFastPayAddress.JohnDoeBerlinerStr22JohnDoeBerlinerStr22.option1","",null,null,null,null,null,null,null,null,null,null,null));} %> <% {out.write(localizeISText("order.payment.shop.country","",null,null,null,null,null,null,null,null,null,null,null));} %></option>
<option value="Jane|Doe|Hamburger Str. 22|54321|Hamburg|DE|john_doe@test.intershop.de|012345678910"><% {out.write(localizeISText("ISHPayFastPayAddress.JaneDoeHamburgerStr22JaneDoeHamburgerStr.option1","",null,null,null,null,null,null,null,null,null,null,null));} %> <% {out.write(localizeISText("order.payment.shop.country","",null,null,null,null,null,null,null,null,null,null,null));} %></option>
</select>
</div>
</fieldset>
</div>
<div class="ipay-formShift">
<input type="hidden" name="login" value="<% {String value = null;try{value=context.getFormattedValue(getObject("login"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {37}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>">
<input type="hidden" name="token" value="<% {String value = null;try{value=context.getFormattedValue(getObject("token"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {38}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>">
<input type="hidden" name="currency" value="<% {String value = null;try{value=context.getFormattedValue(getObject("currency"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {39}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>">
<input type="hidden" name="amount" value="<% {String value = null;try{value=context.getFormattedValue(getObject("amount"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {40}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>">
<input type="hidden" name="BasketUUID" value="<% {String value = null;try{value=context.getFormattedValue(getObject("BasketUUID"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {41}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>">
<input type="hidden" name="successURL" value="<% {String value = null;try{value=context.getFormattedValue(getObject("successURL"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {42}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>">
<button type="submit" name="ok" ><% {out.write(localizeISText("ISHPayFastPayAddress.ConfirmPayment.button","",null,null,null,null,null,null,null,null,null,null,null));} %></button>
</div>
<a href="<%=context.getFormattedValue("#",null)%>" type="button" class="ipay-formShift ipay-link-cancel" onclick="document.FastPayLoginForm.action='<%=context.getFormattedValue(encodeString(context.getFormattedValue(getObject("cancelURL"),null)),null)%>'; document.FastPayLoginForm.submit();"><% {out.write(localizeISText("ISHPayFastPayAddress.CancelPaymentWithISHFastPay.link","",null,null,null,null,null,null,null,null,null,null,null));} %></a><% out.print("</form>"); %><% printFooter(out); %>