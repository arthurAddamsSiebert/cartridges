<?xml version="1.0" encoding="UTF-8"?>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@Group Checkout-->

<pipeline:Pipeline xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pipeline="http://www.intershop.de/pipeline/2010"
    name="ProcessCart" type="process">
<!--@deprecated since 7.4.3.0
@Location 51,14-->
  <nodes xsi:type="pipeline:Text" nodeID="Text0"/>
<!--LOGIC AROUND CART AND RELATED OBJECTS VALIDATION
@Location 0,47-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode1"/>
<!--ProcessABTesting\-LogBasketItemEvent_OLD
@Location 35,21-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode13"/>
<!--ProcessABTesting\-LogBasketItemEvent_NEW
@Location 35,23-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode14"/>
<!--ProcessABTesting\-LogBasketItemEvent_NEW
@Location 13,37-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode17"/>
<!--LOGIC AROUND CART RETRIEVAL / CREATION
@Location 0,0-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode2"/>
<!--\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
@Location 13,1-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode3"/>
<!--\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
@Location 13,13-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode4"/>
<!--LOGIC AROUND PRODUCTS
@Location 0,12-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode5"/>
<!--\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
@Location 12,34-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode6" width="25"/>
<!--LOGIC AROUND CART UPDATES / CALCULATION
@Location 0,33-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode7"/>
<!--Requires previous Cart calculation
@Location 30,49-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode9"/>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@Location 12,2-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode23" strict="true" name="AddDependentProducts"
      callMode="Private">
<!--@BendPoints 25,6-->
    <nodeSuccessors name="next" next="DecisionNode32"/>
    <parameters name="ProductLineItems" type="java.util.Iterator" optional="true"/>
    <parameters name="DependentSKUMap" type="java.util.Map" optional="true"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"
        optional="true"/>
    <parameters name="ApplicationBO" type="com.intershop.component.application.capi.ApplicationBO"
        optional="true"/>
  </nodes>
<!--@Location 12,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode32" conditionKey="ProductLineItems"
      operator="has_elements">
<!--@BendPoints 25,8-->
    <nodeSuccessors name="decision_yes" next="LoopNode13"/>
<!--@BendPoints 27,7-->
    <nodeSuccessors name="decision_no" next="JoinNode53"/>
  </nodes>
<!--@Location 12,4-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode13" loop="ProductLineItems">
    <nodeSuccessors name="next" next="JoinNode53"/>
    <entry key="ProductLineItem">
<!--@BendPoints 25,10-->
      <nodeSuccessors name="loop_entry_next" next="CallNode36"/>
    </entry>
  </nodes>
<!--@Location 12,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode36">
<!--@BendPoints 25,12 24,12 24,9-->
    <nodeSuccessors name="next" next="LoopNode13_Entry"/>
    <startNode referencedName="ProcessCart-AddWarranties"/>
  </nodes>
<!--@Location 13,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode53">
    <nodeSuccessors name="next" next="CallNode0"/>
  </nodes>
<!--@Location 13,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode0">
    <nodeSuccessors name="next" next="EndNode38"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <startNode referencedName="ProcessBasketInvalidation-InvalidateBasketCalculation"/>
  </nodes>
<!--@Location 13,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode38" strict="true"/>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@displayNearNode@Private \- for internal use only!
@Location 3,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start9" strict="true" visibility="Private"
      name="AddProduct" callMode="Private">
<!--@BendPoints 7,32-->
    <nodeSuccessors name="next" next="CallNode31"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="Product" type="com.intershop.beehive.xcs.capi.product.Product"/>
    <parameters name="Quantity" type="java.lang.String" optional="true"/>
    <parameters name="PreferenceDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
    <parameters name="ForceAllowRepeats" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 3,17-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode31">
<!--@BendPoints 7,38-->
    <nodeSuccessors name="next" next="End4"/>
    <nodeSuccessors name="ERROR" next="EndNode7"/>
    <startNode referencedName="ProcessCart-ProcessAddProduct"/>
  </nodes>
<!--@Location 3,19-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End4" name="" strict="true">
<!--The newly created ProductLineItem.-->
    <returnValues name="NewProductLineItem" type="com.intershop.beehive.bts.capi.orderprocess.ProductLineItem"
        optional="true"/>
<!--If the pipelet exits with an error, this will have one of the values 'ProductNotFound', 'ProductNotOnline' 'ProductWrongType' or 'ProductFromForeignSite'-->
    <returnValues name="ERROR_Basket_Product" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 4,19-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode7" name="ERROR" strict="true">
<!--If the pipelet exits with an error, this will have one of the values 'ProductNotFound', 'ProductNotOnline' 'ProductWrongType' or 'ProductFromForeignSite'-->
    <returnValues name="ERROR_Basket_Product" type="java.lang.String" optional="true"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@displayNearNode@Private \- for internal use only!
@Location 6,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start7" strict="true" visibility="Private"
      name="AddProductByProductRefID" callMode="Private">
    <nodeSuccessors name="next" next="CallNode4"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="ProductRefID" type="java.lang.String"/>
    <parameters name="Quantity" type="java.lang.String" optional="true"/>
    <parameters name="PreferenceDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
  </nodes>
<!--@Location 6,17-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode4">
<!--@BendPoints 13,36-->
    <nodeSuccessors name="next" next="JoinNode49"/>
<!--@BendPoints 15,35-->
    <nodeSuccessors name="ERROR" next="JoinNode50"/>
    <startNode referencedName="ProcessCart-ProcessAddProductByProductRefID"/>
  </nodes>
<!--@Location 6,18-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode49">
    <nodeSuccessors name="next" next="End2"/>
  </nodes>
<!--@Location 6,21-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End2" name="" strict="true">
    <returnValues name="NewProductLineItems" type="java.util.Iterator" optional="true"/>
    <returnValues name="ERROR_Basket_Product" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 7,19-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode50">
    <nodeSuccessors name="next" next="EndNode3"/>
  </nodes>
<!--@Location 7,21-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode3" name="ERROR" strict="true">
    <returnValues name="ERROR_Basket_Product" type="java.lang.String" optional="true"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@displayNearNode@Private \- for internal use only!
@Location 10,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start8" strict="true" visibility="Private"
      name="AddProductBySKU" callMode="Private">
    <nodeSuccessors name="next" next="CallNode30"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="SKU" type="java.lang.String"/>
    <parameters name="Quantity" type="java.lang.String" optional="true"/>
    <parameters name="PreferenceDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
    <parameters name="ForceAllowRepeats" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 10,17-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode30">
<!--@BendPoints 20,37-->
    <nodeSuccessors name="next" next="JoinNode49"/>
    <nodeSuccessors name="ERROR" next="JoinNode21"/>
    <startNode referencedName="ProcessCart-ProcessAddProductBySKU"/>
  </nodes>
<!--@Location 9,19-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode21">
    <nodeSuccessors name="next" next="JoinNode50"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@displayNearNode@Private \- for internal use only!
@Location 8,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start6" strict="true" visibility="Private"
      name="AddProductByUUID" callMode="Private">
    <nodeSuccessors name="next" next="CallNode14"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="ProductUUID" type="java.lang.String"/>
    <parameters name="Quantity" type="java.lang.String" optional="true"/>
    <parameters name="PreferenceDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
  </nodes>
<!--@Location 8,17-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode14">
<!--@BendPoints 16,37-->
    <nodeSuccessors name="next" next="JoinNode49"/>
    <nodeSuccessors name="ERROR" next="JoinNode21"/>
    <startNode referencedName="ProcessCart-ProcessAddProductByUUID"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@displayNearNode@Public \- for adding products by UUIDs, SKUs and ProductRefIDs.
@Location 0,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode22" strict="true" name="AddProducts"
      callMode="Private">
    <nodeSuccessors name="next" next="StartSafeChangesBlock0"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="ProductUUIDs" type="java.util.Iterator&lt;java.lang.String>"
        optional="true"/>
    <parameters name="SKUs" type="java.util.Iterator&lt;java.lang.String>" optional="true"/>
    <parameters name="Quantities" type="java.util.Map&lt;java.lang.String, java.lang.String>"/>
    <parameters name="PreferenceDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
    <parameters name="ProductRefIDs" type="java.util.Iterator" optional="true"/>
    <parameters name="ForceAllowRepeats" type="java.lang.String" optional="true"/>
    <parameters name="CurrentAppContext" type="com.intershop.beehive.app.capi.AppContext"
        optional="true"/>
    <parameters name="DependentSKUMap" type="java.util.Map" optional="true"/>
    <parameters name="ApplicationBO" type="com.intershop.component.application.capi.ApplicationBO"/>
    <parameters name="BasketBO" type="com.intershop.component.basket.capi.BasketBO"/>
  </nodes>
<!--@Location 0,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="StartSafeChangesBlock0">
    <configurationValues name="SafeChangeOverrideProperty" value="intershop.CSRFGuard.overrideSafeBlock.AddProducts"/>
    <pipelet href="enfinity:/core/pipelets/StartSafeChangesBlock.xml"/>
    <nodeSuccessors name="next" next="CallNode32" action="begin"/>
  </nodes>
<!--@Location 0,17-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode32">
    <nodeSuccessors name="next" next="EndSafeChangesBlock1" action="commit"/>
    <nodeSuccessors name="ERROR" next="EndSafeChangesBlock0" action="commit"/>
    <startNode referencedName="ProcessCart-ProcessAddProducts"/>
  </nodes>
<!--@Location 1,18-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="EndSafeChangesBlock1">
    <configurationValues name="SafeChangeOverrideProperty" value="intershop.CSRFGuard.overrideSafeBlock.AddProducts"/>
    <pipelet href="enfinity:/core/pipelets/EndSafeChangesBlock.xml"/>
    <nodeSuccessors name="next" next="EndNode37"/>
  </nodes>
<!--@Location 1,19-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode37" strict="true">
    <returnValues name="NewProductLineItems" type="java.util.Iterator" optional="true"/>
    <returnValues name="AdjustedItems" type="java.util.Map" optional="true"/>
    <returnValues name="NotAvailableProducts" type="java.util.Iterator" optional="true"/>
    <returnValues name="ERROR_Basket_Product" type="java.lang.String" optional="true"/>
    <returnValues name="NotAvailableProductBOs" type="java.util.Iterator" optional="true"/>
  </nodes>
<!--@Location 0,18-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="EndSafeChangesBlock0">
    <configurationValues name="SafeChangeOverrideProperty" value="intershop.CSRFGuard.overrideSafeBlock.AddProducts"/>
    <pipelet href="enfinity:/core/pipelets/EndSafeChangesBlock.xml"/>
    <nodeSuccessors name="next" next="EndNode36"/>
  </nodes>
<!--@Location 0,19-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode36" name="ERROR" strict="true">
    <returnValues name="ERROR_Basket_Product" type="java.lang.String" optional="true"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@Location 15,2-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode24" strict="true" name="AddWarranties"
      callMode="Private">
    <nodeSuccessors name="next" next="CallNode46"/>
    <parameters name="ProductLineItem" type="com.intershop.beehive.bts.capi.orderprocess.ProductLineItem"
        optional="true"/>
    <parameters name="DependentSKUMap" type="java.util.Map" optional="true"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"
        optional="true"/>
    <parameters name="ApplicationBO" type="com.intershop.component.application.capi.ApplicationBO"/>
  </nodes>
<!--@Location 15,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode46">
<!--@BendPoints 31,8-->
    <nodeSuccessors name="next" next="LoopNode15"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <parameterBindings name="BasketBORepository" objectPath="ApplicationBO:Repository(&quot;BasketBORepository&quot;)"/>
    <startNode referencedName="This:GetCurrentCartBO"/>
  </nodes>
<!--@Location 15,4-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode15" loop="DependentSKUMap:EntrySet">
    <nodeSuccessors name="next" next="EndNode40"/>
    <entry key="Entry">
      <nodeSuccessors name="loop_entry_next" next="DecisionNode35"/>
    </entry>
  </nodes>
<!--@Location 15,5-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode35" conditionKey="ProductLineItem:OfferProductRef:ProductSKU"
      operator="str_eq" conditionItem="Entry:Key">
    <nodeSuccessors name="decision_yes" next="CreateStringSplitter1"/>
<!--@BendPoints 32,11 32,12 30,12 30,11-->
    <nodeSuccessors name="decision_no" next="JoinNode57"/>
  </nodes>
<!--@Location 15,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateStringSplitter1">
    <configurationValues name="Mode" value="First Occurrence"/>
    <configurationValues name="Separator" value="_"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateStringSplitter.xml"/>
<!--@BendPoints 31,14-->
    <nodeSuccessors name="next" next="KeyMapper4"/>
  </nodes>
<!--@Location 15,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper4">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 31,16-->
    <nodeSuccessors name="next" next="DecisionNode33"/>
    <parameterBindings name="InValue_1" objectPath="Splitter:Begin(Entry:Value)"/>
    <parameterBindings name="InValue_2" objectPath="Splitter:End(Entry:Value)"/>
    <returnValueBindings name="OutValue_1" objectPath="PrefixWord"/>
    <returnValueBindings name="OutValue_2" objectPath="SKU"/>
  </nodes>
<!--@Location 15,8-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode33" conditionKey="PrefixWord"
      operator="str_eq" conditionValue="Warranty">
<!--@BendPoints 31,18-->
    <nodeSuccessors name="decision_yes" next="CallNode35"/>
<!--@BendPoints 32,17 32,21-->
    <nodeSuccessors name="decision_no" next="JoinNode52"/>
  </nodes>
<!--@Location 15,9-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode35">
    <nodeSuccessors name="next" next="JoinNode52"/>
    <startNode referencedName="ProcessCart-AddWarranty"/>
  </nodes>
<!--@Location 15,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode52">
<!--@BendPoints 29,21-->
    <nodeSuccessors name="next" next="JoinNode57"/>
  </nodes>
<!--@Location 14,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode57">
<!--@BendPoints 29,9-->
    <nodeSuccessors name="next" next="LoopNode15_Entry"/>
  </nodes>
<!--@Location 16,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode40" strict="true"/>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@Location 17,2-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode25" strict="true" name="AddWarranty"
      callMode="Private">
    <nodeSuccessors name="next" next="GetOrganizationByDomain4"/>
    <parameters name="SKU" type="java.lang.String"/>
    <parameters name="ProductLineItem" type="com.intershop.beehive.bts.capi.orderprocess.ProductLineItem"/>
    <parameters name="BasketBO" type="com.intershop.component.basket.capi.BasketBO"/>
  </nodes>
<!--@Location 17,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetOrganizationByDomain4">
    <pipelet href="enfinity:/bc_organization/pipelets/GetOrganizationByDomain.xml"/>
    <nodeSuccessors name="next" next="GetApplicationBO3"/>
<!--@BendPoints 37,7-->
    <nodeSuccessors name="pipelet_error" next="JoinNode26"/>
    <parameterBindings name="OrganizationDomain" objectPath="BasketBO:Domain"/>
  </nodes>
<!--@Location 17,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetApplicationBO3">
    <pipelet href="enfinity:/bc_application/pipelets/GetApplicationBO.xml"/>
    <nodeSuccessors name="next" next="KeyMapper7"/>
  </nodes>
<!--@Location 17,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper7">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="GetWarrantyBO1"/>
    <parameterBindings name="InValue_1" objectPath="ApplicationBO:Extension(&quot;Warranty&quot;):WarrantyBORepository(Organization)"/>
    <returnValueBindings name="OutValue_1" objectPath="WarrantyBORepository"/>
  </nodes>
<!--@Location 17,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetWarrantyBO1">
    <pipelet href="enfinity:/bc_warranty/pipelets/GetWarrantyBO.xml"/>
    <nodeSuccessors name="next" next="GetBasketProductLineItemBO1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode26"/>
    <parameterBindings name="SKU" objectPath="SKU"/>
    <returnValueBindings name="WarrantyBO" objectPath="Warranty"/>
  </nodes>
<!--@Location 17,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetBasketProductLineItemBO1">
    <pipelet href="enfinity:/sld_ch_b2c_base/pipelets/GetBasketProductLineItemBO.xml"/>
    <nodeSuccessors name="next" next="CreateWarrantyLineItem1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode59"/>
    <parameterBindings name="PLIID" objectPath="ProductLineItem:UUID"/>
  </nodes>
<!--@Location 17,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateWarrantyLineItem1">
    <pipelet href="enfinity:/sld_ch_b2c_base/pipelets/CreateWarrantyLineItem.xml"/>
    <nodeSuccessors name="next" next="JoinNode54"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode55"/>
    <parameterBindings name="ProductLineItem" objectPath="BasketProductLineItemBO"/>
  </nodes>
<!--@Location 17,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode54">
    <nodeSuccessors name="next" next="CallNode24"/>
  </nodes>
<!--@Location 17,10-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode24">
    <nodeSuccessors name="next" next="EndNode39"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <startNode referencedName="ProcessBasketInvalidation-InvalidateBasketCalculation"/>
  </nodes>
<!--@Location 17,11-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode39" strict="true"/>
<!--@Location 18,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode55">
<!--@BendPoints 37,19-->
    <nodeSuccessors name="next" next="JoinNode54"/>
  </nodes>
<!--@Location 18,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode59">
    <nodeSuccessors name="next" next="JoinNode55"/>
  </nodes>
<!--@Location 18,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode26">
    <nodeSuccessors name="next" next="JoinNode59"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

Adds a given warranty to a given line item. The line item can either be passed as an iterator of line items or as BasketProductLineItemBO.
@Location 26,2-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode12" strict="true" name="AddWarrantyToPLI"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode40"/>
<!--The warranty.-->
    <parameters name="Warranty" type="com.intershop.component.warranty.capi.WarrantyBO"
        optional="true"/>
<!--The product line item.-->
    <parameters name="ProductLineItems" type="java.util.Iterator" optional="true"/>
<!--The basket.-->
    <parameters name="BasketBO" type="com.intershop.component.basket.capi.BasketBO"/>
<!--The basket product line item.-->
    <parameters name="BasketProductLineItemBO" type="com.intershop.component.basket.capi.BasketProductLineItemBO"
        optional="true"/>
  </nodes>
<!--@Location 26,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode40" conditionKey="Warranty">
    <nodeSuccessors name="decision_yes" next="DecisionNode55"/>
<!--@BendPoints 51,7-->
    <nodeSuccessors name="decision_no" next="JoinNode91"/>
  </nodes>
<!--@Location 26,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode55" conditionKey="BasketProductLineItemBO">
<!--@BendPoints 56,9 56,17-->
    <nodeSuccessors name="decision_yes" next="JoinNode90"/>
    <nodeSuccessors name="decision_no" next="DecisionNode56"/>
  </nodes>
<!--@Location 26,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode90">
    <nodeSuccessors name="next" next="AddWarranty0"/>
  </nodes>
<!--@Location 26,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddWarranty0">
    <pipelet href="enfinity:/bc_orderprocess/pipelets/AddWarranty.xml"/>
    <nodeSuccessors name="next" next="JoinNode87" action="commit"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode88" action="rollback"/>
    <parameterBindings name="ProductLineItem" objectPath="BasketProductLineItemBO"/>
  </nodes>
<!--@Location 26,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode87">
    <nodeSuccessors name="next" next="EndNode30"/>
  </nodes>
<!--@Location 26,11-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode30" strict="true"/>
<!--@Location 27,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode88">
    <nodeSuccessors name="next" next="EndNode26"/>
  </nodes>
<!--@Location 27,11-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode26" name="ERROR" strict="true"/>
<!--@Location 26,5-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode56" conditionKey="ProductLineItems">
    <nodeSuccessors name="decision_yes" next="GetFirstElementOfIterator0"/>
    <nodeSuccessors name="decision_no" next="JoinNode91"/>
  </nodes>
<!--@Location 26,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetFirstElementOfIterator0">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetFirstElementOfIterator.xml"/>
    <nodeSuccessors name="next" next="GetBasketProductLineItemBO2"/>
<!--@BendPoints 55,13-->
    <nodeSuccessors name="pipelet_error" next="JoinNode89"/>
    <parameterBindings name="Iterator" objectPath="ProductLineItems"/>
    <returnValueBindings name="FirstElement" objectPath="ProductLineItem"/>
  </nodes>
<!--@Location 26,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetBasketProductLineItemBO2">
    <pipelet href="enfinity:/sld_ch_b2c_base/pipelets/GetBasketProductLineItemBO.xml"/>
    <nodeSuccessors name="next" next="JoinNode90" action="begin"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode89"/>
    <parameterBindings name="PLIID" objectPath="ProductLineItem:UUID"/>
  </nodes>
<!--@Location 27,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode89">
    <nodeSuccessors name="next" next="JoinNode88"/>
  </nodes>
<!--@Location 25,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode91">
<!--@BendPoints 51,21-->
    <nodeSuccessors name="next" next="JoinNode87"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 38,49-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode20" strict="true" name="AdjustBasketByBookingStatus"
      callMode="Private">
    <nodeSuccessors name="next" next="CallNode47"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="AdjustedItems" type="java.util.Map" optional="true"/>
    <parameters name="BookingStatus" type="com.intershop.beehive.xcs.capi.inventory.BookingStatus"
        optional="true"/>
    <parameters name="BasketBORepository" type="com.intershop.component.basket.capi.BasketBORepository"
        optional="true"/>
  </nodes>
<!--@Location 38,50-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode47">
    <nodeSuccessors name="next" next="GetBookingStatusAdjustedQuantities1"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <startNode referencedName="This:GetCurrentCartBO"/>
  </nodes>
<!--@Location 38,51-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetBookingStatusAdjustedQuantities1">
    <pipelet href="enfinity:/bts/pipelets/GetBookingStatusAdjustedQuantities.xml"/>
<!--@BendPoints 77,104-->
    <nodeSuccessors name="next" next="DecisionNode23"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
  </nodes>
<!--@Location 38,52-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode23" conditionKey="NotAvailableProducts"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="CallNode9"/>
<!--@BendPoints 78,107 78,109-->
    <nodeSuccessors name="decision_no" next="JoinNode39"/>
  </nodes>
<!--@Location 38,53-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode9">
    <nodeSuccessors name="next" next="JoinNode39"/>
    <parameterBindings name="Products" objectPath="NotAvailableProducts"/>
    <startNode referencedName="ProcessB2CProduct-GetProductBOs"/>
    <returnValueBindings name="ProductBOs" objectPath="NotAvailableProductBOs"/>
  </nodes>
<!--@Location 38,54-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode39">
    <nodeSuccessors name="next" next="CallNode41"/>
  </nodes>
<!--@Location 38,55-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode41">
<!--@BendPoints 77,112-->
    <nodeSuccessors name="next" next="EndNode35"/>
    <startNode referencedName="ProcessCart-UpdateQuantities"/>
  </nodes>
<!--@Location 38,56-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode35" strict="true">
    <returnValues name="NotAvailableProducts" type="java.util.Iterator" optional="true"/>
    <returnValues name="NotAvailableProductBOs" type="java.util.Iterator" optional="true"/>
    <returnValues name="AdjustedItems" type="java.util.Map" optional="true"/>
    <returnValues name="isOrderable" type="java.lang.String"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 23,49-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode21" strict="true" name="AdjustBasketByInventoryStatus"
      callMode="Private">
<!--@BendPoints 47,100-->
    <nodeSuccessors name="next" next="GetInventoryStatusAdjustedQuantities1"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="InventoryStatusMap" type="java.util.Map" optional="true"/>
    <parameters name="AdjustedItems" type="java.util.Map" optional="true"/>
    <parameters name="BasketBO" type="com.intershop.component.basket.capi.BasketBO"/>
  </nodes>
<!--@Location 23,50-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetInventoryStatusAdjustedQuantities1">
    <pipelet href="enfinity:/bts/pipelets/GetInventoryStatusAdjustedQuantities.xml"/>
    <nodeSuccessors name="next" next="DecisionNode10"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
  </nodes>
<!--@Location 23,51-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode10" conditionKey="NotAvailableProducts"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="CallNode3"/>
<!--@BendPoints 48,103 48,105 48,107-->
    <nodeSuccessors name="decision_no" next="JoinNode9"/>
  </nodes>
<!--@Location 23,52-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode3">
    <nodeSuccessors name="next" next="JoinNode9"/>
    <parameterBindings name="Products" objectPath="NotAvailableProducts"/>
    <startNode referencedName="ProcessB2CProduct-GetProductBOs"/>
    <returnValueBindings name="ProductBOs" objectPath="NotAvailableProductBOs"/>
  </nodes>
<!--@Location 23,53-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode9">
    <nodeSuccessors name="next" next="CallNode40"/>
  </nodes>
<!--@Location 23,54-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode40">
    <nodeSuccessors name="next" next="DecisionNode_nJJU8B-4EemHqNhO6CMfdQ"/>
    <startNode referencedName="ProcessCart-UpdateQuantities"/>
  </nodes>
<!--@Location 23,55-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode_nJJU8B-4EemHqNhO6CMfdQ"
      conditionKey="QuantityUpdated" operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="CallNode59"/>
<!--@BendPoints 46,112 46,114-->
    <nodeSuccessors name="decision_no" next="JoinNode_onh-gB-4EemHqNhO6CMfdQ"/>
  </nodes>
<!--@Location 23,56-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode59">
    <nodeSuccessors name="next" next="JoinNode_onh-gB-4EemHqNhO6CMfdQ"/>
    <parameterBindings name="BasketBO" objectPath="BasketBO"/>
    <startNode referencedName="ProcessBasketInvalidation-InvalidateBasketCalculation"/>
  </nodes>
<!--@Location 23,57-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode_onh-gB-4EemHqNhO6CMfdQ">
    <nodeSuccessors name="next" next="EndNode34"/>
  </nodes>
<!--@Location 23,58-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode34" strict="true">
    <returnValues name="NotAvailableProducts" type="java.util.Iterator" optional="true"/>
    <returnValues name="NotAvailableProductBOs" type="java.util.Iterator" optional="true"/>
    <returnValues name="AdjustedItems" type="java.util.Map" optional="true"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 35,49-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode19" strict="true" name="BookBasketInventory"
      callMode="Private">
<!--@BendPoints 71,100-->
    <nodeSuccessors name="next" next="BookBasketInventory1"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="Domain" type="com.intershop.beehive.core.capi.domain.Domain"/>
  </nodes>
<!--@Location 35,50-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="BookBasketInventory1">
    <configurationValues name="InventoryRequestContext" value="ProcessBasket"/>
    <pipelet href="enfinity:/bts/pipelets/BookBasketInventory.xml"/>
    <nodeSuccessors name="next" next="DecisionNode43"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <parameterBindings name="PreferenceDomain" objectPath="Domain"/>
  </nodes>
<!--@Location 35,51-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode43" conditionKey="BookingStatus:Booked"
      operator="str_eq" conditionValue="true">
<!--@BendPoints 71,104-->
    <nodeSuccessors name="decision_yes" next="DecisionNode44"/>
<!--@BendPoints 72,103-->
    <nodeSuccessors name="decision_no" next="EndNode47"/>
  </nodes>
<!--@Location 35,52-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode44" conditionKey="BookingStatus:BookedAmounts:Empty"
      operator="str_eq" conditionValue="true">
<!--@BendPoints 71,106-->
    <nodeSuccessors name="decision_yes" next="EndNode28"/>
<!--@BendPoints 72,105-->
    <nodeSuccessors name="decision_no" next="EndNode46"/>
  </nodes>
<!--@Location 35,53-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode28" name="CompletlyBooked" strict="true">
<!--"true" signals all items are available, "false" signals that something cannot be ordered-->
    <returnValues name="BasketInventoryStatus" type="java.lang.String"/>
<!--State of the actual booking-->
    <returnValues name="BookingStatus" type="com.intershop.beehive.xcs.capi.inventory.BookingStatus"/>
    <returnValues name="FailedInventoryIterator" type="java.util.Iterator&lt;com.intershop.beehive.xcs.capi.inventory.InventoryStatus>"
        optional="true"/>
  </nodes>
<!--@Location 36,52-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode46" name="PartlyBooked" strict="true">
<!--"true" signals all items are available, "false" signals that something cannot be ordered-->
    <returnValues name="BasketInventoryStatus" type="java.lang.String"/>
<!--State of the actual booking-->
    <returnValues name="BookingStatus" type="com.intershop.beehive.xcs.capi.inventory.BookingStatus"/>
    <returnValues name="FailedInventoryIterator" type="java.util.Iterator&lt;com.intershop.beehive.xcs.capi.inventory.InventoryStatus>"
        optional="true"/>
  </nodes>
<!--@Location 36,51-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode47" name="NotBooked" strict="true">
<!--"true" signals all items are available, "false" signals that something cannot be ordered-->
    <returnValues name="BasketInventoryStatus" type="java.lang.String"/>
<!--State of the actual booking-->
    <returnValues name="BookingStatus" type="com.intershop.beehive.xcs.capi.inventory.BookingStatus"/>
    <returnValues name="FailedInventoryIterator" type="java.util.Iterator&lt;com.intershop.beehive.xcs.capi.inventory.InventoryStatus>"
        optional="true"/>
  </nodes>
<!--@padss
@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 1,35-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode1" strict="true" name="Calculate"
      callMode="Private">
<!--@BendPoints 3,72-->
    <nodeSuccessors name="next" next="GetOrganizationByDomain5"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="CurrentAppContext" type="com.intershop.beehive.app.capi.AppContext"/>
    <parameters name="BasketBORepository" type="com.intershop.component.basket.capi.BasketBORepository"
        optional="true"/>
    <parameters name="BasketBO" type="com.intershop.component.basket.capi.BasketBO"
        optional="true"/>
  </nodes>
<!--@Location 1,36-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetOrganizationByDomain5">
    <pipelet href="enfinity:/bc_organization/pipelets/GetOrganizationByDomain.xml"/>
<!--@BendPoints 3,74-->
    <nodeSuccessors name="next" next="GetDomainPreference3"/>
    <parameterBindings name="OrganizationDomain" objectPath="Cart:Domain"/>
  </nodes>
<!--@Location 1,37-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference3">
    <configurationValues name="DefaultPreferenceKey" value="PriceType"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
<!--@BendPoints 3,76-->
    <nodeSuccessors name="next" next="StartSafeChangesBlock3"/>
    <parameterBindings name="PreferenceDomain" objectPath="Organization:OwningDomain"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="PriceType"/>
  </nodes>
<!--@Location 1,38-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="StartSafeChangesBlock3">
    <pipelet href="enfinity:/core/pipelets/StartSafeChangesBlock.xml"/>
<!--@BendPoints 3,78-->
    <nodeSuccessors name="next" next="Call2" action="begin"/>
  </nodes>
<!--@Location 1,39-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call2">
<!--@BendPoints 3,80-->
    <nodeSuccessors name="next" next="EndSafeChangesBlock4" action="commit"/>
    <startNode referencedName="ProcessCartCalculation-Start"/>
  </nodes>
<!--@Location 1,40-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="EndSafeChangesBlock4">
    <pipelet href="enfinity:/core/pipelets/EndSafeChangesBlock.xml"/>
    <nodeSuccessors name="next" next="DecisionNode47"/>
  </nodes>
<!--@Location 1,41-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode47" conditionKey="BasketBO">
    <nodeSuccessors name="decision_yes" next="JoinNode73"/>
<!--@BendPoints 5,83 5,84-->
    <nodeSuccessors name="decision_no" next="DecisionNode45"/>
  </nodes>
<!--@Location 1,44-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode73">
    <nodeSuccessors name="next" next="InvalidateBusinessObject1"/>
  </nodes>
<!--@Location 1,45-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="InvalidateBusinessObject1">
    <pipelet href="enfinity:/core/pipelets/InvalidateBusinessObject.xml"/>
    <nodeSuccessors name="next" next="JoinNode72"/>
    <parameterBindings name="BusinessObject" objectPath="BasketBO"/>
    <parameterBindings name="BusinessObjects" nullBinding="true"/>
  </nodes>
<!--@Location 1,46-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode72">
<!--@BendPoints 3,94-->
    <nodeSuccessors name="next" next="EndNode5"/>
  </nodes>
<!--@Location 1,47-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode5" strict="true"/>
<!--@Location 2,42-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode45" conditionKey="BasketBORepository">
<!--@BendPoints 5,86-->
    <nodeSuccessors name="decision_yes" next="CallNode51"/>
<!--@BendPoints 6,85 6,93-->
    <nodeSuccessors name="decision_no" next="JoinNode72"/>
  </nodes>
<!--@Location 2,43-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode51">
<!--@BendPoints 5,89-->
    <nodeSuccessors name="next" next="JoinNode73"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <startNode referencedName="ProcessCart-GetCurrentCartBO"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use PipelineNode ValidateBasket with scope "Addresses" instead.
@Location 1,49-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode9" strict="true" name="CheckAddresses"
      callMode="Private">
    <nodeSuccessors name="next" next="GetBasketBORepositoryFromAppContext0"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.LineItemCtnr"/>
  </nodes>
<!--@Location 1,50-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetBasketBORepositoryFromAppContext0">
    <pipelet href="enfinity:/bc_basket/pipelets/GetBasketBORepositoryFromAppContext.xml"/>
    <nodeSuccessors name="next" next="GetBasketBO0"/>
  </nodes>
<!--@Location 1,51-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetBasketBO0">
    <pipelet href="enfinity:/bc_basket/pipelets/GetBasketBO.xml"/>
    <nodeSuccessors name="next" next="ValidateBasket0_Input"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
  </nodes>
<!--@Location 1,52-->
  <nodes xsi:type="pipeline:PipelineNodeNode" nodeID="ValidateBasket0">
    <configurationValues name="AllowAdjustments" value="true"/>
    <configurationValues name="StopOnError" value="StopOnError"/>
    <pipelet href="enfinity:/bc_basket/pipelets/com.intershop.component.basket.pipelet.ValidateBasket.pipelinenode"/>
    <inConnectors name="Input">
      <parameterBindings name="Scopes" constant="Addresses"/>
    </inConnectors>
    <outConnectors name="Success">
<!--@BendPoints 1,105-->
      <nodeSuccessors next="EndNode19"/>
    </outConnectors>
    <outConnectors name="Error">
      <nodeSuccessors next="KeyMapper14"/>
    </outConnectors>
    <outConnectors name="Adjusted">
      <nodeSuccessors next="KeyMapper14"/>
    </outConnectors>
  </nodes>
<!--@Location 0,56-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode19" strict="true"/>
<!--@Location 1,53-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper14">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="DecisionNode42"/>
    <parameterBindings name="InValue_1" objectPath="BasketValidationResults:FailuresByCode(&quot;InvoiceToAddressMissing&quot;)"/>
    <returnValueBindings name="OutValue_1" objectPath="InvoiceToAddressMissing"/>
  </nodes>
<!--@Location 2,53-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode42" conditionKey="InvoiceToAddressMissing"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="SetDictionaryValue4"/>
    <nodeSuccessors name="decision_no" next="KeyMapper15"/>
  </nodes>
<!--@Location 3,53-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue4">
    <configurationValues name="Name" value="ERROR_Address"/>
    <configurationValues name="Value" value="InvoiceToAddress"/>
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/core/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 9,107-->
    <nodeSuccessors name="next" next="JoinNode93"/>
  </nodes>
<!--@Location 4,54-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode93">
    <nodeSuccessors name="next" next="JoinNode37"/>
  </nodes>
<!--@Location 4,55-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode37">
    <nodeSuccessors name="next" next="EndNode22"/>
  </nodes>
<!--@Location 4,56-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode22" name="ERROR" strict="true">
    <returnValues name="ERROR_Address" type="java.lang.String"/>
  </nodes>
<!--@Location 2,54-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper15">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="DecisionNode61"/>
    <parameterBindings name="InValue_1" objectPath="BasketValidationResults:FailuresByCode(&quot;ShipToAddressMissing&quot;)"/>
    <returnValueBindings name="OutValue_1" objectPath="ShipToAddressMissing"/>
  </nodes>
<!--@Location 3,54-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode61" conditionKey="ShipToAddressMissing"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="SetDictionaryValue0"/>
    <nodeSuccessors name="decision_no" next="JoinNode93"/>
  </nodes>
<!--@Location 3,55-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue0">
    <configurationValues name="Name" value="ERROR_Address"/>
    <configurationValues name="Value" value="ShipToAddress"/>
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/core/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode37"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 5,49-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start10" strict="true" name="CheckAvailability"
      callMode="Private">
    <nodeSuccessors name="next" next="GetCurrentDate1"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
  </nodes>
<!--@Location 5,50-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetCurrentDate1">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetCurrentDate.xml"/>
    <nodeSuccessors name="next" next="LoopNode4"/>
  </nodes>
<!--@Location 5,51-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode4" loop="Cart:ProductLineItems">
<!--@BendPoints 17,103-->
    <nodeSuccessors name="next" next="DecisionNode4"/>
    <entry key="ProductLineItem">
      <nodeSuccessors name="loop_entry_next" next="DecisionNode6"/>
    </entry>
  </nodes>
<!--@Location 5,52-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode6" conditionKey="ProductLineItem:Adhoc"
      operator="str_neq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="GetProductByProductRef1"/>
<!--@BendPoints 16,106 16,123-->
    <nodeSuccessors name="decision_no" next="JoinNode15"/>
  </nodes>
<!--@Location 5,53-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductByProductRef1">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductByProductRef.xml"/>
    <nodeSuccessors name="next" next="Decision4"/>
<!--@BendPoints 15,107-->
    <nodeSuccessors name="pipelet_error" next="JoinNode14"/>
    <parameterBindings name="ProductRef" objectPath="ProductLineItem:OfferProductRef"/>
    <parameterBindings name="ProductRefID" nullBinding="true"/>
    <parameterBindings name="ProductRefIDs" nullBinding="true"/>
    <parameterBindings name="ProductRefs" nullBinding="true"/>
    <returnValueBindings name="Products" nullBinding="true"/>
    <returnValueBindings name="ProductsHash" nullBinding="true"/>
  </nodes>
<!--@Location 5,54-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision4" conditionKey="Product:isOnline"
      operator="str_eq" conditionValue="true">
<!--@BendPoints 11,110-->
    <nodeSuccessors name="decision_yes" next="Decision3"/>
    <nodeSuccessors name="decision_no" next="JoinNode14"/>
  </nodes>
<!--@Location 5,55-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision3" conditionKey="Product:isAvailable"
      operator="str_eq" conditionValue="true">
<!--@BendPoints 11,112-->
    <nodeSuccessors name="decision_yes" next="DecisionNode24"/>
    <nodeSuccessors name="decision_no" next="JoinNode10"/>
  </nodes>
<!--@Location 5,56-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode24" conditionKey="Product:EndOfLife"
      operator="undef">
    <nodeSuccessors name="decision_yes" next="JoinNode28"/>
<!--@BendPoints 13,113 13,114-->
    <nodeSuccessors name="decision_no" next="DecisionNode26"/>
  </nodes>
<!--@Location 5,58-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode28">
    <nodeSuccessors name="next" next="DecisionNode25"/>
  </nodes>
<!--@Location 5,59-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode25" conditionKey="Product:LastOrderDate"
      operator="undef">
    <nodeSuccessors name="decision_yes" next="JoinNode11"/>
<!--@BendPoints 13,118-->
    <nodeSuccessors name="decision_no" next="DecisionNode22"/>
  </nodes>
<!--@Location 5,61-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode11">
<!--@BendPoints 10,123 10,106 10,104-->
    <nodeSuccessors name="next" next="LoopNode4_Entry"/>
  </nodes>
<!--@Location 6,59-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode22" conditionKey="Product:LastOrderDate:Time"
      operator="gt" conditionItem="CurrentDate:Time">
    <nodeSuccessors name="decision_yes" next="JoinNode82"/>
    <nodeSuccessors name="decision_no" next="JoinNode29"/>
  </nodes>
<!--@Location 6,61-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode82">
    <nodeSuccessors name="next" next="JoinNode11"/>
  </nodes>
<!--@Location 7,59-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode29">
    <nodeSuccessors name="next" next="AddObjectToVector3"/>
  </nodes>
<!--@Location 7,60-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector3">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode15"/>
    <parameterBindings name="InVector" objectPath="NotAvailableProductsVector"/>
    <parameterBindings name="Object" objectPath="ProductLineItem:ProductName"/>
    <returnValueBindings name="Iterator" objectPath="NotAvailableProducts"/>
    <returnValueBindings name="OutVector" objectPath="NotAvailableProductsVector"/>
  </nodes>
<!--@Location 7,61-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode15">
    <nodeSuccessors name="next" next="JoinNode82"/>
  </nodes>
<!--@Location 6,57-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode26" conditionKey="Product:EndOfLife:Time"
      operator="gt" conditionItem="CurrentDate:Time">
<!--@BendPoints 13,117-->
    <nodeSuccessors name="decision_yes" next="JoinNode28"/>
    <nodeSuccessors name="decision_no" next="JoinNode27"/>
  </nodes>
<!--@Location 7,57-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode27">
    <nodeSuccessors name="next" next="JoinNode29"/>
  </nodes>
<!--@Location 7,55-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode10">
    <nodeSuccessors name="next" next="JoinNode27"/>
  </nodes>
<!--@Location 7,54-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode14">
    <nodeSuccessors name="next" next="JoinNode10"/>
  </nodes>
<!--@Location 8,52-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode4" conditionKey="NotAvailableProducts">
<!--@BendPoints 17,106-->
    <nodeSuccessors name="decision_yes" next="EndNode23"/>
<!--@BendPoints 19,105-->
    <nodeSuccessors name="decision_no" next="EndNode18"/>
  </nodes>
<!--@Location 8,53-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode23" name="ERROR" strict="true">
    <returnValues name="NotAvailableProducts" type="java.util.Iterator"/>
  </nodes>
<!--@Location 9,53-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode18" strict="true"/>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 21,49-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode18" strict="true" name="CheckInventory"
      callMode="Private">
    <nodeSuccessors name="next" next="CheckBasketInventory1"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="PreferenceDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
  </nodes>
<!--@Location 21,50-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckBasketInventory1">
    <configurationValues name="InventoryRequestContext" value="ProcessBasket"/>
    <pipelet href="enfinity:/bts/pipelets/CheckBasketInventory.xml"/>
<!--@BendPoints 43,102-->
    <nodeSuccessors name="next" next="EndNode31"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
  </nodes>
<!--@Location 21,51-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode31" strict="true">
    <returnValues name="InventoryStatusMap" type="java.util.Map&lt;java.lang.String,com.intershop.beehive.xcs.capi.inventory.InventoryStatus>"/>
    <returnValues name="BasketInventoryStatus" type="java.lang.String"/>
    <returnValues name="FailedInventoryIterator" type="java.util.Iterator&lt;com.intershop.beehive.xcs.capi.inventory.InventoryStatus>"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use PipelineNode ValidateBasket with scope "Addresses" instead.
@Location 1,57-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode11" strict="true" name="CheckPLIShipToAddress"
      callMode="Private">
    <nodeSuccessors name="next" next="LoopNode7"/>
    <parameters name="ProductLineItemIterator" type="java.util.Iterator"/>
  </nodes>
<!--@Location 1,58-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode7" loop="ProductLineItemIterator">
<!--@BendPoints 6,117-->
    <nodeSuccessors name="next" next="EndNode17"/>
    <entry key="ProductLineItem">
      <nodeSuccessors name="loop_entry_next" next="DecisionNode41"/>
    </entry>
  </nodes>
<!--@Location 1,59-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode41" conditionKey="ProductLineItem:ShipToAddress">
    <nodeSuccessors name="decision_yes" next="LoopNode2"/>
<!--@BendPoints 7,119-->
    <nodeSuccessors name="decision_no" next="JoinNode68"/>
  </nodes>
<!--@Location 1,60-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode2" loop="ProductLineItem:DependentProductLineItems">
<!--@BendPoints 4,121 4,126 1,126 1,117-->
    <nodeSuccessors name="next" next="LoopNode7_Entry"/>
    <entry key="DependentProductLineItem">
      <nodeSuccessors name="loop_entry_next" next="DecisionNode13"/>
    </entry>
  </nodes>
<!--@Location 1,61-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode13" conditionKey="DependentProductLineItem:ShipToAddress">
<!--@BendPoints 3,124 2,124 2,121-->
    <nodeSuccessors name="decision_yes" next="LoopNode2_Entry"/>
    <nodeSuccessors name="decision_no" next="JoinNode68"/>
  </nodes>
<!--@Location 3,61-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode68">
<!--@BendPoints 7,124-->
    <nodeSuccessors name="next" next="EndNode16"/>
  </nodes>
<!--@Location 3,62-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode16" name="ERROR" strict="true"/>
<!--@Location 3,58-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode17" strict="true"/>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

Collects all free and hidden gifts which exist within a given iterator.
@Location 63,48-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode15" strict="true" name="CollectGiftBOsToRemove"
      callMode="Private">
    <nodeSuccessors name="next" next="AddObjectToVector10"/>
    <parameters name="NotAvailableProducts" type="java.util.Iterator"/>
    <parameters name="Gift" type="com.intershop.component.product.capi.ProductBO"/>
    <parameters name="NotAvailableProductsVector" type="java.util.Vector" optional="true"/>
  </nodes>
<!--@Location 63,49-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector10">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="LoopNode0"/>
    <parameterBindings name="InVector" objectPath="NotAvailableProductsVector"/>
    <returnValueBindings name="Iterator" objectPath="GiftsToRemoveIterator"/>
    <returnValueBindings name="OutVector" objectPath="NotAvailableProductsVector"/>
  </nodes>
<!--@Location 63,50-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode0" loop="NotAvailableProducts">
    <nodeSuccessors name="next" next="EndNode52"/>
    <entry key="NAP">
      <nodeSuccessors name="loop_entry_next" next="DecisionNode68"/>
    </entry>
  </nodes>
<!--@Location 63,51-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode68" conditionKey="NAP:ID"
      operator="str_eq" conditionItem="Gift:ID">
    <nodeSuccessors name="decision_yes" next="AddObjectToVector9"/>
<!--@BendPoints 129,103 129,107-->
    <nodeSuccessors name="decision_no" next="JoinNode100"/>
  </nodes>
<!--@Location 63,52-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector9">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode100"/>
    <parameterBindings name="InVector" objectPath="NotAvailableProductsVector"/>
    <parameterBindings name="Object" objectPath="NAP"/>
    <returnValueBindings name="Iterator" objectPath="GiftsToRemoveIterator"/>
    <returnValueBindings name="OutVector" objectPath="NotAvailableProductsVector"/>
  </nodes>
<!--@Location 63,53-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode100">
<!--@BendPoints 125,107 125,101-->
    <nodeSuccessors name="next" next="LoopNode0_Entry"/>
  </nodes>
<!--@Location 64,50-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode52" strict="true">
    <returnValues name="GiftsToRemoveIterator" type="java.util.Iterator"/>
    <returnValues name="NotAvailableProductsVector" type="java.util.Vector"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

Collects all free and hidden gifts which exist within a given iterator.
@Location 56,48-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode34" strict="true" name="CollectGiftsToRemove"
      callMode="Private">
    <nodeSuccessors name="next" next="AddObjectToVector0"/>
    <parameters name="NotAvailableProducts" type="java.util.Iterator"/>
    <parameters name="Gift" type="com.intershop.beehive.xcs.capi.product.Product"/>
    <parameters name="NotAvailableProductsVector" type="java.util.Vector" optional="true"/>
  </nodes>
<!--@Location 56,49-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector0">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="LoopNode22"/>
    <parameterBindings name="InVector" objectPath="NotAvailableProductsVector"/>
    <returnValueBindings name="Iterator" objectPath="GiftsToRemoveIterator"/>
    <returnValueBindings name="OutVector" objectPath="NotAvailableProductsVector"/>
  </nodes>
<!--@Location 56,50-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode22" loop="NotAvailableProducts">
    <nodeSuccessors name="next" next="EndNode51"/>
    <entry key="NAP">
<!--@BendPoints 113,102-->
      <nodeSuccessors name="loop_entry_next" next="DecisionNode58"/>
    </entry>
  </nodes>
<!--@Location 56,51-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode58" conditionKey="NAP:UUID">
    <nodeSuccessors name="decision_yes" next="DecisionNode64"/>
<!--@BendPoints 119,103-->
    <nodeSuccessors name="decision_no" next="DecisionNode66"/>
  </nodes>
<!--@Location 56,52-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode64" conditionKey="Gift:UUID">
<!--@BendPoints 111,105-->
    <nodeSuccessors name="decision_yes" next="DecisionNode59"/>
<!--@BendPoints 115,105-->
    <nodeSuccessors name="decision_no" next="DecisionNode65"/>
  </nodes>
<!--@Location 55,53-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode59" conditionKey="NAP:UUID"
      operator="str_eq" conditionItem="Gift:UUID">
<!--@BendPoints 111,111-->
    <nodeSuccessors name="decision_yes" next="JoinNode84"/>
<!--@BendPoints 112,107 114,109-->
    <nodeSuccessors name="decision_no" next="JoinNode95"/>
  </nodes>
<!--@Location 56,55-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode84">
    <nodeSuccessors name="next" next="AddObjectToVector11"/>
  </nodes>
<!--@Location 56,56-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector11">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode85"/>
    <parameterBindings name="InVector" objectPath="NotAvailableProductsVector"/>
    <parameterBindings name="Object" objectPath="NAP"/>
    <returnValueBindings name="Iterator" objectPath="GiftsToRemoveIterator"/>
    <returnValueBindings name="OutVector" objectPath="NotAvailableProductsVector"/>
  </nodes>
<!--@Location 56,57-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode85">
<!--@BendPoints 110,115 110,101-->
    <nodeSuccessors name="next" next="LoopNode22_Entry"/>
  </nodes>
<!--@Location 57,54-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode95">
    <nodeSuccessors name="next" next="JoinNode81"/>
  </nodes>
<!--@Location 57,57-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode81">
    <nodeSuccessors name="next" next="JoinNode85"/>
  </nodes>
<!--@Location 57,53-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode65" conditionKey="NAP:UUID"
      operator="str_eq" conditionItem="Gift:ID">
<!--@BendPoints 113,107-->
    <nodeSuccessors name="decision_yes" next="JoinNode84"/>
    <nodeSuccessors name="decision_no" next="JoinNode95"/>
  </nodes>
<!--@Location 59,52-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode66" conditionKey="Gift:UUID">
<!--@BendPoints 117,105-->
    <nodeSuccessors name="decision_yes" next="DecisionNode60"/>
<!--@BendPoints 121,105-->
    <nodeSuccessors name="decision_no" next="DecisionNode67"/>
  </nodes>
<!--@Location 58,53-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode60" conditionKey="NAP:ID"
      operator="str_eq" conditionItem="Gift:UUID">
    <nodeSuccessors name="decision_yes" next="JoinNode96"/>
<!--@BendPoints 118,107-->
    <nodeSuccessors name="decision_no" next="JoinNode97"/>
  </nodes>
<!--@Location 58,55-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode96">
    <nodeSuccessors name="next" next="JoinNode84"/>
  </nodes>
<!--@Location 60,55-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode97">
<!--@BendPoints 121,115-->
    <nodeSuccessors name="next" next="JoinNode81"/>
  </nodes>
<!--@Location 60,53-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode67" conditionKey="NAP:ID"
      operator="str_eq" conditionItem="Gift:ID">
    <nodeSuccessors name="decision_yes" next="JoinNode96"/>
    <nodeSuccessors name="decision_no" next="JoinNode97"/>
  </nodes>
<!--@Location 57,50-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode51" strict="true">
    <returnValues name="GiftsToRemoveIterator" type="java.util.Iterator"/>
    <returnValues name="NotAvailableProductsVector" type="java.util.Vector"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 46,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode17" strict="true" name="CopyGiftCardAttributes"
      callMode="Private">
<!--@BendPoints 93,32-->
    <nodeSuccessors name="next" next="GetProductType1"/>
    <parameters name="Category" type="com.intershop.beehive.xcs.internal.catalog.ProductCategoryAssignment"/>
    <parameters name="ProductLineItem" type="com.intershop.beehive.bts.capi.orderprocess.ProductLineItem"/>
  </nodes>
<!--@Location 46,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductType1">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductType.xml"/>
    <nodeSuccessors name="next" next="JoinNode41"/>
<!--@BendPoints 94,33 94,35-->
    <nodeSuccessors name="pipelet_error" next="JoinNode41"/>
    <parameterBindings name="ProductTypeDomainName" objectPath="Category:CatalogCategory:Domain:DomainName"/>
    <parameterBindings name="ProductTypeName" objectPath="Category:CatalogCategory:Name"/>
    <parameterBindings name="ProductTypeUUID" nullBinding="true"/>
  </nodes>
<!--@Location 46,17-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode41">
<!--@BendPoints 93,36-->
    <nodeSuccessors name="next" next="LoopNode12"/>
  </nodes>
<!--@Location 46,18-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode12" loop="ProductType:CustomProductAttributes">
<!--@BendPoints 97,37 97,44-->
    <nodeSuccessors name="next" next="EndNode1"/>
    <entry key="GiftCardSpecificCustomAttribute">
      <nodeSuccessors name="loop_entry_next" next="GetStringIndexOf2"/>
    </entry>
  </nodes>
<!--@Location 46,19-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetStringIndexOf2">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetStringIndexOf.xml"/>
    <nodeSuccessors name="next" next="DecisionNode20"/>
<!--@BendPoints 96,39 96,45-->
    <nodeSuccessors name="pipelet_error" next="JoinNode40"/>
    <parameterBindings name="MainString" objectPath="GiftCardSpecificCustomAttribute:Name"/>
    <parameterBindings name="SubString" constant="GC_ORDER_REQUIRED_"/>
  </nodes>
<!--@Location 46,20-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode20" conditionKey="IndexOf"
      operator="eq" conditionValue="0">
    <nodeSuccessors name="decision_yes" next="UpdateCustomAttribute1"/>
<!--@BendPoints 95,41 95,45-->
    <nodeSuccessors name="decision_no" next="JoinNode40"/>
  </nodes>
<!--@Location 46,21-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateCustomAttribute1">
    <configurationValues name="DefaultAttributeType" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateCustomAttribute.xml"/>
    <nodeSuccessors name="next" next="JoinNode40"/>
<!--@BendPoints 94,43 94,45-->
    <nodeSuccessors name="pipelet_error" next="JoinNode40"/>
    <parameterBindings name="AttributeName" objectPath="GiftCardSpecificCustomAttribute:Name"/>
    <parameterBindings name="AttributeValue" objectPath="GiftCardSpecificCustomAttribute:DefaultStringValue"/>
    <parameterBindings name="ExtensibleObject" objectPath="ProductLineItem"/>
  </nodes>
<!--@Location 46,22-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode40">
<!--@BendPoints 92,45 92,37-->
    <nodeSuccessors name="next" next="LoopNode12_Entry"/>
  </nodes>
<!--@Location 48,22-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode1" strict="true"/>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 46,26-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode30" strict="true" name="CreateGiftCardStaticAddress"
      callMode="Private">
    <nodeSuccessors name="next" next="StartSafeChangesBlock1"/>
    <parameters name="NewProductLineItems" type="java.util.Iterator"/>
    <parameters name="ApplicationBO" type="com.intershop.component.application.capi.ApplicationBO"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="CurrentAppContext" type="com.intershop.beehive.app.capi.AppContext"/>
    <parameters name="RecipientEmail" type="java.lang.String"/>
    <parameters name="RecipientName" type="java.lang.String"/>
    <parameters name="UserName" type="java.lang.String"/>
    <parameters name="UserEmail" type="java.lang.String"/>
    <parameters name="Greeting" type="java.lang.String"/>
  </nodes>
<!--@Location 46,27-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="StartSafeChangesBlock1">
    <configurationValues name="SafeChangeOverrideProperty" value="intershop.CSRFGuard.overrideSafeBlock.CreateGiftCard"/>
    <pipelet href="enfinity:/core/pipelets/StartSafeChangesBlock.xml"/>
    <nodeSuccessors name="next" next="CallNode48"/>
  </nodes>
<!--@Location 46,28-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode48">
    <nodeSuccessors name="next" next="LoopNode17"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <parameterBindings name="BasketBORepository" objectPath="ApplicationBO:Repository(&quot;BasketBORepository&quot;)"/>
    <startNode referencedName="ProcessCart-GetCurrentCartBO"/>
  </nodes>
<!--@Location 46,29-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode17" loop="NewProductLineItems">
<!--@BendPoints 94,59-->
    <nodeSuccessors name="next" next="CallNode50"/>
    <entry key="NewProductLineItem">
<!--@BendPoints 93,60-->
      <nodeSuccessors name="loop_entry_next" next="GetBasketProductLineItemBO3"/>
    </entry>
  </nodes>
<!--@Location 46,30-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetBasketProductLineItemBO3">
    <pipelet href="enfinity:/sld_ch_b2c_base/pipelets/GetBasketProductLineItemBO.xml"/>
<!--@BendPoints 93,62-->
    <nodeSuccessors name="next" next="KeyMapper9"/>
<!--@BendPoints 95,61-->
    <nodeSuccessors name="pipelet_error" next="JoinNode71"/>
    <parameterBindings name="PLIID" objectPath="NewProductLineItem:UUID"/>
  </nodes>
<!--@Location 46,31-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper9">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 93,64-->
    <nodeSuccessors name="next" next="DecisionNode14"/>
    <parameterBindings name="InValue_1" objectPath="BasketProductLineItemBO:Product:ServiceType"/>
    <returnValueBindings name="OutValue_1" objectPath="ProductServiceType"/>
  </nodes>
<!--@Location 46,32-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode14" conditionKey="ProductServiceType:DigitalGiftCard"
      operator="str_eq" conditionValue="true">
<!--@BendPoints 93,66-->
    <nodeSuccessors name="decision_yes" next="CreateStaticAddress1"/>
    <nodeSuccessors name="decision_no" next="JoinNode71"/>
  </nodes>
<!--@displayNearNode@It is important that the email is named EmailAddress.
@Location 46,33-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateStaticAddress1">
    <configurationValues name="AddressName" value="EmailAddress"/>
    <pipelet href="enfinity:/bts/pipelets/CreateStaticAddress.xml"/>
<!--@BendPoints 93,68-->
    <nodeSuccessors name="next" next="UpdateCustomAttributes1"/>
    <parameterBindings name="Email" objectPath="RecipientEmail"/>
    <parameterBindings name="FirstName" objectPath="RecipientName"/>
    <parameterBindings name="ProductLineItem" objectPath="NewProductLineItem"/>
  </nodes>
<!--@Location 46,34-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateCustomAttributes1">
    <configurationValues name="Attribute_1_Name" value="GIFTCARD_SenderName"/>
    <configurationValues name="Attribute_1_Type" value="String"/>
    <configurationValues name="Attribute_2_Name" value="GIFTCARD_SenderEmail"/>
    <configurationValues name="Attribute_2_Type" value="String"/>
    <configurationValues name="Attribute_3_Name" value="GIFTCARD_GreetingMessage"/>
    <configurationValues name="Attribute_3_Type" value="Text"/>
    <pipelet href="enfinity:/core/pipelets/UpdateCustomAttributes.xml"/>
    <nodeSuccessors name="next" next="JoinNode70"/>
    <parameterBindings name="Attribute_1_Value" objectPath="UserName"/>
    <parameterBindings name="Attribute_2_Value" objectPath="UserEmail"/>
    <parameterBindings name="Attribute_3_Value" objectPath="Greeting"/>
    <parameterBindings name="ExtensibleObject" objectPath="NewProductLineItem"/>
  </nodes>
<!--@Location 46,35-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode70">
<!--@BendPoints 92,71 92,59-->
    <nodeSuccessors name="next" next="LoopNode17_Entry"/>
  </nodes>
<!--@Location 47,32-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode71">
<!--@BendPoints 95,71-->
    <nodeSuccessors name="next" next="JoinNode70"/>
  </nodes>
<!--@Location 48,29-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode50">
    <nodeSuccessors name="next" next="CallNode44"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <startNode referencedName="ProcessShipping-SetDefaultShippingMethod"/>
  </nodes>
<!--@Location 48,30-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode44">
    <nodeSuccessors name="next" next="EndSafeChangesBlock2"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <startNode referencedName="ProcessBasketInvalidation-InvalidateBasketCalculation"/>
  </nodes>
<!--@Location 48,31-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="EndSafeChangesBlock2">
    <configurationValues name="SafeChangeOverrideProperty" value="intershop.CSRFGuard.overrideSafeBlock.CreateGiftCard"/>
    <pipelet href="enfinity:/core/pipelets/EndSafeChangesBlock.xml"/>
    <nodeSuccessors name="next" next="EndNode21"/>
  </nodes>
<!--@Location 48,32-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode21" strict="true"/>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@Location 6,2-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode7" strict="true" name="CreateNewCart"
      sessionMode="Persistent" callMode="Private">
    <nodeSuccessors name="next" next="CreateBasket1" action="begin"/>
    <parameters name="User" type="com.intershop.beehive.core.capi.user.User"/>
    <parameters name="Organization" type="com.intershop.component.organization.capi.Organization"/>
  </nodes>
<!--@Location 6,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateBasket1">
    <configurationValues name="BasketType" value="REQUISITION"/>
    <pipelet href="enfinity:/bts/pipelets/CreateBasket.xml"/>
    <nodeSuccessors name="next" next="DecisionNode11"/>
    <parameterBindings name="CurrentDomain" objectPath="Organization:OrganizationDomain"/>
    <parameterBindings name="CurrentUser" objectPath="User"/>
    <returnValueBindings name="Basket" objectPath="Cart"/>
  </nodes>
<!--@Location 6,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode11" conditionKey="CurrentSession:getObject(&quot;T_ABTestMode&quot;)"
      operator="str_eq" conditionValue="Enabled">
    <nodeSuccessors name="decision_yes" next="CallNode17"/>
<!--@BendPoints 14,9 14,13-->
    <nodeSuccessors name="decision_no" next="JoinNode18"/>
  </nodes>
<!--@Location 6,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode17">
    <nodeSuccessors name="next" next="JoinNode18"/>
    <startNode referencedName="ProcessABTesting-LogBasketCreationEvent"/>
  </nodes>
<!--@Location 6,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode18">
    <nodeSuccessors name="next" next="EndNode15" action="commit"/>
  </nodes>
<!--@Location 6,8-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode15" strict="true">
    <returnValues name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
  </nodes>
<!--@padss
@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

Returns always a CurrentCart and CurrentCartBO if not already given for actual user \- either an existing one or generates a new one
Method might create a new persistent CurrentCart object in the database. For performance issues use only in case a CurrentCart has to be created if none exists. Otherwise use GetExistingCart instead.
@Location 3,2-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode3" strict="true" name="GetCurrentCart"
      callMode="Private">
<!--@BendPoints 7,6-->
    <nodeSuccessors name="next" next="CallNode6"/>
    <parameters name="User" type="com.intershop.beehive.core.capi.user.User"/>
    <parameters name="Organization" type="com.intershop.component.organization.capi.Organization"/>
    <parameters name="CurrentCart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"
        optional="true"/>
    <parameters name="BasketBORepository" type="com.intershop.component.basket.capi.BasketBORepository"
        optional="true"/>
  </nodes>
<!--@Location 3,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode6">
    <nodeSuccessors name="next" next="JoinNode66"/>
    <nodeSuccessors name="ERROR" next="StartSafeChangesBlock2"/>
    <startNode referencedName="ProcessCart-GetExistingCart"/>
  </nodes>
<!--@Location 3,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode66">
    <nodeSuccessors name="next" next="EndNode8"/>
  </nodes>
<!--@Location 3,10-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode8" name="" strict="true">
    <returnValues name="CurrentCart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <returnValues name="PriceType" type="java.lang.String"/>
    <returnValues name="CurrentCartBO" type="com.intershop.component.basket.capi.BasketBO"
        optional="true"/>
  </nodes>
<!--@Location 4,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="StartSafeChangesBlock2">
    <pipelet href="enfinity:/core/pipelets/StartSafeChangesBlock.xml"/>
    <nodeSuccessors name="next" next="CallNode19"/>
  </nodes>
<!--@Location 4,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode19">
    <nodeSuccessors name="next" next="CallNode45"/>
    <startNode referencedName="ProcessCart-CreateNewCart"/>
    <returnValueBindings name="Cart" objectPath="CurrentCart"/>
  </nodes>
<!--@Location 4,6-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode45">
    <nodeSuccessors name="next" next="EndSafeChangesBlock3"/>
    <parameterBindings name="Basket" objectPath="CurrentCart"/>
    <startNode referencedName="ProcessCart-GetCurrentCartBO"/>
    <returnValueBindings name="BasketBO" objectPath="CurrentCartBO"/>
  </nodes>
<!--@Location 4,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="EndSafeChangesBlock3">
    <pipelet href="enfinity:/core/pipelets/EndSafeChangesBlock.xml"/>
    <nodeSuccessors name="next" next="JoinNode66"/>
  </nodes>
<!--@padss
@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@displayNearNode@get BasketBO for a given Basket
@Location 9,2-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode14" strict="true" name="GetCurrentCartBO"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode2"/>
    <parameters name="Basket" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"
        optional="true"/>
    <parameters name="BasketBORepository" type="com.intershop.component.basket.capi.BasketBORepository"/>
  </nodes>
<!--@Location 9,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode2" conditionKey="Basket">
    <nodeSuccessors name="decision_yes" next="GetBasketBO1"/>
<!--@BendPoints 20,7 20,11-->
    <nodeSuccessors name="decision_no" next="JoinNode23"/>
  </nodes>
<!--@Location 9,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetBasketBO1">
    <pipelet href="enfinity:/bc_basket/pipelets/GetBasketBO.xml"/>
    <nodeSuccessors name="next" next="JoinNode23"/>
  </nodes>
<!--@Location 9,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode23">
<!--@BendPoints 19,12-->
    <nodeSuccessors name="next" next="EndNode29"/>
  </nodes>
<!--@Location 9,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode29" strict="true">
    <returnValues name="BasketBO" type="com.intershop.component.basket.capi.BasketBO"/>
  </nodes>
<!--@padss
@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

Returns a CurrentCart and CurrentCartBO if not already given for actual user \- if one exists
@Location 0,2-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode29" strict="true" name="GetExistingCart"
      callMode="Private">
    <nodeSuccessors name="next" next="GetDomainPreference2"/>
    <parameters name="User" type="com.intershop.beehive.core.capi.user.User"/>
    <parameters name="Organization" type="com.intershop.component.organization.capi.Organization"/>
    <parameters name="CurrentCart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"
        optional="true"/>
    <parameters name="BasketBORepository" type="com.intershop.component.basket.capi.BasketBORepository"
        optional="true"/>
  </nodes>
<!--@Location 0,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference2">
    <configurationValues name="DefaultPreferenceKey" value="PriceType"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="JoinNode30"/>
<!--@BendPoints 2,7 2,9-->
    <nodeSuccessors name="pipelet_error" next="JoinNode30"/>
    <parameterBindings name="PreferenceDomain" objectPath="Organization:OwningDomain"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="PriceType"/>
  </nodes>
<!--@Location 0,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode30">
    <nodeSuccessors name="next" next="DecisionNode36"/>
  </nodes>
<!--@Location 0,5-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode36" conditionKey="CurrentCart"
      operator="undef">
    <nodeSuccessors name="decision_yes" next="JoinNode64"/>
<!--@BendPoints 2,11-->
    <nodeSuccessors name="decision_no" next="DecisionNode39"/>
  </nodes>
<!--@Location 0,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode64">
    <nodeSuccessors name="next" next="Pipelet2"/>
  </nodes>
<!--@Location 0,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet2">
    <configurationValues name="BasketType" value="REQUISITION"/>
    <pipelet href="enfinity:/bts/pipelets/GetBasket.xml"/>
    <nodeSuccessors name="next" next="JoinNode13"/>
<!--@BendPoints 3,15-->
    <nodeSuccessors name="pipelet_error" next="JoinNode98"/>
    <parameterBindings name="CurrentDomain" objectPath="Organization:OrganizationDomain"/>
    <parameterBindings name="CurrentUser" objectPath="User"/>
    <returnValueBindings name="Basket" objectPath="CurrentCart"/>
  </nodes>
<!--@Location 0,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode13">
<!--@BendPoints 1,18-->
    <nodeSuccessors name="next" next="CallNode38"/>
  </nodes>
<!--@Location 0,9-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode38">
    <nodeSuccessors name="next" next="DecisionNode69"/>
    <parameterBindings name="Basket" objectPath="CurrentCart"/>
    <startNode referencedName="ProcessCart-GetCurrentCartBO"/>
    <returnValueBindings name="BasketBO" objectPath="CurrentCartBO"/>
  </nodes>
<!--Although the BasketBO 
is a garanteed return value, 
there are situations 
where it becomes null.
So we need to check...
@Location 0,10-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode69" conditionKey="CurrentCartBO">
    <nodeSuccessors name="decision_yes" next="EndNode44"/>
    <nodeSuccessors name="decision_no" next="JoinNode98"/>
  </nodes>
<!--@Location 0,11-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode44" name="END" strict="true">
    <returnValues name="CurrentCart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"
        optional="true"/>
    <returnValues name="PriceType" type="java.lang.String"/>
    <returnValues name="CurrentCartBO" type="com.intershop.component.basket.capi.BasketBO"
        optional="true"/>
  </nodes>
<!--@Location 1,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode98">
    <nodeSuccessors name="next" next="EndNode45"/>
  </nodes>
<!--@Location 1,11-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode45" name="ERROR" strict="true">
    <returnValues name="PriceType" type="java.lang.String"/>
  </nodes>
<!--@Location 1,5-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode39" conditionKey="CurrentCart:User:ID"
      operator="str_eq" conditionItem="User:ID">
<!--@BendPoints 4,11 4,17-->
    <nodeSuccessors name="decision_yes" next="JoinNode13"/>
<!--@BendPoints 3,13-->
    <nodeSuccessors name="decision_no" next="JoinNode64"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

Collects all available free and hidden gifts of a basket.
@Location 46,49-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode32" strict="true" name="GetGiftsFromBasket"
      callMode="Private">
<!--@BendPoints 93,100-->
    <nodeSuccessors name="next" next="LoopNode18"/>
    <parameters name="CurrentCartBO" type="com.intershop.component.basket.capi.BasketBO"/>
  </nodes>
<!--@Location 46,50-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode18" loop="CurrentCartBO:AllProductLineItemBOs">
<!--@BendPoints 97,101 97,102-->
    <nodeSuccessors name="next" next="EndNode49"/>
    <entry key="PLI">
      <nodeSuccessors name="loop_entry_next" next="DecisionNode51"/>
    </entry>
  </nodes>
<!--@Location 46,51-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode51" conditionKey="PLI:FreeGift"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="JoinNode77"/>
<!--@BendPoints 95,103 95,104-->
    <nodeSuccessors name="decision_no" next="DecisionNode52"/>
  </nodes>
<!--@Location 46,53-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode77">
<!--@BendPoints 93,108-->
    <nodeSuccessors name="next" next="AddObjectToVector8"/>
  </nodes>
<!--@Location 46,54-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector8">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode78"/>
    <parameterBindings name="InVector" objectPath="GiftsVector"/>
    <parameterBindings name="Object" objectPath="PLI:Product"/>
    <returnValueBindings name="Iterator" objectPath="Gifts"/>
    <returnValueBindings name="OutVector" objectPath="GiftsVector"/>
  </nodes>
<!--@Location 46,55-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode78">
<!--@BendPoints 92,111 92,101-->
    <nodeSuccessors name="next" next="LoopNode18_Entry"/>
  </nodes>
<!--@Location 47,52-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode52" conditionKey="PLI:HiddenGift"
      operator="str_eq" conditionValue="true">
<!--@BendPoints 95,107-->
    <nodeSuccessors name="decision_yes" next="JoinNode77"/>
<!--@BendPoints 96,105 96,111-->
    <nodeSuccessors name="decision_no" next="JoinNode78"/>
  </nodes>
<!--@Location 48,51-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode49" strict="true">
    <returnValues name="Gifts" type="java.util.Iterator" optional="true"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

Gets the warranty of a given line item.
@Location 23,2-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode0" strict="true" name="GetWarrantyFromPLI"
      callMode="Private">
    <nodeSuccessors name="next" next="GetBasketProductLineItemBO0"/>
<!--The product line item.-->
    <parameters name="ProductLineItem" type="com.intershop.beehive.bts.capi.orderprocess.LineItem"/>
<!--The basket.-->
    <parameters name="BasketBO" type="com.intershop.component.basket.capi.BasketBO"/>
  </nodes>
<!--@Location 23,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetBasketProductLineItemBO0">
    <pipelet href="enfinity:/sld_ch_b2c_base/pipelets/GetBasketProductLineItemBO.xml"/>
    <nodeSuccessors name="next" next="KeyMapper12"/>
<!--@BendPoints 49,7-->
    <nodeSuccessors name="pipelet_error" next="EndNode41"/>
    <parameterBindings name="PLIID" objectPath="ProductLineItem:UUID"/>
  </nodes>
<!--@Location 23,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper12">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="EndNode0"/>
    <parameterBindings name="InValue_1" objectPath="BasketProductLineItemBO:Extension(&quot;Warranty&quot;):BasketWarrantyLineItemBO:Warranty"/>
    <returnValueBindings name="OutValue_1" objectPath="Warranty"/>
  </nodes>
<!--@Location 23,5-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode0" strict="true">
<!--The warranty.-->
    <returnValues name="Warranty" type="com.intershop.component.warranty.capi.WarrantyBO"
        optional="true"/>
  </nodes>
<!--@Location 24,5-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode41" name="ERROR" strict="true"/>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 39,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode10" strict="true" name="InitializeNewProductLineItems"
      callMode="Private">
    <nodeSuccessors name="next" next="GetFirstElementOfIterator1" action="begin"/>
    <parameters name="NewProductLineItems" type="java.util.Iterator"/>
  </nodes>
<!--@Location 39,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetFirstElementOfIterator1">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetFirstElementOfIterator.xml"/>
    <nodeSuccessors name="next" next="GetOrganizationByDomain2"/>
<!--@BendPoints 81,33-->
    <nodeSuccessors name="pipelet_error" next="JoinNode2"/>
    <parameterBindings name="Iterator" objectPath="NewProductLineItems"/>
    <returnValueBindings name="FirstElement" objectPath="ANewProductLineItem"/>
  </nodes>
<!--@Location 39,17-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetOrganizationByDomain2">
    <pipelet href="enfinity:/bc_organization/pipelets/GetOrganizationByDomain.xml"/>
    <nodeSuccessors name="next" next="KeyMapper5"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode2"/>
    <parameterBindings name="OrganizationDomain" objectPath="ANewProductLineItem:LineItemCtnr:Domain"/>
  </nodes>
<!--@Location 39,18-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper5">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="Call8"/>
    <parameterBindings name="InValue_1" objectPath="Organization:OwningDomain"/>
    <returnValueBindings name="OutValue_1" objectPath="Domain"/>
  </nodes>
<!--@Location 39,19-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call8">
    <nodeSuccessors name="next" next="EndNode20" action="commit"/>
    <startNode referencedName="ProcessOrderRequiredAttributes-CopyReqProductsAttributesByAttributeGroup"/>
  </nodes>
<!--@Location 39,21-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode20" strict="true"/>
<!--@Location 40,17-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode2">
    <nodeSuccessors name="next" next="EndNode2" action="commit"/>
  </nodes>
<!--@Location 40,21-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode2" name="ERROR" strict="true"/>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 15,49-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode8" strict="true" name="IsNewProductLineItemInNotAvailableProducts"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode5"/>
    <parameters name="Product" type="com.intershop.beehive.xcs.internal.product.ProductPO"
        optional="true"/>
    <parameters name="NotAvailableProducts" type="java.util.Iterator" optional="true"/>
  </nodes>
<!--@Location 15,50-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode5" conditionKey="NotAvailableProducts">
    <nodeSuccessors name="decision_yes" next="LoopNode6"/>
<!--@BendPoints 33,101-->
    <nodeSuccessors name="decision_no" next="JoinNode25"/>
  </nodes>
<!--@Location 15,51-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode6" loop="NotAvailableProducts">
    <nodeSuccessors name="next" next="JoinNode25"/>
    <entry key="NotAvailableProduct">
<!--@BendPoints 31,104-->
      <nodeSuccessors name="loop_entry_next" next="DecisionNode12"/>
    </entry>
  </nodes>
<!--@Location 15,52-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode12" conditionKey="Product:UUID"
      operator="str_eq" conditionItem="NotAvailableProduct:UUID">
<!--@BendPoints 31,106-->
    <nodeSuccessors name="decision_yes" next="EndNode24"/>
<!--@BendPoints 32,105 32,104 30,104 30,103-->
    <nodeSuccessors name="decision_no" next="LoopNode6_Entry"/>
  </nodes>
<!--@Location 15,53-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode24" name="YES" strict="true"/>
<!--@Location 16,51-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode25">
<!--@BendPoints 33,106-->
    <nodeSuccessors name="next" next="EndNode25"/>
  </nodes>
<!--@Location 16,53-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode25" name="NO" strict="true"/>
<!--@deprecated since 7.4.3.0
@Location 51,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode31" strict="true" name="IsProductVisible"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode50"/>
    <parameters name="CurrentUser" type="com.intershop.beehive.core.capi.user.User"/>
    <parameters name="Product" type="com.intershop.beehive.xcs.capi.product.Product"/>
    <parameters name="CurrentOrganization" type="com.intershop.component.organization.capi.Organization"
        optional="true"/>
  </nodes>
<!--@Location 51,16-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode50" conditionKey="CurrentOrganization"
      operator="undef">
    <nodeSuccessors name="decision_yes" next="CallNode56"/>
<!--@BendPoints 104,33 104,37-->
    <nodeSuccessors name="decision_no" next="JoinNode76"/>
  </nodes>
<!--@Location 51,17-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode56">
    <nodeSuccessors name="next" next="JoinNode76"/>
    <startNode referencedName="DetermineOrganizations-Current"/>
  </nodes>
<!--@Location 51,18-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode76">
<!--@BendPoints 103,38-->
    <nodeSuccessors name="next" next="DecisionNode48"/>
  </nodes>
<!--@Location 51,19-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode48" conditionKey="Product:Online"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="CallNode54"/>
<!--@BendPoints 105,39-->
    <nodeSuccessors name="decision_no" next="JoinNode75"/>
  </nodes>
<!--@Location 51,20-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode54">
<!--@BendPoints 103,42-->
    <nodeSuccessors name="next" next="DecisionNode49"/>
    <startNode referencedName="DetermineRepositories-Channel"/>
  </nodes>
<!--@Location 51,21-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode49" conditionKey="Product:DomainID"
      operator="str_eq" conditionItem="Repository:RepositoryDomain:DomainID">
    <nodeSuccessors name="decision_yes" next="CallNode53"/>
    <nodeSuccessors name="decision_no" next="JoinNode75"/>
  </nodes>
<!--@Location 51,22-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode53">
<!--@BendPoints 103,46-->
    <nodeSuccessors name="next" next="CallNode52"/>
    <parameterBindings name="CatalogFilterDomain" objectPath="CurrentOrganization:OwningDomain"/>
    <parameterBindings name="EveryoneDomain" objectPath="CurrentOrganization:OrganizationDomain"/>
    <parameterBindings name="UseFallbackToEveryoneDomain" constant="true"/>
    <startNode referencedName="GetCatalogFilters-GetFiltersByUser"/>
  </nodes>
<!--@Location 51,23-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode52">
    <nodeSuccessors name="next" next="EndNode48"/>
<!--@BendPoints 104,48-->
    <nodeSuccessors name="NOT_VISIBLE" next="JoinNode74"/>
    <startNode referencedName="GetCatalogFilters-IsProductVisible"/>
  </nodes>
<!--@Location 51,25-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode48" name="VISIBLE" strict="true"/>
<!--@Location 52,24-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode74">
<!--@BendPoints 105,50-->
    <nodeSuccessors name="next" next="EndNode10"/>
  </nodes>
<!--@Location 52,25-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode10" name="NOT_VISIBLE" strict="true"/>
<!--@Location 52,21-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode75">
    <nodeSuccessors name="next" next="JoinNode74"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@displayNearNode@Private \- for internal use only!
@Location 21,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start2" strict="true" visibility="Private"
      name="ProcessAddProduct" callMode="Private">
<!--@BendPoints 43,32 42,32 42,33-->
    <nodeSuccessors name="next" next="Decision2"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="Product" type="com.intershop.beehive.xcs.capi.product.Product"/>
    <parameters name="Quantity" type="java.lang.String" optional="true"/>
    <parameters name="PreferenceDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
    <parameters name="ForceAllowRepeats" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 21,16-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision2" conditionKey="Product:isProductMaster"
      operator="str_eq" conditionValue="true">
<!--@BendPoints 49,33-->
    <nodeSuccessors name="decision_yes" next="JoinNode69"/>
<!--@BendPoints 43,34-->
    <nodeSuccessors name="decision_no" next="Decision1"/>
  </nodes>
<!--@Location 24,21-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode69">
    <nodeSuccessors name="next" next="JoinNode20"/>
  </nodes>
<!--@Location 24,24-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode20">
    <nodeSuccessors name="next" next="JoinNode17"/>
  </nodes>
<!--@Location 24,28-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode17">
    <nodeSuccessors name="next" next="EndNode6"/>
  </nodes>
<!--@Location 24,33-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode6" name="ERROR" strict="true">
<!--If the pipelet exits with an error, this will have one of the values 'ProductNotFound', 'ProductNotOnline' 'ProductWrongType' or 'ProductFromForeignSite'-->
    <returnValues name="ERROR_Basket_Product" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 21,17-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision1" conditionKey="Product:Online"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="GetApplicationBO1"/>
<!--@BendPoints 46,35-->
    <nodeSuccessors name="decision_no" next="SetDictionaryValue1"/>
  </nodes>
<!--@Location 21,18-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetApplicationBO1">
    <pipelet href="enfinity:/bc_application/pipelets/GetApplicationBO.xml"/>
    <nodeSuccessors name="next" next="KeyMapper8"/>
  </nodes>
<!--@Location 21,19-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper8">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 43,40-->
    <nodeSuccessors name="next" next="Pipelet1"/>
    <parameterBindings name="InValue_1" objectPath="ApplicationBO:Repository(&quot;ProductBORepository&quot;)"/>
    <returnValueBindings name="OutValue_1" objectPath="ProductBORepository"/>
  </nodes>
<!--@Location 21,20-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet1">
    <pipelet href="enfinity:/bc_product/pipelets/GetProductBOByID.xml"/>
    <nodeSuccessors name="next" next="DecisionNode0"/>
<!--@BendPoints 48,41 48,44 48,47-->
    <nodeSuccessors name="pipelet_error" next="JoinNode20"/>
    <parameterBindings name="Domain" objectPath="Product:Domain"/>
    <parameterBindings name="ID" objectPath="Product:UUID"/>
  </nodes>
<!--@Location 21,21-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode0" conditionKey="ProductBO:Accessible"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="Decision5"/>
    <nodeSuccessors name="decision_no" next="SetDictionaryValue3"/>
  </nodes>
<!--@Location 21,22-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision5" conditionKey="ProductBO:OrderableAsDependentOnly"
      operator="str_neq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="DecisionNode8"/>
<!--@BendPoints 49,45-->
    <nodeSuccessors name="decision_no" next="JoinNode20"/>
  </nodes>
<!--@Location 21,23-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode8" conditionKey="Quantity">
<!--@BendPoints 43,48-->
    <nodeSuccessors name="decision_yes" next="VerifyQuantity1"/>
<!--@BendPoints 44,47 44,51-->
    <nodeSuccessors name="decision_no" next="JoinNode8"/>
  </nodes>
<!--@Location 21,24-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="VerifyQuantity1">
    <configurationValues name="MinValue" value="1"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyQuantity.xml"/>
    <nodeSuccessors name="next" next="JoinNode8"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode20"/>
    <parameterBindings name="Locale" objectPath="CurrentRequest:Locale"/>
    <parameterBindings name="LocalizedString" objectPath="Quantity"/>
    <parameterBindings name="Pattern" nullBinding="true"/>
    <parameterBindings name="Unit" nullBinding="true"/>
    <returnValueBindings name="QuantityValue" objectPath="VerifiedQuantity"/>
  </nodes>
<!--@Location 21,25-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode8">
    <nodeSuccessors name="next" next="LoopNode10"/>
  </nodes>
<!--@Location 21,26-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode10" loop="Product:BaseProduct:ProductCategoryAssignments">
<!--@BendPoints 45,53-->
    <nodeSuccessors name="next" next="DecisionNode27"/>
    <entry key="AssignedCategory">
      <nodeSuccessors name="loop_entry_next" next="DecisionNode28"/>
    </entry>
  </nodes>
<!--@Location 21,27-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode28" conditionKey="AssignedCategory:CatalogCategory:Parent:Name"
      operator="str_eq" conditionValue="ES_GiftCard">
    <nodeSuccessors name="decision_yes" next="SetDictionaryValue2"/>
<!--@BendPoints 44,55 44,59-->
    <nodeSuccessors name="decision_no" next="JoinNode42"/>
  </nodes>
<!--@Location 21,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue2">
    <configurationValues name="Name" value="isGiftCard"/>
    <configurationValues name="Value" value="true"/>
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode42"/>
  </nodes>
<!--@Location 21,29-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode42">
<!--@BendPoints 42,59 42,53-->
    <nodeSuccessors name="next" next="LoopNode10_Entry"/>
  </nodes>
<!--@Location 22,27-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode27" conditionKey="isGiftCard">
<!--@BendPoints 45,56-->
    <nodeSuccessors name="decision_yes" next="AddProductToBasket1"/>
<!--@BendPoints 47,55 47,56-->
    <nodeSuccessors name="decision_no" next="AddProductToBasket2"/>
  </nodes>
<!--@Location 22,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddProductToBasket1">
    <configurationValues name="MergeGroup" value="0"/>
    <pipelet href="enfinity:/bts/pipelets/AddProductToBasket.xml"/>
    <nodeSuccessors name="next" next="JoinNode44"/>
<!--@BendPoints 46,58-->
    <nodeSuccessors name="pipelet_error" next="JoinNode17"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <parameterBindings name="ForceAllowRepeats" constant="true"/>
    <parameterBindings name="ProductRef" objectPath="Product:ProductRef"/>
    <parameterBindings name="ProductRefID" nullBinding="true"/>
    <parameterBindings name="ProductRefIDs" nullBinding="true"/>
    <parameterBindings name="ProductRefs" nullBinding="true"/>
    <parameterBindings name="Quantity_XXX@YYY" nullBinding="true"/>
  </nodes>
<!--@Location 22,29-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode44">
    <nodeSuccessors name="next" next="ExtensionPointNode0"/>
  </nodes>
<!--@Location 22,30-->
  <nodes xsi:type="pipeline:ExtensionPointNode" nodeID="ExtensionPointNode0" name="AddedItemToBasket">
    <nodeSuccessors name="next" next="LoopNode11"/>
  </nodes>
<!--@Location 22,31-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode11" loop="Product:BaseProduct:ProductCategoryAssignments">
    <nodeSuccessors name="next" next="CallNode2"/>
    <entry key="AssignedCategory">
<!--@BendPoints 45,64-->
      <nodeSuccessors name="loop_entry_next" next="DecisionNode19"/>
    </entry>
  </nodes>
<!--@Location 22,32-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode19" conditionKey="AssignedCategory:CatalogCategory:Parent:Name"
      operator="str_eq" conditionValue="ES_GiftCard">
<!--@BendPoints 45,66 44,66 44,64 43,64-->
    <nodeSuccessors name="decision_yes" next="CallNode5"/>
<!--@BendPoints 46,65 46,67-->
    <nodeSuccessors name="decision_no" next="JoinNode36"/>
  </nodes>
<!--@Location 21,32-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode5">
    <nodeSuccessors name="next" next="JoinNode36"/>
    <parameterBindings name="Category" objectPath="AssignedCategory"/>
    <parameterBindings name="ProductLineItem" objectPath="NewProductLineItem"/>
    <startNode referencedName="ProcessCart-CopyGiftCardAttributes"/>
  </nodes>
<!--@Location 21,33-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode36">
<!--@BendPoints 42,67 42,63-->
    <nodeSuccessors name="next" next="LoopNode11_Entry"/>
  </nodes>
<!--@Location 23,32-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode2">
    <nodeSuccessors name="next" next="End7"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <startNode referencedName="ProcessBasketInvalidation-InvalidateBasketCalculation"/>
  </nodes>
<!--@Location 23,33-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End7" name="" strict="true">
<!--The newly created ProductLineItem.-->
    <returnValues name="NewProductLineItem" type="com.intershop.beehive.bts.capi.orderprocess.ProductLineItem"
        optional="true"/>
<!--If the pipelet exits with an error, this will have one of the values 'ProductNotFound', 'ProductNotOnline' 'ProductWrongType' or 'ProductFromForeignSite'-->
    <returnValues name="ERROR_Basket_Product" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 23,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddProductToBasket2">
    <configurationValues name="MergeGroup" value="0"/>
    <pipelet href="enfinity:/bts/pipelets/AddProductToBasket.xml"/>
<!--@BendPoints 47,59-->
    <nodeSuccessors name="next" next="JoinNode44"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode17"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <parameterBindings name="ProductRef" objectPath="Product:ProductRef"/>
    <parameterBindings name="ProductRefID" nullBinding="true"/>
    <parameterBindings name="ProductRefIDs" nullBinding="true"/>
    <parameterBindings name="ProductRefs" nullBinding="true"/>
    <parameterBindings name="Quantity_XXX@YYY" nullBinding="true"/>
  </nodes>
<!--@Location 22,21-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue3">
    <configurationValues name="Name" value="ERROR_Basket_Product"/>
    <configurationValues name="Value" value="ProductNotVisibleToUser"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode69"/>
  </nodes>
<!--@Location 23,17-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue1">
    <configurationValues name="Name" value="ERROR_Basket_Product"/>
    <configurationValues name="Value" value="ProductNotOnline"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 49,35-->
    <nodeSuccessors name="next" next="JoinNode69"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@displayNearNode@Private \- for internal use only!
@Location 26,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start5" strict="true" visibility="Private"
      name="ProcessAddProductByProductRefID" callMode="Private">
<!--@BendPoints 53,32-->
    <nodeSuccessors name="next" next="GetProductByProductRef2"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="ProductRefID" type="java.lang.String"/>
    <parameters name="Quantity" type="java.lang.String" optional="true"/>
    <parameters name="PreferenceDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
  </nodes>
<!--@Location 26,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductByProductRef2">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductByProductRef.xml"/>
    <nodeSuccessors name="next" next="JoinNode47"/>
<!--@BendPoints 57,33-->
    <nodeSuccessors name="pipelet_error" next="JoinNode4"/>
  </nodes>
<!--@Location 26,18-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode47">
<!--@BendPoints 53,38-->
    <nodeSuccessors name="next" next="Decision6"/>
  </nodes>
<!--@Location 26,19-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision6" conditionKey="Product:RetailSet"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="LoopNode14"/>
<!--@BendPoints 55,39 55,40-->
    <nodeSuccessors name="decision_no" next="CallNode1"/>
  </nodes>
<!--@Location 26,22-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode14" loop="Product:BundledProducts">
    <nodeSuccessors name="next" next="JoinNode24"/>
    <entry key="RetailProduct">
<!--@BendPoints 53,46-->
      <nodeSuccessors name="loop_entry_next" next="CallNode22"/>
    </entry>
  </nodes>
<!--@Location 26,23-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode22">
    <nodeSuccessors name="next" next="AddObjectToVector6"/>
    <nodeSuccessors name="ERROR" next="JoinNode48"/>
    <parameterBindings name="Product" objectPath="RetailProduct"/>
    <startNode referencedName="ProcessCart-AddProduct"/>
  </nodes>
<!--@Location 26,24-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector6">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
<!--@BendPoints 53,51 52,51 52,45-->
    <nodeSuccessors name="next" next="LoopNode14_Entry"/>
    <parameterBindings name="InVector" objectPath="NewProductLineItemsVector"/>
    <parameterBindings name="Object" objectPath="NewProductLineItem"/>
    <returnValueBindings name="Iterator" objectPath="NewProductLineItems"/>
    <returnValueBindings name="OutVector" objectPath="NewProductLineItemsVector"/>
  </nodes>
<!--@Location 28,24-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode48">
<!--@BendPoints 57,52-->
    <nodeSuccessors name="next" next="EndNode12"/>
  </nodes>
<!--@Location 28,26-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode12" name="ERROR" strict="true">
    <returnValues name="ERROR_Basket_Product" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 27,22-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode24">
<!--@BendPoints 55,52-->
    <nodeSuccessors name="next" next="End1"/>
  </nodes>
<!--@Location 27,26-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End1" name="" strict="true">
    <returnValues name="NewProductLineItems" type="java.util.Iterator" optional="true"/>
    <returnValues name="ERROR_Basket_Product" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 27,20-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode1">
<!--@BendPoints 55,42-->
    <nodeSuccessors name="next" next="AddObjectToVector7"/>
    <nodeSuccessors name="ERROR" next="JoinNode1"/>
    <startNode referencedName="ProcessCart-AddProduct"/>
  </nodes>
<!--@Location 27,21-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector7">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode24"/>
    <parameterBindings name="InVector" objectPath="NewProductLineItemsVector"/>
    <parameterBindings name="Object" objectPath="NewProductLineItem"/>
    <returnValueBindings name="Iterator" objectPath="NewProductLineItems"/>
    <returnValueBindings name="OutVector" objectPath="NewProductLineItemsVector"/>
  </nodes>
<!--@Location 28,21-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode1">
    <nodeSuccessors name="next" next="JoinNode48"/>
  </nodes>
<!--@Location 28,19-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode4">
    <nodeSuccessors name="next" next="JoinNode1"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@displayNearNode@Private \- for internal use only!
@Location 32,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start4" strict="true" visibility="Private"
      name="ProcessAddProductBySKU" callMode="Private">
    <nodeSuccessors name="next" next="GetOrganizationByDomain3"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="SKU" type="java.lang.String"/>
    <parameters name="Quantity" type="java.lang.String" optional="true"/>
    <parameters name="PreferenceDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
    <parameters name="ForceAllowRepeats" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 32,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetOrganizationByDomain3">
    <pipelet href="enfinity:/bc_organization/pipelets/GetOrganizationByDomain.xml"/>
    <nodeSuccessors name="next" next="GetProductBySKU1"/>
<!--@BendPoints 67,33-->
    <nodeSuccessors name="pipelet_error" next="JoinNode19"/>
    <parameterBindings name="OrganizationDomain" objectPath="Cart:Domain"/>
  </nodes>
<!--@Location 32,17-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductBySKU1">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductBySKU.xml"/>
<!--@BendPoints 65,37-->
    <nodeSuccessors name="next" next="JoinNode47"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode19"/>
    <parameterBindings name="Domain" objectPath="Organization:OwningDomain"/>
  </nodes>
<!--@Location 33,17-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode19">
<!--@BendPoints 67,39-->
    <nodeSuccessors name="next" next="JoinNode4"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@displayNearNode@Private \- for internal use only!
@Location 29,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start1" strict="true" visibility="Private"
      name="ProcessAddProductByUUID" callMode="Private">
<!--@BendPoints 59,32-->
    <nodeSuccessors name="next" next="GetOrganizationByDomain1"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="ProductUUID" type="java.lang.String"/>
    <parameters name="Quantity" type="java.lang.String" optional="true"/>
    <parameters name="PreferenceDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
  </nodes>
<!--@Location 29,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetOrganizationByDomain1">
    <pipelet href="enfinity:/bc_organization/pipelets/GetOrganizationByDomain.xml"/>
    <nodeSuccessors name="next" next="GetProductByUUID1"/>
<!--@BendPoints 61,33-->
    <nodeSuccessors name="pipelet_error" next="JoinNode3"/>
    <parameterBindings name="OrganizationDomain" objectPath="Cart:Domain"/>
  </nodes>
<!--@Location 29,17-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductByUUID1">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductByUUID.xml"/>
<!--@BendPoints 59,37-->
    <nodeSuccessors name="next" next="JoinNode47"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode3"/>
    <parameterBindings name="ProductDomain" objectPath="Organization:OwningDomain"/>
  </nodes>
<!--@Location 30,17-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode3">
<!--@BendPoints 61,39-->
    <nodeSuccessors name="next" next="JoinNode4"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@displayNearNode@Private \- for internal use only!
@Location 14,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode16" strict="true" visibility="Private"
      name="ProcessAddProducts" callMode="Private">
<!--@BendPoints 29,32-->
    <nodeSuccessors name="next" next="DecisionNode16"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="ProductUUIDs" type="java.util.Iterator&lt;java.lang.String>"
        optional="true"/>
    <parameters name="SKUs" type="java.util.Iterator&lt;java.lang.String>" optional="true"/>
    <parameters name="Quantities" type="java.util.Map&lt;java.lang.String, java.lang.String>"/>
    <parameters name="PreferenceDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
    <parameters name="ProductRefIDs" type="java.util.Iterator" optional="true"/>
    <parameters name="ForceAllowRepeats" type="java.lang.String" optional="true"/>
    <parameters name="CurrentAppContext" type="com.intershop.beehive.app.capi.AppContext"
        optional="true"/>
    <parameters name="DependentSKUMap" type="java.util.Map" optional="true"/>
    <parameters name="ApplicationBO" type="com.intershop.component.application.capi.ApplicationBO"/>
    <parameters name="BasketBO" type="com.intershop.component.basket.capi.BasketBO"/>
  </nodes>
<!--@Location 14,16-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode16" conditionKey="ProductUUIDs"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="LoopNode9"/>
<!--@BendPoints 32,33 32,32 33,32-->
    <nodeSuccessors name="decision_no" next="DecisionNode15"/>
  </nodes>
<!--@Location 14,17-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode9" loop="ProductUUIDs">
<!--@BendPoints 30,35 30,43-->
    <nodeSuccessors name="next" next="JoinNode32"/>
    <entry key="ProductUUID">
      <nodeSuccessors name="loop_entry_next" next="CallNode13"/>
    </entry>
  </nodes>
<!--@Location 14,18-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode13">
    <nodeSuccessors name="next" next="AddObjectToVector1"/>
<!--@BendPoints 30,38 30,41-->
    <nodeSuccessors name="ERROR" next="JoinNode22"/>
    <parameterBindings name="Quantity" objectPath="Quantities:get(ProductUUID)"/>
    <startNode referencedName="ProcessCart-AddProductByUUID"/>
  </nodes>
<!--@Location 14,19-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector1">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode22"/>
    <parameterBindings name="InVector" objectPath="NewProductLineItemsVector"/>
    <parameterBindings name="Objects" objectPath="NewProductLineItems"/>
    <returnValueBindings name="Iterator" objectPath="NewProductLineItems"/>
    <returnValueBindings name="OutVector" objectPath="NewProductLineItemsVector"/>
  </nodes>
<!--@Location 14,20-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode22">
<!--@BendPoints 28,41 28,35-->
    <nodeSuccessors name="next" next="LoopNode9_Entry"/>
  </nodes>
<!--@Location 17,21-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode32">
    <nodeSuccessors name="next" next="DecisionNode3"/>
  </nodes>
<!--@Location 17,22-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode3" conditionKey="NewProductLineItems">
    <nodeSuccessors name="decision_yes" next="CallNode26"/>
    <nodeSuccessors name="decision_no" next="JoinNode61"/>
  </nodes>
<!--@Location 17,23-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode26">
    <nodeSuccessors name="next" next="CallNode43"/>
    <nodeSuccessors name="ERROR" next="JoinNode6"/>
    <startNode referencedName="ProcessCart-InitializeNewProductLineItems"/>
  </nodes>
<!--@Location 17,24-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode43">
    <nodeSuccessors name="next" next="CallNode27"/>
    <parameterBindings name="ProductLineItems" objectPath="NewProductLineItems"/>
    <startNode referencedName="ProcessCart-AddDependentProducts"/>
  </nodes>
<!--@Location 17,25-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode27">
    <nodeSuccessors name="next" next="CallNode29"/>
    <startNode referencedName="ProcessCart-CheckInventory"/>
  </nodes>
<!--@Location 17,26-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode29">
    <nodeSuccessors name="next" next="CallNode33"/>
    <startNode referencedName="ProcessCart-AdjustBasketByInventoryStatus"/>
  </nodes>
<!--@Location 17,27-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode33">
    <nodeSuccessors name="next" next="CallNode28"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <startNode referencedName="ProcessShipping-SetDefaultShippingMethod"/>
  </nodes>
<!--@Location 17,28-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode28">
<!--@BendPoints 35,58-->
    <nodeSuccessors name="next" next="CallNode12"/>
    <nodeSuccessors name="ERROR" next="JoinNode12"/>
    <parameterBindings name="Cart" objectPath="Cart"/>
    <startNode referencedName="ProcessCart-Calculate"/>
  </nodes>
<!--@Location 17,29-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode12">
    <nodeSuccessors name="next" next="EndNode32"/>
    <startNode referencedName="ProcessCart-RemovePLIsWithoutPrice"/>
  </nodes>
<!--@Location 17,30-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode32" strict="true">
    <returnValues name="NewProductLineItems" type="java.util.Iterator" optional="true"/>
    <returnValues name="AdjustedItems" type="java.util.Map" optional="true"/>
    <returnValues name="NotAvailableProducts" type="java.util.Iterator" optional="true"/>
    <returnValues name="ERROR_Basket_Product" type="java.lang.String" optional="true"/>
    <returnValues name="NotAvailableProductBOs" type="java.util.Iterator" optional="true"/>
  </nodes>
<!--@Location 19,29-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode12">
    <nodeSuccessors name="next" next="EndNode33"/>
  </nodes>
<!--@Location 19,30-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode33" name="ERROR" strict="true">
    <returnValues name="ERROR_Basket_Product" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 19,24-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode6">
    <nodeSuccessors name="next" next="JoinNode12"/>
  </nodes>
<!--@Location 19,22-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode61">
    <nodeSuccessors name="next" next="JoinNode6"/>
  </nodes>
<!--@Location 16,16-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode15" conditionKey="SKUs"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="LoopNode8"/>
<!--@BendPoints 36,33 36,32 37,32-->
    <nodeSuccessors name="decision_no" next="DecisionNode1"/>
  </nodes>
<!--@Location 16,17-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode8" loop="SKUs">
<!--@BendPoints 35,35-->
    <nodeSuccessors name="next" next="JoinNode32"/>
    <entry key="SKU">
<!--@BendPoints 33,36-->
      <nodeSuccessors name="loop_entry_next" next="CallNode16"/>
    </entry>
  </nodes>
<!--@Location 16,18-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode16">
<!--@BendPoints 33,38-->
    <nodeSuccessors name="next" next="AddObjectToVector4"/>
<!--@BendPoints 34,38 34,41-->
    <nodeSuccessors name="ERROR" next="JoinNode7"/>
    <parameterBindings name="Quantity" objectPath="Quantities:get(SKU)"/>
    <startNode referencedName="ProcessCart-AddProductBySKU"/>
  </nodes>
<!--@Location 16,19-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector4">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode7"/>
    <parameterBindings name="InVector" objectPath="NewProductLineItemsVector"/>
    <parameterBindings name="Objects" objectPath="NewProductLineItems"/>
    <returnValueBindings name="Iterator" objectPath="NewProductLineItems"/>
    <returnValueBindings name="OutVector" objectPath="NewProductLineItemsVector"/>
  </nodes>
<!--@Location 16,20-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode7">
<!--@BendPoints 32,41 32,35-->
    <nodeSuccessors name="next" next="LoopNode8_Entry"/>
  </nodes>
<!--@Location 18,16-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode1" conditionKey="ProductRefIDs"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="LoopNode1"/>
<!--@BendPoints 39,33-->
    <nodeSuccessors name="decision_no" next="JoinNode61"/>
  </nodes>
<!--@Location 18,17-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode1" loop="ProductRefIDs">
<!--@BendPoints 38,35 38,43-->
    <nodeSuccessors name="next" next="JoinNode32"/>
    <entry key="ProductRefID">
      <nodeSuccessors name="loop_entry_next" next="CallNode11"/>
    </entry>
  </nodes>
<!--@Location 18,18-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode11">
    <nodeSuccessors name="next" next="AddObjectToVector2"/>
<!--@BendPoints 38,38 38,41-->
    <nodeSuccessors name="ERROR" next="JoinNode51"/>
    <parameterBindings name="Quantity" objectPath="Quantities:get(ProductRefID)"/>
    <startNode referencedName="ProcessCart-AddProductByProductRefID"/>
  </nodes>
<!--@Location 18,19-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector2">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode51"/>
    <parameterBindings name="InVector" objectPath="NewProductLineItemsVector"/>
    <parameterBindings name="Objects" objectPath="NewProductLineItems"/>
    <returnValueBindings name="Iterator" objectPath="NewProductLineItems"/>
    <returnValueBindings name="OutVector" objectPath="NewProductLineItemsVector"/>
  </nodes>
<!--@Location 18,20-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode51">
<!--@BendPoints 36,41 36,35-->
    <nodeSuccessors name="next" next="LoopNode1_Entry"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

Removes free and hidden gifts from NotAvailableProducts and NotAvailableProductBOs as they have to get removed silently without any messages.
@Location 50,49-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode33" strict="true" name="RemoveGiftsFromIterator"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode54"/>
    <parameters name="Gifts" type="java.util.Iterator" optional="true"/>
    <parameters name="NotAvailableProducts" type="java.util.Iterator" optional="true"/>
    <parameters name="NotAvailableProductBOs" type="java.util.Iterator" optional="true"/>
  </nodes>
<!--@Location 50,50-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode54" conditionKey="NotAvailableProducts">
    <nodeSuccessors name="decision_yes" next="DecisionNode57"/>
<!--@BendPoints 107,101-->
    <nodeSuccessors name="decision_no" next="JoinNode83"/>
  </nodes>
<!--@Location 50,51-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode57" conditionKey="NotAvailableProductBOs">
    <nodeSuccessors name="decision_yes" next="DecisionNode53"/>
    <nodeSuccessors name="decision_no" next="JoinNode83"/>
  </nodes>
<!--@Location 50,52-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode53" conditionKey="Gifts">
    <nodeSuccessors name="decision_yes" next="LoopNode19"/>
    <nodeSuccessors name="decision_no" next="JoinNode80"/>
  </nodes>
<!--@Location 50,53-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode19" loop="Gifts">
<!--@BendPoints 102,107-->
    <nodeSuccessors name="next" next="CombineIterators2"/>
    <entry key="Gift">
      <nodeSuccessors name="loop_entry_next" next="KeyMapper13"/>
    </entry>
  </nodes>
<!--@Location 50,54-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper13">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="DecisionNode63"/>
    <parameterBindings name="InValue_1" objectPath="Gift:Extension(&quot;PersistentObjectBOExtension&quot;):PersistentObject"/>
    <returnValueBindings name="OutValue_1" objectPath="GiftPO"/>
  </nodes>
<!--@Location 50,55-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode63" conditionKey="GiftPO">
<!--@BendPoints 103,111-->
    <nodeSuccessors name="decision_yes" next="CallNode60"/>
    <nodeSuccessors name="decision_no" next="CallNode57"/>
  </nodes>
<!--@Location 51,56-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode60">
    <nodeSuccessors name="next" next="CallNode58"/>
    <parameterBindings name="Gift" objectPath="GiftPO"/>
    <parameterBindings name="NotAvailableProductsVector" objectPath="NAPVector"/>
    <startNode referencedName="ProcessCart-CollectGiftsToRemove"/>
    <returnValueBindings name="GiftsToRemoveIterator" objectPath="GiftsToRemoveFromNAPs"/>
    <returnValueBindings name="NotAvailableProductsVector" objectPath="NAPVector"/>
  </nodes>
<!--@Location 51,57-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode58">
<!--@BendPoints 103,117-->
    <nodeSuccessors name="next" next="JoinNode92"/>
    <parameterBindings name="NotAvailableProducts" objectPath="NotAvailableProductBOs"/>
    <parameterBindings name="NotAvailableProductsVector" objectPath="NAPBOVector"/>
    <startNode referencedName="ProcessCart-CollectGiftBOsToRemove"/>
    <returnValueBindings name="GiftsToRemoveIterator" objectPath="GiftsToRemoveFromNAPBOs"/>
    <returnValueBindings name="NotAvailableProductsVector" objectPath="NAPBOVector"/>
  </nodes>
<!--@Location 50,58-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode92">
<!--@BendPoints 99,117 99,107-->
    <nodeSuccessors name="next" next="LoopNode19_Entry"/>
  </nodes>
<!--@Location 50,56-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode57">
    <nodeSuccessors name="next" next="AddObjectToVector12"/>
    <parameterBindings name="NotAvailableProductsVector" objectPath="NAPVector"/>
    <startNode referencedName="ProcessCart-CollectGiftsToRemove"/>
    <returnValueBindings name="GiftsToRemoveIterator" objectPath="GiftsToRemoveFromNAPs"/>
    <returnValueBindings name="NotAvailableProductsVector" objectPath="NAPVector"/>
  </nodes>
<!--@Location 50,57-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector12">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode92"/>
    <returnValueBindings name="Iterator" objectPath="GiftsToRemoveFromNAPBOs"/>
    <returnValueBindings name="OutVector" objectPath="NAPBOVector"/>
  </nodes>
<!--@Location 51,53-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CombineIterators2">
    <configurationValues name="ProcessMethod" value="Subtract Iterators and Remove Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CombineIterators.xml"/>
    <nodeSuccessors name="next" next="CombineIterators3"/>
    <parameterBindings name="Iterator1" objectPath="NotAvailableProducts"/>
    <parameterBindings name="Iterator2" objectPath="GiftsToRemoveFromNAPs"/>
    <returnValueBindings name="Iterator" objectPath="NotAvailableProducts"/>
  </nodes>
<!--@Location 52,53-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CombineIterators3">
    <configurationValues name="ProcessMethod" value="Subtract Iterators and Remove Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CombineIterators.xml"/>
    <nodeSuccessors name="next" next="JoinNode79"/>
    <parameterBindings name="Iterator1" objectPath="NotAvailableProductBOs"/>
    <parameterBindings name="Iterator2" objectPath="GiftsToRemoveFromNAPBOs"/>
    <returnValueBindings name="Iterator" objectPath="NotAvailableProductBOs"/>
  </nodes>
<!--@Location 53,53-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode79">
    <nodeSuccessors name="next" next="EndNode50"/>
  </nodes>
<!--@Location 54,53-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode50" strict="true">
    <returnValues name="NotAvailableProducts" type="java.util.Iterator" optional="true"/>
    <returnValues name="NotAvailableProductBOs" type="java.util.Iterator" optional="true"/>
  </nodes>
<!--@Location 53,52-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode80">
    <nodeSuccessors name="next" next="JoinNode79"/>
  </nodes>
<!--@Location 53,51-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode83">
    <nodeSuccessors name="next" next="JoinNode80"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 43,49-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode2" strict="true" name="RemovePLIFromBasket"
      callMode="Private">
    <nodeSuccessors name="next" next="ExtensionPointNode1"/>
    <parameters name="Domain" type="com.intershop.beehive.core.capi.domain.Domain"/>
    <parameters name="Basket" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="ProductLineItem" type="com.intershop.beehive.bts.capi.orderprocess.LineItem"/>
  </nodes>
<!--@Location 43,50-->
  <nodes xsi:type="pipeline:ExtensionPointNode" nodeID="ExtensionPointNode1" name="RemoveItemFromBasket">
    <nodeSuccessors name="next" next="RemoveProductLineItemFromBasket3"/>
  </nodes>
<!--@Location 43,51-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemoveProductLineItemFromBasket3">
    <pipelet href="enfinity:/bts/pipelets/RemoveProductLineItemFromBasket.xml"/>
    <nodeSuccessors name="next" next="EndNode9"/>
    <parameterBindings name="LineItemID" objectPath="ProductLineItem:UUID"/>
  </nodes>
<!--@Location 43,52-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode9" strict="true">
    <returnValues name="TrackingDataContainer" type="java.lang.Object" optional="true"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

After a Cart Calculation removes the PLIs without price. Increase the input Iterator "NotAvailableProducts" with the Products without price. If not iterator is passed\-in a new  one is created and passed\-out
@Location 29,49-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode5" strict="true" name="RemovePLIsWithoutPrice"
      callMode="Private">
<!--@BendPoints 59,100-->
    <nodeSuccessors name="next" next="GetAbsentProductLineItems1"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="NotAvailableProducts" type="java.util.Iterator" optional="true"/>
  </nodes>
<!--@Location 29,50-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetAbsentProductLineItems1">
    <configurationValues name="FirstGroup" value="INITIAL_PLIS"/>
    <configurationValues name="SecondGroup" value="PLIS"/>
    <pipelet href="enfinity:/bts/pipelets/GetAbsentProductLineItems.xml"/>
    <nodeSuccessors name="next" next="LoopNode3"/>
  </nodes>
<!--@Location 29,51-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode3" loop="AbsentPLIs">
    <nodeSuccessors name="next" next="DecisionNode17"/>
    <entry key="Pli">
      <nodeSuccessors name="loop_entry_next" next="GetProductByProductRef3"/>
    </entry>
  </nodes>
<!--@Location 29,52-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductByProductRef3">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductByProductRef.xml"/>
<!--@BendPoints 59,106-->
    <nodeSuccessors name="next" next="AddObjectToVector5"/>
<!--@BendPoints 60,105 60,109-->
    <nodeSuccessors name="pipelet_error" next="JoinNode35"/>
    <parameterBindings name="ProductRef" objectPath="Pli:OfferProductRef"/>
    <parameterBindings name="ProductRefID" nullBinding="true"/>
    <parameterBindings name="ProductRefIDs" nullBinding="true"/>
    <parameterBindings name="ProductRefs" nullBinding="true"/>
  </nodes>
<!--@Location 29,53-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector5">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode35"/>
    <parameterBindings name="InVector" objectPath="OutVector"/>
    <parameterBindings name="Object" objectPath="Product"/>
    <returnValueBindings name="Iterator" objectPath="RemovedProduct"/>
  </nodes>
<!--@Location 29,54-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode35">
<!--@BendPoints 59,110-->
    <nodeSuccessors name="next" next="CallNode18"/>
  </nodes>
<!--@Location 29,55-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode18">
<!--@BendPoints 59,112 58,112 58,103-->
    <nodeSuccessors name="next" next="LoopNode3_Entry"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <parameterBindings name="Domain" objectPath="CurrentDomain"/>
    <parameterBindings name="ProductLineItem" objectPath="Pli"/>
    <startNode referencedName="ProcessCart-RemovePLIFromBasket"/>
  </nodes>
<!--@Location 31,51-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode17" conditionKey="NotAvailableProducts">
<!--@BendPoints 65,103 65,104-->
    <nodeSuccessors name="decision_yes" next="DecisionNode18"/>
<!--@BendPoints 63,106-->
    <nodeSuccessors name="decision_no" next="KeyMapper2"/>
  </nodes>
<!--@Location 32,52-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode18" conditionKey="RemovedProduct">
<!--@BendPoints 65,106-->
    <nodeSuccessors name="decision_yes" next="CombineIterators1"/>
<!--@BendPoints 68,105 68,117-->
    <nodeSuccessors name="decision_no" next="JoinNode45"/>
  </nodes>
<!--@Location 32,53-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CombineIterators1">
    <configurationValues name="ProcessMethod" value="Concatenate Iterators and Remove Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CombineIterators.xml"/>
    <nodeSuccessors name="next" next="JoinNode31"/>
    <parameterBindings name="Iterator1" objectPath="NotAvailableProducts"/>
    <parameterBindings name="Iterator2" objectPath="RemovedProduct"/>
    <returnValueBindings name="Iterator" objectPath="NotAvailableProducts"/>
  </nodes>
<!--@Location 32,54-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode31">
    <nodeSuccessors name="next" next="DecisionNode29"/>
  </nodes>
<!--@Location 32,55-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode29" conditionKey="NotAvailableProducts">
    <nodeSuccessors name="decision_yes" next="CallNode8"/>
<!--@BendPoints 66,111 66,115-->
    <nodeSuccessors name="decision_no" next="JoinNode43"/>
  </nodes>
<!--@Location 32,56-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode8">
    <nodeSuccessors name="next" next="JoinNode43"/>
    <parameterBindings name="Products" objectPath="NotAvailableProducts"/>
    <startNode referencedName="ProcessB2CProduct-GetProductBOs"/>
    <returnValueBindings name="ProductBOs" objectPath="NotAvailableProductBOs"/>
  </nodes>
<!--@Location 32,57-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode43">
    <nodeSuccessors name="next" next="JoinNode45"/>
  </nodes>
<!--@Location 32,58-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode45">
<!--@BendPoints 65,118-->
    <nodeSuccessors name="next" next="EndNode13"/>
  </nodes>
<!--@Location 32,59-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode13" strict="true">
    <returnValues name="NotAvailableProducts" type="java.util.Iterator" optional="true"/>
    <returnValues name="NotAvailableProductBOs" type="java.util.Iterator" optional="true"/>
  </nodes>
<!--@Location 31,53-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper2">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 63,109-->
    <nodeSuccessors name="next" next="JoinNode31"/>
    <parameterBindings name="InValue_1" objectPath="RemovedProduct"/>
    <returnValueBindings name="OutValue_1" objectPath="NotAvailableProducts"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 18,49-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode13" strict="true" name="RemovePaymentByOrigin"
      callMode="Private">
<!--@BendPoints 37,100-->
    <nodeSuccessors name="next" next="LoopNode5"/>
    <parameters name="PaymentInstrumentInfoOriginUUID" type="java.lang.String"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
  </nodes>
<!--@Location 18,50-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode5" loop="Cart:PaymentInstrumentInfo">
    <nodeSuccessors name="next" next="EndNode27"/>
    <entry key="PaymentInstrumentInfo">
<!--@BendPoints 37,102-->
      <nodeSuccessors name="loop_entry_next" next="DecisionNode7"/>
    </entry>
  </nodes>
<!--@Location 18,51-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode7" conditionKey="PaymentInstrumentInfoOriginUUID"
      operator="str_eq" conditionItem="PaymentInstrumentInfo:OriginUUID">
<!--@BendPoints 37,104-->
    <nodeSuccessors name="decision_yes" next="CallNode15"/>
<!--@BendPoints 38,103 38,107-->
    <nodeSuccessors name="decision_no" next="JoinNode33"/>
  </nodes>
<!--@Location 18,52-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode15">
    <nodeSuccessors name="next" next="JoinNode33"/>
    <startNode referencedName="ProcessPayment-RemovePaymentInstrumentInfo"/>
  </nodes>
<!--@Location 18,53-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode33">
<!--@BendPoints 36,107 36,101-->
    <nodeSuccessors name="next" next="LoopNode5_Entry"/>
  </nodes>
<!--@Location 19,50-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode27" strict="true"/>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 36,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode6" strict="true" name="RemoveProductLineItem"
      callMode="Private">
<!--@BendPoints 73,32-->
    <nodeSuccessors name="next" next="GetLineItemByUUID1" action="begin"/>
    <parameters name="ProductLineItemUUID" type="java.lang.String"/>
    <parameters name="CurrentAppContext" type="com.intershop.beehive.app.capi.AppContext"
        optional="true"/>
  </nodes>
<!--@Location 36,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetLineItemByUUID1">
    <pipelet href="enfinity:/bc_requisition/pipelets/GetLineItemByUUID.xml"/>
    <nodeSuccessors name="next" next="KeyMapper3"/>
<!--@BendPoints 75,33-->
    <nodeSuccessors name="pipelet_error" next="JoinNode34" action="commit"/>
    <parameterBindings name="LineItemUUID" objectPath="ProductLineItemUUID"/>
    <returnValueBindings name="LineItem" objectPath="ProductLineItem"/>
  </nodes>
<!--@Location 36,17-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper3">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="DecisionNode46"/>
    <parameterBindings name="InValue_1" objectPath="ProductLineItem:LineItemCtnr"/>
    <returnValueBindings name="OutValue_1" objectPath="Cart"/>
  </nodes>
<!--@Location 36,18-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode46" conditionKey="Cart:User:ID"
      operator="str_eq" conditionItem="CurrentUser:ID">
    <nodeSuccessors name="decision_yes" next="GetProductListItemByLineItem1"/>
    <nodeSuccessors name="decision_no" next="JoinNode34" action="commit"/>
  </nodes>
<!--@Location 36,19-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductListItemByLineItem1">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductListItemByLineItem.xml"/>
<!--@BendPoints 73,40-->
    <nodeSuccessors name="next" next="UpdateProductListItem2"/>
<!--@BendPoints 74,39 74,43-->
    <nodeSuccessors name="pipelet_error" next="JoinNode5"/>
  </nodes>
<!--@Location 36,20-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateProductListItem2">
    <pipelet href="enfinity:/bc_mvc/pipelets/UpdateProductListItem.xml"/>
    <nodeSuccessors name="next" next="JoinNode5"/>
    <parameterBindings name="Description" nullBinding="true"/>
    <parameterBindings name="DisplayName" nullBinding="true"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <parameterBindings name="Product" nullBinding="true"/>
    <parameterBindings name="ProductLineItem" nullBinding="true"/>
    <parameterBindings name="Public" nullBinding="true"/>
    <parameterBindings name="Quantity" nullBinding="true"/>
  </nodes>
<!--@Location 36,21-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode5">
    <nodeSuccessors name="next" next="CallNode21"/>
  </nodes>
<!--@Location 36,22-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode21">
    <nodeSuccessors name="next" next="CallNode34"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <parameterBindings name="Domain" objectPath="CurrentDomain"/>
    <startNode referencedName="ProcessCart-RemovePLIFromBasket"/>
  </nodes>
<!--@Location 36,23-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode34">
    <nodeSuccessors name="next" next="CallNode7"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <startNode referencedName="ProcessBasketInvalidation-InvalidateBasketCalculation"/>
  </nodes>
<!--@Location 36,24-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode7">
    <nodeSuccessors name="next" next="CallNode20"/>
    <startNode referencedName="ProcessCart-Calculate"/>
  </nodes>
<!--@Location 36,25-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode20">
    <nodeSuccessors name="next" next="EndNode14" action="commit"/>
    <startNode referencedName="ProcessCart-RemovePLIsWithoutPrice"/>
  </nodes>
<!--@Location 36,27-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode14" strict="true"/>
<!--@Location 37,18-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode34">
<!--@BendPoints 75,54-->
    <nodeSuccessors name="next" next="EndNode11"/>
  </nodes>
<!--@Location 37,27-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode11" name="ERROR" strict="true"/>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.

@Location 20,2-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode4" strict="true" name="RemoveWarrantiesWithoutPrice"
      callMode="Private">
    <nodeSuccessors name="next" next="LoopNode16"/>
    <parameters name="BasketBO" type="com.intershop.component.basket.capi.BasketBO"/>
  </nodes>
<!--@Location 20,3-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode16" loop="BasketBO:ProductLineItemBOs">
    <nodeSuccessors name="next" next="EndNode4"/>
    <entry key="PLI">
<!--@BendPoints 41,8-->
      <nodeSuccessors name="loop_entry_next" next="DecisionNode9"/>
    </entry>
  </nodes>
<!--@Location 20,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode9" conditionKey="PLI:Extension(&quot;Warranty&quot;):Warranty">
    <nodeSuccessors name="decision_yes" next="DecisionNode31"/>
<!--@BendPoints 43,9-->
    <nodeSuccessors name="decision_no" next="JoinNode0"/>
  </nodes>
<!--@Location 20,5-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode31" conditionKey="PLI:Extension(&quot;Warranty&quot;):Warranty:Price:Available"
      operator="str_eq" conditionValue="false">
    <nodeSuccessors name="decision_yes" next="RemoveWarrantyLineItem2"/>
    <nodeSuccessors name="decision_no" next="JoinNode0"/>
  </nodes>
<!--@Location 20,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemoveWarrantyLineItem2">
    <pipelet href="enfinity:/sld_ch_b2c_base/pipelets/RemoveWarrantyLineItem.xml"/>
    <nodeSuccessors name="next" next="JoinNode67"/>
    <parameterBindings name="ProductLineItem" objectPath="PLI"/>
  </nodes>
<!--@Location 20,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode67">
<!--@BendPoints 40,15 40,7-->
    <nodeSuccessors name="next" next="LoopNode16_Entry"/>
  </nodes>
<!--@Location 21,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode0">
    <nodeSuccessors name="next" next="JoinNode65"/>
  </nodes>
<!--@Location 21,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode65">
<!--@BendPoints 43,15-->
    <nodeSuccessors name="next" next="JoinNode67"/>
  </nodes>
<!--@Location 21,3-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode4" strict="true"/>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 5,35-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start3" strict="true" name="Update"
      callMode="Private">
    <nodeSuccessors name="next" next="Loop7" action="begin"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="Quantities" type="java.util.Map&lt;java.lang.String, java.lang.String>"/>
    <parameters name="PreferenceDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
    <parameters name="CurrentAppContext" type="com.intershop.beehive.app.capi.AppContext"
        optional="true"/>
    <parameters name="DependentSKUMap" type="java.util.Map" optional="true"/>
    <parameters name="BasketBO" type="com.intershop.component.basket.capi.BasketBO"/>
  </nodes>
<!--@Location 5,36-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="Loop7" loop="BasketBO:ProductLineItemBOs">
<!--@BendPoints 13,73 13,74-->
    <nodeSuccessors name="next" next="CallNode39"/>
    <entry key="PLI">
      <nodeSuccessors name="loop_entry_next" next="DecisionNode21"/>
    </entry>
  </nodes>
<!--@Location 5,37-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode21" conditionKey="Quantities:get(PLI:ID)">
    <nodeSuccessors name="decision_yes" next="VerifyQuantity2"/>
<!--@BendPoints 12,75 12,83 12,85-->
    <nodeSuccessors name="decision_no" next="JoinNode38"/>
  </nodes>
<!--@Location 5,39-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="VerifyQuantity2">
    <configurationValues name="MaxValue" value="999999999999999999999999999999"/>
    <configurationValues name="MinValue" value="0"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyQuantity.xml"/>
    <nodeSuccessors name="next" next="ConcatenateStrings1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode46"/>
    <parameterBindings name="LocalizedString" objectPath="Quantities:get(PLI:ID)"/>
  </nodes>
<!--@Location 5,40-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings1">
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="SetIndirectDictValue1"/>
    <parameterBindings name="String0" constant="Quantity_"/>
    <parameterBindings name="String1" objectPath="PLI:ID"/>
    <returnValueBindings name="Concatenated" objectPath="QuantityKey"/>
  </nodes>
<!--@Location 5,41-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetIndirectDictValue1">
    <pipelet href="enfinity:/bc_foundation/pipelets/SetIndirectDictValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode38"/>
    <parameterBindings name="KeyNameHolder" objectPath="QuantityKey"/>
    <parameterBindings name="MappedEntry" objectPath="Quantities:get(PLI:ID)"/>
  </nodes>
<!--@Location 5,42-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode38">
<!--@BendPoints 10,85 10,73-->
    <nodeSuccessors name="next" next="Loop7_Entry"/>
  </nodes>
<!--@Location 6,39-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode46">
<!--@BendPoints 13,80-->
    <nodeSuccessors name="next" next="KeyMapper1"/>
  </nodes>
<!--@Location 6,40-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper1">
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 13,82-->
    <nodeSuccessors name="next" next="KeyMapper10"/>
    <parameterBindings name="InValue_1" constant="QUANTITY_FORMAT"/>
    <returnValueBindings name="OutValue_1" objectPath="UpdateError"/>
  </nodes>
<!--@Location 6,41-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper10">
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="KeyMapper11"/>
    <parameterBindings name="InValue_1" constant="QUANTITY_FORMAT"/>
    <returnValueBindings name="OutValue_1" objectPath="UpdateError"/>
  </nodes>
<!--@Location 6,42-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper11">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="JoinNode16"/>
    <parameterBindings name="InValue_1" objectPath="PLI:ID"/>
    <parameterBindings name="InValue_2" objectPath="Quantities:get(PLI:ID)"/>
    <returnValueBindings name="OutValue_1" objectPath="QUANTITY_FORMAT_PLIUUID"/>
    <returnValueBindings name="OutValue_2" objectPath="QUANTITY_SUBMITTED_VALUE"/>
  </nodes>
<!--@Location 6,45-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode16">
<!--@BendPoints 13,92-->
    <nodeSuccessors name="next" next="End14" action="commit"/>
  </nodes>
<!--@Location 6,46-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End14" name="ERROR" strict="true">
    <returnValues name="UpdateError" type="java.lang.String" optional="true"/>
    <returnValues name="QUANTITY_FORMAT_PLIUUID" type="java.lang.String" optional="true"/>
    <returnValues name="QUANTITY_SUBMITTED_VALUE" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 6,37-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode39">
<!--@BendPoints 13,76-->
    <nodeSuccessors name="next" next="DecisionNode30"/>
    <startNode referencedName="ProcessCart-UpdateQuantities"/>
  </nodes>
<!--@Location 6,38-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode30" conditionKey="RejectedItems">
    <nodeSuccessors name="decision_yes" next="JoinNode46"/>
<!--@BendPoints 15,77 15,78-->
    <nodeSuccessors name="decision_no" next="DecisionNode38"/>
  </nodes>
<!--@Location 7,39-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode38" conditionKey="DependentSKUMap">
<!--@BendPoints 15,80-->
    <nodeSuccessors name="decision_yes" next="CallNode37"/>
<!--@BendPoints 16,79 16,83-->
    <nodeSuccessors name="decision_no" next="JoinNode63"/>
  </nodes>
<!--@Location 7,40-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode37">
    <nodeSuccessors name="next" next="JoinNode63"/>
    <startNode referencedName="ProcessCart-UpdateBasketWarranties"/>
  </nodes>
<!--@Location 7,41-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode63">
    <nodeSuccessors name="next" next="CallNode23"/>
  </nodes>
<!--@Location 7,42-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode23">
    <nodeSuccessors name="next" next="CallNode25"/>
    <startNode referencedName="ProcessCart-CheckInventory"/>
  </nodes>
<!--@Location 7,43-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode25">
    <nodeSuccessors name="next" next="CallNode10"/>
    <startNode referencedName="ProcessCart-AdjustBasketByInventoryStatus"/>
  </nodes>
<!--@Location 7,44-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode10">
    <nodeSuccessors name="next" next="CallNode49" action="commit"/>
    <startNode referencedName="ProcessCart-RemovePLIsWithoutPrice"/>
  </nodes>
<!--@Location 7,45-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode49">
    <nodeSuccessors name="next" next="End3"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <startNode referencedName="ProcessBasketInvalidation-InvalidateBasketCalculation"/>
  </nodes>
<!--@Location 7,46-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End3" strict="true">
    <returnValues name="AdjustedItems" type="java.util.Map" optional="true"/>
    <returnValues name="NotAvailableProducts" type="java.util.Iterator" optional="true"/>
    <returnValues name="NotAvailableProductBOs" type="java.util.Iterator" optional="true"/>
  </nodes>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 10,35-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode27" strict="true" name="UpdateBasketWarranties"
      callMode="Private">
    <nodeSuccessors name="next" next="Loop1"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="DependentSKUMap" type="java.util.Map"/>
    <parameters name="BasketBO" type="com.intershop.component.basket.capi.BasketBO"/>
  </nodes>
<!--@Location 10,36-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="Loop1" loop="BasketBO:ProductLineItemBOs">
    <nodeSuccessors name="next" next="CallNode55"/>
    <entry key="PLI">
      <nodeSuccessors name="loop_entry_next" next="DecisionNode34"/>
    </entry>
  </nodes>
<!--@Location 10,37-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode34" conditionKey="DependentSKUMap:get(PLI:ID)">
    <nodeSuccessors name="decision_yes" next="GetEntryFromMap1"/>
<!--@BendPoints 25,75-->
    <nodeSuccessors name="decision_no" next="JoinNode62"/>
  </nodes>
<!--@Location 10,38-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetEntryFromMap1">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetEntryFromMap.xml"/>
    <nodeSuccessors name="next" next="KeyMapper0"/>
    <parameterBindings name="InMap" objectPath="DependentSKUMap"/>
    <parameterBindings name="Key" objectPath="PLI:ID"/>
    <returnValueBindings name="Value" objectPath="Warranty_ProductSKU"/>
  </nodes>
<!--@Location 10,39-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper0">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="DecisionNode37"/>
    <parameterBindings name="InValue_1" objectPath="PLI"/>
    <returnValueBindings name="OutValue_1" objectPath="ProductLineItem"/>
  </nodes>
<!--@Location 10,40-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode37" conditionKey="Warranty_ProductSKU"
      operator="str_neq" conditionValue="NoWarranty">
    <nodeSuccessors name="decision_yes" next="CreateStringSplitter2"/>
<!--@BendPoints 23,81 23,82-->
    <nodeSuccessors name="decision_no" next="RemoveWarrantyLineItem1"/>
  </nodes>
<!--@Location 10,41-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateStringSplitter2">
    <configurationValues name="Mode" value="First Occurrence"/>
    <configurationValues name="Separator" value="_"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateStringSplitter.xml"/>
<!--@BendPoints 21,84-->
    <nodeSuccessors name="next" next="KeyMapper6"/>
  </nodes>
<!--@Location 10,42-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper6">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 21,86-->
    <nodeSuccessors name="next" next="GetOrganizationByDomain6"/>
    <parameterBindings name="InValue_1" objectPath="Splitter:Begin(Warranty_ProductSKU)"/>
    <parameterBindings name="InValue_2" objectPath="Splitter:End(Warranty_ProductSKU)"/>
    <returnValueBindings name="OutValue_1" objectPath="PrefixWord"/>
    <returnValueBindings name="OutValue_2" objectPath="SKU"/>
  </nodes>
<!--@Location 10,43-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetOrganizationByDomain6">
    <pipelet href="enfinity:/bc_organization/pipelets/GetOrganizationByDomain.xml"/>
    <nodeSuccessors name="next" next="GetProductBySKU3"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode58"/>
    <parameterBindings name="OrganizationDomain" objectPath="BasketBO:Domain"/>
  </nodes>
<!--@Location 10,44-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductBySKU3">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductBySKU.xml"/>
    <nodeSuccessors name="next" next="GetValuesFromRequest2"/>
<!--@BendPoints 27,89 27,90-->
    <nodeSuccessors name="pipelet_error" next="LogMessage1"/>
    <parameterBindings name="Domain" objectPath="Organization:OwningDomain"/>
    <parameterBindings name="SKU" objectPath="SKU"/>
    <returnValueBindings name="Product" objectPath="WarrantyProduct"/>
  </nodes>
<!--@Location 10,45-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetValuesFromRequest2">
    <configurationValues name="Namespace" value="Application"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetValuesFromRequest.xml"/>
    <nodeSuccessors name="next" next="Pipelet5"/>
<!--@BendPoints 25,91 25,92-->
    <nodeSuccessors name="pipelet_error" next="LogMessage2"/>
    <parameterBindings name="Key" constant="ApplicationBO"/>
  </nodes>
<!--@Location 10,46-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet5">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="GetWarrantyBO2"/>
    <parameterBindings name="InValue_1" objectPath="ApplicationBO:Extension(&quot;Warranty&quot;):WarrantyBORepository(WarrantyProduct)"/>
    <returnValueBindings name="OutValue_1" objectPath="WarrantyBORepository"/>
  </nodes>
<!--@Location 10,47-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetWarrantyBO2">
    <pipelet href="enfinity:/bc_warranty/pipelets/GetWarrantyBO.xml"/>
    <nodeSuccessors name="next" next="UpdateWarrantyLineItem1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode86"/>
    <returnValueBindings name="WarrantyBO" objectPath="Warranty"/>
  </nodes>
<!--@Location 10,48-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateWarrantyLineItem1">
    <pipelet href="enfinity:/sld_ch_b2c_base/pipelets/UpdateWarrantyLineItem.xml"/>
    <nodeSuccessors name="next" next="JoinNode60"/>
  </nodes>
<!--@Location 10,49-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode60">
<!--@BendPoints 19,99 19,73-->
    <nodeSuccessors name="next" next="Loop1_Entry"/>
  </nodes>
<!--@Location 11,47-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode86">
<!--@BendPoints 23,99-->
    <nodeSuccessors name="next" next="JoinNode60"/>
  </nodes>
<!--@Location 12,46-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="LogMessage2">
    <configurationValues name="Level" value="Error"/>
    <pipelet href="enfinity:/core/pipelets/LogMessage.xml"/>
<!--@BendPoints 25,95-->
    <nodeSuccessors name="next" next="JoinNode56"/>
    <parameterBindings name="MessageText" constant="Current application could not be determined."/>
  </nodes>
<!--@Location 13,47-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode56">
    <nodeSuccessors name="next" next="StopNode2"/>
  </nodes>
<!--@Location 13,48-->
  <nodes xsi:type="pipeline:StopNode" nodeID="StopNode2"/>
<!--@Location 13,45-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="LogMessage1">
    <configurationValues name="Level" value="Error"/>
    <pipelet href="enfinity:/core/pipelets/LogMessage.xml"/>
    <nodeSuccessors name="next" next="JoinNode56"/>
    <parameterBindings name="MessageText" constant="Warranty Product could not be determined."/>
  </nodes>
<!--@Location 11,43-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode58">
    <nodeSuccessors name="next" next="JoinNode86"/>
  </nodes>
<!--@Location 11,41-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemoveWarrantyLineItem1">
    <pipelet href="enfinity:/sld_ch_b2c_base/pipelets/RemoveWarrantyLineItem.xml"/>
    <nodeSuccessors name="next" next="JoinNode58"/>
  </nodes>
<!--@Location 12,39-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode62">
<!--@BendPoints 25,87-->
    <nodeSuccessors name="next" next="JoinNode58"/>
  </nodes>
<!--@Location 11,36-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode55">
    <nodeSuccessors name="next" next="EndNode42"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <startNode referencedName="ProcessBasketInvalidation-InvalidateBasketCalculation"/>
  </nodes>
<!--@Location 12,36-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode42" strict="true"/>
<!--@deprecated
Deprecated since 7.8.0.0, will be removed in one of the next releases. Use Pipeline ProcessBasket instead.
@Location 16,35-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode28" name="UpdateQuantities"
      callMode="Private">
    <nodeSuccessors name="next" next="UpdateBasketBOQuantities4"/>
  </nodes>
<!--@Location 16,36-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateBasketBOQuantities4">
    <configurationValues name="AdjustQuantities" value="true"/>
    <configurationValues name="RemoveNonPositiveQuantityItems" value="true"/>
    <configurationValues name="UpdateMode" value="Both"/>
    <pipelet href="enfinity:/sld_ch_b2c_base/pipelets/UpdateBasketBOQuantities.xml"/>
<!--@BendPoints 33,74-->
    <nodeSuccessors name="next" next="EndNode43"/>
    <parameterBindings name="Basket" objectPath="BasketBO"/>
  </nodes>
<!--@Location 16,37-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode43"/>
</pipeline:Pipeline>
