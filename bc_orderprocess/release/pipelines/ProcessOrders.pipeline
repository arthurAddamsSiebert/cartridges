<?xml version="1.0" encoding="UTF-8"?>
<!--This pipeline handles the creation of the order using the basket. It handles also further steps like sending notification mail, book inventory, and so on.
@Group Order-->

<pipeline:Pipeline xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pipeline="http://www.intershop.de/pipeline/2010"
    name="ProcessOrders" type="process">
<!--Rollback & Begin new Transaction
@Location 10,6-->
  <nodes xsi:type="pipeline:Text" nodeID="Text0"/>
<!--TODO Pipeline rework:
* export:
** uses still CurrentUser
** deeper down: Application is retrieved 
@Location 13,4-->
  <nodes xsi:type="pipeline:Text" nodeID="Text1"/>
<!--TODO Pipeline Rework:
redirect:
* dependency warning from studio
* still retrieves Request
Must be handed in via parameter!
@Location 3,24-->
  <nodes xsi:type="pipeline:Text" nodeID="Text10"/>
<!--Current{X} only used here as fallback for 
the delegate to the new start node.
They have to be passed in manually!
@Location 14,2-->
  <nodes xsi:type="pipeline:Text" nodeID="Text11"/>
<!--TODO Pipeline rework:
** Violates dependency:
*** Calls Pipeline in sld_ch_sf_base
@Location 13,15-->
  <nodes xsi:type="pipeline:Text" nodeID="Text2"/>
<!--TODO Pipeline Rework:
See notes below!
@Location 13,1-->
  <nodes xsi:type="pipeline:Text" nodeID="Text3"/>
<!--TODO Pipeline rework:
* OnCreateOrder:
** still retrieves CurrentRequest!
@Location 13,17-->
  <nodes xsi:type="pipeline:Text" nodeID="Text4"/>
<!--TODO Pipeline rework:
* Still retrieves CurrentDomain
Must be handed in via parameter!
@Location 2,1-->
  <nodes xsi:type="pipeline:Text" nodeID="Text5"/>
<!--TODO Pipeline rework:
* current user:
** violates dependency 
    (bc must not call app layer)
** needs CurrentSession.
** needs ApplicationBO
** needs CurrentRequest.
** needs CurrentDomain
Those must be handed in via Parameter!
@Location 13,18-->
  <nodes xsi:type="pipeline:Text" nodeID="Text6"/>
<!--TODO Pipeline rework:
*onCreateOrder:
** needs CurrentSession.
** needs Application
Must be handed in via parameter!
@Location 13,20-->
  <nodes xsi:type="pipeline:Text" nodeID="Text7"/>
<!--TODO Pipeline rework:
* gift cards:
** might violate dependency, when 
calling the ac\-pipeline (bc_ must not call ac_)
Must be handed in via parameter!
@Location 13,12-->
  <nodes xsi:type="pipeline:Text" nodeID="Text8"/>
<!--@Deprecated since IS 7.3.1
This is only a delegate.
Use AfterCheckoutProcessing instead!
@Location 16,1-->
  <nodes xsi:type="pipeline:Text" nodeID="Text9"/>
<!--@Deprecated since IS 7.3.1
This is only a delegate.
Use AfterCheckoutProcessing instead!

Description:
Triggers all the necessary procedures of a successful order.
@Location 15,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode12" strict="true" name="AfterCheckoutHandling"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode4"/>
    <parameters name="User" type="com.intershop.beehive.core.capi.user.User"/>
    <parameters name="Organization" type="com.intershop.component.organization.capi.Organization"/>
    <parameters name="Order" type="com.intershop.beehive.bts.capi.orderprocess.fulfillment.Order"/>
    <parameters name="ApplicationBO" type="com.intershop.component.application.capi.ApplicationBO"/>
    <parameters name="Domain" type="com.intershop.beehive.core.capi.domain.Domain"
        optional="true"/>
    <parameters name="Request" type="com.intershop.beehive.core.capi.request.Request"
        optional="true"/>
    <parameters name="TargetSession" type="com.intershop.beehive.core.capi.request.Session"
        optional="true"/>
  </nodes>
<!--@Location 15,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode4" conditionKey="DomainDomain">
    <nodeSuccessors name="decision_yes" next="DecisionNode11"/>
    <nodeSuccessors name="decision_no" next="KeyMapper7"/>
  </nodes>
<!--@Location 15,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode11" conditionKey="Request">
    <nodeSuccessors name="decision_yes" next="DecisionNode20"/>
    <nodeSuccessors name="decision_no" next="KeyMapper9"/>
  </nodes>
<!--@Location 15,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode20" conditionKey="TargetSession">
    <nodeSuccessors name="decision_yes" next="CallNode36"/>
    <nodeSuccessors name="decision_no" next="KeyMapper10"/>
  </nodes>
<!--@Location 15,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode36">
    <nodeSuccessors name="next" next="EndNode6"/>
    <startNode referencedName="ProcessOrders-AfterCheckoutProcessing"/>
  </nodes>
<!--@Location 15,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode6" strict="true"/>
<!--@Location 16,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper10">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 33,10-->
    <nodeSuccessors name="next" next="CallNode36"/>
    <parameterBindings name="InValue_1" objectPath="CurrentSession"/>
    <returnValueBindings name="OutValue_1" objectPath="TargetSession"/>
  </nodes>
<!--@Location 16,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper9">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 33,8-->
    <nodeSuccessors name="next" next="DecisionNode20"/>
    <parameterBindings name="InValue_1" objectPath="CurrentRequest"/>
    <returnValueBindings name="OutValue_1" objectPath="Request"/>
  </nodes>
<!--@Location 16,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper7">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 33,6-->
    <nodeSuccessors name="next" next="DecisionNode11"/>
    <parameterBindings name="InValue_1" objectPath="CurrentDomain"/>
    <returnValueBindings name="OutValue_1" objectPath="Domain"/>
  </nodes>
<!--@Since IS 7.3.1
Triggers all the necessary procedures of a successful order.
@Location 12,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode11" strict="true" name="AfterCheckoutProcessing"
      callMode="Private">
<!--@BendPoints 25,4-->
    <nodeSuccessors name="next" next="KeyMapper0"/>
<!--The affected User.-->
    <parameters name="User" type="com.intershop.beehive.core.capi.user.User"/>
<!--The affected Organization.-->
    <parameters name="Organization" type="com.intershop.component.organization.capi.Organization"/>
<!--The made Order.-->
    <parameters name="Order" type="com.intershop.beehive.bts.capi.orderprocess.fulfillment.Order"/>
<!--The app context.-->
    <parameters name="ApplicationBO" type="com.intershop.component.application.capi.ApplicationBO"/>
<!--The affected Session.-->
    <parameters name="TargetSession" type="com.intershop.beehive.core.capi.request.Session"/>
<!--The used Domain.-->
    <parameters name="Domain" type="com.intershop.beehive.core.capi.domain.Domain"/>
<!--The affected Request-->
    <parameters name="Request" type="com.intershop.beehive.core.capi.request.Request"/>
  </nodes>
<!--@Location 12,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper0">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 25,6-->
    <nodeSuccessors name="next" next="CallNode31"/>
    <parameterBindings name="InValue_1" objectPath="ApplicationBO:Repository(&quot;OrderBORepository&quot;)"/>
    <parameterBindings name="InValue_2" objectPath="ApplicationBO:Repository(&quot;UserBORepository&quot;):UserByID(User:ID):Extension(&quot;UserBOPreferencesExtension&quot;):OrderConfirmationEmails"/>
    <returnValueBindings name="OutValue_1" objectPath="OrderBORepository"/>
    <returnValueBindings name="OutValue_2" objectPath="OrderConfirmationEmails"/>
  </nodes>
<!--@Location 12,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode31">
    <nodeSuccessors name="next" next="CallNode2"/>
    <startNode referencedName="ProcessOrders-GetOrderBO"/>
  </nodes>
<!--@Location 12,4-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode2">
    <nodeSuccessors name="next" next="GetDomainPreference0"/>
    <parameterBindings name="ExportScenarioDomain" objectPath="Organization:OwningDomain"/>
    <startNode referencedName="ProcessImmediateOrderExport-StartExport"/>
  </nodes>
<!--@Location 12,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference0">
    <configurationValues name="DefaultPreferenceKey" value="OrderNotificationSendNotification"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="DecisionNode22"/>
<!--@BendPoints 27,11-->
    <nodeSuccessors name="pipelet_error" next="JoinNode56"/>
    <parameterBindings name="PreferenceDomain" objectPath="Order:Domain"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="SendNotificationEMail"/>
  </nodes>
<!--@Location 12,6-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode22" conditionKey="SendNotificationEMail"
      operator="str_eq" conditionValue="yes">
    <nodeSuccessors name="decision_yes" next="DecisionNode21"/>
    <nodeSuccessors name="decision_no" next="JoinNode56"/>
  </nodes>
<!--@Location 12,7-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode21" conditionKey="OrderConfirmationEmails">
    <nodeSuccessors name="decision_yes" next="DecisionNode23"/>
<!--@BendPoints 24,15 24,19-->
    <nodeSuccessors name="decision_no" next="JoinNode59"/>
  </nodes>
<!--@Location 12,8-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode23" conditionKey="OrderConfirmationEmails"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="JoinNode59"/>
    <nodeSuccessors name="decision_no" next="JoinNode55"/>
  </nodes>
<!--@Location 12,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode59">
<!--@BendPoints 25,20-->
    <nodeSuccessors name="next" next="ExecutePipeline0"/>
  </nodes>
<!--@Location 12,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExecutePipeline0">
    <configurationValues name="Asynchronous" value="false"/>
    <configurationValues name="PipelineName" value="ProcessOrders"/>
    <configurationValues name="PipelineStartNode" value="SendOrderNotificationEMail"/>
    <pipelet href="enfinity:/core/pipelets/ExecutePipeline.xml"/>
    <nodeSuccessors name="next" next="JoinNode60"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode58"/>
    <parameterBindings name="CurrentDomain" objectPath="Domain"/>
    <parameterBindings name="CurrentUser" objectPath="User"/>
    <parameterBindings name="PipelineDomain" objectPath="Domain"/>
  </nodes>
<!--@Location 12,11-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode60">
    <nodeSuccessors name="next" next="CallNode35"/>
  </nodes>
<!--@Location 12,12-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode35">
    <nodeSuccessors name="False" next="JoinNode57"/>
<!--@BendPoints 26,27-->
    <nodeSuccessors name="True" next="ExecutePipeline1"/>
    <parameterBindings name="CheckDigitalOnly" constant="true"/>
    <parameterBindings name="ProductLineItems" objectPath="OrderBO:ProductLineItemBOs:Iterator"/>
    <startNode referencedName="ProcessGiftCard-HasGiftCards"/>
  </nodes>
<!--@Location 12,14-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode57">
    <nodeSuccessors name="next" next="CallNode34"/>
  </nodes>
<!--@Location 12,15-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode34">
    <nodeSuccessors name="next" next="CallNode0"/>
    <parameterBindings name="Session" objectPath="TargetSession"/>
    <startNode referencedName="ProcessPersonalizationGroup-UpdateUserGroupsAndPGID"/>
  </nodes>
<!--@Location 12,16-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode0">
    <nodeSuccessors name="next" next="CallNode24"/>
    <startNode referencedName="ProcessPromotion-UpdateUserLastOrderDate"/>
  </nodes>
<!--@Location 12,17-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode24">
<!--@BendPoints 25,36-->
    <nodeSuccessors name="next" next="CallNode32"/>
    <startNode referencedName="ProcessPromotionBudget-OnCreateOrder"/>
  </nodes>
<!--@Location 12,18-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode32">
    <nodeSuccessors name="next" next="CallNode14"/>
    <parameterBindings name="CurrentOrganization" objectPath="Organization"/>
    <parameterBindings name="CurrentUser" objectPath="User"/>
    <startNode referencedName="ProcessUserGroups-GetCurrentUserUserGroups"/>
  </nodes>
<!--@Location 12,19-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode14">
    <nodeSuccessors name="next" next="CallNode23"/>
    <startNode referencedName="ProcessPromotionCodeForBasket-RemoveOrderAssignments"/>
  </nodes>
<!--@Location 12,20-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode23">
<!--@BendPoints 25,42-->
    <nodeSuccessors name="next" next="CallNode33"/>
    <startNode referencedName="ProcessPromotionCodeForBasket-OnCreateOrder"/>
  </nodes>
<!--@Location 12,21-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode33">
    <nodeSuccessors name="next" next="EndNode19"/>
    <startNode referencedName="ProcessAffiliate-BookOrderToAffiliate"/>
  </nodes>
<!--@Location 12,22-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode19" strict="true"/>
<!--@Location 13,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExecutePipeline1">
    <configurationValues name="Asynchronous" value="false"/>
    <configurationValues name="PipelineName" value="ProcessGiftCard"/>
    <configurationValues name="PipelineStartNode" value="SendGiftCardEmails"/>
    <pipelet href="enfinity:/core/pipelets/ExecutePipeline.xml"/>
    <nodeSuccessors name="next" next="JoinNode61"/>
<!--@BendPoints 29,27 29,29-->
    <nodeSuccessors name="pipelet_error" next="JoinNode61"/>
    <parameterBindings name="CurrentDomain" objectPath="Domain"/>
    <parameterBindings name="CurrentUser" objectPath="User"/>
    <parameterBindings name="PipelineDomain" objectPath="Domain"/>
  </nodes>
<!--@Location 13,14-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode61">
    <nodeSuccessors name="next" next="JoinNode57"/>
  </nodes>
<!--@Location 13,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode58">
<!--@BendPoints 27,23-->
    <nodeSuccessors name="next" next="JoinNode60"/>
  </nodes>
<!--@Location 13,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode55">
    <nodeSuccessors name="next" next="JoinNode58"/>
  </nodes>
<!--@Location 13,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode56">
    <nodeSuccessors name="next" next="JoinNode55"/>
  </nodes>
<!--@Location 27,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode4" strict="true" name="CancelOrder"
      callMode="Private">
    <nodeSuccessors name="next" next="UpdateOrderBOStatus1" action="begin"/>
    <parameters name="User" type="com.intershop.beehive.core.capi.user.User"/>
<!--The order to cancel.-->
    <parameters name="OrderBO" type="com.intershop.component.order.capi.OrderBO"/>
<!--The current organization.-->
    <parameters name="Organization" type="com.intershop.component.organization.capi.Organization"
        optional="true"/>
<!--In case paymant already canceled.-->
    <parameters name="IgnorePaymentCancel" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 27,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateOrderBOStatus1">
    <pipelet href="enfinity:/bc_order/pipelets/UpdateOrderBOStatus.xml"/>
    <nodeSuccessors name="next" next="KeyMapper8"/>
    <parameterBindings name="newOrderStatus" constant="CANCELLED"/>
  </nodes>
<!--@Location 27,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper8">
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 55,8-->
    <nodeSuccessors name="next" next="CallNode5"/>
    <parameterBindings name="InValue_1" objectPath="OrderBO:Extension(&quot;PersistentObjectBOExtension&quot;):PersistentObject"/>
    <parameterBindings name="InValue_3" constant=""/>
    <returnValueBindings name="OutValue_1" objectPath="Order"/>
  </nodes>
<!--@Location 27,4-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode5">
    <nodeSuccessors name="next" next="RollbackInventoryBooking_VoSw8MSUEeer1vdsCEaOpg"/>
    <startNode referencedName="ProcessAffiliate-RemoveRevenue"/>
  </nodes>
<!--@Location 27,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RollbackInventoryBooking_VoSw8MSUEeer1vdsCEaOpg">
    <pipelet href="enfinity:/bts/pipelets/RollbackInventoryBooking.xml"/>
<!--@BendPoints 55,12-->
    <nodeSuccessors name="next" next="GetDomainPreference11"/>
    <parameterBindings name="LineItemCtnr" objectPath="Order"/>
  </nodes>
<!--@Location 27,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference11">
    <configurationValues name="DefaultPreferenceKey" value="OrderNotificationSendNotification"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="CallNode12"/>
    <parameterBindings name="PreferenceDomain" objectPath="Order:Domain"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="SendNotificationEMail"/>
  </nodes>
<!--@Location 27,7-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode12">
    <nodeSuccessors name="next" next="RemovePromotionCodeOrderAssignmentsFromOrder__igHgHEuEeefvvofgU7aVA"/>
    <startNode referencedName="ProcessGiftCard-CancelOrder"/>
  </nodes>
<!--@Location 27,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemovePromotionCodeOrderAssignmentsFromOrder__igHgHEuEeefvvofgU7aVA">
    <pipelet href="enfinity:/bc_marketing/pipelets/RemovePromotionCodeOrderAssignmentsFromOrder.xml"/>
    <nodeSuccessors name="next" next="LoopNode1"/>
  </nodes>
<!--@Location 27,9-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode1" loop="OrderBO:Extension(&quot;Payment&quot;):PaymentBOs">
    <nodeSuccessors name="next" next="DecisionNode19"/>
    <entry key="PaymentBO">
      <nodeSuccessors name="loop_entry_next" next="CallNode11"/>
    </entry>
  </nodes>
<!--@Location 27,10-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode11">
    <nodeSuccessors name="next" next="JoinNode47"/>
    <nodeSuccessors name="Error" next="KeyMapper13"/>
    <startNode referencedName="ProcessPayment-Rollback"/>
  </nodes>
<!--@Location 26,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode47">
<!--@BendPoints 53,19-->
    <nodeSuccessors name="next" next="LoopNode1_Entry"/>
  </nodes>
<!--@Location 27,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper13">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
<!--@BendPoints 53,23-->
    <nodeSuccessors name="next" next="JoinNode47"/>
    <parameterBindings name="InValue_1" constant="true"/>
    <returnValueBindings name="OutValue_1" objectPath="HasError"/>
  </nodes>
<!--@Location 28,9-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode19" conditionKey="HasError">
<!--@BendPoints 59,19-->
    <nodeSuccessors name="decision_yes" next="UpdateOrderStatus0"/>
<!--@BendPoints 57,19-->
    <nodeSuccessors name="decision_no" next="DecisionNode13" action="commit"/>
  </nodes>
<!--@Location 29,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateOrderStatus0">
    <configurationValues name="StateGroup" value="OrderPaymentStatus"/>
    <configurationValues name="StateName" value="MANUAL_INTERVENTION_NEEDED"/>
    <pipelet href="enfinity:/bts/pipelets/UpdateOrderStatus.xml"/>
    <nodeSuccessors name="next" next="EndNode18" action="commit"/>
  </nodes>
<!--@Location 29,11-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode18" name="ERROR" strict="true"/>
<!--@Location 28,12-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode13" conditionKey="SendNotificationEMail"
      operator="str_eq" conditionValue="yes">
    <nodeSuccessors name="decision_yes" next="Pipelet1"/>
<!--@BendPoints 59,25-->
    <nodeSuccessors name="decision_no" next="JoinNode39"/>
  </nodes>
<!--@Location 28,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet1">
    <configurationValues name="Asynchronous" value="true"/>
    <configurationValues name="PipelineName" value="ProcessOrders"/>
    <configurationValues name="PipelineStartNode" value="SendCancelNotificationEMail"/>
    <pipelet href="enfinity:/core/pipelets/ExecutePipeline.xml"/>
    <nodeSuccessors name="next" next="JoinNode7"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode39"/>
    <parameterBindings name="CurrentUser" objectPath="User"/>
    <parameterBindings name="PipelineDomain" objectPath="CurrentDomain"/>
  </nodes>
<!--@Location 28,14-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode7">
    <nodeSuccessors name="next" next="EndNode8"/>
  </nodes>
<!--@Location 28,15-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode8" strict="true"/>
<!--@Location 29,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode39">
<!--@BendPoints 59,29-->
    <nodeSuccessors name="next" next="JoinNode7"/>
  </nodes>
<!--Is only necessary to to get the OrderBO from Order.
@Location 28,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode14" strict="true" name="CancelOrderExtension"
      callMode="Private">
    <nodeSuccessors name="next" next="GetOrderBO0"/>
    <parameters name="User" type="com.intershop.beehive.core.capi.user.User"/>
    <parameters name="ApplicationBO" type="com.intershop.component.application.capi.ApplicationBO"/>
<!--The current organization.-->
    <parameters name="Organization" type="com.intershop.component.organization.capi.Organization"/>
<!--In case paymant already canceled.-->
    <parameters name="IgnorePaymentCancel" type="java.lang.String" optional="true"/>
    <parameters name="Order" type="com.intershop.beehive.bts.capi.orderprocess.fulfillment.Order"/>
  </nodes>
<!--@Location 28,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetOrderBO0">
    <pipelet href="enfinity:/bc_order/pipelets/GetOrderBO.xml"/>
    <nodeSuccessors name="next" next="CallNode10"/>
    <parameterBindings name="OrderBORepository" objectPath="ApplicationBO:Repository(&quot;OrderBORepository&quot;)"/>
    <parameterBindings name="OrderID" nullBinding="true"/>
  </nodes>
<!--@Location 28,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode10">
    <nodeSuccessors name="next" next="EndNode20"/>
<!--@BendPoints 59,7-->
    <nodeSuccessors name="ERROR" next="EndNode21"/>
    <startNode referencedName="ProcessOrders-CancelOrder"/>
  </nodes>
<!--@Location 28,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode20" strict="true"/>
<!--@Location 29,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode21" name="Error" strict="true"/>
<!--Checks is the provided order belongs to the current user. If the order belongs to the current user then the 'Yes' exit is used, otherwise the 'No' exit is used.
@Location 1,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode0" strict="true" name="CheckOrderBelongsToCurrentUser"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode0"/>
<!--The order that needs to be checked.-->
    <parameters name="OrderBO" type="com.intershop.component.order.capi.OrderBO"/>
  </nodes>
<!--@Location 1,16-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode0" conditionKey="CurrentUser:ID"
      operator="str_eq" conditionItem="OrderBO:User:ID">
    <nodeSuccessors name="decision_yes" next="EndNode0"/>
<!--@BendPoints 5,33-->
    <nodeSuccessors name="decision_no" next="EndNode7"/>
  </nodes>
<!--@Location 1,17-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode0" name="Yes" strict="true"/>
<!--@Location 2,17-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode7" name="No" strict="true"/>
<!--@Location 1,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode1" strict="true" name="CheckOrdersExist"
      callMode="Private">
<!--@BendPoints 3,4-->
    <nodeSuccessors name="next" next="ExecuteCountQuery1"/>
    <parameters name="Organization" type="com.intershop.component.organization.capi.Organization"/>
    <parameters name="User" type="com.intershop.beehive.core.capi.user.User"/>
<!--The current Session ID.-->
    <parameters name="SessionID" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 1,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExecuteCountQuery1">
    <configurationValues name="Datasource" value="current ORM connection"/>
    <configurationValues name="ParameterName_01" value="OrderDomain"/>
    <configurationValues name="ParameterName_02" value="Buyer"/>
    <configurationValues name="ParameterName_03" value="SessionID"/>
    <configurationValues name="QueryName" value="order/OrderSearch"/>
    <pipelet href="enfinity:/core/pipelets/ExecuteCountQuery.xml"/>
<!--@BendPoints 3,6-->
    <nodeSuccessors name="next" next="DecisionNode1"/>
<!--@BendPoints 5,5-->
    <nodeSuccessors name="pipelet_error" next="JoinNode1"/>
    <parameterBindings name="Connection" nullBinding="true"/>
    <parameterBindings name="ParameterValue_01" objectPath="Organization:OwningDomain"/>
    <parameterBindings name="ParameterValue_02" objectPath="User"/>
    <parameterBindings name="ParameterValue_03" objectPath="SessionID"/>
    <parameterBindings name="ParameterValue_04" nullBinding="true"/>
    <parameterBindings name="ParameterValue_05" nullBinding="true"/>
    <parameterBindings name="Parameters" nullBinding="true"/>
    <parameterBindings name="Query" nullBinding="true"/>
  </nodes>
<!--@Location 1,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode1" conditionKey="Count"
      operator="gt" conditionValue="0">
<!--@BendPoints 3,8-->
    <nodeSuccessors name="decision_yes" next="EndNode2"/>
    <nodeSuccessors name="decision_no" next="JoinNode1"/>
  </nodes>
<!--@Location 1,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode2" name="YES" strict="true"/>
<!--@Location 2,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode1">
<!--@BendPoints 5,8-->
    <nodeSuccessors name="next" next="EndNode3"/>
  </nodes>
<!--@Location 2,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode3" name="NO" strict="true"/>
<!--@deprecated
Deprecated since 7.9.0.0, will be removed in one of the next releases. Use HandlerChain\-based order creation instead.
@Location 33,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode7" strict="true" name="CreateGiftCards"
      callMode="Private">
    <nodeSuccessors name="next" next="GetApplicationBO1"/>
    <parameters name="Order" type="com.intershop.beehive.bts.capi.orderprocess.fulfillment.Order"/>
    <parameters name="Domain" type="com.intershop.beehive.core.capi.domain.Domain"/>
  </nodes>
<!--@Location 33,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetApplicationBO1">
    <pipelet href="enfinity:/bc_application/pipelets/GetApplicationBO.xml"/>
    <nodeSuccessors name="next" next="KeyMapper6"/>
  </nodes>
<!--@Location 33,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper6">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="LoopNode2"/>
    <parameterBindings name="InValue_1" objectPath="ApplicationBO:Repository(&quot;ServiceConfigurationBORepository&quot;)"/>
    <returnValueBindings name="OutValue_1" objectPath="ServiceConfigurationBORepository"/>
  </nodes>
<!--@Location 33,4-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode2" loop="Order:ProductLineItems">
<!--@BendPoints 69,9-->
    <nodeSuccessors name="next" next="EndNode13"/>
    <entry key="PLI">
      <nodeSuccessors name="loop_entry_next" next="DecisionNode5"/>
    </entry>
  </nodes>
<!--@Location 33,5-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode5" conditionKey="PLI:GC_ORDER_REQUIRED_GiftCardService">
    <nodeSuccessors name="decision_yes" next="CheckForEmptyString9"/>
    <nodeSuccessors name="decision_no" next="JoinNode0"/>
  </nodes>
<!--@Location 33,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckForEmptyString9">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckForEmptyString.xml"/>
    <nodeSuccessors name="next" next="CreateGiftCard2"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode32"/>
    <parameterBindings name="FilledString" objectPath="PLI:GC_ORDER_REQUIRED_GiftCardService"/>
  </nodes>
<!--@Location 33,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateGiftCard2">
    <pipelet href="enfinity:/bc_giftcard/pipelets/CreateGiftCard.xml"/>
    <nodeSuccessors name="next" next="DecisionNode9"/>
    <parameterBindings name="pli" objectPath="PLI"/>
  </nodes>
<!--@Location 33,8-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode9" conditionKey="GiftCardCreationResult:Status"
      operator="eq" conditionValue="0">
<!--@BendPoints 65,17-->
    <nodeSuccessors name="decision_yes" next="JoinNode32"/>
    <nodeSuccessors name="decision_no" next="End6"/>
  </nodes>
<!--@Location 32,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode32">
    <nodeSuccessors name="next" next="JoinNode0"/>
  </nodes>
<!--@Location 32,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode0">
<!--@BendPoints 65,9-->
    <nodeSuccessors name="next" next="LoopNode2_Entry"/>
  </nodes>
<!--@Location 33,9-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End6" name="ERROR" strict="true"/>
<!--@Location 34,9-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode13" strict="true"/>
<!--@Deprecated
Since IS 7.8.0
@Location 4,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode15" strict="true" name="CreateOrder"
      callMode="Private">
    <nodeSuccessors name="next" next="GetBasketBO2"/>
    <parameters name="Cart" type="com.intershop.beehive.bts.capi.orderprocess.basket.Basket"/>
    <parameters name="AllFormValues" type="java.util.Map"/>
    <parameters name="Organization" type="com.intershop.component.organization.capi.Organization"/>
    <parameters name="SendEmail" type="java.lang.String" optional="true"/>
    <parameters name="User" type="com.intershop.beehive.core.capi.user.User"/>
<!--the domain holding the preference 'InventoryService', specifiying the service to be used-->
    <parameters name="PreferenceDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
    <parameters name="CurrentAppContext" type="com.intershop.beehive.app.capi.AppContext"
        optional="true"/>
    <parameters name="BasketBORepository" type="com.intershop.component.basket.capi.BasketBORepository"/>
    <parameters name="ApplicationBO" type="com.intershop.component.application.capi.ApplicationBO"
        optional="true"/>
    <parameters name="CurrentOrganization" type="com.intershop.component.organization.capi.Organization"
        optional="true"/>
  </nodes>
<!--@Location 4,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetBasketBO2">
    <pipelet href="enfinity:/bc_basket/pipelets/GetBasketBO.xml"/>
    <nodeSuccessors name="next" next="ExtensionPointNode1"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
  </nodes>
<!--@Location 4,3-->
  <nodes xsi:type="pipeline:ExtensionPointNode" nodeID="ExtensionPointNode1" name="CreateOrder"
      strict="true">
    <nodeSuccessors name="next" next="DecisionNode16" action="begin"/>
    <nodeSuccessors name="pipelet_error" next="EndNode23"/>
<!--The Basket to create the Order from-->
    <parameters name="BasketBO" type="com.intershop.component.basket.capi.BasketBO"/>
  </nodes>
<!--@Location 4,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode16" conditionKey="Cart:ProductLineItemsCount"
      operator="gt" conditionValue="0">
<!--@BendPoints 9,10-->
    <nodeSuccessors name="decision_yes" next="CallNode13"/>
<!--@BendPoints 17,9-->
    <nodeSuccessors name="decision_no" next="JoinNode46"/>
  </nodes>
<!--@Location 4,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode13">
<!--@BendPoints 10,13-->
    <nodeSuccessors name="next" next="JoinNode49" action="rollback"/>
    <nodeSuccessors name="CompletlyBooked" next="GetBasketBO0"/>
    <parameterBindings name="Domain" objectPath="PreferenceDomain"/>
    <startNode referencedName="ProcessCart-BookBasketInventory"/>
  </nodes>
<!--@Location 10,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode49">
<!--@BendPoints 21,14-->
    <nodeSuccessors name="next" next="CallNode16" action="begin"/>
  </nodes>
<!--@Location 10,7-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode16">
<!--@BendPoints 21,16-->
    <nodeSuccessors name="next" next="CallNode21"/>
    <startNode referencedName="ProcessCart-AdjustBasketByBookingStatus"/>
  </nodes>
<!--@Location 10,8-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode21">
    <nodeSuccessors name="next" next="JoinNode53"/>
    <startNode referencedName="ProcessCart-Calculate"/>
  </nodes>
<!--@Location 10,16-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode53">
    <nodeSuccessors name="next" next="JoinNode54"/>
  </nodes>
<!--@Location 10,33-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode54">
    <nodeSuccessors name="next" next="JoinNode36"/>
  </nodes>
<!--@Location 10,34-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode36">
    <nodeSuccessors name="next" next="JoinNode30" action="commit"/>
  </nodes>
<!--@Location 9,35-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode30">
    <nodeSuccessors name="next" next="EndNode10"/>
  </nodes>
<!--@Location 9,36-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode10" name="ERROR" strict="true">
    <returnValues name="AuthorizationResultsIterator" type="java.util.Iterator" optional="true"/>
    <returnValues name="FailedInventoryIterator" type="java.util.Iterator&lt;com.intershop.beehive.xcs.capi.inventory.InventoryStatus>"
        optional="true"/>
    <returnValues name="AdjustedItems" type="java.util.Map" optional="true"/>
    <returnValues name="NotAvailableProductBOs" type="java.util.Iterator" optional="true"/>
    <returnValues name="NotAvailableProducts" type="java.util.Iterator" optional="true"/>
    <returnValues name="PaymentReduceResultsIterator" type="java.util.Iterator" optional="true"/>
    <returnValues name="PaymentRefundResultsIterator" type="java.util.Iterator" optional="true"/>
    <returnValues name="Reverse_Gift_Card_Creation" type="java.lang.String" optional="true"/>
    <returnValues name="PaymentCancelResultsIterator" type="java.util.Iterator" optional="true"/>
  </nodes>
<!--@Location 4,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetBasketBO0">
    <pipelet href="enfinity:/bc_basket/pipelets/GetBasketBO.xml"/>
    <nodeSuccessors name="next" next="TryLock0"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
  </nodes>
<!--@Location 4,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="TryLock0">
    <configurationValues name="Timeout" value="10"/>
    <pipelet href="enfinity:/core/pipelets/TryLock.xml"/>
    <nodeSuccessors name="next" next="DecisionNode24"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode46"/>
    <parameterBindings name="LockObject" objectPath="Cart"/>
  </nodes>
<!--@Location 4,9-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode24" conditionKey="BasketBO:Status"
      operator="str_eq" conditionValue="ORDERED">
    <nodeSuccessors name="decision_yes" next="JoinNode10"/>
    <nodeSuccessors name="decision_no" next="CreateOrdersFromBasket21"/>
  </nodes>
<!--@Location 8,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode10">
    <nodeSuccessors name="next" next="JoinNode21"/>
  </nodes>
<!--@Location 8,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode21">
    <nodeSuccessors name="next" next="JoinNode2"/>
  </nodes>
<!--@Location 8,11-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode2">
    <nodeSuccessors name="next" next="JoinNode20"/>
  </nodes>
<!--@Location 8,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode20">
    <nodeSuccessors name="next" next="JoinNode34"/>
  </nodes>
<!--@Location 8,24-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode34">
    <nodeSuccessors name="next" next="JoinNode28"/>
  </nodes>
<!--@Location 8,34-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode28">
    <nodeSuccessors name="next" next="JoinNode30" action="rollback"/>
  </nodes>
<!--@Location 4,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateOrdersFromBasket21">
    <configurationValues name="OrderType" value="SellerOrder"/>
    <configurationValues name="SelectionMode" value="IgnoreSelected"/>
    <configurationValues name="SplitMode" value="NoSplit"/>
    <pipelet href="enfinity:/bc_requisition/pipelets/CreateOrdersFromBasket2.xml"/>
    <nodeSuccessors name="next" next="GetFirstElementOfIterator1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode21"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <parameterBindings name="OrderDomain" objectPath="Organization:OwningDomain"/>
  </nodes>
<!--@Location 4,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetFirstElementOfIterator1">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetFirstElementOfIterator.xml"/>
    <nodeSuccessors name="next" next="AssignOrderDocumentNos1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode2"/>
    <parameterBindings name="Iterator" objectPath="Orders"/>
    <returnValueBindings name="FirstElement" objectPath="Order"/>
  </nodes>
<!--@Location 4,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AssignOrderDocumentNos1">
    <configurationValues name="DomainSpecific" value="true"/>
    <configurationValues name="NumberPattern" value="00000000"/>
    <configurationValues name="StartWith" value="1"/>
    <pipelet href="enfinity:/bts/pipelets/AssignOrderDocumentNos.xml"/>
<!--@BendPoints 9,26-->
    <nodeSuccessors name="next" next="CallNode22"/>
    <parameterBindings name="Orders" nullBinding="true"/>
  </nodes>
<!--@Location 4,13-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode22">
<!--@BendPoints 9,28-->
    <nodeSuccessors name="next" next="UpdateLineItemStatus2"/>
    <nodeSuccessors name="ERROR" next="DecisionNode10"/>
    <startNode referencedName="ProcessPayment-Start"/>
  </nodes>
<!--@Location 4,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateLineItemStatus2">
    <configurationValues name="StatusGroup" value="Order"/>
    <configurationValues name="StatusID" value="10"/>
    <configurationValues name="StatusType" value="Status"/>
    <pipelet href="enfinity:/bc_requisition/pipelets/UpdateLineItemStatus.xml"/>
<!--@BendPoints 9,30-->
    <nodeSuccessors name="next" next="UpdateLineItemStatus1"/>
    <parameterBindings name="InputStatusGroup" nullBinding="true"/>
    <parameterBindings name="InputStatusID" nullBinding="true"/>
    <parameterBindings name="LineItemID" nullBinding="true"/>
    <parameterBindings name="LineItemIDs" nullBinding="true"/>
    <parameterBindings name="Requisition" nullBinding="true"/>
  </nodes>
<!--@Location 4,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateLineItemStatus1">
    <configurationValues name="StatusGroup" value="Order"/>
    <configurationValues name="StatusID" value="10"/>
    <configurationValues name="StatusType" value="Status2"/>
    <pipelet href="enfinity:/bc_requisition/pipelets/UpdateLineItemStatus.xml"/>
    <nodeSuccessors name="next" next="ExtensionPointNode0"/>
    <parameterBindings name="InputStatusGroup" nullBinding="true"/>
    <parameterBindings name="InputStatusID" nullBinding="true"/>
    <parameterBindings name="LineItemID" nullBinding="true"/>
    <parameterBindings name="LineItemIDs" nullBinding="true"/>
    <parameterBindings name="Requisition" nullBinding="true"/>
  </nodes>
<!--@Location 4,16-->
  <nodes xsi:type="pipeline:ExtensionPointNode" nodeID="ExtensionPointNode0" name="OrderCreated"
      strict="true">
    <nodeSuccessors name="next" next="DecisionNode3"/>
    <parameters name="CurrentOrder" type="com.intershop.beehive.bts.capi.orderprocess.fulfillment.Order"/>
    <parameters name="CurrentSession" type="com.intershop.beehive.core.capi.request.Session"/>
    <parameters name="CurrentUser" type="com.intershop.beehive.core.capi.user.User"/>
    <parameterBindings name="CurrentOrder" objectPath="Order"/>
  </nodes>
<!--@Location 4,17-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode3" conditionKey="CurrentSession:getObject(&quot;T_ABTestMode&quot;)"
      operator="str_eq" conditionValue="Enabled">
    <nodeSuccessors name="decision_yes" next="CallNode18"/>
<!--@BendPoints 10,35 10,39-->
    <nodeSuccessors name="decision_no" next="JoinNode26"/>
  </nodes>
<!--@Location 4,18-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode18">
    <nodeSuccessors name="next" next="JoinNode26"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
    <parameterBindings name="Order" objectPath="Order"/>
    <parameterBindings name="Session" objectPath="CurrentSession"/>
    <startNode referencedName="ProcessABTesting-LogOrderEvents"/>
  </nodes>
<!--@Location 4,19-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode26">
<!--@BendPoints 9,40-->
    <nodeSuccessors name="next" next="UpdateLineItemStatus11"/>
  </nodes>
<!--@Location 4,20-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateLineItemStatus11">
    <configurationValues name="StatusGroup" value="Product"/>
    <configurationValues name="StatusID" value="5"/>
    <pipelet href="enfinity:/bc_requisition/pipelets/UpdateLineItemStatus.xml"/>
    <nodeSuccessors name="next" next="LoopNode5"/>
    <parameterBindings name="InputStatusGroup" nullBinding="true"/>
    <parameterBindings name="InputStatusID" nullBinding="true"/>
    <parameterBindings name="LineItemID" nullBinding="true"/>
    <parameterBindings name="LineItemIDs" nullBinding="true"/>
    <parameterBindings name="Order" nullBinding="true"/>
    <parameterBindings name="Requisition" objectPath="Cart"/>
  </nodes>
<!--@Location 4,21-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode5" loop="Order:PaymentTransaction">
<!--@BendPoints 11,43-->
    <nodeSuccessors name="next" next="AddBasketToBasketHistory0"/>
    <entry key="PaymentTransaction">
<!--@BendPoints 9,44-->
      <nodeSuccessors name="loop_entry_next" next="DecisionNode8"/>
    </entry>
  </nodes>
<!--@Location 4,22-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode8" conditionKey="PaymentTransaction:RequiresRedirectForAuthorization"
      operator="str_eq" conditionValue="false">
<!--@BendPoints 7,45 7,43-->
    <nodeSuccessors name="decision_yes" next="LoopNode5_Entry"/>
    <nodeSuccessors name="decision_no" next="DetermineRedirectURLForAuthorization1"/>
  </nodes>
<!--@Location 4,24-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DetermineRedirectURLForAuthorization1">
    <configurationValues name="ContextPipeline" value="ViewCheckoutConfirmation-FromRedirect"/>
    <pipelet href="enfinity:/bts/pipelets/DetermineRedirectURLForAuthorization.xml"/>
    <nodeSuccessors name="next" next="UpdateOrderStatus1"/>
<!--@BendPoints 12,49-->
    <nodeSuccessors name="pipelet_error" next="AddObjectToVector5"/>
    <parameterBindings name="Email" objectPath="MailTo"/>
  </nodes>
<!--@Location 4,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateOrderStatus1">
    <configurationValues name="StateGroup" value="OrderStatus"/>
    <configurationValues name="StateName" value="PENDING"/>
    <pipelet href="enfinity:/bts/pipelets/UpdateOrderStatus.xml"/>
    <nodeSuccessors name="next" next="JoinNode31"/>
  </nodes>
<!--@Location 4,26-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode31">
<!--@BendPoints 9,54-->
    <nodeSuccessors name="next" next="CallNode19"/>
  </nodes>
<!--@Location 4,27-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode19">
    <nodeSuccessors name="next" next="CallNode26"/>
<!--@BendPoints 13,55-->
    <nodeSuccessors name="ERROR" next="CallNode25"/>
    <parameterBindings name="Domain" objectPath="Organization:OwningDomain"/>
    <startNode referencedName="ProcessOrders-CreateGiftCards"/>
  </nodes>
<!--@Location 4,29-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode26">
    <nodeSuccessors name="next" next="ExchangeSessionObject3" action="commit"/>
    <startNode referencedName="ProcessOrders-UpdateWishlistItems"/>
  </nodes>
<!--@Location 4,31-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject3">
    <configurationValues name="ProcessMethod" value="Put Object to Session"/>
    <configurationValues name="SessionObjectName" value="CurrentRedirectBeforeCheckoutPII"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
    <nodeSuccessors name="next" next="JoinNode38"/>
<!--@BendPoints 10,63 10,65-->
    <nodeSuccessors name="pipelet_error" next="JoinNode38"/>
    <parameterBindings name="SaveObject" nullBinding="true"/>
    <parameterBindings name="SessionObjectName" nullBinding="true"/>
  </nodes>
<!--@Location 4,32-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode38">
    <nodeSuccessors name="next" next="EndNode11"/>
  </nodes>
<!--@Location 4,33-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode11" strict="true">
    <returnValues name="Order" type="com.intershop.beehive.bts.capi.orderprocess.fulfillment.Order"/>
    <returnValues name="RedirectURL" type="java.lang.String" optional="true"/>
    <returnValues name="NotAvailableProducts" type="java.util.Iterator" optional="true"/>
    <returnValues name="NotAvailableProductBOs" type="java.util.Iterator" optional="true"/>
    <returnValues name="AdjustedItems" type="java.util.Map" optional="true"/>
  </nodes>
<!--@Location 6,28-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode25">
<!--@BendPoints 13,58-->
    <nodeSuccessors name="next" next="RollbackInventoryBooking_R1Ng4MSUEeer1vdsCEaOpg"/>
    <parameterBindings name="Domain" objectPath="Organization:OwningDomain"/>
    <startNode referencedName="ProcessOrders-VoidGiftCards"/>
  </nodes>
<!--@Location 6,29-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RollbackInventoryBooking_R1Ng4MSUEeer1vdsCEaOpg">
    <pipelet href="enfinity:/bts/pipelets/RollbackInventoryBooking.xml"/>
<!--@BendPoints 13,60-->
    <nodeSuccessors name="next" next="DeterminePaymentAuthorizationSequence1"/>
    <parameterBindings name="LineItemCtnr" objectPath="Cart"/>
  </nodes>
<!--@Location 6,30-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DeterminePaymentAuthorizationSequence1">
    <pipelet href="enfinity:/bts/pipelets/DeterminePaymentAuthorizationSequence.xml"/>
<!--@BendPoints 13,62-->
    <nodeSuccessors name="next" next="SetDictionaryValue2"/>
  </nodes>
<!--@Location 6,31-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue2">
    <configurationValues name="Name" value="Reverse_Gift_Card_Creation"/>
    <configurationValues name="Value" value="true"/>
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 13,64-->
    <nodeSuccessors name="next" next="DecisionNode12"/>
  </nodes>
<!--@Location 6,32-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode12" conditionKey="PaymentTransactions">
    <nodeSuccessors name="decision_yes" next="UpdateOrderStatus3"/>
<!--@BendPoints 13,69-->
    <nodeSuccessors name="decision_no" next="JoinNode28"/>
  </nodes>
<!--@Location 7,32-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateOrderStatus3">
    <configurationValues name="StateGroup" value="OrderStatus"/>
    <configurationValues name="StateName" value="CANCELLED"/>
    <pipelet href="enfinity:/bts/pipelets/UpdateOrderStatus.xml"/>
    <nodeSuccessors name="next" next="CallNode7"/>
  </nodes>
<!--@Location 7,33-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode7">
    <nodeSuccessors name="next" next="JoinNode54"/>
    <parameterBindings name="PaymentTransactionIterator" objectPath="PaymentTransactions"/>
    <startNode referencedName="ProcessPayment-ReverseAuthorization"/>
  </nodes>
<!--@Location 6,24-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector5">
    <configurationValues name="Mode" value="Allow Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode34"/>
    <parameterBindings name="InVector" nullBinding="true"/>
    <parameterBindings name="Object" objectPath="AuthorizationResult"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="AuthorizationResultsIterator"/>
    <returnValueBindings name="OutVector" nullBinding="true"/>
  </nodes>
<!--@Location 5,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddBasketToBasketHistory0">
    <configurationValues name="BasketType" value="REQUISITION"/>
    <pipelet href="enfinity:/bts/pipelets/AddBasketToBasketHistory.xml"/>
<!--@BendPoints 11,53-->
    <nodeSuccessors name="next" next="JoinNode31"/>
    <parameterBindings name="Basket" objectPath="Cart"/>
  </nodes>
<!--Check if order status is 'CANCELLED'
@Location 6,13-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode10" conditionKey="Order:Status"
      operator="eq" conditionValue="6">
<!--@BendPoints 13,28-->
    <nodeSuccessors name="decision_yes" next="RollbackInventoryBooking_Zgt0AMSUEeer1vdsCEaOpg"/>
    <nodeSuccessors name="decision_no" next="JoinNode20"/>
  </nodes>
<!--@Location 6,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RollbackInventoryBooking_Zgt0AMSUEeer1vdsCEaOpg">
    <pipelet href="enfinity:/bts/pipelets/RollbackInventoryBooking.xml"/>
<!--@BendPoints 13,30-->
    <nodeSuccessors name="next" next="UpdateLineItemStatus3"/>
    <parameterBindings name="LineItemCtnr" objectPath="Cart"/>
  </nodes>
<!--@Location 6,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateLineItemStatus3">
    <configurationValues name="StatusGroup" value="Order"/>
    <configurationValues name="StatusID" value="10"/>
    <configurationValues name="StatusType" value="Status"/>
    <pipelet href="enfinity:/bc_requisition/pipelets/UpdateLineItemStatus.xml"/>
<!--@BendPoints 13,32-->
    <nodeSuccessors name="next" next="UpdateLineItemStatus4"/>
    <parameterBindings name="InputStatusGroup" nullBinding="true"/>
    <parameterBindings name="InputStatusID" nullBinding="true"/>
    <parameterBindings name="LineItemID" nullBinding="true"/>
    <parameterBindings name="LineItemIDs" nullBinding="true"/>
    <parameterBindings name="Requisition" nullBinding="true"/>
  </nodes>
<!--@Location 6,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateLineItemStatus4">
    <configurationValues name="StatusGroup" value="Order"/>
    <configurationValues name="StatusID" value="10"/>
    <configurationValues name="StatusType" value="Status2"/>
    <pipelet href="enfinity:/bc_requisition/pipelets/UpdateLineItemStatus.xml"/>
<!--@BendPoints 15,33-->
    <nodeSuccessors name="next" next="JoinNode53"/>
    <parameterBindings name="InputStatusGroup" nullBinding="true"/>
    <parameterBindings name="InputStatusID" nullBinding="true"/>
    <parameterBindings name="LineItemID" nullBinding="true"/>
    <parameterBindings name="LineItemIDs" nullBinding="true"/>
    <parameterBindings name="Requisition" nullBinding="true"/>
  </nodes>
<!--@Location 8,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode46">
    <nodeSuccessors name="next" next="JoinNode10"/>
  </nodes>
<!--@Location 5,3-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode23" name="Error" strict="true"/>
<!--@Location 40,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode13" strict="true" name="GetLatestOrders"
      callMode="Private">
    <nodeSuccessors name="next" next="CallNode6"/>
<!--The current domain-->
    <parameters name="CurrentDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
<!--The current User-->
    <parameters name="CurrentUser" type="com.intershop.beehive.core.capi.user.User"/>
<!--The current request-->
    <parameters name="CurrentRequest" type="com.intershop.beehive.core.capi.request.Request"/>
  </nodes>
<!--@Location 40,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode6">
    <nodeSuccessors name="next" next="ExecuteObjectsQuery0"/>
    <parameterBindings name="Domain" objectPath="CurrentDomain"/>
    <parameterBindings name="Request" objectPath="CurrentRequest"/>
    <startNode referencedName="ProcessOrganization-GetOrganization"/>
  </nodes>
<!--@Location 40,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExecuteObjectsQuery0">
    <configurationValues name="ParameterName_01" value="Buyer"/>
    <configurationValues name="ParameterName_02" value="Limit"/>
    <configurationValues name="ParameterName_03" value="OrderDomain"/>
    <configurationValues name="ParameterName_04" value="SearchForAuctionOrders"/>
    <configurationValues name="QueryName" value="order/OrderSearch"/>
    <pipelet href="enfinity:/core/pipelets/ExecuteObjectsQuery.xml"/>
    <nodeSuccessors name="next" next="JoinNode27"/>
<!--@BendPoints 82,9 82,11-->
    <nodeSuccessors name="pipelet_error" next="JoinNode27"/>
    <parameterBindings name="Connection" nullBinding="true"/>
    <parameterBindings name="ParameterValue_01" objectPath="CurrentUser"/>
    <parameterBindings name="ParameterValue_02" constant="(Integer)5"/>
    <parameterBindings name="ParameterValue_03" objectPath="Organization:OwningDomain"/>
    <parameterBindings name="ParameterValue_04" constant="(Boolean)false"/>
    <parameterBindings name="Parameters" nullBinding="true"/>
    <parameterBindings name="Query" nullBinding="true"/>
    <returnValueBindings name="SearchResult" objectPath="SortedOrders"/>
  </nodes>
<!--@Location 40,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode27">
    <nodeSuccessors name="next" next="EndNode22"/>
  </nodes>
<!--@Location 40,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode22" strict="true">
    <returnValues name="SortedOrders" type="java.util.Iterator"/>
  </nodes>
<!--@deprecated
Deprecated since 7.9.0.0, will be removed in one of the next releases. Use HandlerChain\-based order creation instead.
@Location 18,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode2" strict="true" name="GetNotificationMailTo"
      callMode="Private">
    <nodeSuccessors name="next" next="KeyMapper3"/>
    <parameters name="LineItemCtnr" type="com.intershop.beehive.bts.capi.orderprocess.LineItemCtnr"/>
  </nodes>
<!--@Location 18,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper3">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="CheckForEmptyString4"/>
    <parameterBindings name="InValue_1" objectPath="LineItemCtnr:NotificationEMail"/>
    <returnValueBindings name="OutValue_1" objectPath="MailTo"/>
  </nodes>
<!--@Location 18,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckForEmptyString4">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckForEmptyString.xml"/>
    <nodeSuccessors name="next" next="JoinNode29"/>
<!--@BendPoints 38,7-->
    <nodeSuccessors name="pipelet_error" next="CheckUserLoggedIn1"/>
    <parameterBindings name="FilledString" objectPath="MailTo"/>
  </nodes>
<!--@Location 18,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode29">
    <nodeSuccessors name="next" next="EndNode1"/>
  </nodes>
<!--@Location 18,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode1" strict="true">
    <returnValues name="MailTo" type="java.lang.String"/>
  </nodes>
<!--@Location 19,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckUserLoggedIn1">
    <pipelet href="enfinity:/core/pipelets/CheckUserLoggedIn.xml"/>
    <nodeSuccessors name="next" next="KeyMapper1"/>
<!--@BendPoints 41,7-->
    <nodeSuccessors name="pipelet_error" next="JoinNode23"/>
  </nodes>
<!--@Location 19,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper1">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="CheckForEmptyString8"/>
    <parameterBindings name="InValue_1" objectPath="CurrentUser:Profile:Email"/>
    <returnValueBindings name="OutValue_1" objectPath="MailTo"/>
  </nodes>
<!--@Location 19,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckForEmptyString8">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckForEmptyString.xml"/>
<!--@BendPoints 39,13-->
    <nodeSuccessors name="next" next="JoinNode29"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode23"/>
    <parameterBindings name="FilledString" objectPath="MailTo"/>
  </nodes>
<!--@Location 20,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode23">
    <nodeSuccessors name="next" next="End1"/>
  </nodes>
<!--@Location 20,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End1" name="ERROR" strict="true"/>
<!--@Location 22,12-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode6" strict="true" name="GetOrderBO"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode2"/>
    <parameters name="Order" type="com.intershop.beehive.bts.capi.orderprocess.fulfillment.Order"
        optional="true"/>
<!--The repository that handles the life cycle management of the order business object.-->
    <parameters name="OrderBORepository" type="com.intershop.component.order.capi.OrderBORepository"/>
  </nodes>
<!--@Location 22,13-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode2" conditionKey="Order">
    <nodeSuccessors name="decision_yes" next="GetOrderBO1"/>
<!--@BendPoints 46,27 46,31-->
    <nodeSuccessors name="decision_no" next="JoinNode25"/>
  </nodes>
<!--@Location 22,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetOrderBO1">
    <pipelet href="enfinity:/bc_order/pipelets/GetOrderBO.xml"/>
    <nodeSuccessors name="next" next="JoinNode25"/>
  </nodes>
<!--@Location 22,15-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode25">
    <nodeSuccessors name="next" next="EndNode14"/>
  </nodes>
<!--@Location 22,16-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode14" strict="true">
    <returnValues name="OrderBO" type="com.intershop.component.order.capi.OrderBO"
        optional="true"/>
  </nodes>
<!--@Location 19,12-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode5" strict="true" name="GetOrderByDocumentNo"
      callMode="Private">
<!--@BendPoints 39,26-->
    <nodeSuccessors name="next" next="CreateOrderRef1"/>
    <parameters name="OrderNumber" type="java.lang.String"/>
    <parameters name="Domain" type="com.intershop.beehive.core.capi.domain.Domain"/>
    <parameters name="ApplicationBO" type="com.intershop.component.application.capi.ApplicationBO"/>
  </nodes>
<!--@Location 19,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateOrderRef1">
    <pipelet href="enfinity:/bc_requisition/pipelets/CreateOrderRef.xml"/>
<!--@BendPoints 39,28-->
    <nodeSuccessors name="next" next="GetOrderByID1"/>
    <parameterBindings name="DocumentNo" objectPath="OrderNumber"/>
    <parameterBindings name="DomainName" objectPath="Domain:DomainName"/>
    <parameterBindings name="Order" nullBinding="true"/>
    <parameterBindings name="OrderTypeName" constant="SellerOrder"/>
  </nodes>
<!--@Location 19,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetOrderByID1">
    <pipelet href="enfinity:/bc_requisition/pipelets/GetOrderByID.xml"/>
    <nodeSuccessors name="next" next="GetOrderBO2"/>
<!--@BendPoints 41,29 41,34-->
    <nodeSuccessors name="pipelet_error" next="EndNode9"/>
    <parameterBindings name="OrderID" nullBinding="true"/>
    <parameterBindings name="OrderIDs" nullBinding="true"/>
    <parameterBindings name="OrderRefIDs" nullBinding="true"/>
    <returnValueBindings name="Orders" nullBinding="true"/>
  </nodes>
<!--@Location 19,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetOrderBO2">
    <pipelet href="enfinity:/bc_order/pipelets/GetOrderBO.xml"/>
    <nodeSuccessors name="next" next="CallNode9"/>
    <parameterBindings name="OrderBORepository" objectPath="ApplicationBO:Repository(&quot;OrderBORepository&quot;)"/>
  </nodes>
<!--@Location 19,16-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode9">
    <nodeSuccessors name="next" next="EndNode12"/>
    <parameterBindings name="LineItemCtnr" objectPath="Order"/>
    <startNode referencedName="ProcessOrders-GetNotificationMailTo"/>
  </nodes>
<!--@Location 19,17-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode12" strict="true">
<!--The found order.-->
    <returnValues name="Order" type="com.intershop.beehive.bts.capi.orderprocess.fulfillment.Order"/>
    <returnValues name="OrderBO" type="com.intershop.component.order.capi.OrderBO"/>
  </nodes>
<!--@Location 20,17-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode9" name="ERROR" strict="true"/>
<!--@deprecated
Deprecated since 7.9.0.0, will be removed in one of the next releases. Use HandlerChain\-based order creation instead.
@Location 38,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode10" strict="true" name="GetWishlistItem"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode14"/>
    <parameters name="WishlistItemID" type="java.lang.String" optional="true"/>
    <parameters name="WishlistID" type="java.lang.String" optional="true"/>
    <parameters name="WishlistOwnerID" type="java.lang.String" optional="true"/>
    <parameters name="ApplicationBO" type="com.intershop.component.application.capi.ApplicationBO"/>
    <parameters name="CurrentOrganization" type="com.intershop.component.organization.capi.Organization"/>
  </nodes>
<!--@Location 38,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode14" conditionKey="WishlistOwnerID">
    <nodeSuccessors name="decision_yes" next="DecisionNode15"/>
<!--@BendPoints 79,5-->
    <nodeSuccessors name="decision_no" next="JoinNode41"/>
  </nodes>
<!--@Location 38,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode15" conditionKey="WishlistID">
    <nodeSuccessors name="decision_yes" next="DecisionNode17"/>
    <nodeSuccessors name="decision_no" next="JoinNode41"/>
  </nodes>
<!--@Location 38,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode17" conditionKey="WishlistItemID">
    <nodeSuccessors name="decision_yes" next="KeyMapper2"/>
    <nodeSuccessors name="decision_no" next="JoinNode42"/>
  </nodes>
<!--@Location 38,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper2">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 77,12-->
    <nodeSuccessors name="next" next="GetUserBO1"/>
    <parameterBindings name="InValue_1" objectPath="ApplicationBO:Repository(&quot;UserBORepository&quot;)"/>
    <returnValueBindings name="OutValue_1" objectPath="UserBORepository"/>
  </nodes>
<!--@Location 38,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetUserBO1">
    <pipelet href="enfinity:/bc_user/pipelets/GetUserBO.xml"/>
    <nodeSuccessors name="next" next="KeyMapper4"/>
    <parameterBindings name="UserID" objectPath="WishlistOwnerID"/>
  </nodes>
<!--@Location 38,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper4">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 77,16-->
    <nodeSuccessors name="next" next="GetWishlistBO1"/>
    <parameterBindings name="InValue_1" objectPath="UserBO:Extension(&quot;Wishlist&quot;)"/>
    <returnValueBindings name="OutValue_1" objectPath="WishlistBORepository"/>
  </nodes>
<!--@Location 38,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetWishlistBO1">
    <pipelet href="enfinity:/bc_wishlist/pipelets/GetWishlistBO.xml"/>
<!--@BendPoints 77,18-->
    <nodeSuccessors name="next" next="GetWishlistItemBO1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode43"/>
  </nodes>
<!--@Location 38,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetWishlistItemBO1">
    <pipelet href="enfinity:/bc_wishlist/pipelets/GetWishlistItemBO.xml"/>
    <nodeSuccessors name="next" next="JoinNode40"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode44"/>
  </nodes>
<!--@Location 38,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode40">
    <nodeSuccessors name="next" next="EndNode17"/>
  </nodes>
<!--@Location 38,11-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode17" strict="true">
    <returnValues name="WishlistItemBO" type="com.intershop.component.wishlist.capi.WishlistItemBO"
        optional="true"/>
  </nodes>
<!--@Location 39,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode44">
<!--@BendPoints 79,21-->
    <nodeSuccessors name="next" next="JoinNode40"/>
  </nodes>
<!--@Location 39,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode43">
    <nodeSuccessors name="next" next="JoinNode44"/>
  </nodes>
<!--@Location 39,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode42">
    <nodeSuccessors name="next" next="JoinNode43"/>
  </nodes>
<!--@Location 39,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode41">
    <nodeSuccessors name="next" next="JoinNode42"/>
  </nodes>
<!--@Location 30,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start2" strict="true" name="SendCancelNotificationEMail"
      callMode="Private">
    <nodeSuccessors name="next" next="GetDomainPreference5"/>
    <parameters name="Order" type="com.intershop.beehive.bts.capi.orderprocess.fulfillment.Order"/>
    <parameters name="OrderBO" type="com.intershop.component.order.capi.OrderBO"/>
  </nodes>
<!--@Location 30,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference5">
    <configurationValues name="DefaultPreferenceKey" value="OrderCancelNotificationEmailFrom"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
<!--@BendPoints 61,8-->
    <nodeSuccessors name="next" next="CheckForEmptyString1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode12"/>
    <parameterBindings name="PreferenceDomain" objectPath="Order:Domain"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="MailFrom"/>
  </nodes>
<!--@Location 30,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckForEmptyString1">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckForEmptyString.xml"/>
    <nodeSuccessors name="next" next="KeyMapper11"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode12"/>
    <parameterBindings name="FilledString" objectPath="MailFrom"/>
  </nodes>
<!--@Location 30,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper11">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="GetDomainPreference8"/>
    <parameterBindings name="InValue_1" objectPath="Order:PriceDisplayTypeName"/>
    <parameterBindings name="InValue_2" objectPath="OrderBO:NotificationEmailAddress"/>
    <returnValueBindings name="OutValue_1" objectPath="PriceDisplayTypeName"/>
    <returnValueBindings name="OutValue_2" objectPath="MailTo"/>
  </nodes>
<!--@Location 30,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference8">
    <configurationValues name="DefaultPreferenceKey" value="OrderCancelNotificationEmailTemplate"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="CheckForEmptyString7"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode17"/>
    <parameterBindings name="PreferenceDomain" objectPath="Order:Domain"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="MailTemplate"/>
  </nodes>
<!--@Location 30,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckForEmptyString7">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckForEmptyString.xml"/>
    <nodeSuccessors name="next" next="ProcessMail1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode19"/>
    <parameterBindings name="FilledString" objectPath="MailTemplate"/>
  </nodes>
<!--@Location 30,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ProcessMail1">
    <pipelet href="enfinity:/bc_mail/pipelets/ProcessMail.xml"/>
    <nodeSuccessors name="next" next="End2"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode24"/>
  </nodes>
<!--@Location 30,9-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End2" strict="true"/>
<!--@Location 31,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode24">
    <nodeSuccessors name="next" next="End3"/>
  </nodes>
<!--@Location 31,9-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End3" name="ERROR" strict="true"/>
<!--@Location 31,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode19">
    <nodeSuccessors name="next" next="JoinNode24"/>
  </nodes>
<!--@Location 31,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode17">
    <nodeSuccessors name="next" next="JoinNode19"/>
  </nodes>
<!--@Location 31,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode12">
    <nodeSuccessors name="next" next="JoinNode17"/>
  </nodes>
<!--@deprecated
Deprecated since 7.9.0.0, will be removed in one of the next releases. Use HandlerChain\-based order creation instead.
@Location 24,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start1" strict="true" name="SendOrderNotificationEMail"
      callMode="Private">
    <nodeSuccessors name="next" next="CallNode8"/>
    <parameters name="Order" type="com.intershop.beehive.bts.capi.orderprocess.fulfillment.Order"/>
    <parameters name="ApplicationBO" type="com.intershop.component.application.capi.ApplicationBO"/>
  </nodes>
<!--@Location 24,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode8">
    <nodeSuccessors name="next" next="GetValuesFromRequest4"/>
    <parameterBindings name="Application" objectPath="ApplicationBO:PersistentObject"/>
    <parameterBindings name="DomainPreference" objectPath="Order:Domain"/>
    <startNode referencedName="ProcessGiftingPreferences-GetGiftingPreferences"/>
  </nodes>
<!--@Location 24,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetValuesFromRequest4">
    <configurationValues name="Namespace" value="Application"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetValuesFromRequest.xml"/>
    <nodeSuccessors name="next" next="JoinNode8"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode8"/>
    <parameterBindings name="Key" constant="CurrentOrganization"/>
    <parameterBindings name="Namespace" nullBinding="true"/>
  </nodes>
<!--@Location 24,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode8">
    <nodeSuccessors name="next" next="KeyMapper12"/>
  </nodes>
<!--@Location 24,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper12">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="KeyMapper5"/>
    <parameterBindings name="InValue_1" objectPath="Order:PriceDisplayTypeName"/>
    <returnValueBindings name="OutValue_1" objectPath="PriceDisplayTypeName"/>
  </nodes>
<!--@Location 24,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper5">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="CallNode4"/>
    <parameterBindings name="InValue_1" objectPath="ApplicationBO:Extension(&quot;Order&quot;):getOrderBORepository(Order)"/>
    <returnValueBindings name="OutValue_1" objectPath="OrderBORepository"/>
  </nodes>
<!--@Location 24,7-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode4">
    <nodeSuccessors name="next" next="GetBasketBO1"/>
    <startNode referencedName="ProcessOrders-GetOrderBO"/>
  </nodes>
<!--@Location 24,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetBasketBO1">
    <pipelet href="enfinity:/bc_basket/pipelets/GetBasketBO.xml"/>
    <nodeSuccessors name="next" next="CallNode3"/>
    <parameterBindings name="Basket" objectPath="Order:Basket"/>
    <parameterBindings name="BasketBORepository" objectPath="ApplicationBO:Extension(&quot;Basket&quot;):getBasketBORepository(OrderBO)"/>
  </nodes>
<!--@Location 24,10-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode3">
    <nodeSuccessors name="next" next="GetDomainPreference4"/>
<!--@BendPoints 51,21-->
    <nodeSuccessors name="ERROR" next="JoinNode14"/>
    <parameterBindings name="LineItemCtnr" objectPath="Order"/>
    <startNode referencedName="ProcessOrders-GetNotificationMailTo"/>
  </nodes>
<!--@Location 24,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference4">
    <configurationValues name="DefaultPreferenceKey" value="OrderNotificationEmailFrom"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
<!--@BendPoints 49,26-->
    <nodeSuccessors name="next" next="CheckForEmptyString0"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode14"/>
    <parameterBindings name="PreferenceDomain" objectPath="Order:Domain"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="MailFrom"/>
  </nodes>
<!--@Location 24,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckForEmptyString0">
    <pipelet href="enfinity:/core/pipelets/CheckForEmptyString.xml"/>
    <nodeSuccessors name="next" next="GetDomainPreference3"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode13"/>
    <parameterBindings name="FilledString" objectPath="MailFrom"/>
  </nodes>
<!--@Location 24,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference3">
    <configurationValues name="DefaultPreferenceKey" value="PriceType"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="JoinNode5"/>
<!--@BendPoints 50,29 50,31-->
    <nodeSuccessors name="pipelet_error" next="JoinNode5"/>
    <parameterBindings name="PreferenceDomain" objectPath="Order:Domain"/>
    <returnValueBindings name="PreferenceIntValue" objectPath="PriceType"/>
  </nodes>
<!--@Location 24,15-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode5">
    <nodeSuccessors name="next" next="ProcessMail2"/>
  </nodes>
<!--@Location 24,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ProcessMail2">
    <configurationValues name="UseErrorConnector" value="true"/>
    <configurationValues name="WaitForResult" value="true"/>
    <pipelet href="enfinity:/bc_mail/pipelets/ProcessMail.xml"/>
    <nodeSuccessors name="next" next="End5"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode9"/>
    <parameterBindings name="CurrencyCode" objectPath="CurrentRequest:CurrencyCode"/>
    <parameterBindings name="Domain" objectPath="Order:Domain"/>
    <parameterBindings name="LocaleID" objectPath="Order:PurchaseLocaleID"/>
    <parameterBindings name="MailTemplate" constant="email/order/OrderEMailNotification"/>
  </nodes>
<!--@Location 24,17-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End5" strict="true"/>
<!--@Location 25,16-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode9">
    <nodeSuccessors name="next" next="End4"/>
  </nodes>
<!--@Location 25,17-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End4" name="ERROR" strict="true"/>
<!--@Location 25,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode13">
    <nodeSuccessors name="next" next="JoinNode9"/>
  </nodes>
<!--@Location 25,12-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode14">
    <nodeSuccessors name="next" next="JoinNode13"/>
  </nodes>
<!--@deprecated
Deprecated since 7.9.0.0, will be removed in one of the next releases. Use HandlerChain\-based order creation instead.
@Location 21,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode3" strict="true" name="SetNotificationEMail"
      callMode="Private">
<!--@BendPoints 43,4-->
    <nodeSuccessors name="next" next="UpdateCustomAttribute0"/>
    <parameters name="LineItemCtnr" type="com.intershop.beehive.bts.capi.orderprocess.LineItemCtnr"/>
    <parameters name="MailTo" type="java.lang.String"/>
  </nodes>
<!--@Location 21,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateCustomAttribute0">
    <configurationValues name="DefaultAttributeName" value="NotificationEMail"/>
    <configurationValues name="DefaultAttributeType" value="String"/>
    <pipelet href="enfinity:/core/pipelets/UpdateCustomAttribute.xml"/>
    <nodeSuccessors name="next" next="EndNode4"/>
<!--@BendPoints 45,5-->
    <nodeSuccessors name="pipelet_error" next="EndNode5"/>
    <parameterBindings name="AttributeName" nullBinding="true"/>
    <parameterBindings name="AttributeType" nullBinding="true"/>
    <parameterBindings name="AttributeValue" objectPath="MailTo"/>
    <parameterBindings name="ExtensibleObject" objectPath="LineItemCtnr"/>
    <parameterBindings name="LocaleInformation" nullBinding="true"/>
  </nodes>
<!--@Location 21,3-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode4" strict="true"/>
<!--@Location 22,3-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode5" strict="true"/>
<!--@deprecated
Deprecated since 7.9.0.0, will be removed in one of the next releases. Use HandlerChain\-based order creation instead.
@Location 35,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode9" strict="true" name="UpdateWishlistItems"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode18"/>
    <parameters name="Order" type="com.intershop.beehive.bts.capi.orderprocess.fulfillment.Order"/>
    <parameters name="ApplicationBO" type="com.intershop.component.application.capi.ApplicationBO"
        optional="true"/>
    <parameters name="Organization" type="com.intershop.component.organization.capi.Organization"/>
  </nodes>
<!--@Location 35,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode18" conditionKey="ApplicationBO">
    <nodeSuccessors name="decision_yes" next="LoopNode4"/>
<!--@BendPoints 75,5-->
    <nodeSuccessors name="decision_no" next="JoinNode45"/>
  </nodes>
<!--@Location 35,3-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode4" loop="Order:ProductLineItems">
    <nodeSuccessors name="next" next="JoinNode45"/>
    <entry key="PLI">
      <nodeSuccessors name="loop_entry_next" next="CallNode28"/>
    </entry>
  </nodes>
<!--@Location 35,4-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode28">
    <nodeSuccessors name="next" next="DecisionNode7"/>
    <parameterBindings name="CurrentOrganization" objectPath="Organization"/>
    <parameterBindings name="WishlistID" objectPath="PLI:WishlistID"/>
    <parameterBindings name="WishlistItemID" objectPath="PLI:WishlistItemID"/>
    <parameterBindings name="WishlistOwnerID" objectPath="PLI:WishlistOwnerID"/>
    <startNode referencedName="ProcessOrders-GetWishlistItem"/>
  </nodes>
<!--@Location 35,5-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode7" conditionKey="WishlistItemBO">
    <nodeSuccessors name="decision_yes" next="CalculateQuantity1"/>
<!--@BendPoints 73,11-->
    <nodeSuccessors name="decision_no" next="JoinNode35"/>
  </nodes>
<!--@Location 35,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CalculateQuantity1">
    <configurationValues name="OperationType" value="addition"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CalculateQuantity.xml"/>
    <nodeSuccessors name="next" next="UpdateWishlistItemBO1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode35"/>
    <parameterBindings name="OperandA" objectPath="WishlistItemBO:PurchasedQuantity"/>
    <parameterBindings name="OperandB" objectPath="PLI:Quantity"/>
    <returnValueBindings name="Result" objectPath="PurchasedQuantity"/>
  </nodes>
<!--@Location 35,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateWishlistItemBO1">
    <pipelet href="enfinity:/bc_wishlist/pipelets/UpdateWishlistItemBO.xml"/>
    <nodeSuccessors name="next" next="JoinNode15"/>
    <parameterBindings name="DesiredQuantity" nullBinding="true"/>
    <parameterBindings name="Public" nullBinding="true"/>
  </nodes>
<!--@Location 35,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode15">
<!--@BendPoints 70,17 70,7-->
    <nodeSuccessors name="next" next="LoopNode4_Entry"/>
  </nodes>
<!--@Location 36,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode35">
<!--@BendPoints 73,17-->
    <nodeSuccessors name="next" next="JoinNode15"/>
  </nodes>
<!--@Location 37,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode45">
    <nodeSuccessors name="next" next="EndNode16"/>
  </nodes>
<!--@Location 37,11-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode16" strict="true"/>
<!--@deprecated
Deprecated since 7.9.0.0, will be removed in one of the next releases. Use HandlerChain\-based order creation instead.
@Location 1,8-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode8" strict="true" name="VoidGiftCards"
      callMode="Private">
    <nodeSuccessors name="next" next="LoopNode3"/>
    <parameters name="Order" type="com.intershop.beehive.bts.capi.orderprocess.fulfillment.Order"/>
    <parameters name="Domain" type="com.intershop.beehive.core.capi.domain.Domain"/>
  </nodes>
<!--@Location 1,9-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode3" loop="Order:ProductLineItems">
<!--@BendPoints 7,19 7,22-->
    <nodeSuccessors name="next" next="EndNode15"/>
    <entry key="PLI">
      <nodeSuccessors name="loop_entry_next" next="DecisionNode6"/>
    </entry>
  </nodes>
<!--@Location 1,10-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode6" conditionKey="PLI:GC_ORDER_REQUIRED_GiftCardService">
<!--@BendPoints 3,22-->
    <nodeSuccessors name="decision_yes" next="CheckForEmptyString10"/>
<!--@BendPoints 5,21-->
    <nodeSuccessors name="decision_no" next="JoinNode37"/>
  </nodes>
<!--@Location 1,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckForEmptyString10">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckForEmptyString.xml"/>
<!--@BendPoints 3,24-->
    <nodeSuccessors name="next" next="VoidGiftCards1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode37"/>
    <parameterBindings name="FilledString" objectPath="PLI:GC_ORDER_REQUIRED_GiftCardService"/>
  </nodes>
<!--@Location 1,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="VoidGiftCards1">
    <pipelet href="enfinity:/bc_giftcard/pipelets/VoidGiftCards.xml"/>
    <nodeSuccessors name="next" next="JoinNode33"/>
    <parameterBindings name="ProductLineItem" objectPath="PLI"/>
  </nodes>
<!--@Location 1,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode33">
<!--@BendPoints 2,27 2,19-->
    <nodeSuccessors name="next" next="LoopNode3_Entry"/>
  </nodes>
<!--@Location 2,11-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode37">
<!--@BendPoints 5,27-->
    <nodeSuccessors name="next" next="JoinNode33"/>
  </nodes>
<!--@Location 3,14-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode15" strict="true"/>
</pipeline:Pipeline>
