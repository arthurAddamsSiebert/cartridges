<?xml version="1.0" encoding="UTF-8"?>
<!--process user account informations
@Group User-->

<pipeline:Pipeline xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pipeline="http://www.intershop.de/pipeline/2010"
    name="ProcessUserAccount" type="process">
<!--@displayNearNode@get domain preference <b>UserRegistrationUseSimpleAccount</b>
@Location 15,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode7" strict="true" name="CheckUseSimpleAccount"
      callMode="Private">
<!--@BendPoints 31,4-->
    <nodeSuccessors name="next" next="GetDomainPreference2"/>
  </nodes>
<!--@Location 15,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference2">
    <configurationValues name="DefaultPreferenceKey" value="UserRegistrationUseSimpleAccount"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="DecisionNode6"/>
<!--@BendPoints 33,5-->
    <nodeSuccessors name="pipelet_error" next="JoinNode4"/>
    <parameterBindings name="PreferenceDomain" objectPath="CurrentDomain"/>
    <parameterBindings name="PreferenceKey" nullBinding="true"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="UseSimpleAccount"/>
  </nodes>
<!--@Location 15,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode6" conditionKey="UseSimpleAccount"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="EndNode13"/>
    <nodeSuccessors name="decision_no" next="JoinNode4"/>
  </nodes>
<!--@Location 15,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode13" name="YES" strict="true"/>
<!--@Location 16,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode4">
<!--@BendPoints 33,8-->
    <nodeSuccessors name="next" next="EndNode14"/>
  </nodes>
<!--@Location 16,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode14" name="NO" strict="true"/>
<!--@Location 12,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode0" strict="true" name="CreateUser"
      callMode="Private">
<!--@BendPoints 25,4-->
    <nodeSuccessors name="next" next="GenerateSeriesNumber0"/>
    <parameters name="Login" type="java.lang.String"/>
    <parameters name="Password" type="java.lang.String"/>
    <parameters name="Organization" type="com.intershop.component.organization.capi.Organization"/>
    <parameters name="PasswordConfirmation" type="java.lang.String"/>
    <parameters name="Email" type="java.lang.String"/>
<!--the form value which holds the country code-->
    <parameters name="CountryCode" type="java.lang.String" optional="true"/>
<!--the form value which holds the preferred locale to be assigned to the user-->
    <parameters name="LocaleID" type="java.lang.String" optional="true"/>
<!--the form value which holds a first name to be assigned to the user-->
    <parameters name="FirstName" type="java.lang.String" optional="true"/>
<!--the form value which holds a last name to be assigned to the user-->
    <parameters name="LastName" type="java.lang.String" optional="true"/>
<!--the form value which holds address attribute street to be assigned to the user-->
    <parameters name="Street" type="java.lang.String" optional="true"/>
<!--the form value which holds address attribute street2 to be assigned to the user-->
    <parameters name="Street2" type="java.lang.String" optional="true"/>
<!--the form value which holds a city to be assigned to the user-->
    <parameters name="City" type="java.lang.String" optional="true"/>
<!--the form value which holds a state to be assigned to the user-->
    <parameters name="State" type="java.lang.String" optional="true"/>
<!--the form value which holds a postal code (or zip code) to be assigned to the user-->
    <parameters name="PostalCode" type="java.lang.String" optional="true"/>
<!--the form value which holds a home phone number to be assigned to the user-->
    <parameters name="PhoneHome" type="java.lang.String" optional="true"/>
<!--the dictionary value which holds a birthday date to be assigned to the user-->
    <parameters name="BirthdayDate" type="java.util.Date" optional="true"/>
<!--whether the user wishes to receive order confirmations per email-->
    <parameters name="ConfirmMail" type="java.lang.String" optional="true"/>
<!--the form value which holds the second last name to be assigned to the user-->
    <parameters name="SecurityQuestion" type="java.lang.String" optional="true"/>
<!--The new password of the user. -->
    <parameters name="PasswordReminder" type="java.lang.String" optional="true"/>
    <parameters name="Company" type="java.lang.String" optional="true"/>
    <parameters name="Mobile" type="java.lang.String" optional="true"/>
    <parameters name="SecondName" type="java.lang.String" optional="true"/>
    <parameters name="Title" type="java.lang.String" optional="true"/>
    <parameters name="Street3" type="java.lang.String" optional="true"/>
<!--the form value which holds the address number to be assigned to the user-->
    <parameters name="AddressNr" type="java.lang.String" optional="true"/>
<!--Whether a default address for the new user should be created. The default value is true.-->
    <parameters name="CreateDefaultAddress" type="java.lang.String"/>
<!--The customer repository in which this customer is.-->
    <parameters name="CustomerBORepository" type="com.intershop.component.customer.capi.CustomerBORepository"/>
<!--The user repository in which this user is.-->
    <parameters name="UserBORepository" type="com.intershop.component.user.capi.UserBORepository"/>
<!--The first address line.-->
    <parameters name="Address1" type="java.lang.String" optional="true"/>
<!--The second address line.-->
    <parameters name="Address2" type="java.lang.String" optional="true"/>
<!--The third address line.-->
    <parameters name="Address3" type="java.lang.String" optional="true"/>
<!--The company name.-->
    <parameters name="CompanyName" type="java.lang.String" optional="true"/>
<!--The alternative company name.-->
    <parameters name="CompanyName2" type="java.lang.String" optional="true"/>
<!--The business phone number.-->
    <parameters name="PhoneBusiness" type="java.lang.String" optional="true"/>
<!--The fax number.-->
    <parameters name="Fax" type="java.lang.String" optional="true"/>
<!--The industry.-->
    <parameters name="Industry" type="java.lang.String" optional="true"/>
<!--The taxation ID.-->
    <parameters name="TaxationID" type="java.lang.String" optional="true"/>
<!--The department.-->
    <parameters name="Department" type="java.lang.String" optional="true"/>
    <parameters name="ShipToAddress" type="java.lang.Boolean" optional="true"/>
    <parameters name="InvoiceToAddress" type="java.lang.Boolean" optional="true"/>
    <parameters name="PreferredInvoiceToAddress" type="java.lang.Boolean" optional="true"/>
    <parameters name="PreferredShipToAddress" type="java.lang.Boolean" optional="true"/>
  </nodes>
<!--@Location 12,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GenerateSeriesNumber0">
    <configurationValues name="DomainSpecific" value="false"/>
    <configurationValues name="NumberPattern" value="00000000"/>
    <configurationValues name="SeriesIdentifier" value="UserSeries"/>
    <configurationValues name="StartWith" value="1"/>
    <pipelet href="enfinity:/core/pipelets/GenerateSeriesNumber.xml"/>
    <nodeSuccessors name="next" next="KeyMapper0"/>
    <returnValueBindings name="SeriesNumber" objectPath="BusinessPartnerNo"/>
  </nodes>
<!--@Location 12,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper0">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="GetUserByBusinessPartnerNo0"/>
    <parameterBindings name="InValue_1" constant="true"/>
    <parameterBindings name="InValue_2" constant="true"/>
    <returnValueBindings name="OutValue_1" objectPath="IsActive"/>
    <returnValueBindings name="OutValue_2" objectPath="ConfirmMail"/>
  </nodes>
<!--@Location 12,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetUserByBusinessPartnerNo0">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetUserByBusinessPartnerNo.xml"/>
    <nodeSuccessors name="next" next="DecisionNode8" action="begin"/>
    <parameterBindings name="Domain" objectPath="Organization:Domain"/>
  </nodes>
<!--@Location 12,5-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode8" conditionKey="User"
      operator="undef">
    <nodeSuccessors name="decision_yes" next="ValidatePassword0"/>
<!--@BendPoints 26,11-->
    <nodeSuccessors name="decision_no" next="SetDictionaryValue0"/>
  </nodes>
<!--@Location 12,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ValidatePassword0">
    <pipelet href="enfinity:/bc_user/pipelets/ValidatePassword.xml"/>
    <nodeSuccessors name="next" next="CallNode5"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode22"/>
  </nodes>
<!--@Location 12,7-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode5">
    <nodeSuccessors name="next" next="KeyMapper3"/>
    <nodeSuccessors name="ERROR" next="JoinNode19"/>
    <parameterBindings name="CustomerNo" objectPath="BusinessPartnerNo"/>
    <startNode referencedName="ProcessCustomer-Create"/>
  </nodes>
<!--@Location 12,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper3">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="DecisionNode0"/>
    <parameterBindings name="InValue_1" objectPath="CustomerBO:Extension(&quot;PrivateCustomer&quot;)"/>
    <returnValueBindings name="OutValue_1" objectPath="PrivateCustomerExtension"/>
  </nodes>
<!--@Location 12,9-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode0" conditionKey="PrivateCustomerExtension">
    <nodeSuccessors name="decision_yes" next="KeyMapper1"/>
    <nodeSuccessors name="decision_no" next="JoinNode21"/>
  </nodes>
<!--@Location 12,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper1">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="DecisionNode9"/>
    <parameterBindings name="InValue_1" objectPath="PrivateCustomerExtension:UserBO"/>
    <returnValueBindings name="OutValue_1" objectPath="UserBO"/>
  </nodes>
<!--@Location 12,11-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode9" conditionKey="UserBO">
    <nodeSuccessors name="decision_yes" next="CallNode4"/>
    <nodeSuccessors name="decision_no" next="JoinNode7"/>
  </nodes>
<!--@Location 12,12-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode4">
    <nodeSuccessors name="next" next="SwitchLocale0"/>
    <nodeSuccessors name="ERROR" next="JoinNode20"/>
    <startNode referencedName="This:UpdateUser"/>
  </nodes>
<!--@Location 12,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SwitchLocale0">
    <pipelet href="enfinity:/core/pipelets/SwitchLocale.xml"/>
<!--@BendPoints 25,28-->
    <nodeSuccessors name="next" next="DecisionNode4"/>
    <parameterBindings name="LocaleID" objectPath="OldLocale:LocaleID"/>
  </nodes>
<!--@Location 12,14-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode4" conditionKey="ERROR_User"
      operator="undef">
    <nodeSuccessors name="decision_yes" next="EndNode3" action="commit"/>
    <nodeSuccessors name="decision_no" next="JoinNode23"/>
  </nodes>
<!--@Location 12,15-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode3" strict="true">
    <returnValues name="CustomerBO" type="com.intershop.component.customer.capi.CustomerBO"
        optional="true"/>
    <returnValues name="UserBO" type="com.intershop.component.user.capi.UserBO" optional="true"/>
  </nodes>
<!--@Location 14,14-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode23">
    <nodeSuccessors name="next" next="EndNode0" action="rollback"/>
  </nodes>
<!--@Location 14,15-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode0" name="ERROR" strict="true">
    <returnValues name="ERROR_User" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 14,12-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode20">
    <nodeSuccessors name="next" next="JoinNode23"/>
  </nodes>
<!--@Location 14,11-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode7">
    <nodeSuccessors name="next" next="JoinNode20"/>
  </nodes>
<!--@Location 14,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode21">
    <nodeSuccessors name="next" next="JoinNode7"/>
  </nodes>
<!--@Location 14,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode19">
    <nodeSuccessors name="next" next="JoinNode21"/>
  </nodes>
<!--@Location 14,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode22">
    <nodeSuccessors name="next" next="JoinNode19"/>
  </nodes>
<!--@Location 13,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue0">
    <configurationValues name="Name" value="ERROR_User"/>
    <configurationValues name="Value" value="BusinessPartnerNoNotUnique"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 29,11-->
    <nodeSuccessors name="next" next="JoinNode22"/>
  </nodes>
<!--@Location 31,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode13" strict="true" name="DetermineCreationOfDefaultAddress"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode13"/>
    <parameters name="CreateDefaultAddress" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 31,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode13" conditionKey="CreateDefaultAddress">
    <nodeSuccessors name="decision_yes" next="JoinNode32"/>
    <nodeSuccessors name="decision_no" next="GetDomainPreference0"/>
  </nodes>
<!--@Location 31,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode32">
    <nodeSuccessors name="next" next="EndNode25"/>
  </nodes>
<!--@Location 31,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode25" strict="true">
    <returnValues name="CreateDefaultAddress" type="java.lang.String"/>
  </nodes>
<!--@Location 32,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference0">
    <configurationValues name="DefaultPreferenceKey" value="UserRegistrationUseSimpleAccount"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="JoinNode30"/>
<!--@BendPoints 66,5 66,7-->
    <nodeSuccessors name="pipelet_error" next="JoinNode30"/>
    <parameterBindings name="PreferenceDomain" objectPath="CurrentDomain"/>
    <parameterBindings name="PreferenceKey" nullBinding="true"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="UseSimpleAccount"/>
  </nodes>
<!--@Location 32,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode30">
<!--@BendPoints 65,8-->
    <nodeSuccessors name="next" next="DecisionNode14"/>
  </nodes>
<!--@Location 32,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode14" conditionKey="UseSimpleAccount"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="SetDictionaryValue6"/>
<!--@BendPoints 67,9 67,10-->
    <nodeSuccessors name="decision_no" next="SetDictionaryValue8"/>
  </nodes>
<!--@Location 32,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue6">
    <configurationValues name="Name" value="CreateDefaultAddress"/>
    <configurationValues name="Value" value="false"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode31"/>
  </nodes>
<!--@Location 32,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode31">
    <nodeSuccessors name="next" next="JoinNode32"/>
  </nodes>
<!--@Location 33,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue8">
    <configurationValues name="Name" value="CreateDefaultAddress"/>
    <configurationValues name="Value" value="true"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 67,13-->
    <nodeSuccessors name="next" next="JoinNode31"/>
  </nodes>
<!--@Location 29,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode12" strict="true" name="GetCustomerBO"
      callMode="Private">
    <nodeSuccessors name="next" next="GetUserBO0"/>
    <parameters name="CustomerBORepository" type="com.intershop.component.customer.capi.CustomerBORepository"/>
    <parameters name="UserBORepository" type="com.intershop.component.user.capi.UserBORepository"/>
  </nodes>
<!--@Location 29,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetUserBO0">
    <pipelet href="enfinity:/bc_user/pipelets/GetUserBO.xml"/>
    <nodeSuccessors name="next" next="GetCustomerBO0"/>
    <parameterBindings name="UserBORepository" objectPath="UserBORepository"/>
    <parameterBindings name="UserID" objectPath="CurrentUser:ID"/>
  </nodes>
<!--@Location 29,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetCustomerBO0">
    <pipelet href="enfinity:/bc_customer/pipelets/GetCustomerBO.xml"/>
    <nodeSuccessors name="next" next="EndNode24"/>
    <parameterBindings name="CustomerBORepository" objectPath="CustomerBORepository"/>
  </nodes>
<!--@Location 29,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode24" strict="true">
    <returnValues name="CustomerBO" type="com.intershop.component.customer.capi.CustomerBO"/>
  </nodes>
<!--@displayNearNode@get domain preference <b>UserRegistrationLoginType</b><br>
from preference group UserCredentialPreferences<br>
if no preference is found use end node LOGINISEMAIL<br>
@Location 8,8-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode1" strict="true" name="GetLoginType"
      callMode="Private">
<!--@BendPoints 17,18-->
    <nodeSuccessors name="next" next="CallNode6"/>
  </nodes>
<!--@Location 8,9-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode6">
    <nodeSuccessors name="next" next="EndNode1"/>
<!--@BendPoints 19,20 19,22-->
    <nodeSuccessors name="LOGINISEMAIL" next="EndNode2"/>
    <startNode referencedName="ProcessUser-GetLoginType"/>
  </nodes>
<!--@Location 8,11-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode1" name="LOGINANDEMAIL" strict="true"/>
<!--@Location 9,11-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode2" name="LOGINISEMAIL" strict="true"/>
<!--@Location 4,8-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode9" strict="true" name="Prefix"
      callMode="Private">
<!--@BendPoints 9,18-->
    <nodeSuccessors name="next" next="CallNode7"/>
  </nodes>
<!--@Location 4,9-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode7">
<!--@BendPoints 9,22-->
    <nodeSuccessors name="next" next="EndNode17"/>
<!--@BendPoints 11,20 11,22-->
    <nodeSuccessors name="NOTLOGGEDIN" next="EndNode18"/>
    <startNode referencedName="ProcessUser-CheckLoggedIn"/>
  </nodes>
<!--@Location 4,11-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode17" name="LOGGEDIN" strict="true"/>
<!--@Location 5,11-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode18" name="NOTLOGGEDIN" strict="true"/>
<!--@Location 1,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode10" strict="true" name="RegisterUser"
      callMode="Private">
    <nodeSuccessors name="next" next="ExtensionPointNode3"/>
    <parameters name="OrderBO" type="com.intershop.component.order.capi.OrderBO" optional="true"/>
    <parameters name="Login" type="java.lang.String"/>
    <parameters name="Password" type="java.lang.String"/>
<!--the form value which holds the reminder email to be assigned to the user (used if the user has forgotten his password)-->
    <parameters name="ReminderEmail" type="java.lang.String" optional="true"/>
<!--The password confirmation of the user.  The value must be the same like the provided password.-->
    <parameters name="PasswordConfirmation" type="java.lang.String"/>
<!--The organization to create the user for.-->
    <parameters name="Organization" type="com.intershop.component.organization.capi.Organization"
        optional="true"/>
    <parameters name="SecurityQuestion" type="java.lang.String" optional="true"/>
    <parameters name="PasswordReminder" type="java.lang.String" optional="true"/>
<!--the form value which holds the country code-->
    <parameters name="CountryCode" type="java.lang.String" optional="true"/>
<!--the form value which holds the preferred locale to be assigned to the user-->
    <parameters name="LocaleID" type="java.lang.String" optional="true"/>
<!--the form value which holds a first name to be assigned to the user-->
    <parameters name="FirstName" type="java.lang.String" optional="true"/>
<!--the form value which holds a last name to be assigned to the user-->
    <parameters name="LastName" type="java.lang.String" optional="true"/>
<!--the form value which holds address attribute street to be assigned to the user-->
    <parameters name="Street" type="java.lang.String" optional="true"/>
<!--the form value which holds address attribute street2 to be assigned to the user-->
    <parameters name="Street2" type="java.lang.String" optional="true"/>
<!--the form value which holds a city to be assigned to the user-->
    <parameters name="City" type="java.lang.String" optional="true"/>
<!--the form value which holds a state to be assigned to the user-->
    <parameters name="State" type="java.lang.String" optional="true"/>
<!--the form value which holds a postal code (or zip code) to be assigned to the user-->
    <parameters name="PostalCode" type="java.lang.String" optional="true"/>
<!--the form value which holds a home phone number to be assigned to the user-->
    <parameters name="PhoneHome" type="java.lang.String" optional="true"/>
<!--the dictionary value which holds a birthday date to be assigned to the user-->
    <parameters name="BirthdayDate" type="java.util.Date" optional="true"/>
<!--the form value which holds the prefecture to be assigned to the user-->
    <parameters name="PreferredBillingAddressBO" type="java.lang.Boolean" optional="true"/>
<!--the form value which holds the prefecture to be assigned to the user-->
    <parameters name="PreferredShippingAddressBO" type="java.lang.Boolean" optional="true"/>
<!--whether the user wishes to receive order confirmations per email-->
    <parameters name="ConfirmMail" type="java.lang.String" optional="true"/>
    <parameters name="Company" type="java.lang.String" optional="true"/>
    <parameters name="Mobile" type="java.lang.String" optional="true"/>
    <parameters name="SecondName" type="java.lang.String" optional="true"/>
    <parameters name="Street3" type="java.lang.String" optional="true"/>
    <parameters name="Title" type="java.lang.String" optional="true"/>
    <parameters name="AddressNr" type="java.lang.String" optional="true"/>
<!--The repository that contains the customers.-->
    <parameters name="CustomerBORepository" type="com.intershop.component.customer.capi.CustomerBORepository"/>
<!--The user repository in which this user is.-->
    <parameters name="UserBORepository" type="com.intershop.component.user.capi.UserBORepository"/>
<!--The first address line.-->
    <parameters name="Address1" type="java.lang.String" optional="true"/>
<!--The second address line.-->
    <parameters name="Address2" type="java.lang.String" optional="true"/>
<!--The third address line.-->
    <parameters name="Address3" type="java.lang.String" optional="true"/>
<!--The company name.-->
    <parameters name="CompanyName" type="java.lang.String" optional="true"/>
<!--The alternative company name.-->
    <parameters name="CompanyName2" type="java.lang.String" optional="true"/>
<!--The business phone number.-->
    <parameters name="PhoneBusiness" type="java.lang.String" optional="true"/>
<!--The fax number.-->
    <parameters name="Fax" type="java.lang.String" optional="true"/>
<!--The industry.-->
    <parameters name="Industry" type="java.lang.String" optional="true"/>
<!--The taxation ID.-->
    <parameters name="TaxationID" type="java.lang.String" optional="true"/>
<!--The department.-->
    <parameters name="Department" type="java.lang.String" optional="true"/>
<!--The email of the profile.-->
    <parameters name="Email" type="java.lang.String" optional="true"/>
    <parameters name="CreateDefaultAddress" type="java.lang.String" optional="true"/>
    <parameters name="InvoiceToAddress" type="java.lang.Boolean" optional="true"/>
    <parameters name="ShipToAddress" type="java.lang.Boolean" optional="true"/>
    <parameters name="PreferredInvoiceToAddress" type="java.lang.Boolean" optional="true"/>
    <parameters name="PreferredShipToAddress" type="java.lang.Boolean" optional="true"/>
  </nodes>
<!--@Location 1,1-->
  <nodes xsi:type="pipeline:ExtensionPointNode" nodeID="ExtensionPointNode3" name="UserRegistering"
      strict="true">
    <nodeSuccessors name="next" next="CallNode13"/>
    <parameters name="Login" type="java.lang.String"/>
    <parameters name="Password" type="java.lang.String"/>
<!--the form value which holds the reminder email to be assigned to the user (used if the user has forgotten his password)-->
    <parameters name="ReminderEmail" type="java.lang.String" optional="true"/>
<!--The password confirmation of the user.  The value must be the same like the provided password.-->
    <parameters name="PasswordConfirmation" type="java.lang.String"/>
<!--The organization to create the user for.-->
    <parameters name="Organization" type="com.intershop.component.organization.capi.Organization"
        optional="true"/>
    <parameters name="SecurityQuestion" type="java.lang.String" optional="true"/>
    <parameters name="PasswordReminder" type="java.lang.String" optional="true"/>
<!--the form value which holds the country code-->
    <parameters name="CountryCode" type="java.lang.String" optional="true"/>
<!--the form value which holds the preferred locale to be assigned to the user-->
    <parameters name="LocaleID" type="java.lang.String" optional="true"/>
<!--the form value which holds a first name to be assigned to the user-->
    <parameters name="FirstName" type="java.lang.String" optional="true"/>
<!--the form value which holds a last name to be assigned to the user-->
    <parameters name="LastName" type="java.lang.String" optional="true"/>
<!--the form value which holds address attribute street to be assigned to the user-->
    <parameters name="Street" type="java.lang.String" optional="true"/>
<!--the form value which holds address attribute street2 to be assigned to the user-->
    <parameters name="Street2" type="java.lang.String" optional="true"/>
<!--the form value which holds a city to be assigned to the user-->
    <parameters name="City" type="java.lang.String" optional="true"/>
<!--the form value which holds a state to be assigned to the user-->
    <parameters name="State" type="java.lang.String" optional="true"/>
<!--the form value which holds a postal code (or zip code) to be assigned to the user-->
    <parameters name="PostalCode" type="java.lang.String" optional="true"/>
<!--the form value which holds a home phone number to be assigned to the user-->
    <parameters name="PhoneHome" type="java.lang.String" optional="true"/>
<!--the dictionary value which holds a birthday date to be assigned to the user-->
    <parameters name="BirthdayDate" type="java.util.Date" optional="true"/>
<!--the form value which holds the prefecture to be assigned to the user-->
    <parameters name="PreferredBillingAddressBO" type="java.lang.Boolean" optional="true"/>
<!--the form value which holds the prefecture to be assigned to the user-->
    <parameters name="PreferredShippingAddressBO" type="java.lang.Boolean" optional="true"/>
<!--whether the user wishes to receive order confirmations per email-->
    <parameters name="ConfirmMail" type="java.lang.String" optional="true"/>
    <parameters name="Company" type="java.lang.String" optional="true"/>
    <parameters name="Mobile" type="java.lang.String" optional="true"/>
    <parameters name="SecondName" type="java.lang.String" optional="true"/>
    <parameters name="Street3" type="java.lang.String" optional="true"/>
    <parameters name="Title" type="java.lang.String" optional="true"/>
    <parameters name="AddressNr" type="java.lang.String" optional="true"/>
<!--The repository that contains the customers.-->
    <parameters name="CustomerBORepository" type="com.intershop.component.customer.capi.CustomerBORepository"/>
<!--The user repository in which this user is.-->
    <parameters name="UserBORepository" type="com.intershop.component.user.capi.UserBORepository"/>
<!--The first address line.-->
    <parameters name="Address1" type="java.lang.String" optional="true"/>
<!--The second address line.-->
    <parameters name="Address2" type="java.lang.String" optional="true"/>
<!--The third address line.-->
    <parameters name="Address3" type="java.lang.String" optional="true"/>
<!--The company name.-->
    <parameters name="CompanyName" type="java.lang.String" optional="true"/>
<!--The alternative company name.-->
    <parameters name="CompanyName2" type="java.lang.String" optional="true"/>
<!--The business phone number.-->
    <parameters name="PhoneBusiness" type="java.lang.String" optional="true"/>
<!--The fax number.-->
    <parameters name="Fax" type="java.lang.String" optional="true"/>
<!--The industry.-->
    <parameters name="Industry" type="java.lang.String" optional="true"/>
<!--The taxation ID.-->
    <parameters name="TaxationID" type="java.lang.String" optional="true"/>
<!--The department.-->
    <parameters name="Department" type="java.lang.String" optional="true"/>
<!--The email of the profile.-->
    <parameters name="Email" type="java.lang.String" optional="true"/>
    <parameters name="OrderBO" type="com.intershop.component.order.capi.OrderBO" optional="true"/>
    <parameters name="ShipToAddress" type="java.lang.Boolean" optional="true"/>
    <parameters name="InvoiceToAddress" type="java.lang.Boolean" optional="true"/>
  </nodes>
<!--@Location 1,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode13">
    <nodeSuccessors name="next" next="DecisionNode5"/>
    <startNode referencedName="This:DetermineCreationOfDefaultAddress"/>
  </nodes>
<!--@Location 1,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode5" conditionKey="Email">
    <nodeSuccessors name="decision_yes" next="JoinNode8"/>
<!--@BendPoints 4,9 4,8 5,8-->
    <nodeSuccessors name="decision_no" next="KeyMapper4"/>
  </nodes>
<!--@Location 1,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode8">
<!--@BendPoints 3,12-->
    <nodeSuccessors name="next" next="VerifyCredential4"/>
  </nodes>
<!--@Location 1,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="VerifyCredential4">
    <configurationValues name="NotEmptyOnly" value="true"/>
    <pipelet href="enfinity:/core/pipelets/VerifyCredential.xml"/>
    <nodeSuccessors name="next" next="CallNode22"/>
<!--@BendPoints 5,13-->
    <nodeSuccessors name="pipelet_error" next="JoinNode18"/>
    <parameterBindings name="CurrentLocale" objectPath="CurrentRequest:Locale"/>
    <parameterBindings name="Domain" objectPath="Organization:OrganizationDomain"/>
  </nodes>
<!--@Location 1,7-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode22">
    <nodeSuccessors name="next" next="ExtensionPointNode2"/>
    <nodeSuccessors name="ERROR" next="JoinNode18"/>
    <startNode referencedName="ProcessUserAccount-CreateUser"/>
  </nodes>
<!--@Location 1,8-->
  <nodes xsi:type="pipeline:ExtensionPointNode" nodeID="ExtensionPointNode2" name="UserRegistered"
      strict="true">
    <nodeSuccessors name="next" next="EndNode19"/>
    <parameters name="UserBO" type="com.intershop.component.user.capi.UserBO"/>
    <parameters name="CustomerBO" type="com.intershop.component.customer.capi.CustomerBO"/>
  </nodes>
<!--@Location 1,9-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode19" strict="true">
    <returnValues name="UserBO" type="java.lang.Object" optional="true"/>
    <returnValues name="CustomerBO" type="com.intershop.component.customer.capi.CustomerBO"
        optional="true"/>
  </nodes>
<!--@Location 2,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode18">
    <nodeSuccessors name="next" next="EndNode20"/>
  </nodes>
<!--@Location 2,9-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode20" name="ERROR" strict="true">
    <returnValues name="ERROR_User" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 2,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper4">
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 5,11-->
    <nodeSuccessors name="next" next="JoinNode8"/>
    <parameterBindings name="InValue_1" objectPath="Login"/>
    <returnValueBindings name="OutValue_1" objectPath="Email"/>
  </nodes>
<!--The new order.

@Location 24,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode11" strict="true" name="RegisterUserAfterFirstOrder"
      callMode="Private">
    <nodeSuccessors name="next" next="DetermineOrderByID0"/>
    <parameters name="OrderBO" type="com.intershop.component.order.capi.OrderBO"/>
    <parameters name="Login" type="java.lang.String"/>
    <parameters name="Password" type="java.lang.String"/>
<!--The used App context.-->
    <parameters name="ApplicationBO" type="com.intershop.component.application.capi.ApplicationBO"/>
  </nodes>
<!--@Location 24,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DetermineOrderByID0">
    <configurationValues name="CurrentUserOnly" value="true"/>
    <pipelet href="enfinity:/bts/pipelets/DetermineOrderByID.xml"/>
    <nodeSuccessors name="next" next="CallNode0"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode16"/>
    <parameterBindings name="OrderID" objectPath="OrderBO:ID"/>
    <parameterBindings name="OrderIDs" nullBinding="true"/>
    <parameterBindings name="OrderRefID" nullBinding="true"/>
    <parameterBindings name="OrderRefIDs" nullBinding="true"/>
    <returnValueBindings name="Orders" nullBinding="true"/>
  </nodes>
<!--@Location 24,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode0">
    <nodeSuccessors name="next" next="CallNode8"/>
    <nodeSuccessors name="ERROR" next="JoinNode17"/>
    <startNode referencedName="DetermineOrganizations-Current"/>
  </nodes>
<!--@Location 24,4-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode8">
    <nodeSuccessors name="next" next="GetApplicationBO0"/>
    <nodeSuccessors name="ERROR" next="JoinNode15"/>
    <parameterBindings name="CompanyName" objectPath="OrderBO:InvoiceToAddressBO:CompanyName"/>
    <parameterBindings name="CompanyName2" objectPath="OrderBO:InvoiceToAddressBO:CompanyName2"/>
    <parameterBindings name="CreateDefaultAddress" constant="false"/>
    <parameterBindings name="CustomerBORepository" objectPath="ApplicationBO:Repository(&quot;CustomerBORepository&quot;)"/>
    <parameterBindings name="Email" objectPath="Login"/>
    <parameterBindings name="FirstName" objectPath="OrderBO:InvoiceToAddressBO:FirstName"/>
    <parameterBindings name="LastName" objectPath="OrderBO:InvoiceToAddressBO:LastName"/>
    <parameterBindings name="LocaleID" objectPath="CurrentRequest:Locale:LocaleID"/>
    <parameterBindings name="Organization" objectPath="CurrentOrganization"/>
    <parameterBindings name="PasswordConfirmation" objectPath="Password"/>
    <parameterBindings name="Title" objectPath="OrderBO:InvoiceToAddressBO:Title"/>
    <parameterBindings name="UserBORepository" objectPath="ApplicationBO:Repository(&quot;UserBORepository&quot;)"/>
    <startNode referencedName="ProcessUserAccount-RegisterUser"/>
  </nodes>
<!--@Location 24,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetApplicationBO0">
    <pipelet href="enfinity:/bc_application/pipelets/GetApplicationBO.xml"/>
    <nodeSuccessors name="next" next="CallNode1"/>
  </nodes>
<!--@Location 24,6-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode1">
    <nodeSuccessors name="next" next="UpdateOrderBOBuyer0"/>
    <nodeSuccessors name="ERROR" next="JoinNode0"/>
    <startNode referencedName="ProcessLogin-LoginUser"/>
  </nodes>
<!--@Location 24,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateOrderBOBuyer0">
    <pipelet href="enfinity:/sld_ch_b2c_base/pipelets/UpdateOrderBOBuyer.xml"/>
    <nodeSuccessors name="next" next="GetProfile0"/>
  </nodes>
<!--@Location 24,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProfile0">
    <pipelet href="enfinity:/core/pipelets/GetProfile.xml"/>
    <nodeSuccessors name="next" next="CopyOrderBOAddressToCustomerBO0"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode29"/>
    <parameterBindings name="ProfileID" objectPath="CustomerBO:CustomerBOProfileID"/>
  </nodes>
<!--@Location 24,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CopyOrderBOAddressToCustomerBO0">
    <pipelet href="enfinity:/sld_ch_b2c_base/pipelets/CopyOrderBOAddressesToCustomerBO.xml"/>
    <nodeSuccessors name="next" next="UpdateUserProfile0"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode28"/>
  </nodes>
<!--@Location 24,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateUserProfile0">
    <pipelet href="enfinity:/core/pipelets/UpdateUserProfile.xml"/>
    <nodeSuccessors name="next" next="LoopNode0"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode14"/>
    <parameterBindings name="AddressNr" nullBinding="true"/>
    <parameterBindings name="Birthday" nullBinding="true"/>
    <parameterBindings name="BirthdayDate" nullBinding="true"/>
    <parameterBindings name="City" nullBinding="true"/>
    <parameterBindings name="Company" nullBinding="true"/>
    <parameterBindings name="CompanyName2" nullBinding="true"/>
    <parameterBindings name="CompanyTranscription" nullBinding="true"/>
    <parameterBindings name="ConfirmFax" nullBinding="true"/>
    <parameterBindings name="ConfirmMail" nullBinding="true"/>
    <parameterBindings name="Country" nullBinding="true"/>
    <parameterBindings name="CountryCode" nullBinding="true"/>
    <parameterBindings name="County" nullBinding="true"/>
    <parameterBindings name="Description" nullBinding="true"/>
    <parameterBindings name="Email" nullBinding="true"/>
    <parameterBindings name="Fax" nullBinding="true"/>
    <parameterBindings name="FirstName" objectPath="Order:InvoiceToAddress:FirstName"/>
    <parameterBindings name="FirstNameTranscription" nullBinding="true"/>
    <parameterBindings name="Gender" nullBinding="true"/>
    <parameterBindings name="Homepage" nullBinding="true"/>
    <parameterBindings name="Honorific" nullBinding="true"/>
    <parameterBindings name="JobTitle" nullBinding="true"/>
    <parameterBindings name="LastName" objectPath="Order:InvoiceToAddress:LastName"/>
    <parameterBindings name="LastNameTranscription" nullBinding="true"/>
    <parameterBindings name="LocaleID" nullBinding="true"/>
    <parameterBindings name="Mobile" nullBinding="true"/>
    <parameterBindings name="NickName" nullBinding="true"/>
    <parameterBindings name="OldPassword" nullBinding="true"/>
    <parameterBindings name="Password" nullBinding="true"/>
    <parameterBindings name="PasswordConfirmation" nullBinding="true"/>
    <parameterBindings name="PasswordReminder" nullBinding="true"/>
    <parameterBindings name="PhoneBusiness" nullBinding="true"/>
    <parameterBindings name="PhoneBusinessDirect" nullBinding="true"/>
    <parameterBindings name="PhoneHome" nullBinding="true"/>
    <parameterBindings name="PostBox" nullBinding="true"/>
    <parameterBindings name="PostalCode" nullBinding="true"/>
    <parameterBindings name="Prefecture" nullBinding="true"/>
    <parameterBindings name="Province" nullBinding="true"/>
    <parameterBindings name="Region" nullBinding="true"/>
    <parameterBindings name="SecondLastName" nullBinding="true"/>
    <parameterBindings name="SecondName" nullBinding="true"/>
    <parameterBindings name="State" nullBinding="true"/>
    <parameterBindings name="Street" nullBinding="true"/>
    <parameterBindings name="Street2" nullBinding="true"/>
    <parameterBindings name="StreetTranscription" nullBinding="true"/>
    <parameterBindings name="Suffix" nullBinding="true"/>
    <parameterBindings name="Title" nullBinding="true"/>
    <parameterBindings name="UpdateDefaultAddress" nullBinding="true"/>
  </nodes>
<!--@Location 24,11-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode0" loop="OrderBO:Extension(&quot;Payment&quot;):PaymentBOs">
    <nodeSuccessors name="next" next="EndNode23"/>
    <entry key="PaymentBO">
      <nodeSuccessors name="loop_entry_next" next="PipelineNodeNode0_Input"/>
    </entry>
  </nodes>
<!--@Location 23,12-->
  <nodes xsi:type="pipeline:PipelineNodeNode" nodeID="PipelineNodeNode0">
    <pipelet href="enfinity:/bc_payment/pipelets/com.intershop.component.payment.pipelet.IsOpenTender.pipelinenode"/>
    <inConnectors name="Input">
      <parameterBindings name="PaymentServiceBO" objectPath="PaymentBO:PaymentServiceBO"/>
    </inConnectors>
    <outConnectors name="yes">
      <nodeSuccessors next="CallNode14"/>
    </outConnectors>
    <outConnectors name="no">
      <nodeSuccessors next="JoinNode6"/>
    </outConnectors>
  </nodes>
<!--@Location 23,13-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode14">
    <nodeSuccessors name="next" next="JoinNode13"/>
    <nodeSuccessors name="Error" next="JoinNode13"/>
    <parameterBindings name="PaymentInstrumentBO" objectPath="PaymentBO:PaymentInstrumentBO"/>
    <parameterBindings name="PaymentInstrumentBORepository" objectPath="UserBO:Extension(&quot;PaymentInstrument&quot;)"/>
    <startNode referencedName="ProcessPayment-CopyPaymentInstrument"/>
  </nodes>
<!--@Location 22,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode13">
    <nodeSuccessors name="next" next="JoinNode6"/>
  </nodes>
<!--@Location 22,12-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode6">
<!--@BendPoints 45,23-->
    <nodeSuccessors name="next" next="LoopNode0_Entry"/>
  </nodes>
<!--@Location 24,14-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode23" name="" strict="true"/>
<!--@Location 25,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode14">
    <nodeSuccessors name="next" next="EndNode21"/>
  </nodes>
<!--@Location 25,14-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode21" name="ERROR" strict="true"/>
<!--@Location 25,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode28">
    <nodeSuccessors name="next" next="JoinNode14"/>
  </nodes>
<!--@Location 25,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode29">
    <nodeSuccessors name="next" next="JoinNode28"/>
  </nodes>
<!--@Location 25,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode0">
    <nodeSuccessors name="next" next="JoinNode29"/>
  </nodes>
<!--@Location 25,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode15">
    <nodeSuccessors name="next" next="JoinNode0"/>
  </nodes>
<!--@Location 25,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode17">
    <nodeSuccessors name="next" next="JoinNode15"/>
  </nodes>
<!--@Location 25,2-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode16">
    <nodeSuccessors name="next" next="JoinNode17"/>
  </nodes>
<!--@Location 21,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode8" strict="true" name="SendRegistrationEmail"
      callMode="Private">
    <nodeSuccessors name="next" next="GetRepositoryByRepositoryDomain1"/>
    <parameters name="User" type="com.intershop.beehive.core.capi.user.User"/>
    <parameters name="CurrentOrganization" type="com.intershop.component.organization.capi.Organization"/>
  </nodes>
<!--@Location 21,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetRepositoryByRepositoryDomain1">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetRepositoryByRepositoryDomain.xml"/>
    <nodeSuccessors name="next" next="GetDomainPreference1"/>
<!--@BendPoints 45,5-->
    <nodeSuccessors name="pipelet_error" next="JoinNode9"/>
    <parameterBindings name="RepositoryDomain" objectPath="CurrentOrganization:OwningDomain"/>
    <returnValueBindings name="Repository" objectPath="ChannelRepository"/>
  </nodes>
<!--@Location 21,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference1">
    <configurationValues name="DefaultPreferenceKey" value="UserRegistrationEmailFrom"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="GetDomainPreference4"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode9"/>
    <parameterBindings name="PreferenceDomain" objectPath="ChannelRepository:Domain"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="UserRegistrationEmailFrom"/>
  </nodes>
<!--@Location 21,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference4">
    <configurationValues name="DefaultPreferenceKey" value="UserRegistrationEmailSubject"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="GetDomainPreference3"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode10"/>
    <parameterBindings name="PreferenceDomain" objectPath="ChannelRepository:Domain"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="UserRegistrationEmailSubject"/>
  </nodes>
<!--@Location 21,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference3">
    <configurationValues name="DefaultPreferenceKey" value="UserRegistrationEmailTemplate"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="ProcessMail1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode11"/>
    <parameterBindings name="PreferenceDomain" objectPath="ChannelRepository:Domain"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="UserRegistrationEmailTemplate"/>
  </nodes>
<!--@Location 21,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ProcessMail1">
    <configurationValues name="UseErrorConnector" value="true"/>
    <configurationValues name="WaitForResult" value="false"/>
    <pipelet href="enfinity:/bc_mail/pipelets/ProcessMail.xml"/>
    <nodeSuccessors name="next" next="EndNode16"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode12"/>
    <parameterBindings name="Domain" objectPath="CurrentOrganization:OwningDomain"/>
    <parameterBindings name="MailFrom" objectPath="UserRegistrationEmailFrom"/>
    <parameterBindings name="MailSubject" objectPath="UserRegistrationEmailSubject"/>
    <parameterBindings name="MailTemplate" objectPath="UserRegistrationEmailTemplate"/>
    <parameterBindings name="MailTo" objectPath="User:Profile:Credentials:ReminderEmail"/>
  </nodes>
<!--@Location 21,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode16" strict="true"/>
<!--@Location 22,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode12">
    <nodeSuccessors name="next" next="EndNode15"/>
  </nodes>
<!--@Location 22,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode15" name="ERROR" strict="true"/>
<!--@Location 22,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode11">
    <nodeSuccessors name="next" next="JoinNode12"/>
  </nodes>
<!--@Location 22,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode10">
    <nodeSuccessors name="next" next="JoinNode11"/>
  </nodes>
<!--@Location 22,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode9">
    <nodeSuccessors name="next" next="JoinNode10"/>
  </nodes>
<!--@Location 26,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode2" strict="true" name="UpdateUser"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode12"/>
    <parameters name="Login" type="java.lang.String"/>
    <parameters name="Password" type="java.lang.String"/>
    <parameters name="Organization" type="com.intershop.component.organization.capi.Organization"/>
    <parameters name="PasswordConfirmation" type="java.lang.String"/>
    <parameters name="Email" type="java.lang.String"/>
<!--the form value which holds the country code-->
    <parameters name="CountryCode" type="java.lang.String" optional="true"/>
<!--the form value which holds the preferred locale to be assigned to the user-->
    <parameters name="LocaleID" type="java.lang.String" optional="true"/>
<!--the form value which holds a first name to be assigned to the user-->
    <parameters name="FirstName" type="java.lang.String" optional="true"/>
<!--the form value which holds a last name to be assigned to the user-->
    <parameters name="LastName" type="java.lang.String" optional="true"/>
<!--the form value which holds address attribute street to be assigned to the user-->
    <parameters name="Street" type="java.lang.String" optional="true"/>
<!--the form value which holds address attribute street2 to be assigned to the user-->
    <parameters name="Street2" type="java.lang.String" optional="true"/>
<!--the form value which holds a city to be assigned to the user-->
    <parameters name="City" type="java.lang.String" optional="true"/>
<!--the form value which holds a state to be assigned to the user-->
    <parameters name="State" type="java.lang.String" optional="true"/>
<!--the form value which holds a postal code (or zip code) to be assigned to the user-->
    <parameters name="PostalCode" type="java.lang.String" optional="true"/>
<!--the form value which holds a home phone number to be assigned to the user-->
    <parameters name="PhoneHome" type="java.lang.String" optional="true"/>
<!--the dictionary value which holds a birthday date to be assigned to the user-->
    <parameters name="BirthdayDate" type="java.util.Date" optional="true"/>
<!--whether the user wishes to receive order confirmations per email-->
    <parameters name="ConfirmMail" type="java.lang.String" optional="true"/>
<!--the form value which holds the second last name to be assigned to the user-->
    <parameters name="SecurityQuestion" type="java.lang.String" optional="true"/>
<!--The new password of the user. -->
    <parameters name="PasswordReminder" type="java.lang.String" optional="true"/>
    <parameters name="Company" type="java.lang.String" optional="true"/>
    <parameters name="Mobile" type="java.lang.String" optional="true"/>
    <parameters name="SecondName" type="java.lang.String" optional="true"/>
    <parameters name="Title" type="java.lang.String" optional="true"/>
    <parameters name="Street3" type="java.lang.String" optional="true"/>
<!--the form value which holds the address number to be assigned to the user-->
    <parameters name="AddressNr" type="java.lang.String" optional="true"/>
<!--Whether a default address for the new user should be created. The default value is true.-->
    <parameters name="CreateDefaultAddress" type="java.lang.String"/>
<!--The customer repository in which this customer is.-->
    <parameters name="CustomerBORepository" type="com.intershop.component.customer.capi.CustomerBORepository"/>
<!--The user repository in which this user is.-->
    <parameters name="UserBORepository" type="com.intershop.component.user.capi.UserBORepository"/>
<!--The first address line.-->
    <parameters name="Address1" type="java.lang.String" optional="true"/>
<!--The second address line.-->
    <parameters name="Address2" type="java.lang.String" optional="true"/>
<!--The third address line.-->
    <parameters name="Address3" type="java.lang.String" optional="true"/>
<!--The company name.-->
    <parameters name="CompanyName" type="java.lang.String" optional="true"/>
<!--The alternative company name.-->
    <parameters name="CompanyName2" type="java.lang.String" optional="true"/>
<!--The business phone number.-->
    <parameters name="PhoneBusiness" type="java.lang.String" optional="true"/>
<!--The fax number.-->
    <parameters name="Fax" type="java.lang.String" optional="true"/>
<!--The industry.-->
    <parameters name="Industry" type="java.lang.String" optional="true"/>
<!--The taxation ID.-->
    <parameters name="TaxationID" type="java.lang.String" optional="true"/>
<!--The department.-->
    <parameters name="Department" type="java.lang.String" optional="true"/>
<!--The active status of the user.-->
    <parameters name="IsActive" type="java.lang.String" optional="true"/>
<!--The UserBO representing the user.-->
    <parameters name="UserBO" type="com.intershop.component.user.capi.UserBO"/>
<!--The customer of the user to be updated.-->
    <parameters name="CustomerBO" type="com.intershop.component.customer.capi.CustomerBO"/>
    <parameters name="InvoiceToAddress" type="java.lang.Boolean" optional="true"/>
    <parameters name="ShipToAddress" type="java.lang.Boolean" optional="true"/>
    <parameters name="PreferredInvoiceToAddress" type="java.lang.Boolean" optional="true"/>
    <parameters name="PreferredShipToAddress" type="java.lang.Boolean" optional="true"/>
  </nodes>
<!--@Location 26,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode12" conditionKey="IsActive">
    <nodeSuccessors name="decision_yes" next="VerifyBoolean0"/>
<!--@BendPoints 55,5-->
    <nodeSuccessors name="decision_no" next="JoinNode25"/>
  </nodes>
<!--@Location 26,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="VerifyBoolean0">
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyBoolean.xml"/>
    <nodeSuccessors name="next" next="JoinNode26"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode25"/>
    <parameterBindings name="NoneLocalizedString" objectPath="IsActive"/>
    <returnValueBindings name="BooleanValue" objectPath="IsActive"/>
  </nodes>
<!--@Location 26,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode26">
    <nodeSuccessors name="next" next="UpdateUserBOCredentials0"/>
  </nodes>
<!--@Location 26,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateUserBOCredentials0">
    <pipelet href="enfinity:/bc_user/pipelets/UpdateUserBOCredentials.xml"/>
    <nodeSuccessors name="next" next="CallNode11"/>
<!--@BendPoints 57,11-->
    <nodeSuccessors name="pipelet_error" next="JoinNode27"/>
    <parameterBindings name="Answer" objectPath="PasswordReminder"/>
    <parameterBindings name="ReminderEmail" objectPath="Email"/>
  </nodes>
<!--@Location 26,7-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode11">
    <nodeSuccessors name="next" next="DecisionNode10"/>
    <nodeSuccessors name="ERROR" next="JoinNode27"/>
    <startNode referencedName="ProcessUserProfileSettings-UpdateProfile"/>
  </nodes>
<!--@Location 26,8-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode10" conditionKey="CreateDefaultAddress"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="GetLocale1"/>
<!--@BendPoints 55,17 55,27-->
    <nodeSuccessors name="decision_no" next="JoinNode24"/>
  </nodes>
<!--@Location 26,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetLocale1">
    <configurationValues name="LocaleFallback" value="Lead Locale"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetLocale.xml"/>
    <nodeSuccessors name="next" next="GetLocalizedTextByKey0"/>
    <parameterBindings name="LocaleId" nullBinding="true"/>
    <returnValueBindings name="Locale" objectPath="LeadLocale"/>
  </nodes>
<!--@Location 26,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetLocalizedTextByKey0">
    <pipelet href="enfinity:/core/pipelets/GetLocalizedTextByKey.xml"/>
    <nodeSuccessors name="next" next="CreateAddressBO0"/>
    <parameterBindings name="Key" constant="address.DefaultAddress.ContactAddressName"/>
    <parameterBindings name="Locale" objectPath="LeadLocale"/>
    <returnValueBindings name="LocalizedText" objectPath="ContactAddressName"/>
  </nodes>
<!--@Location 26,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateAddressBO0">
    <pipelet href="enfinity:/bc_address/pipelets/CreateAddressBO.xml"/>
    <nodeSuccessors name="next" next="CallNode15"/>
    <parameterBindings name="AddressBORepository" objectPath="CustomerBO"/>
    <parameterBindings name="AddressLine1" objectPath="Address1"/>
    <parameterBindings name="AddressLine2" objectPath="Address2"/>
    <parameterBindings name="AddressLine3" objectPath="Address3"/>
    <parameterBindings name="AddressName" objectPath="ContactAddressName"/>
    <parameterBindings name="City" objectPath="City"/>
    <parameterBindings name="CompanyName1" objectPath="CompanyName"/>
    <parameterBindings name="CompanyName2" objectPath="CompanyName2"/>
    <parameterBindings name="CountryCode" objectPath="CountryCode"/>
    <parameterBindings name="FirstName" objectPath="FirstName"/>
    <parameterBindings name="InvoiceToAddress" objectPath="InvoiceToAddress"/>
    <parameterBindings name="LastName" objectPath="LastName"/>
    <parameterBindings name="MainDivision" objectPath="State"/>
    <parameterBindings name="PhoneHome" objectPath="PhoneHome"/>
    <parameterBindings name="PhoneMobile" objectPath="Mobile"/>
    <parameterBindings name="PostalCode" objectPath="PostalCode"/>
    <parameterBindings name="ShipToAddress" objectPath="ShipToAddress"/>
    <parameterBindings name="Title" objectPath="Title"/>
  </nodes>
<!--@Location 26,12-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode15">
    <nodeSuccessors name="next" next="JoinNode24"/>
    <parameterBindings name="AddressBO" objectPath="AddressBO"/>
    <parameterBindings name="PreferredBillingAddress" objectPath="PreferredInvoiceToAddress"/>
    <parameterBindings name="PreferredShippingAddress" objectPath="PreferredShipToAddress"/>
    <parameterBindings name="UserBO" objectPath="UserBO"/>
    <startNode referencedName="ProcessUserAddress-SetPreferredAddress"/>
  </nodes>
<!--@Location 26,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode24">
    <nodeSuccessors name="next" next="EndNode22"/>
  </nodes>
<!--@Location 26,14-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode22" strict="true"/>
<!--@Location 28,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode27">
    <nodeSuccessors name="next" next="EndNode4"/>
  </nodes>
<!--@Location 28,17-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode4" name="ERROR" strict="true">
    <returnValues name="ERROR_User" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 27,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode25">
<!--@BendPoints 55,9-->
    <nodeSuccessors name="next" next="JoinNode26"/>
  </nodes>
<!--@Location 17,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode4" strict="true" name="UpdateUserEmail"
      callMode="Private">
    <nodeSuccessors name="next" next="KeyMapper10"/>
    <parameters name="User" type="com.intershop.beehive.core.capi.user.User"/>
    <parameters name="Login" type="java.lang.String"/>
    <parameters name="Password" type="java.lang.String"/>
    <parameters name="Email" type="java.lang.String"/>
  </nodes>
<!--@Location 17,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper10">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 35,6-->
    <nodeSuccessors name="next" next="CallNode3"/>
    <parameterBindings name="InValue_1" constant="true"/>
    <parameterBindings name="InValue_2" constant="true"/>
    <parameterBindings name="InValue_3" objectPath="User:Profile:BusinessPartnerNo"/>
    <parameterBindings name="InValue_4" objectPath="Password"/>
    <returnValueBindings name="OutValue_1" objectPath="UpdateDefaultAddress"/>
    <returnValueBindings name="OutValue_2" objectPath="IsActive"/>
    <returnValueBindings name="OutValue_3" objectPath="BusinessPartnerNo"/>
    <returnValueBindings name="OutValue_4" objectPath="PasswordConfirmation"/>
  </nodes>
<!--@Location 17,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode3">
    <nodeSuccessors name="next" next="GetOrganizationByUser1"/>
    <nodeSuccessors name="error-update" next="JoinNode5"/>
    <startNode referencedName="ProcessUser-Update"/>
  </nodes>
<!--@Location 16,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetOrganizationByUser1">
    <pipelet href="enfinity:/bc_organization/pipelets/GetOrganizationByUser.xml"/>
    <nodeSuccessors name="next" next="EndNode7"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode5"/>
  </nodes>
<!--@Location 16,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode7" strict="true"/>
<!--@Location 17,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode5">
    <nodeSuccessors name="next" next="EndNode8"/>
  </nodes>
<!--@Location 17,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode8" name="ERROR" strict="true">
    <returnValues name="ERROR_User" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 19,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode6" strict="true" name="UpdateUserPassword"
      callMode="Private">
<!--@BendPoints 39,4-->
    <nodeSuccessors name="next" next="KeyMapper2"/>
    <parameters name="User" type="com.intershop.beehive.core.capi.user.User"/>
    <parameters name="Login" type="java.lang.String"/>
    <parameters name="Password" type="java.lang.String"/>
  </nodes>
<!--@Location 19,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper2">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 39,6-->
    <nodeSuccessors name="next" next="CallNode2"/>
    <parameterBindings name="InValue_1" constant="false"/>
    <parameterBindings name="InValue_2" constant="true"/>
    <parameterBindings name="InValue_3" objectPath="User:Profile:BusinessPartnerNo"/>
    <parameterBindings name="InValue_4" objectPath="Password"/>
    <returnValueBindings name="OutValue_1" objectPath="UpdateDefaultAddress"/>
    <returnValueBindings name="OutValue_2" objectPath="IsActive"/>
    <returnValueBindings name="OutValue_3" objectPath="BusinessPartnerNo"/>
    <returnValueBindings name="OutValue_4" objectPath="PasswordConfirmation"/>
  </nodes>
<!--@Location 19,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode2">
    <nodeSuccessors name="next" next="DecisionNode3"/>
<!--@BendPoints 41,8 41,12-->
    <nodeSuccessors name="error-update" next="EndNode11"/>
    <startNode referencedName="ProcessUser-Update"/>
  </nodes>
<!--@Location 19,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode3" conditionKey="User:Profile:PasswordEmailed">
    <nodeSuccessors name="decision_yes" next="RemoveCustomAttribute2"/>
<!--@BendPoints 40,9 40,13-->
    <nodeSuccessors name="decision_no" next="JoinNode3"/>
  </nodes>
<!--@Location 19,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemoveCustomAttribute2">
    <configurationValues name="DefaultAttributeName" value="PasswordEmailed"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/RemoveCustomAttribute.xml"/>
    <nodeSuccessors name="next" next="JoinNode3"/>
    <parameterBindings name="AttributeName" nullBinding="true"/>
    <parameterBindings name="ExtensibleObject" objectPath="User:Profile"/>
  </nodes>
<!--@Location 19,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode3">
<!--@BendPoints 39,14-->
    <nodeSuccessors name="next" next="EndNode12"/>
  </nodes>
<!--@Location 19,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode12" strict="true"/>
<!--@Location 20,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode11" name="ERROR" strict="true">
    <returnValues name="ERROR_User" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 4,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode3" strict="true" name="ValidateLoginCredentialData"
      callMode="Private">
<!--@BendPoints 9,4-->
    <nodeSuccessors name="next" next="DecisionNode2"/>
    <parameters name="Login" type="java.lang.String"/>
    <parameters name="LoginConfirmation" type="java.lang.String"/>
    <parameters name="User" type="com.intershop.beehive.core.capi.user.User"/>
    <parameters name="Password" type="java.lang.String"/>
  </nodes>
<!--@Location 4,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode2" conditionKey="Login"
      operator="str_eq" conditionItem="LoginConfirmation">
    <nodeSuccessors name="decision_yes" next="CheckPassword2"/>
<!--@BendPoints 10,5-->
    <nodeSuccessors name="decision_no" next="SetDictionaryValue4"/>
  </nodes>
<!--@Location 4,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckPassword2">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckPassword.xml"/>
<!--@BendPoints 9,8-->
    <nodeSuccessors name="next" next="EndNode5"/>
    <nodeSuccessors name="pipelet_error" next="SetDictionaryValue7"/>
  </nodes>
<!--@Location 4,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode5" strict="true"/>
<!--@Location 5,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue7">
    <configurationValues name="Name" value="ERROR_User"/>
    <configurationValues name="Value" value="OldPasswordDoesNotMatch"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode2"/>
  </nodes>
<!--@Location 6,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode2">
<!--@BendPoints 13,8-->
    <nodeSuccessors name="next" next="EndNode6"/>
  </nodes>
<!--@Location 6,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode6" name="ERROR" strict="true">
    <returnValues name="ERROR_User" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 5,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue4">
    <configurationValues name="Name" value="ERROR_User"/>
    <configurationValues name="Value" value="LoginConfirmationDoesNotMatchWithPassword"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 13,5-->
    <nodeSuccessors name="next" next="JoinNode2"/>
  </nodes>
<!--@Location 8,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode5" strict="true" name="ValidatePasswordCredentialData"
      callMode="Private">
<!--@BendPoints 17,4-->
    <nodeSuccessors name="next" next="CheckPassword1"/>
    <parameters name="User" type="com.intershop.beehive.core.capi.user.User"/>
    <parameters name="Password" type="java.lang.String"/>
    <parameters name="OldPassword" type="java.lang.String"/>
    <parameters name="PasswordConfirmation" type="java.lang.String"/>
  </nodes>
<!--@Location 8,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckPassword1">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckPassword.xml"/>
    <nodeSuccessors name="next" next="DecisionNode1"/>
    <nodeSuccessors name="pipelet_error" next="SetDictionaryValue1"/>
    <parameterBindings name="Password" objectPath="OldPassword"/>
  </nodes>
<!--@Location 8,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode1" conditionKey="Password"
      operator="str_eq" conditionItem="PasswordConfirmation">
    <nodeSuccessors name="decision_yes" next="EndNode9"/>
    <nodeSuccessors name="decision_no" next="SetDictionaryValue2"/>
  </nodes>
<!--@Location 8,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode9" strict="true"/>
<!--@Location 9,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue2">
    <configurationValues name="Name" value="ERROR_User"/>
    <configurationValues name="Value" value="PasswordConfirmationDoesNotMatchWithPassword"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode1"/>
  </nodes>
<!--@Location 10,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode1">
    <nodeSuccessors name="next" next="EndNode10"/>
  </nodes>
<!--@Location 10,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode10" name="ERROR" strict="true">
    <returnValues name="ERROR_User" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 9,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue1">
    <configurationValues name="Name" value="ERROR_User"/>
    <configurationValues name="Value" value="OldPasswordDoesNotMatch"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 21,5-->
    <nodeSuccessors name="next" next="JoinNode1"/>
  </nodes>
</pipeline:Pipeline>
