<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>Schedule Management</title>
      <link rel="stylesheet" type="text/css" href="static/css/styles.css">
   </head>
   <body>
      <h1 id="smc_jobs">Schedule Management</h1>
      <div class="section-toc">
         <ul>
            <li><a href="#smc_jobs_able">Enabling/Disabling the Job Processor</a></li>
            <li><a href="#smc_jobs_list">Listing Scheduled Jobs</a></li>
            <li><a href="#smc_jobs_new">Creating a New Scheduled Job</a></li>
            <li><a href="#smc_jobs_edit">Editing a Scheduled Job</a></li>
            <li><a href="#smc_jobs_run">Running a Scheduled Job Manually</a></li>
            <li><a href="#smc_jobs_delete">Deleting a Scheduled Job</a></li>
            <li><a href="#smc_jobs_chain">Managing Process Chains</a></li>
            <ul>
               <li><a href="#smc_jobs_chain_elem">Specifying Process Chain Elements</a></li>
               <li><a href="#smc_jobs_chain_run">Executing Process Chains</a></li>
            </ul>
         </ul>
      </div>
      <p id="d12e365">Using the Schedules module, the Intershop Commerce Management system administrator can control all scheduled jobs created
         in the system, regardless of their original site assignment, permission, etc. In addition, this module allows for creating,
         editing or deleting scheduled jobs in any of the system sites.
      </p>
      <p id="d12e367">For an overview of pre-configured jobs in Intershop Commerce Management, refer to <a href="https://support.intershop.com/kb/index.php/Display/2V8210">Overview - Intershop Jobs</a>.
      </p>
      <h2 id="smc_jobs_able">Enabling/Disabling the Job Processor</h2>
      <p id="d12e380">Intershop Commerce Management allows for enabling/disabling the job processor of an application server in a cluster while
         the server is running. To do so:
      </p>
      <ol id="d12e382">
         <li id="d12e383">
            <p id="d12e384">In the navigation bar, select Schedules|Target Servers.</p>
            <p id="d12e386">The job processor statuses for all servers in the cluster are displayed.</p>
            <div class="figure" id="d12e388">
               <div class="figure_caption" id="d12e389">Figure 3: Job processor statuses in the cluster</div><img src="smc_images/scr_smc_enableJobs.png" alt="Job processor statuses in the cluster"></div>
         </li>
         <li id="d12e394">
            <p id="d12e395">Select the application server where you intend to change the job processor status.</p>
            <p id="d12e397">Click the checkbox next to the server to select it.</p>
         </li>
         <li id="d12e399">
            <p id="d12e400">Click Enable or Disable, as appropriate.</p>
            <p id="d12e402">The job processor state is set as required and made persistent in the local properties file of the corresponding application
               server (<span class="emphasis">&lt;IS.INSTANCE.LOCAL&gt;/config/appserver&lt;#&gt;.properties</span>). The new job processor status is published within the cluster via the servers' event messaging information.
            </p>
         </li>
      </ol>
      <h2 id="smc_jobs_list">Listing Scheduled Jobs</h2>
      <p id="d12e415">To view a list of scheduled jobs defined in any of the system sites:</p>
      <ol id="d12e417">
         <li id="d12e418">
            <p id="d12e419">In the navigation bar, select Schedules|Scheduling.</p>
            <p id="d12e421">A list of all schedules in the root site is displayed.</p>
         </li>
         <li id="d12e423">
            <p id="d12e424">Select the required site from the list box and click Apply.</p>
            <p id="d12e426">A list of all schedules in the selected site is displayed.</p>
            <div class="figure" id="d12e428">
               <div class="figure_caption" id="d12e429">Figure 4: Schedules overview page</div><img src="smc_images/scr_smc_listJobs.png" alt="Schedules overview page"></div>
            <p id="d12e434">The job schedules overview allows for filtering the schedules list by domain, operation state, server, instance and host machine.
               In addition, the schedules list can be sorted by name, domain, last run, last duration and operation state through clicking
               the corresponding attribute in the table head.
            </p>
         </li>
      </ol>
      <h2 id="smc_jobs_new">Creating a New Scheduled Job</h2>
      <p id="d12e444">To create a new scheduled job:</p>
      <ol id="d12e446">
         <li id="d12e447">
            <p id="d12e448">In the navigation bar, select Schedules|Scheduling.</p>
            <p id="d12e450">A list of all schedules in the root site is displayed.</p>
         </li>
         <li id="d12e452">
            <p id="d12e453">Select the site where you intend to create the schedule and click Apply.</p>
            <p id="d12e455">A list of all schedules in the selected site is displayed.</p>
         </li>
         <li id="d12e457">
            <p id="d12e458">Click New.</p>
            <p id="d12e460">An empty Schedule Details page is displayed.</p>
            <div class="figure" id="d12e462">
               <div class="figure_caption" id="d12e463">Figure 5: Specifying schedule details</div><img src="smc_images/scr_smc_createJob.png" alt="Specifying schedule details"></div>
         </li>
         <li id="d12e468">
            <p id="d12e469">Enter all required information.</p>
            <p id="d12e471">The following table lists the available fields.</p>
            <table id="d12e473">
               <caption id="d12e474">Table 1: Schedule Detail Fields</caption>
               <colgroup span="1">
                  <col width="30%" span="1">
                  <col width="70%" span="1">
               </colgroup>
               <thead id="d12e479">
                  <tr id="d12e480">
                     <th id="d12e481">Field</th>
                     <th id="d12e483">Description</th>
                  </tr>
               </thead>
               <tbody id="d12e485">
                  <tr id="d12e486">
                     <td id="d12e487">Name</td>
                     <td id="d12e489">A unique name for the schedule. Duplicate entries are rejected.</td>
                  </tr>
                  <tr id="d12e491">
                     <td id="d12e492">Description</td>
                     <td id="d12e494">A description of the schedule.</td>
                  </tr>
                  <tr id="d12e496">
                     <td id="d12e497">Enabled (checkbox)</td>
                     <td id="d12e499">Select this checkbox to enable (activate) the schedule.</td>
                  </tr>
                  <tr id="d12e501">
                     <td id="d12e502">Application</td>
                     <td id="d12e504">Select the application where the scheduled pipeline shall run.</td>
                  </tr>
                  <tr id="d12e506">
                     <td id="d12e507">Pipeline</td>
                     <td id="d12e509">The name of the scheduled pipeline.</td>
                  </tr>
                  <tr id="d12e511">
                     <td id="d12e512">Start Node</td>
                     <td id="d12e514">The start node of the scheduled pipeline.</td>
                  </tr>
                  <tr id="d12e516">
                     <td id="d12e517">Host Name</td>
                     <td id="d12e519">Specify the host where the scheduled pipeline shall run. (If left blank, it may run on any host in the cluster.)</td>
                  </tr>
                  <tr id="d12e521">
                     <td id="d12e522">Installation ID</td>
                     <td id="d12e524">Specify the Intershop Commerce Management instance where the scheduled pipeline shall run, e.g., ES1. The installation ID
                        is stored in the <span class="emphasis">intershop.properties</span> file of the respective instance as value of the property IS_INSTALLATION. If no ID is provided, the schedule can run in any
                        instance in the cluster.
                     </td>
                  </tr>
                  <tr id="d12e529">
                     <td id="d12e530">Server Name</td>
                     <td id="d12e532">Specify the application server where the scheduled pipeline shall run. (If left blank, it runs on the application server where
                        the automatic job processing is enabled.)
                     </td>
                  </tr>
                  <tr id="d12e534">
                     <td id="d12e535">Server Group</td>
                     <td id="d12e537">Specify the application server group where the scheduled pipeline shall run. (If left blank, it runs in the default server
                        group set for the application.)
                     </td>
                  </tr>
                  <tr id="d12e539">
                     <td id="d12e540">Data Center</td>
                     <td id="d12e542">Specify, if applicable, the data center that the scheduled pipeline shall use.</td>
                  </tr>
                  <tr id="d12e545">
                     <td id="d12e546">Run Once (radio button)</td>
                     <td id="d12e548">Select this option to run the schedule once.</td>
                  </tr>
                  <tr id="d12e550">
                     <td id="d12e551">Recurring Interval (radio button)</td>
                     <td id="d12e553">Select this option for the schedule to run at recurring intervals.</td>
                  </tr>
                  <tr id="d12e555">
                     <td id="d12e556">Run Time</td>
                     <td id="d12e558">Set the time when the pipeline starts running.</td>
                  </tr>
                  <tr id="d12e560">
                     <td id="d12e561">Active</td>
                     <td id="d12e563">Set the period during which the specified recurring interval is active.</td>
                  </tr>
                  <tr id="d12e565">
                     <td id="d12e566">Every (radio button)</td>
                     <td id="d12e568">Select this option for the schedule to run at the specified recurrence pattern.</td>
                  </tr>
                  <tr id="d12e570">
                     <td id="d12e571">On these days (radio button)</td>
                     <td id="d12e573">Select this option for the schedule to run on the selected day(s).</td>
                  </tr>
               </tbody>
            </table>
         </li>
         <li id="d12e575">
            <p id="d12e576">Click Apply to save your changes.</p>
            <p id="d12e578">If you have activated the new scheduled job, it will run at the specified time.</p>
         </li>
      </ol>
      <h2 id="smc_jobs_edit">Editing a Scheduled Job</h2>
      <p id="d12e588">To edit an existing scheduled job:</p>
      <ol id="d12e590">
         <li id="d12e591">
            <p id="d12e592">In the navigation bar, select Schedules|Scheduling.</p>
            <p id="d12e594">A list of all schedules in the root site is displayed.</p>
         </li>
         <li id="d12e596">
            <p id="d12e597">Select the site where you intend to edit the schedule and click Apply.</p>
            <p id="d12e599">A list of all schedules in the selected site is displayed.</p>
         </li>
         <li id="d12e601">
            <p id="d12e602">Click the name of the schedule you intend to edit.</p>
            <p id="d12e604">The selected schedule's details are displayed.</p>
         </li>
         <li id="d12e606">
            <p id="d12e607">Change the schedule's settings as required.</p>
         </li>
         <li id="d12e609">
            <p id="d12e610">Click Apply to save your changes.</p>
            <p id="d12e612">To discard the changes and restore the previous saved state, click Reset.</p>
         </li>
      </ol>
      <h2 id="smc_jobs_run">Running a Scheduled Job Manually</h2>
      <p id="d12e622">To run an existing scheduled job manually:</p>
      <ol id="d12e624">
         <li id="d12e625">
            <p id="d12e626">In the navigation bar, select Schedules|Scheduling.</p>
            <p id="d12e628">A list of all schedules in the root site is displayed.</p>
         </li>
         <li id="d12e630">
            <p id="d12e631">Select the site where you intend to run the schedule and click Apply.</p>
            <p id="d12e633">A list of all schedules in the selected site is displayed.</p>
         </li>
         <li id="d12e635">
            <p id="d12e636">Select the checkbox next to the schedule you intend to run.</p>
         </li>
         <li id="d12e638">
            <p id="d12e639">Click Run.</p>
            <p id="d12e641">The scheduled job is run immediately, regardless of any activation and run time settings.</p>
         </li>
      </ol>
      <h2 id="smc_jobs_delete">Deleting a Scheduled Job</h2>
      <p id="d12e651">To delete one or more scheduled jobs:</p>
      <ol id="d12e653">
         <li id="d12e654">
            <p id="d12e655">In the navigation bar, select Schedules|Scheduling.</p>
            <p id="d12e657">A list of all schedules in the root site is displayed.</p>
         </li>
         <li id="d12e659">
            <p id="d12e660">Select the site where you intend to delete the schedule and click Apply.</p>
            <p id="d12e662">A list of all schedules in the selected site is displayed.</p>
         </li>
         <li id="d12e664">
            <p id="d12e665">Select the checkbox(es) next to the schedule(s) you intend to delete.</p>
         </li>
         <li id="d12e667">
            <p id="d12e668">Click Delete.</p>
            <p id="d12e670">The selected schedules are removed from the system.</p>
         </li>
      </ol>
      <h2 id="smc_jobs_chain">Managing Process Chains</h2>
      <p id="d12e680">Intershop Commerce Management implements a mechanism for creating and executing process chains. Process chains help to automate
         the sequential execution of interdependent scheduled jobs or pipelines.
      </p>
      <p id="d12e682">Defining a process chain involves, basically, the following tasks:</p>
      <ul class="disc" id="d12e684">
         <li id="d12e685">
            <p id="d12e686">Specifying the chain elements, i.e., the jobs or pipelines to be processed</p>
         </li>
         <li id="d12e688">
            <p id="d12e689">Creating a scheduled job that triggers the execution</p>
         </li>
      </ul>
      <h3 id="smc_jobs_chain_elem">Specifying Process Chain Elements</h3>
      <p id="d12e699">Administrators can define process chains using XML files to be located in <span class="emphasis">&lt;IS.INSTANCE.SHARE&gt;/system/config/cluster</span>. Note that the default installation includes an example file, <span class="emphasis">processchain.xml.example</span>.
      </p>
      <p id="d12e707">The main configurable elements include:</p>
      <ul class="square" id="d12e709">
         <li id="d12e710">
            <p id="d12e711">&lt;chain&gt;</p>
            <p id="d12e713">The root element of the process chain XML file. Important attributes include <span class="code">name</span> (used in the System Management, module Monitoring|Locking|Processes) and <span class="code">keepAliveTime</span>, which defines the time that threads exceeding the core pool size may remain idle before being terminated.
            </p>
         </li>
         <li id="d12e721">
            <p id="d12e722">&lt;concurrent&gt;</p>
            <p id="d12e724">Child element of <span class="code">&lt;chain&gt;</span> or <span class="code">&lt;sequence&gt;</span>. Includes jobs or pipelines to be executed in parallel. The attribute <span class="code">name</span> is used in the System Management module Monitoring|Locking|Processes.
            </p>
         </li>
         <li id="d12e735">
            <p id="d12e736">&lt;sequence&gt;</p>
            <p id="d12e738">Child element of <span class="code">&lt;chain&gt;</span> or <span class="code">&lt;concurrent&gt;</span>. Includes jobs or pipelines to be executed sequentially in the given order. The attribute <span class="code">name</span> is used in the System Management module Monitoring|Locking|Processes.
            </p>
         </li>
         <li id="d12e749">
            <p id="d12e750">&lt;job&gt;</p>
            <p id="d12e752">Child element of <span class="code">&lt;sequence&gt;</span> or <span class="code">&lt;concurrent&gt;</span>. Specifies a job to be executed within the chain. The next table lists the attributes for <span class="code">&lt;job&gt;</span>.
            </p>
            <table id="d12e763">
               <caption id="d12e764">Table 2: Attributes of the process chain element &lt;job&gt;</caption>
               <colgroup span="1">
                  <col width="30%" span="1">
                  <col width="70%" span="1">
               </colgroup>
               <thead id="d12e769">
                  <tr id="d12e770">
                     <th id="d12e771">Attribute</th>
                     <th id="d12e773">Description</th>
                  </tr>
               </thead>
               <tbody id="d12e775">
                  <tr id="d12e776">
                     <td id="d12e777">job</td>
                     <td id="d12e779">Specifies the name of the job as defined in the System Management Schedules module (mandatory).</td>
                  </tr>
                  <tr id="d12e781">
                     <td id="d12e782">name</td>
                     <td id="d12e784">Specifies a display name for this job to be used in the Monitoring|Locking|Processes module.</td>
                  </tr>
                  <tr id="d12e786">
                     <td id="d12e787">domain</td>
                     <td id="d12e789">Can define a specific domain for the job execution (optional). By default, the chain element job is executed in the domain
                        of the process chain.
                     </td>
                  </tr>
                  <tr id="d12e791">
                     <td id="d12e792">allsites</td>
                     <td id="d12e794">Can specify whether the job executes in all domains (true|false), default is false.</td>
                  </tr>
                  <tr id="d12e796">
                     <td id="d12e797">concurrent</td>
                     <td id="d12e799">With allsites=true, can specify whether the job executes in parallel in all domains (true|false), default is false.</td>
                  </tr>
               </tbody>
            </table>
         </li>
         <li id="d12e801">
            <p id="d12e802">&lt;pipeline&gt;</p>
            <p id="d12e804">Child element of <span class="code">&lt;sequence&gt;</span> or <span class="code">&lt;concurrent&gt;</span>. Specifies a pipeline to be executed within the chain. The next table lists the attributes for <span class="code">&lt;pipeline&gt;</span>.
            </p>
            <table id="d12e815">
               <caption id="d12e816">Table 3: Attributes of the process chain element &lt;pipeline&gt;</caption>
               <colgroup span="1">
                  <col width="30%" span="1">
                  <col width="70%" span="1">
               </colgroup>
               <thead id="d12e821">
                  <tr id="d12e822">
                     <th id="d12e823">Attribute</th>
                     <th id="d12e825">Description</th>
                  </tr>
               </thead>
               <tbody id="d12e827">
                  <tr id="d12e828">
                     <td id="d12e829">pipeline</td>
                     <td id="d12e831">Specifies the name of the pipeline to be executed.</td>
                  </tr>
                  <tr id="d12e833">
                     <td id="d12e834">name</td>
                     <td id="d12e836">Specifies a display name for this pipeline to be used in the Monitoring|Locking|Processes module.</td>
                  </tr>
                  <tr id="d12e838">
                     <td id="d12e839">domain</td>
                     <td id="d12e841">Can define a specific domain for the pipeline execution (optional). By default, the chain element pipeline is executed in
                        the domain of the process chain.
                     </td>
                  </tr>
                  <tr id="d12e843">
                     <td id="d12e844">startnode</td>
                     <td id="d12e846">Can define a specifc pipeline start node (optional), default is Start.</td>
                  </tr>
                  <tr id="d12e848">
                     <td id="d12e849">login</td>
                     <td id="d12e851">Can define the login name that the pipeline to be executed may require.</td>
                  </tr>
                  <tr id="d12e853">
                     <td id="d12e854">password</td>
                     <td id="d12e856">Can define the password if the pipeline to be executed requires a specific login.</td>
                  </tr>
               </tbody>
            </table>
         </li>
         <li id="d12e858">
            <p id="d12e859">&lt;error&gt;</p>
            <p id="d12e861">Optional child element of <span class="code">&lt;sequence&gt;</span>. Specifies a dedicated <span class="code">&lt;job&gt;</span> or <span class="code">&lt;pipeline&gt;</span> that is to be executed in case the preceding jobs or pipelines within the <span class="code">&lt;sequence&gt;</span> have failed.
            </p>
            <div class="note" id="d12e875">
               <div class="adm-type">Note:</div>
               <p id="d12e876">Make sure that <span class="code">&lt;error&gt;</span> is the last element within the corresponding <span class="code">&lt;sequence&gt;</span>.
               </p>
            </div>
         </li>
         <li id="d12e884">
            <p id="d12e885">&lt;parameter&gt;</p>
            <p id="d12e887">Optional child element of <span class="code">&lt;pipeline&gt;</span>. Can specify the parameter that the pipeline to be executed may require.
            </p>
         </li>
         <li id="d12e892">
            <p id="d12e893">&lt;description&gt;</p>
            <p id="d12e895">Optional child element of <span class="code">&lt;sequence&gt;</span>, <span class="code">&lt;concurrent&gt;</span>, <span class="code">&lt;job&gt;</span> or <span class="code">&lt;pipeline&gt;</span>. Specifies a description to be displayed in the System Management module Monitoring|Locking|Processes.
            </p>
         </li>
         <li id="d12e909">
            <p id="d12e910">&lt;ignore&gt;</p>
            <p id="d12e912">Optional child element of <span class="code">&lt;sequence&gt;</span>, <span class="code">&lt;concurrent&gt;</span>, <span class="code">&lt;job&gt;</span> or <span class="code">&lt;pipeline&gt;</span>. Can specify status codes (<span class="code">SUCCESS|WARNING|FAILURE|ERROR|NOTFOUND|INTERRUPTED</span>) returned from the corresponding chain element upon execution that should be ignored for rest of the process chain execution.
               This way, the process chain execution can continue in case of errors in one of its sub tasks.
            </p>
         </li>
      </ul>
      <h3 id="smc_jobs_chain_run">Executing Process Chains</h3>
      <p id="d12e937">For process chains to be executed, administrators must create and configure a scheduled job that triggers the pipeline <span class="emphasis">ExecuteProcessChain</span> included with the Intershop Commerce Management core cartridge. This involves the following steps:
      </p>
      <ul class="square" id="d12e942">
         <li id="d12e943">
            <p id="d12e944">Creating a new scheduled job</p>
            <p id="d12e946">For details about scheduled job creation, refer to <a href="smc_jobs.html#smc_jobs_new">Creating a New Scheduled Job</a>. Make sure to specify the pipeline <span class="emphasis">ExecuteProcessChain</span> and the start node <span class="code">Start</span>.
            </p>
         </li>
         <li id="d12e956">
            <p id="d12e957">Adding the XmlFileName attribute to the new job</p>
            <p id="d12e959">The pipeline <span class="emphasis">ExecuteProcessChain</span> requires the path to the process chain configuration XML file as the input parameter <span class="code">XmlFileName</span>. That is why you must add an attribute <span class="code">XmlFileName</span> to the job. Its value must be of the data type <span class="code">String</span>, and must specify the complete path and file name of the configuration file relative to <span class="emphasis">&lt;IS.INSTANCE.SHARE&gt;</span>, e.g., <span class="code">system/config/cluster/processchain.xml</span>.
            </p>
         </li>
         <li id="d12e980">
            <p id="d12e981">Configuring the process chain execution</p>
            <p id="d12e983">Define the recurring interval, specific login and password, etc. as necessary. For details, see <a href="smc_jobs.html#smc_jobs_new">Creating a New Scheduled Job</a>.
            </p>
         </li>
      </ul>
      <p id="d12e987">The process chain will be executed according to your settings.</p>
   </body>
</html>