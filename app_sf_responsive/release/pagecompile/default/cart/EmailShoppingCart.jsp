<%@  page buffer="none" import="java.util.*,java.io.*,com.intershop.beehive.core.internal.template.*,com.intershop.beehive.core.internal.template.isml.*,com.intershop.beehive.core.capi.log.*,com.intershop.beehive.core.capi.resource.*,com.intershop.beehive.core.capi.util.UUIDMgr,com.intershop.beehive.core.capi.util.XMLHelper,com.intershop.beehive.foundation.util.*,com.intershop.beehive.core.internal.url.*,com.intershop.beehive.core.internal.resource.*,com.intershop.beehive.core.internal.wsrp.*,com.intershop.beehive.core.capi.pipeline.PipelineDictionary,com.intershop.beehive.core.capi.naming.NamingMgr,com.intershop.beehive.core.capi.pagecache.PageCacheMgr,com.intershop.beehive.core.capi.request.SessionMgr,com.intershop.beehive.core.internal.request.SessionMgrImpl,com.intershop.beehive.core.pipelet.PipelineConstants" extends="com.intershop.beehive.core.internal.template.AbstractTemplate" %><% 
boolean _boolean_result=false;
TemplateExecutionConfig context = getTemplateExecutionConfig();
createTemplatePageConfig(context.getServletRequest());
printHeader(out);
 %><% %><%@ page contentType="text/html;charset=utf-8" %><%response.setHeader(TemplateConstants.PERSONALIZED_HEADER, "1");setEncodingType("text/html"); %><% {out.flush();processLocalIncludeByServer((com.intershop.beehive.core.capi.request.ServletResponse)response,"modules/Modules", null, "2");} %><% {out.flush();processLocalIncludeByServer((com.intershop.beehive.core.capi.request.ServletResponse)response,"modules/captcha/Modules", null, "3");} %><div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" title="<% {out.write(localizeISText("dialog.close.text","",null,null,null,null,null,null,null,null,null,null,null));} %>" aria-label="<% {out.write(localizeISText("dialog.close.text","",null,null,null,null,null,null,null,null,null,null,null));} %>"><span aria-hidden="true">&times;</span></button>
<h2 class="modal-title"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.heading","",null,null,null,null,null,null,null,null,null,null,null));} %></h2>
</div><% _boolean_result=false;try {_boolean_result=((Boolean)((((((Boolean) getObject("EmailShoppingCartForm:Submitted")).booleanValue() && ((Boolean) ((((Boolean) getObject("EmailShoppingCartForm:Invalid")).booleanValue() ? Boolean.FALSE : Boolean.TRUE) )).booleanValue()) ? Boolean.TRUE : Boolean.FALSE)))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",12,e);}if (_boolean_result) { %><div class="modal-body"><% _boolean_result=false;try {_boolean_result=((Boolean)((disableErrorMessages().isDefined(getObject("ERROR_EMAIL_NOT_SENT"))))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",15,e);}if (_boolean_result) { %><div class="alert alert-danger">
<div class="kor-form-error-message-contents"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.email_sent.error","",null,null,null,null,null,null,null,null,null,null,null));} %></div>
</div><% } else { %><p><% {out.write(localizeISText("shopping_cart.email_shopping_cart.email_sent.message","",null,null,null,null,null,null,null,null,null,null,null));} %></p><% } %></div>
<div class="modal-footer">
<button class="btn btn-primary" data-dismiss="modal" type="submit"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.close_window.link","",null,null,null,null,null,null,null,null,null,null,null));} %></button>
</div><% } else { %><% URLPipelineAction action46 = new URLPipelineAction(context.getFormattedValue(url(true,(new URLPipelineAction(context.getFormattedValue("ViewCartEmail-Dispatch",null)))),null));String site46 = null;String serverGroup46 = null;String actionValue46 = context.getFormattedValue(url(true,(new URLPipelineAction(context.getFormattedValue("ViewCartEmail-Dispatch",null)))),null);if (site46 == null){  site46 = action46.getDomain();  if (site46 == null)  {      site46 = com.intershop.beehive.core.capi.request.Request.getCurrent().getRequestSite().getDomainName();  }}if (serverGroup46 == null){  serverGroup46 = action46.getServerGroup();  if (serverGroup46 == null)  {      serverGroup46 = com.intershop.beehive.core.capi.request.Request.getCurrent().getRequestSite().getServerGroup();  }}out.print("<form");out.print(" method=\"");out.print("post");out.print("\"");out.print(" action=\"");out.print(context.getFormattedValue(url(true,(new URLPipelineAction(context.getFormattedValue("ViewCartEmail-Dispatch",null)))),null));out.print("\"");out.print(" name=\"");out.print("EmailShoppingCartForm");out.print("\"");out.print(" data-hijax=\"");out.print("true");out.print("\"");out.print(" class=\"");out.print("bv-form form-horizontal");out.print("\"");out.print(">");out.print(context.prepareWACSRFTag(actionValue46, site46, serverGroup46,true)); %><input type="hidden" name="ProductUUID" value="<% {String value = null;try{value=context.getFormattedValue(getObject("ProductBO:ID"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {32}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>">
<input type="hidden" name="submittype" data-form-action="true"/>
<div class="modal-body"><% _boolean_result=false;try {_boolean_result=((Boolean)(getObject("EmailShoppingCartForm:Invalid"))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",37,e);}if (_boolean_result) { %><div class="alert alert-danger">
<div role="alert" class="kor-form-error-message-small">
<div class="kor-form-error-message-contents"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.form_error","",null,null,null,null,null,null,null,null,null,null,null));} %></div>
</div>
</div><% } %><div class="indicates-required"><span>*</span> <% {out.write(localizeISText("shopping_cart.email_shopping_cart.required_field.text","",null,null,null,null,null,null,null,null,null,null,null));} %></div>
<fieldset>
<div class="form-group <% _boolean_result=false;try {_boolean_result=((Boolean)((hasLoopElements("EmailShoppingCartForm:FriendsName_0:Errors") ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",52,e);}if (_boolean_result) { %>server-error<% } %> ">
<label class="control-label col-sm-4"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.friend_name.label","",null,null,null,null,null,null,null,null,null,null,null));} %></label>
<div class="col-sm-8">
<input class="form-control" type="text" name="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsName_0:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {55}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" value="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsName_0:Value"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {55}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" maxlength="70" /><% processOpenTag(response, pageContext, "fielderrormessageplaceholder", new TagParameter[] {
new TagParameter("fieldname",getObject("EmailShoppingCartForm:FriendsName_0")),
new TagParameter("ext_string_prefix","shopping_cart.email_shopping_cart.friend_name"),
new TagParameter("class","kor-field-error-bottom")}, 56); %></div>
</div>
<div class="form-group <% _boolean_result=false;try {_boolean_result=((Boolean)((hasLoopElements("EmailShoppingCartForm:FriendsEmail_0:Errors") ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",60,e);}if (_boolean_result) { %>server-error<% } %>">
<label class="control-label col-sm-4"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.friend_email.label","",null,null,null,null,null,null,null,null,null,null,null));} %><span class="required">*</span></label>
<div class="col-sm-8">
<input class="form-control" 
required 
type="email"
data-bv-emailaddress-message="<% {out.write(localizeISText("shopping_cart.email_shopping_cart.email.invalid.error","",null,null,null,null,null,null,null,null,null,null,null));} %>"
data-bv-notempty-message="<% {out.write(localizeISText("shopping_cart.email_shopping_cart.email.invalid.error","",null,null,null,null,null,null,null,null,null,null,null));} %>"
name="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsEmail_0:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {68}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" value="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsEmail_0:Value"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {68}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" maxlength="256" /><% processOpenTag(response, pageContext, "fielderrormessageplaceholder", new TagParameter[] {
new TagParameter("fieldname",getObject("EmailShoppingCartForm:FriendsEmail_0")),
new TagParameter("class","kor-field-error-bottom"),
new TagParameter("error_message_override","shopping_cart.email_shopping_cart.email.invalid.error")}, 69); %></div>
</div>
</fieldset>
<fieldset data-inputindex="1" <% _boolean_result=false;try {_boolean_result=((Boolean)((((context.getFormattedValue((context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsName_1:Value"),null) + context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsEmail_1:Value"),null)),null).equals(context.getFormattedValue("",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",74,e);}if (_boolean_result) { %>class="hidden"<% } %>>
<div class="form-group <% _boolean_result=false;try {_boolean_result=((Boolean)((hasLoopElements("EmailShoppingCartForm:FriendsName_1:Errors") ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",75,e);}if (_boolean_result) { %>server-error<% } %> ">
<label class="control-label col-sm-4"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.friend_name.label","",null,null,null,null,null,null,null,null,null,null,null));} %></label>
<div class="col-sm-8">
<input class="form-control" type="text" name="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsName_1:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {78}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" value="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsName_1:Value"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {78}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" maxlength="70" /><% processOpenTag(response, pageContext, "fielderrormessageplaceholder", new TagParameter[] {
new TagParameter("fieldname",getObject("EmailShoppingCartForm:FriendsName_1")),
new TagParameter("ext_string_prefix","shopping_cart.email_shopping_cart.friend_name"),
new TagParameter("class","kor-field-error-bottom")}, 79); %></div>
</div>
<div class="form-group <% _boolean_result=false;try {_boolean_result=((Boolean)((hasLoopElements("EmailShoppingCartForm:FriendsEmail_1:Errors") ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",83,e);}if (_boolean_result) { %>server-error<% } %> ">
<label class="control-label col-sm-4"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.friend_email.label","",null,null,null,null,null,null,null,null,null,null,null));} %></label>
<div class="col-sm-8">
<input class="form-control"
type="email"
data-bv-emailaddress-message="<% {out.write(localizeISText("shopping_cart.email_shopping_cart.email.invalid.error","",null,null,null,null,null,null,null,null,null,null,null));} %>"
data-bv-notempty-message="<% {out.write(localizeISText("shopping_cart.email_shopping_cart.email.invalid.error","",null,null,null,null,null,null,null,null,null,null,null));} %>"
name="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsEmail_1:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {90}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" value="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsEmail_1:Value"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {90}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" maxlength="256" /><% processOpenTag(response, pageContext, "fielderrormessageplaceholder", new TagParameter[] {
new TagParameter("fieldname",getObject("EmailShoppingCartForm:FriendsEmail_1")),
new TagParameter("class","kor-field-error-bottom"),
new TagParameter("error_message_override","shopping_cart.email_shopping_cart.email.invalid.error")}, 91); %></div>
</div>
</fieldset>
<fieldset data-inputindex="2" <% _boolean_result=false;try {_boolean_result=((Boolean)((((context.getFormattedValue((context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsName_2:Value"),null) + context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsEmail_2:Value"),null)),null).equals(context.getFormattedValue("",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",96,e);}if (_boolean_result) { %>class="hidden"<% } %>>
<div class="form-group <% _boolean_result=false;try {_boolean_result=((Boolean)((hasLoopElements("EmailShoppingCartForm:FriendsName_2:Errors") ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",97,e);}if (_boolean_result) { %>server-error<% } %> ">
<label class="control-label col-sm-4"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.friend_name.label","",null,null,null,null,null,null,null,null,null,null,null));} %></label>
<div class="col-sm-8">
<input class="form-control" type="text" name="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsName_2:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {100}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" value="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsName_2:Value"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {100}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" maxlength="70" /><% processOpenTag(response, pageContext, "fielderrormessageplaceholder", new TagParameter[] {
new TagParameter("fieldname",getObject("EmailShoppingCartForm:FriendsName_2")),
new TagParameter("ext_string_prefix","shopping_cart.email_shopping_cart.friend_name"),
new TagParameter("class","kor-field-error-bottom")}, 101); %></div>
</div>
<div class="form-group <% _boolean_result=false;try {_boolean_result=((Boolean)((hasLoopElements("EmailShoppingCartForm:FriendsEmail_2:Errors") ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",105,e);}if (_boolean_result) { %>server-error<% } %> ">
<label class="control-label col-sm-4"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.friend_email.label","",null,null,null,null,null,null,null,null,null,null,null));} %></label>
<div class="col-sm-8">
<input class="form-control" 
type="email"
data-bv-emailaddress-message="<% {out.write(localizeISText("shopping_cart.email_shopping_cart.email.invalid.error","",null,null,null,null,null,null,null,null,null,null,null));} %>"
data-bv-notempty-message="<% {out.write(localizeISText("shopping_cart.email_shopping_cart.email.invalid.error","",null,null,null,null,null,null,null,null,null,null,null));} %>"
name="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsEmail_2:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {112}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" value="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsEmail_2:Value"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {112}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" maxlength="256" /><% processOpenTag(response, pageContext, "fielderrormessageplaceholder", new TagParameter[] {
new TagParameter("fieldname",getObject("EmailShoppingCartForm:FriendsEmail_2")),
new TagParameter("class","kor-field-error-bottom"),
new TagParameter("error_message_override","shopping_cart.email_shopping_cart.email.invalid.error")}, 113); %></div>
</div>
</fieldset>
<fieldset data-inputindex="3" <% _boolean_result=false;try {_boolean_result=((Boolean)((((context.getFormattedValue((context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsName_3:Value"),null) + context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsEmail_3:Value"),null)),null).equals(context.getFormattedValue("",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",118,e);}if (_boolean_result) { %>class="hidden"<% } %>>
<div class="form-group <% _boolean_result=false;try {_boolean_result=((Boolean)((hasLoopElements("EmailShoppingCartForm:FriendsName_3:Errors") ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",119,e);}if (_boolean_result) { %>server-error<% } %> ">
<label class="control-label col-sm-4"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.friend_name.label","",null,null,null,null,null,null,null,null,null,null,null));} %></label>
<div class="col-sm-8">
<input class="form-control" type="text" name="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsName_3:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {122}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" value="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsName_3:Value"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {122}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" maxlength="70" /><% processOpenTag(response, pageContext, "fielderrormessageplaceholder", new TagParameter[] {
new TagParameter("fieldname",getObject("EmailShoppingCartForm:FriendsName_3")),
new TagParameter("ext_string_prefix","shopping_cart.email_shopping_cart.friend_name"),
new TagParameter("class","kor-field-error-bottom")}, 123); %></div>
</div>
<div class="form-group <% _boolean_result=false;try {_boolean_result=((Boolean)((hasLoopElements("EmailShoppingCartForm:FriendsEmail_3:Errors") ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",127,e);}if (_boolean_result) { %>server-error<% } %> ">
<label class="control-label col-sm-4"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.friend_email.label","",null,null,null,null,null,null,null,null,null,null,null));} %></label>
<div class="col-sm-8">
<input class="form-control" 
type="email"
data-bv-emailaddress-message="<% {out.write(localizeISText("shopping_cart.email_shopping_cart.email.invalid.error","",null,null,null,null,null,null,null,null,null,null,null));} %>"
data-bv-notempty-message="<% {out.write(localizeISText("shopping_cart.email_shopping_cart.email.invalid.error","",null,null,null,null,null,null,null,null,null,null,null));} %>"
name="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsEmail_3:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {134}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" value="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsEmail_3:Value"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {134}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" maxlength="256" /><% processOpenTag(response, pageContext, "fielderrormessageplaceholder", new TagParameter[] {
new TagParameter("fieldname",getObject("EmailShoppingCartForm:FriendsEmail_3")),
new TagParameter("class","kor-field-error-bottom"),
new TagParameter("error_message_override","shopping_cart.email_shopping_cart.email.invalid.error")}, 135); %></div>
</div>
</fieldset>
<fieldset data-inputindex="4" <% _boolean_result=false;try {_boolean_result=((Boolean)((((context.getFormattedValue((context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsName_4:Value"),null) + context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsEmail_4:Value"),null)),null).equals(context.getFormattedValue("",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",140,e);}if (_boolean_result) { %>class="hidden"<% } %>>
<div class="form-group <% _boolean_result=false;try {_boolean_result=((Boolean)((hasLoopElements("EmailShoppingCartForm:FriendsName_4:Errors") ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",141,e);}if (_boolean_result) { %>server-error<% } %> ">
<label class="control-label col-sm-4"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.friend_name.label","",null,null,null,null,null,null,null,null,null,null,null));} %></label>
<div class="col-sm-8">
<input class="form-control" type="text" name="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsName_4:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {144}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" value="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsName_4:Value"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {144}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" maxlength="70" /><% processOpenTag(response, pageContext, "fielderrormessageplaceholder", new TagParameter[] {
new TagParameter("fieldname",getObject("EmailShoppingCartForm:FriendsName_4")),
new TagParameter("ext_string_prefix","shopping_cart.email_shopping_cart.friend_name"),
new TagParameter("class","kor-field-error-bottom")}, 145); %></div>
</div>
<div class="form-group <% _boolean_result=false;try {_boolean_result=((Boolean)((hasLoopElements("EmailShoppingCartForm:FriendsEmail_4:Errors") ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",149,e);}if (_boolean_result) { %>server-error<% } %> ">
<label class="control-label col-sm-4"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.friend_email.label","",null,null,null,null,null,null,null,null,null,null,null));} %></label>
<div class="col-sm-8">
<input class="form-control" 
type="email"
data-bv-emailaddress-message="<% {out.write(localizeISText("shopping_cart.email_shopping_cart.email.invalid.error","",null,null,null,null,null,null,null,null,null,null,null));} %>"
data-bv-notempty-message="<% {out.write(localizeISText("shopping_cart.email_shopping_cart.email.invalid.error","",null,null,null,null,null,null,null,null,null,null,null));} %>"
name="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsEmail_4:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {156}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" value="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:FriendsEmail_4:Value"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {156}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" maxlength="256" /><% processOpenTag(response, pageContext, "fielderrormessageplaceholder", new TagParameter[] {
new TagParameter("fieldname",getObject("EmailShoppingCartForm:FriendsEmail_4")),
new TagParameter("class","kor-field-error-bottom"),
new TagParameter("error_message_override","shopping_cart.email_shopping_cart.email.invalid.error")}, 157); %></div>
</div>
</fieldset>
<p>
<a href="<%=context.getFormattedValue("#",null)%>" class="kor-input-add" ><% {out.write(localizeISText("shopping_cart.email_shopping_cart.add_recipient_link","",null,null,null,null,null,null,null,null,null,null,null));} %></a> <small class="help-block"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.add_recipient_message","",null,null,null,null,null,null,null,null,null,null,null));} %></small>
</p>
<div class="form-group">
<label class="control-label col-sm-4"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.personalized_message.text","",null,null,null,null,null,null,null,null,null,null,null));} %></label>
<div class="col-sm-8">
<textarea class="form-control" maxlength="30000" data-charactercounter="cCounter<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:EmailMessage:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {171}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" name="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:EmailMessage:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {171}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" <% _boolean_result=false;try {_boolean_result=((Boolean)((hasLoopElements("EmailShoppingCartForm:EmailMessage:Errors") ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",171,e);}if (_boolean_result) { %>class="ish-error"<% } %> ><% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:EmailMessage:Value"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {172}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %></textarea><% processOpenTag(response, pageContext, "fielderrormessageplaceholder", new TagParameter[] {
new TagParameter("fieldname",getObject("EmailShoppingCartForm:EmailMessage")),
new TagParameter("class","kor-field-error-bottom"),
new TagParameter("error_message_override","common.field.error.profanitycheck")}, 174); %><small class="help-block "><% {out.write(localizeISText("checkout.shipping_method.instructions_max_limit.pre.text","",null,null,null,null,null,null,null,null,null,null,null));} %> <span id="cCounter<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:EmailMessage:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {175}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>">30000</span> <% {out.write(localizeISText("checkout.shipping_method.instructions_max_limit.post.text","",null,null,null,null,null,null,null,null,null,null,null));} %></small>
</div>
</div>
<fieldset>
<div class="form-group <% _boolean_result=false;try {_boolean_result=((Boolean)((hasLoopElements("EmailShoppingCartForm:UserName:Errors") ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",180,e);}if (_boolean_result) { %>server-error<% } %> ">
<label class="control-label col-sm-4"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.your_name.label","",null,null,null,null,null,null,null,null,null,null,null));} %></label>
<div class="col-sm-8">
<input class="form-control" type="text" name="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:UserName:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {183}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" maxlength="70" 
value="<% _boolean_result=false;try {_boolean_result=((Boolean)(((!(context.getFormattedValue(getObject("EmailShoppingCartForm:UserName:Value"),null).equals(context.getFormattedValue("",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",184,e);}if (_boolean_result) { %><% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:UserName:Value"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {184}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %><% } else { %><% {String value = null;try{value=context.getFormattedValue(context.getFormattedValue(getObject("CurrentUser:Profile:DataSheet:FirstName"),null) + context.getFormattedValue(" ",null) + context.getFormattedValue(getObject("CurrentUser:Profile:DataSheet:LastName"),null),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {185}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %><% } %>"
/><% processOpenTag(response, pageContext, "fielderrormessageplaceholder", new TagParameter[] {
new TagParameter("fieldname",getObject("EmailShoppingCartForm:UserName")),
new TagParameter("ext_string_prefix","shopping_cart.email_shopping_cart.your_name"),
new TagParameter("class","kor-field-error-bottom")}, 189); %></div>
</div>
<div class="form-group <% _boolean_result=false;try {_boolean_result=((Boolean)((hasLoopElements("EmailShoppingCartForm:UserEmail:Errors") ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",193,e);}if (_boolean_result) { %>server-error"<% } %> ">
<label class="control-label col-sm-4"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.your_email.label","",null,null,null,null,null,null,null,null,null,null,null));} %><span class="required">*</span></label>
<div class="col-sm-8">
<input class="form-control" 
required 
type="email"
data-bv-emailaddress-message="<% {out.write(localizeISText("shopping_cart.email_shopping_cart.email.invalid.error","",null,null,null,null,null,null,null,null,null,null,null));} %>"
data-bv-notempty-message="<% {out.write(localizeISText("shopping_cart.email_shopping_cart.email.invalid.error","",null,null,null,null,null,null,null,null,null,null,null));} %>"
name="<% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:UserEmail:QualifiedName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {201}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" maxlength="256" 
value="<% _boolean_result=false;try {_boolean_result=((Boolean)(((!(context.getFormattedValue(getObject("EmailShoppingCartForm:UserEmail:Value"),null).equals(context.getFormattedValue("",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",202,e);}if (_boolean_result) { %><% {String value = null;try{value=context.getFormattedValue(getObject("EmailShoppingCartForm:UserEmail:Value"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {202}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %><% } else { %><% {String value = null;try{value=context.getFormattedValue(getObject("CurrentUser:Profile:Credentials:Login"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {203}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %><% } %>" 
/><% processOpenTag(response, pageContext, "fielderrormessageplaceholder", new TagParameter[] {
new TagParameter("fieldname",getObject("EmailShoppingCartForm:UserEmail")),
new TagParameter("class","kor-field-error-bottom"),
new TagParameter("error_message_override","shopping_cart.email_shopping_cart.email.invalid.error")}, 207); %></div>
</div>
</fieldset>
<fieldset>
<div class="form-group<% _boolean_result=false;try {_boolean_result=((Boolean)(getObject("EmailShoppingCartForm:recaptcharesponsefield:Invalid"))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",212,e);}if (_boolean_result) { %> server-error<% } %>">
<div class="col-sm-8 col-sm-offset-4 row"><% processOpenTag(response, pageContext, "captchaformfield", new TagParameter[] {
new TagParameter("fieldname","EmailShoppingCartForm:recaptcharesponsefield"),
new TagParameter("enablepreference","intershop.CaptchaPreferences.EmailShoppingCart")}, 214); %></div>
</div>
</fieldset>
<small class="help-block"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.disclaimer.privacy_policy",null,null,encodeString(context.getFormattedValue(url(true,(new URLPipelineAction(context.getFormattedValue("ViewContent-Start",null))),(new URLParameterSet().addURLParameter(context.getFormattedValue("PageletEntryPointID",null),context.getFormattedValue("systempage.privacyPolicy.pagelet2-Page",null)))),null)),null,null,null,null,null,null,null,null,null));} %></small>
<small class="help-block"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.disclaimer.price_policy","",null,null,null,null,null,null,null,null,null,null,null));} %></small>
<small class="help-block"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.disclaimer","",null,getObject("CurrentProductRepository:DisplayName"),null,null,null,null,null,null,null,null,null));} %></small>
</div>
<div class="modal-footer">
<button type="submit"class="btn btn-primary" name="sendMail"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.send_mail.button.label","",null,null,null,null,null,null,null,null,null,null,null));} %></button>
<button type="submit" class="btn btn-default" data-dismiss="modal" name="cancel"><% {out.write(localizeISText("shopping_cart.email_shopping_cart.cancel.button.label","",null,null,null,null,null,null,null,null,null,null,null));} %></button>
</div><% out.print("</form>"); %><% } %></div>
</div><% printFooter(out); %>