<%@  page buffer="none" import="java.util.*,java.io.*,com.intershop.beehive.core.internal.template.*,com.intershop.beehive.core.internal.template.isml.*,com.intershop.beehive.core.capi.log.*,com.intershop.beehive.core.capi.resource.*,com.intershop.beehive.core.capi.util.UUIDMgr,com.intershop.beehive.core.capi.util.XMLHelper,com.intershop.beehive.foundation.util.*,com.intershop.beehive.core.internal.url.*,com.intershop.beehive.core.internal.resource.*,com.intershop.beehive.core.internal.wsrp.*,com.intershop.beehive.core.capi.pipeline.PipelineDictionary,com.intershop.beehive.core.capi.naming.NamingMgr,com.intershop.beehive.core.capi.pagecache.PageCacheMgr,com.intershop.beehive.core.capi.request.SessionMgr,com.intershop.beehive.core.internal.request.SessionMgrImpl,com.intershop.beehive.core.pipelet.PipelineConstants" extends="com.intershop.beehive.core.internal.template.AbstractTemplate" %><% 
boolean _boolean_result=false;
TemplateExecutionConfig context = getTemplateExecutionConfig();
createTemplatePageConfig(context.getServletRequest());
printHeader(out);
 %><% %><%@ page contentType="text/html;charset=utf-8" %><%response.setHeader(TemplateConstants.PERSONALIZED_HEADER, "1");setEncodingType("text/html"); %><% _boolean_result=false;try {_boolean_result=((Boolean)((((Boolean) (disableErrorMessages().isDefined(getObject("PriceDisplayType")))).booleanValue() ? Boolean.FALSE : Boolean.TRUE) )).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",3,e);}if (_boolean_result) { %><% {Object temp_obj = (getObject("CurrentCartBO:PriceDisplayTypeName")); getPipelineDictionary().put("PriceDisplayType", temp_obj);} %><% } %><div class="shipping-methods"><% {out.write(localizeISText("checkout.shipping_method.selection.heading","",null,null,null,null,null,null,null,null,null,null,null));} %><% {Object temp_obj = (getObject("Bucket:EligibleShippingMethods")); getPipelineDictionary().put("BucketEligibleShippingMethods", temp_obj);} %><% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) (disableErrorMessages().isDefined(getObject("BucketEligibleShippingMethods")))).booleanValue() && ((Boolean) (hasLoopElements("BucketEligibleShippingMethods") ? Boolean.TRUE : Boolean.FALSE)).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",12,e);}if (_boolean_result) { %><% {Object temp_obj = ("false"); getPipelineDictionary().put("ShowSpecialShippingInstruction", temp_obj);} %><% while (loop("BucketEligibleShippingMethods","ShippingMethod",null)) { %><div class="radio">
<label for="ShippingMethod_<% {String value = null;try{value=context.getFormattedValue(getObject("Bucket:ID"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {18}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>_<% {String value = null;try{value=context.getFormattedValue(getObject("ShippingMethod:Id"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {18}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>">
<input id="ShippingMethod_<% {String value = null;try{value=context.getFormattedValue(getObject("Bucket:ID"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {19}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>_<% {String value = null;try{value=context.getFormattedValue(getObject("ShippingMethod:Id"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {19}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" name="ShippingMethodUUID_<% {String value = null;try{value=context.getFormattedValue(getObject("Bucket:ID"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {19}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" value="<% {String value = null;try{value=context.getFormattedValue(getObject("ShippingMethod:Id"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {19}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" type="radio"
<% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) (disableErrorMessages().isDefined(getObject("Bucket:SelectedShippingMethod")))).booleanValue() && ((Boolean) ((((context.getFormattedValue(getObject("Bucket:SelectedShippingMethod:Id"),null).equals(context.getFormattedValue(getObject("ShippingMethod:Id"),null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",20,e);}if (_boolean_result) { %>checked="checked"
<% _boolean_result=false;try {_boolean_result=((Boolean)((((context.getFormattedValue(getObject("ShippingMethod:InstructionSupported"),null).equals(context.getFormattedValue("true",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",21,e);}if (_boolean_result) { %><% {Object temp_obj = ("true"); getPipelineDictionary().put("ShowSpecialShippingInstruction", temp_obj);} %><% } %><% } %>
/>
<span><% {String value = null;try{value=context.getFormattedValue(getObject("ShippingMethod:DisplayName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {27}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>:</span>&nbsp;
<strong><% _boolean_result=false;try {_boolean_result=((Boolean)((((context.getFormattedValue(getObject("PriceDisplayType"),null).equals(context.getFormattedValue("net",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",28,e);}if (_boolean_result) { %><% {String value = null;try{value=context.getFormattedValue(getObject("ShippingMethod:ShippingMethodCostNet"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {28}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %><% } else { %><% {String value = null;try{value=context.getFormattedValue(getObject("ShippingMethod:ShippingMethodCostGross"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {28}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %><% } %></strong><% _boolean_result=false;try {_boolean_result=((Boolean)(((!(context.getFormattedValue(getObject("CurrentCartBO:PriceDisplayAdditionalText"),null).equals(context.getFormattedValue("",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",30,e);}if (_boolean_result) { %><span class="help-block help-block-inline"><% {String value = null;try{value=context.getFormattedValue(getObject("CurrentCartBO:PriceDisplayAdditionalText"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {31}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>&nbsp;</span><% } %><% {Object temp_obj = (getObject("Bucket:DeliveryTimeMin(ShippingMethod)")); getPipelineDictionary().put("BucketDeliveryTimeMin", temp_obj);} %><% {Object temp_obj = (getObject("Bucket:DeliveryTimeMax(ShippingMethod)")); getPipelineDictionary().put("BucketDeliveryTimeMax", temp_obj);} %><% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) (disableErrorMessages().isDefined(getObject("BucketDeliveryTimeMin")))).booleanValue() && ((Boolean) (disableErrorMessages().isDefined(getObject("BucketDeliveryTimeMax")))).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",37,e);}if (_boolean_result) { %><span class="help-block help-block-inline"><% {out.write(localizeISText("checkout.shipping.delivery_time.description","",null,null,null,null,null,null,null,null,null,null,null));} %> 
<% _boolean_result=false;try {_boolean_result=((Boolean)((((context.getFormattedValue(getObject("BucketDeliveryTimeMin"),null).equals(context.getFormattedValue("0",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",40,e);}if (_boolean_result) { %><% _boolean_result=false;try {_boolean_result=((Boolean)((((context.getFormattedValue(getObject("BucketDeliveryTimeMax"),null).equals(context.getFormattedValue("1",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",41,e);}if (_boolean_result) { %><% {out.write(localizeISText("checkout.shipping.delivery_time.within24","",null,null,null,null,null,null,null,null,null,null,null));} %><% } else { %><% {out.write(localizeISText("checkout.shipping.delivery_time.within","",null,getObject("BucketDeliveryTimeMax"),null,null,null,null,null,null,null,null,null));} %><% } %><% } else { %><% {out.write(localizeISText("checkout.shipping.delivery_time","",null,getObject("BucketDeliveryTimeMin"),getObject("BucketDeliveryTimeMax"),null,null,null,null,null,null,null,null));} %><% } %></span><% } %><% processOpenTag(response, pageContext, "tooltip", new TagParameter[] {
new TagParameter("linktextkey","checkout.detail.text"),
new TagParameter("linkclass","details-tooltip"),
new TagParameter("content",getObject("ShippingMethod:Description"))}, 51); %></label>
</div><% } %><% } %></div><% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) (disableErrorMessages().isDefined(getObject("BucketEligibleShippingMethods")))).booleanValue() && ((Boolean) (hasLoopElements("BucketEligibleShippingMethods") ? Boolean.TRUE : Boolean.FALSE)).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",58,e);}if (_boolean_result) { %><% _boolean_result=false;try {_boolean_result=((Boolean)((((context.getFormattedValue(getObject("ShowSpecialShippingInstruction"),null).equals(context.getFormattedValue("true",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",59,e);}if (_boolean_result) { %><% processOpenTag(response, pageContext, "getindirectvalue", new TagParameter[] {
new TagParameter("entry","ShippingInstructionParameter"),
new TagParameter("print","false"),
new TagParameter("key",context.getFormattedValue("ShippingForm:getParameter(\"ShippingInstruction_",null) + context.getFormattedValue(getObject("Bucket:ID"),null) + context.getFormattedValue("\")",null))}, 60); %><div class="shipping-instruction<% _boolean_result=false;try {_boolean_result=((Boolean)(getObject("ShippingInstructionParameter:isInvalid"))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",61,e);}if (_boolean_result) { %> has-error<% } %><% _boolean_result=false;try {_boolean_result=((Boolean)((((((Boolean) (disableErrorMessages().isDefined(getObject("PackSlipMessage_Switch")))).booleanValue() && ((Boolean) (((!(context.getFormattedValue(getObject("PackSlipMessage_Switch"),null).equals(context.getFormattedValue("true",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue()) ? Boolean.TRUE : Boolean.FALSE)))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",61,e);}if (_boolean_result) { %> section<% } %>"><% _boolean_result=false;try {_boolean_result=((Boolean)((disableErrorMessages().isDefined(getObject("ShippingInstructionParameter:Value"))))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",62,e);}if (_boolean_result) { %><% {Object temp_obj = (getObject("ShippingInstructionParameter:Value")); getPipelineDictionary().put("ShippingInstructions", temp_obj);} %><% } else { %><% {Object temp_obj = (getObject("Bucket:ShippingInstructions")); getPipelineDictionary().put("ShippingInstructions", temp_obj);} %><% } %><div class="checkbox">
<label for="ShippingInstruction_Flag_<% {String value = null;try{value=context.getFormattedValue(getObject("Bucket:ID"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {69}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>">
<input type="checkbox" 
data-toggle="collapse" 
data-target="<%=context.getFormattedValue("#",null)%>shippingInstruction_<% {String value = null;try{value=context.getFormattedValue(getObject("Bucket:ID"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {72}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" 
name="ShippingInstruction_Flag_<% {String value = null;try{value=context.getFormattedValue(getObject("Bucket:ID"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {73}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" 
id="ShippingInstruction_Flag_<% {String value = null;try{value=context.getFormattedValue(getObject("Bucket:ID"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {74}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" 
value="true"
<% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) (disableErrorMessages().isDefined(getObject("ShippingInstructions")))).booleanValue() && ((Boolean) (((!(context.getFormattedValue(getObject("ShippingInstructions"),null).equals(context.getFormattedValue("",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",76,e);}if (_boolean_result) { %>
checked = "checked"
<% } %>
/><% {out.write(localizeISText("checkout.shipping.shippingInstructions.checkbox.text","",null,null,null,null,null,null,null,null,null,null,null));} %>&nbsp;<span class="help-block help-block-inline"><% {out.write(localizeISText("checkout.shipping.shippingInstructions.checkbox.text1","",null,null,null,null,null,null,null,null,null,null,null));} %></span>
</label>
</div>
<div class="collapse <% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) (disableErrorMessages().isDefined(getObject("ShippingInstructions")))).booleanValue() && ((Boolean) (((!(context.getFormattedValue(getObject("ShippingInstructions"),null).equals(context.getFormattedValue("",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",84,e);}if (_boolean_result) { %> in<% } %>" id="shippingInstruction_<% {String value = null;try{value=context.getFormattedValue(getObject("Bucket:ID"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {84}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>">
<br/><% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) getObject("ShippingForm:isSubmitted")).booleanValue() && ((Boolean) getObject("ShippingInstructionParameter:isInvalid")).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",86,e);}if (_boolean_result) { %><% while (loop("ShippingInstructionParameter:Errors","Error",null)) { %><% _boolean_result=false;try {_boolean_result=((Boolean)((((context.getFormattedValue(getObject("Error"),null).equals(context.getFormattedValue("error.profanitycheck",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",88,e);}if (_boolean_result) { %><div class="alert alert-danger"><% {out.write(localizeISText("checkout.shipping.profanity.error","",null,null,null,null,null,null,null,null,null,null,null));} %></div><% } else {_boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) ((((context.getFormattedValue(getObject("Error"),null).equals(context.getFormattedValue("error.regexp",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue() || ((Boolean) ((((context.getFormattedValue(getObject("Error"),null).equals(context.getFormattedValue("error.maxlength",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",92,e);}if (_boolean_result) { %><div class="alert alert-danger"><% {out.write(localizeISText("checkout.shipping.shippingInstructions.maxNoOfCharacters.error","",null,"180",null,null,null,null,null,null,null,null,null));} %></div><% }} %><% } %><% } %><textarea 
maxlength="180" 
data-charactercounter="cCounterShippingInstruction_<% {String value = null;try{value=context.getFormattedValue(getObject("Bucket:ID"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {102}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" 
name="ShippingForm_ShippingInstruction_<% {String value = null;try{value=context.getFormattedValue(getObject("Bucket:ID"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {103}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>" 
class="form-control<% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) getObject("ShippingForm:isSubmitted")).booleanValue() && ((Boolean) getObject("ShippingInstructionParameter:isInvalid")).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",104,e);}if (_boolean_result) { %> has-error<% } %>"
><% {String value = null;try{value=context.getFormattedValue(getObject("ShippingInstructions"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {106}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %></textarea>
<small class="input-help"><% {out.write(localizeISText("checkout.shipping_method.instructions_max_limit.pre.text","",null,null,null,null,null,null,null,null,null,null,null));} %> <span id="cCounterShippingInstruction_<% {String value = null;try{value=context.getFormattedValue(getObject("Bucket:ID"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {110}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>"></span> <% {out.write(localizeISText("checkout.shipping_method.instructions_max_limit.post.text","",null,null,null,null,null,null,null,null,null,null,null));} %></small> 
</div>
</div><% } %><% } %><% printFooter(out); %>