<?xml version="1.0" encoding="UTF-8"?>
<!--Shows the e\-mail marketing activities of the channel
@Group OnlineMarketing-->

<pipeline:Pipeline xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pipeline="http://www.intershop.de/pipeline/2010"
    name="ViewEmailMarketing_52" type="view">
<!--Check if all numbers are correct
@Location 17,3-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode1"/>
<!--search for discount with current currency. 

 It's used for fixed amount discount.
@Location 0,35-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode2" width="2"/>
<!--delete all current rebates for all currencies
@Location 25,10-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode3"/>
<!--Old 6.4 rule FW pipelets removed.
@Location 2,0-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode4"/>
<!--@Location 15,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode25" name="AddFixedAmountPrice"
      callMode="Private">
<!--@BendPoints 31,2-->
    <nodeSuccessors name="next" next="GetFormRecord1"/>
  </nodes>
<!--@Location 15,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetFormRecord1">
    <configurationValues name="DefaultRecordID" value="FixedAmountPartCurrency"/>
    <pipelet href="enfinity:/core/pipelets/GetFormRecord.xml"/>
<!--@BendPoints 31,4-->
    <nodeSuccessors name="next" next="LoopNode10"/>
    <returnValueBindings name="FormRecord" objectPath="FixedAmountFormRecord"/>
  </nodes>
<!--@Location 15,2-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode10" loop="FixedAmountFormRecord:KeySet">
<!--@BendPoints 33,5 33,10 31,10-->
    <nodeSuccessors name="next" next="RemoveDictionaryValue1"/>
    <entry key="AddFixedAmountCurrency">
<!--@BendPoints 31,6-->
      <nodeSuccessors name="loop_entry_next" next="Pipelet50"/>
    </entry>
  </nodes>
<!--@Location 15,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet50">
    <configurationValues name="MinValue" value="0"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyMoney.xml"/>
<!--@BendPoints 31,8 30,8 30,5-->
    <nodeSuccessors name="next" next="LoopNode10_Entry"/>
<!--@BendPoints 32,7 32,9 29,9 29,13-->
    <nodeSuccessors name="pipelet_error" next="JoinNode19"/>
    <parameterBindings name="CurrencyMnemonic" objectPath="AddFixedAmountCurrency"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <parameterBindings name="LocalizedString" objectPath="FixedAmountFormRecord:get(AddFixedAmountCurrency)"/>
    <parameterBindings name="Pattern" nullBinding="true"/>
    <returnValueBindings name="ErrorCode" objectPath="ErrorCode_FixedAmountPart"/>
    <returnValueBindings name="MoneyValue" objectPath="AddedFixedAmount"/>
  </nodes>
<!--@Location 13,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode19">
<!--@BendPoints 27,16-->
    <nodeSuccessors name="next" next="CallNode27"/>
  </nodes>
<!--@Location 13,8-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode27">
<!--@BendPoints 27,18-->
    <nodeSuccessors name="next" next="Pipelet3"/>
    <startNode referencedName="ViewEmailMarketing_52-GetSelectedProducts"/>
  </nodes>
<!--@Location 13,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet3">
    <configurationValues name="Method" value="Active Currencies"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetCurrencies.xml"/>
<!--@BendPoints 27,20-->
    <nodeSuccessors name="next" next="GetProviderDefinition1"/>
    <parameterBindings name="Domain" objectPath="CurrentChannel:RepositoryDomain"/>
  </nodes>
<!--@Location 13,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProviderDefinition1">
    <pipelet href="enfinity:/bc_marketing/pipelets/GetProviderDefinition.xml"/>
    <nodeSuccessors name="next" next="ExchangeSessionObject9"/>
    <parameterBindings name="Domain" objectPath="CurrentChannel:RepositoryDomain"/>
  </nodes>
<!--@Location 13,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject9">
    <configurationValues name="ProcessMethod" value="Get Object from Session"/>
    <configurationValues name="SessionObjectName" value="FixedAmountMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
    <nodeSuccessors name="next" next="PrepareApplicationView2"/>
    <parameterBindings name="SaveObject" objectPath="FixedAmountMap"/>
    <returnValueBindings name="LoadObject" objectPath="FixedAmountMap"/>
  </nodes>
<!--@Location 13,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="PrepareApplicationView2">
    <configurationValues name="SelectedMenuItem" value="OnlineMarketing"/>
    <configurationValues name="WorkingTemplate" value="marketing/AbandonedBasket_52"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/PrepareApplicationView.xml"/>
<!--@BendPoints 27,28-->
    <nodeSuccessors name="next" next="InteractionNode2"/>
  </nodes>
<!--@Location 13,14-->
  <nodes xsi:type="pipeline:InteractionNode" nodeID="InteractionNode2">
    <template referencedName="application/ApplicationFrame"/>
  </nodes>
<!--@Location 15,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemoveDictionaryValue1">
    <configurationValues name="Key" value="FixedAmountMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/RemoveDictionaryValue.xml"/>
<!--@BendPoints 31,12-->
    <nodeSuccessors name="next" next="CallNode6"/>
  </nodes>
<!--@Location 15,6-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode6">
<!--@BendPoints 31,14-->
    <nodeSuccessors name="next" next="LoopNode2"/>
    <startNode referencedName="This:RemoveRebates"/>
  </nodes>
<!--@Location 15,7-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode2" loop="FixedAmountFormRecord:KeySet">
<!--@BendPoints 32,15-->
    <nodeSuccessors name="next" next="ExchangeSessionObject3"/>
    <entry key="AddFixedAmountCurrency">
<!--@BendPoints 31,16-->
      <nodeSuccessors name="loop_entry_next" next="Pipelet29"/>
    </entry>
  </nodes>
<!--@Location 15,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet29">
    <configurationValues name="MinValue" value="0"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyMoney.xml"/>
<!--@BendPoints 31,18-->
    <nodeSuccessors name="next" next="AddEntryToMap2"/>
    <parameterBindings name="CurrencyMnemonic" objectPath="AddFixedAmountCurrency"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <parameterBindings name="LocalizedString" objectPath="FixedAmountFormRecord:get(AddFixedAmountCurrency)"/>
    <parameterBindings name="Pattern" nullBinding="true"/>
    <returnValueBindings name="ErrorCode" objectPath="ErrorCode_FixedAmount"/>
    <returnValueBindings name="MoneyValue" objectPath="AddedFixedAmount"/>
  </nodes>
<!--@Location 15,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddEntryToMap2">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddEntryToMap.xml"/>
<!--@BendPoints 31,20-->
    <nodeSuccessors name="next" next="Pipelet30"/>
    <parameterBindings name="InMap" objectPath="FixedAmountMap"/>
    <parameterBindings name="Key" objectPath="AddFixedAmountCurrency"/>
    <parameterBindings name="Value" objectPath="FixedAmountFormRecord:get(AddFixedAmountCurrency)"/>
    <returnValueBindings name="OutMap" objectPath="FixedAmountMap"/>
  </nodes>
<!--@Location 15,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet30">
    <pipelet href="enfinity:/bc_foundation/pipelets/ToString.xml"/>
<!--@BendPoints 31,22-->
    <nodeSuccessors name="next" next="KeyMapper1"/>
    <parameterBindings name="Object1" objectPath="AddedFixedAmount:Value"/>
    <returnValueBindings name="String1" objectPath="FixedNumberValue"/>
  </nodes>
<!--@Location 15,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper1">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 31,24-->
    <nodeSuccessors name="next" next="CallNode5"/>
    <parameterBindings name="InValue_1" objectPath="AddFixedAmountCurrency"/>
    <returnValueBindings name="OutValue_1" objectPath="Currency"/>
  </nodes>
<!--@Location 15,12-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode5">
<!--@BendPoints 31,26-->
    <nodeSuccessors name="next" next="CallNode8"/>
    <startNode referencedName="This:CreateRebateForCurrency"/>
  </nodes>
<!--@Location 15,13-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode8">
<!--@BendPoints 31,28 29,28 29,15-->
    <nodeSuccessors name="next" next="LoopNode2_Entry"/>
    <startNode referencedName="This:UpdateRebateRules"/>
  </nodes>
<!--@Location 16,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject3">
    <configurationValues name="ProcessMethod" value="Put Object to Session"/>
    <configurationValues name="SessionObjectName" value="FixedAmountMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
<!--@BendPoints 34,15-->
    <nodeSuccessors name="next" next="JumpNode9"/>
    <parameterBindings name="SaveObject" objectPath="FixedAmountMap"/>
    <returnValueBindings name="LoadObject" objectPath="FixedAmountMap"/>
  </nodes>
<!--@Location 17,7-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode9">
    <startNode referencedName="ViewEmailMarketing_52-Show"/>
  </nodes>
<!--@Location 10,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode32" name="AddFixedAmountPricePart">
    <nodeSuccessors name="next" next="Pipelet31"/>
  </nodes>
<!--@Location 10,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet31">
    <configurationValues name="MinValue" value="0"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyMoney.xml"/>
<!--@BendPoints 21,4-->
    <nodeSuccessors name="next" next="ExchangeSessionObject7"/>
<!--@BendPoints 22,3 22,13-->
    <nodeSuccessors name="pipelet_error" next="JoinNode20"/>
    <parameterBindings name="CurrencyMnemonic" objectPath="FixedAmountCurrency"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <parameterBindings name="LocalizedString" objectPath="FixedAmountValue"/>
    <parameterBindings name="Pattern" nullBinding="true"/>
    <returnValueBindings name="ErrorCode" objectPath="ErrorCode_FixedAmount"/>
    <returnValueBindings name="MoneyValue" objectPath="AddFixedNumberValue"/>
  </nodes>
<!--@Location 10,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject7">
    <configurationValues name="ProcessMethod" value="Get Object from Session"/>
    <configurationValues name="SessionObjectName" value="FixedAmountMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
    <nodeSuccessors name="next" next="AddEntryToMap3"/>
    <parameterBindings name="SaveObject" objectPath="FixedAmountMap"/>
    <returnValueBindings name="LoadObject" objectPath="FixedAmountMap"/>
  </nodes>
<!--@Location 10,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddEntryToMap3">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddEntryToMap.xml"/>
    <nodeSuccessors name="next" next="ExchangeSessionObject6"/>
    <parameterBindings name="InMap" objectPath="FixedAmountMap"/>
    <parameterBindings name="Key" objectPath="FixedAmountCurrency"/>
    <parameterBindings name="Value" objectPath="FixedAmountValue"/>
    <returnValueBindings name="OutMap" objectPath="FixedAmountMap"/>
  </nodes>
<!--@Location 10,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject6">
    <configurationValues name="ProcessMethod" value="Put Object to Session"/>
    <configurationValues name="SessionObjectName" value="FixedAmountMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
<!--@BendPoints 21,10-->
    <nodeSuccessors name="next" next="SetDictionaryValue4"/>
    <parameterBindings name="SaveObject" objectPath="FixedAmountMap"/>
    <returnValueBindings name="LoadObject" objectPath="FixedAmountMap"/>
  </nodes>
<!--@Location 10,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue4">
    <configurationValues name="Name" value="updateFixedAmount"/>
    <configurationValues name="Value" value="true"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode20"/>
  </nodes>
<!--@Location 10,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode20">
    <nodeSuccessors name="next" next="JoinNode51"/>
  </nodes>
<!--@Location 10,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode51">
    <nodeSuccessors name="next" next="JoinNode11"/>
  </nodes>
<!--@Location 12,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode11">
    <nodeSuccessors name="next" next="JoinNode19"/>
  </nodes>
<!--@Location 15,22-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode15" name="Assign">
<!--@BendPoints 31,46-->
    <nodeSuccessors name="next" next="CallNode25"/>
  </nodes>
<!--@Location 15,23-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode25">
<!--@BendPoints 31,48-->
    <nodeSuccessors name="next" next="CallNode23"/>
    <startNode referencedName="This:SearchPrefix"/>
  </nodes>
<!--@Location 15,24-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode23">
    <nodeSuccessors name="next" next="Pipelet24"/>
    <startNode referencedName="This:UpdateClipboard"/>
  </nodes>
<!--@Location 15,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet24">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckForEmptyIterator.xml"/>
<!--@BendPoints 31,52-->
    <nodeSuccessors name="next" next="Pipelet48"/>
    <nodeSuccessors name="pipelet_error" next="JumpNode8"/>
    <parameterBindings name="FilledIterator" objectPath="UUIDIterator"/>
  </nodes>
<!--@Location 15,26-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet48">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 31,54-->
    <nodeSuccessors name="next" next="DecisionNode14"/>
    <parameterBindings name="InValue_1" objectPath="RebateRuleWizardMap:ActionProducts"/>
    <returnValueBindings name="OutValue_1" objectPath="ActionProducts"/>
  </nodes>
<!--@Location 15,27-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode14" conditionKey="ActionProducts"
      operator="undef">
<!--@BendPoints 31,56-->
    <nodeSuccessors name="decision_yes" next="Pipelet46"/>
<!--@BendPoints 32,55 32,61-->
    <nodeSuccessors name="decision_no" next="JoinNode42"/>
  </nodes>
<!--@Location 15,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet46">
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 31,58-->
    <nodeSuccessors name="next" next="Pipelet47"/>
    <parameterBindings name="InMap" nullBinding="true"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" nullBinding="true"/>
    <returnValueBindings name="OutMap" objectPath="ActionProducts"/>
  </nodes>
<!--@Location 15,29-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet47">
    <configurationValues name="DefaultKey" value="ActionProducts"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
    <nodeSuccessors name="next" next="JoinNode42"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="ActionProducts"/>
  </nodes>
<!--@Location 15,30-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode42">
    <nodeSuccessors name="next" next="Pipelet28"/>
  </nodes>
<!--@Location 15,31-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet28">
    <configurationValues name="DefaultKey" value="RuleActionType"/>
    <configurationValues name="DefaultValue" value="bonusItemOfSelected"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 31,64-->
    <nodeSuccessors name="next" next="Pipelet33"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="RuleActionType"/>
  </nodes>
<!--@Location 15,32-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet33">
    <configurationValues name="DefaultKey" value="SelectedProduct"/>
    <configurationValues name="Mode" value="Remove"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 31,66-->
    <nodeSuccessors name="next" next="LoopNode1"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
  </nodes>
<!--@Location 15,33-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode1" loop="UUIDIterator">
<!--@BendPoints 33,67-->
    <nodeSuccessors name="next" next="Pipelet19"/>
    <entry key="ProductUUID">
      <nodeSuccessors name="loop_entry_next" next="Pipelet17"/>
    </entry>
  </nodes>
<!--@Location 15,34-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet17">
    <configurationValues name="DefaultKey" value=""/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 31,71 30,71 30,67-->
    <nodeSuccessors name="next" next="LoopNode1_Entry"/>
    <parameterBindings name="InMap" objectPath="ActionProducts"/>
    <parameterBindings name="Key" objectPath="ProductUUID"/>
    <parameterBindings name="Value" objectPath="ProductUUID"/>
  </nodes>
<!--@Location 16,34-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet19">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 33,70-->
    <nodeSuccessors name="next" next="CallNode13"/>
    <parameterBindings name="InValue_1" objectPath="RebateRuleWizardMap:RuleActionType"/>
    <returnValueBindings name="OutValue_1" objectPath="RuleActionType"/>
  </nodes>
<!--@Location 16,35-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode13">
    <nodeSuccessors name="next" next="JumpNode4"/>
    <startNode referencedName="ViewEmailMarketing_52-UpdateSelectedIterator"/>
  </nodes>
<!--@Location 16,36-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode4">
    <startNode referencedName="ViewEmailMarketing_52-Edit"/>
  </nodes>
<!--@Location 16,25-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode8">
    <startNode referencedName="This:Paging"/>
  </nodes>
<!--@Location 0,3-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode5" name="CheckAB">
    <nodeSuccessors name="next" next="CallNode2"/>
  </nodes>
<!--@Location 0,4-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode2">
    <nodeSuccessors name="next" next="CallNode1"/>
    <startNode referencedName="ProcessOrganization_52-GetConsumerOrg"/>
  </nodes>
<!--@Location 0,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode1">
<!--@BendPoints 1,12-->
    <nodeSuccessors name="next" next="JumpNode3"/>
    <startNode referencedName="ProcessAbandonedBaskets-Check"/>
  </nodes>
<!--@Location 0,6-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode3">
    <startNode referencedName="ViewEmailMarketing_52-Show"/>
  </nodes>
<!--@Location 3,16-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode41" name="ClearFixedAmountVector">
<!--@BendPoints 7,34-->
    <nodeSuccessors name="next" next="ExchangeSessionObject15"/>
  </nodes>
<!--@Location 3,17-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject15">
    <configurationValues name="ProcessMethod" value="Put Object to Session"/>
    <configurationValues name="SessionObjectName" value="FixedAmountMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
<!--@BendPoints 7,36-->
    <nodeSuccessors name="next" next="EndNode27"/>
    <parameterBindings name="SaveObject" nullBinding="true"/>
  </nodes>
<!--@Location 3,18-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode27"/>
<!--@Location 18,30-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode10" name="ConfirmDeleteProducts">
    <nodeSuccessors name="next" next="CallNode28"/>
  </nodes>
<!--@Location 18,31-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode28">
    <nodeSuccessors name="next" next="JumpNode16"/>
    <startNode referencedName="This:UpdateClipboard"/>
  </nodes>
<!--@Location 18,32-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode16">
    <startNode referencedName="This:Edit"/>
  </nodes>
<!--@Location 27,11-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode30" strict="true" name="CreateRebateForCurrency"
      callMode="Private">
<!--@BendPoints 55,24-->
    <nodeSuccessors name="next" next="CreateRebate2" action="begin"/>
    <parameters name="Currency" type="java.lang.String" optional="true"/>
    <parameters name="CurrentChannel" type="com.intershop.beehive.core.capi.domain.Domain"/>
  </nodes>
<!--@Location 27,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateRebate2">
    <pipelet href="enfinity:/bc_marketing/pipelets/CreateRebate.xml"/>
<!--@BendPoints 55,26-->
    <nodeSuccessors name="next" next="Pipelet49"/>
<!--@BendPoints 56,25-->
    <nodeSuccessors name="pipelet_error" next="EndNode16" action="rollback"/>
    <parameterBindings name="CurrencyCode" objectPath="Currency"/>
    <parameterBindings name="Domain" objectPath="CurrentChannel:RepositoryDomain"/>
  </nodes>
<!--@Location 27,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet49">
    <pipelet href="enfinity:/bc_marketing/pipelets/UpdateRebate.xml"/>
<!--@BendPoints 55,28-->
    <nodeSuccessors name="next" next="EndNode7" action="commit"/>
    <parameterBindings name="ClassificationTypeCode" constant="(Integer)160"/>
    <parameterBindings name="ConditionalProductDescription" nullBinding="true"/>
    <parameterBindings name="Description" nullBinding="true"/>
    <parameterBindings name="DiscountedlProductDescription" nullBinding="true"/>
    <parameterBindings name="DisplayName" nullBinding="true"/>
    <parameterBindings name="Enabled" constant="(Boolean)true"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <parameterBindings name="TypeCode" nullBinding="true"/>
  </nodes>
<!--@Location 27,14-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode7" strict="true">
    <returnValues name="Rebate" type="com.intershop.component.marketing.capi.rebate.Rebate"
        optional="true"/>
  </nodes>
<!--@Location 28,12-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode16" name="ERROR" strict="true"/>
<!--@Location 18,8-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode12" name="CreateRuleWizardMap"
      callMode="Private">
<!--@BendPoints 37,18-->
    <nodeSuccessors name="next" next="Pipelet45"/>
  </nodes>
<!--@Location 18,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet45">
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 37,20-->
    <nodeSuccessors name="next" next="Pipelet2"/>
    <parameterBindings name="InMap" nullBinding="true"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" nullBinding="true"/>
    <returnValueBindings name="OutMap" objectPath="RebateRuleWizardMap"/>
  </nodes>
<!--@Location 18,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet2">
    <configurationValues name="ProcessMethod" value="Put Object to Session"/>
    <configurationValues name="SessionObjectName" value="RebateRuleWizardMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
<!--@BendPoints 37,22-->
    <nodeSuccessors name="next" next="EndNode10"/>
    <parameterBindings name="SaveObject" objectPath="RebateRuleWizardMap"/>
  </nodes>
<!--@Location 18,11-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode10"/>
<!--@Location 20,30-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode27" name="DeleteProducts">
    <nodeSuccessors name="next" next="CallNode31"/>
  </nodes>
<!--@Location 20,31-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode31">
    <nodeSuccessors name="next" next="Pipelet98"/>
    <startNode referencedName="This:GetClipboard"/>
  </nodes>
<!--@Location 20,32-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet98">
    <configurationValues name="ProcessMethod" value="Get Object from Session"/>
    <configurationValues name="SessionObjectName" value="RebateRuleWizardMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
    <nodeSuccessors name="next" next="LoopNode6"/>
    <returnValueBindings name="LoadObject" objectPath="RebateRuleWizardMap"/>
  </nodes>
<!--@Location 20,33-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode6" loop="SelectedProductUUIDIterator">
<!--@BendPoints 43,67-->
    <nodeSuccessors name="next" next="DecisionNode20"/>
    <entry key="ProductUUID">
      <nodeSuccessors name="loop_entry_next" next="Pipelet89"/>
    </entry>
  </nodes>
<!--@Location 20,34-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet89">
    <configurationValues name="DefaultKey" value=""/>
    <configurationValues name="Mode" value="Remove"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 41,70 40,70 40,67-->
    <nodeSuccessors name="next" next="LoopNode6_Entry"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap:ActionProducts"/>
    <parameterBindings name="Key" objectPath="ProductUUID"/>
  </nodes>
<!--@Location 21,34-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode20" conditionKey="RebateRuleWizardMap:ActionProducts:isEmpty"
      operator="str_eq" conditionValue="true">
<!--@BendPoints 43,70-->
    <nodeSuccessors name="decision_yes" next="Pipelet93"/>
<!--@BendPoints 44,69 44,73-->
    <nodeSuccessors name="decision_no" next="JoinNode44"/>
  </nodes>
<!--@Location 21,35-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet93">
    <configurationValues name="DefaultKey" value="ActionProducts"/>
    <configurationValues name="Mode" value="Remove"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
    <nodeSuccessors name="next" next="JoinNode44"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" nullBinding="true"/>
  </nodes>
<!--@Location 21,36-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode44">
    <nodeSuccessors name="next" next="JumpNode19"/>
  </nodes>
<!--@Location 21,37-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode19">
    <startNode referencedName="This:Edit"/>
  </nodes>
<!--@Location 0,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode1" name="Dispatch">
<!--@BendPoints 1,2-->
    <nodeSuccessors name="next" next="DispatchFormAction1"/>
  </nodes>
<!--@Location 0,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DispatchFormAction1">
    <configurationValues name="OutValue_0" value="ViewEmailMarketing_52-Update"/>
    <configurationValues name="OutValue_1" value="ViewEmailMarketing_52-Show"/>
    <configurationValues name="OutValue_2" value="ViewEmailMarketing_52-CheckAB"/>
    <configurationValues name="OutValue_3" value="ViewEmailMarketing_52-SelectProductForBonusItem"/>
    <configurationValues name="OutValue_4" value="ViewEmailMarketing_52-ConfirmDeleteProducts"/>
    <configurationValues name="OutValue_5" value="ViewEmailMarketing_52-DeleteProducts"/>
    <configurationValues name="OutValue_6" value="ViewEmailMarketing_52-Edit"/>
    <configurationValues name="OutValue_7" value="ViewEmailMarketing_52-AddFixedAmountPricePart"/>
    <configurationValues name="PagingPipeline" value="This:Paging"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/DispatchFormAction.xml"/>
<!--@BendPoints 1,5-->
    <nodeSuccessors name="next" next="JoinNode38"/>
<!--@BendPoints 2,3 2,2 3,2-->
    <nodeSuccessors name="pipelet_error" next="Pipelet37"/>
    <parameterBindings name="Key_0" objectPath="apply"/>
    <parameterBindings name="Key_1" objectPath="reset"/>
    <parameterBindings name="Key_2" objectPath="checkAB"/>
    <parameterBindings name="Key_3" objectPath="selectBonusItem"/>
    <parameterBindings name="Key_4" objectPath="confirmDeleteSelectedProducts"/>
    <parameterBindings name="Key_5" objectPath="deleteSelectedProducts"/>
    <parameterBindings name="Key_6" objectPath="cancelDelete"/>
    <parameterBindings name="Key_7" objectPath="addFixedAmountPricePart"/>
    <returnValueBindings name="SelectionKey" objectPath="JumpTarget"/>
  </nodes>
<!--@Location 1,2-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode38">
<!--@BendPoints 3,6-->
    <nodeSuccessors name="next" next="JumpNode5"/>
  </nodes>
<!--@Location 1,3-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode5">
    <startNode referencedName="SecureJump-Start"/>
  </nodes>
<!--@Location 1,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet37">
    <configurationValues name="OutValue_0" value="ViewEmailMarketing_52-Paging"/>
    <configurationValues name="OutValue_1" value="ViewEmailMarketing_52-Search"/>
    <configurationValues name="OutValue_2" value="ViewEmailMarketing_52-Assign"/>
    <configurationValues name="OutValue_3" value="ViewEmailMarketing_52-Show"/>
    <configurationValues name="OutValue_4" value="ViewEmailMarketing_52-Show"/>
    <configurationValues name="OutValue_5" value="ViewEmailMarketing_52-Search"/>
    <configurationValues name="OutValue_6" value="ViewEmailMarketing_52-ParametricSearch"/>
    <configurationValues name="OutValue_7" value="ViewEmailMarketing_52-Paging"/>
    <configurationValues name="OutValue_8" value="ViewEmailMarketing_52-Paging"/>
    <configurationValues name="OutValue_9" value="ViewEmailMarketing_52-Paging"/>
    <configurationValues name="PagingPipeline" value="This:Paging"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/DispatchFormAction.xml"/>
    <nodeSuccessors name="next" next="JoinNode38"/>
<!--@BendPoints 5,3 5,4-->
    <nodeSuccessors name="pipelet_error" next="SetDictionaryValue9"/>
    <parameterBindings name="Key_0" objectPath="ShowAssignAllConfirmation"/>
    <parameterBindings name="Key_1" objectPath="Search"/>
    <parameterBindings name="Key_2" objectPath="assign"/>
    <parameterBindings name="Key_3" objectPath="cancel"/>
    <parameterBindings name="Key_4" objectPath="back"/>
    <parameterBindings name="Key_5" objectPath="findSimple"/>
    <parameterBindings name="Key_6" objectPath="findParametric"/>
    <parameterBindings name="Key_7" objectPath="jumpToList"/>
    <parameterBindings name="Key_8" objectPath="Expand"/>
    <parameterBindings name="Key_9" objectPath="Collapse"/>
    <returnValueBindings name="SelectionKey" objectPath="JumpTarget"/>
  </nodes>
<!--@Location 2,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue9">
    <configurationValues name="Name" value="JumpTarget"/>
    <configurationValues name="Value" value="ViewEmailMarketing_52-Paging"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 5,6 4,6-->
    <nodeSuccessors name="next" next="JoinNode38"/>
  </nodes>
<!--@Location 5,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode21" name="Edit">
<!--@BendPoints 11,2-->
    <nodeSuccessors name="next" next="CallNode32"/>
  </nodes>
<!--@Location 5,1-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode32">
<!--@BendPoints 11,4-->
    <nodeSuccessors name="next" next="Pipelet27"/>
    <startNode referencedName="ViewEmailMarketing_52-Prefix"/>
  </nodes>
<!--@Location 5,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet27">
    <configurationValues name="ProcessMethod" value="Get Object from Session"/>
    <configurationValues name="SessionObjectName" value="RebateRuleWizardMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
    <nodeSuccessors name="next" next="JoinNode2"/>
    <returnValueBindings name="LoadObject" objectPath="RebateRuleWizardMap"/>
  </nodes>
<!--@Location 5,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode2">
<!--@BendPoints 11,8-->
    <nodeSuccessors name="next" next="CreateWebForm1"/>
  </nodes>
<!--@Location 5,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateWebForm1">
    <configurationValues name="param.1.name" value="RuleActionType"/>
    <configurationValues name="param.1.required" value="false"/>
    <configurationValues name="param.1.rule" value=""/>
    <configurationValues name="webform-id" value="AbandonedBasketForm"/>
    <pipelet href="enfinity:/core/pipelets/CreateWebForm.xml"/>
    <nodeSuccessors name="next" next="JoinNode3"/>
    <returnValueBindings name="WebForm" objectPath="AbandonedBasketForm"/>
  </nodes>
<!--@Location 5,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode3">
    <nodeSuccessors name="next" next="JoinNode40"/>
  </nodes>
<!--@Location 5,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode40">
    <nodeSuccessors name="next" next="JoinNode51"/>
  </nodes>
<!--@Location 20,22-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode38" name="GetBonusProducts"
      callMode="Private">
    <nodeSuccessors name="next" next="AddObjectToVector1"/>
  </nodes>
<!--@Location 20,23-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector1">
    <configurationValues name="Mode" value="Allow Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="LoopNode13"/>
    <parameterBindings name="InVector" nullBinding="true"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="Products"/>
    <returnValueBindings name="OutVector" objectPath="ProductsVector"/>
  </nodes>
<!--@Location 20,24-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode13" loop="Rule:Actions">
<!--@BendPoints 43,49-->
    <nodeSuccessors name="next" next="EndNode19"/>
    <entry key="RuleAction">
      <nodeSuccessors name="loop_entry_next" next="GetProductByProductRef1"/>
    </entry>
  </nodes>
<!--@Location 20,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductByProductRef1">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductByProductRef.xml"/>
    <nodeSuccessors name="next" next="AddObjectToVector2"/>
<!--@BendPoints 42,51 42,55-->
    <nodeSuccessors name="pipelet_error" next="JoinNode61"/>
    <parameterBindings name="ProductRef" nullBinding="true"/>
    <parameterBindings name="ProductRefID" objectPath="RuleAction:getParameter(&quot;RuleActionBonusProductRef&quot;):StringValue"/>
    <parameterBindings name="ProductRefIDs" nullBinding="true"/>
    <parameterBindings name="ProductRefs" nullBinding="true"/>
    <returnValueBindings name="Products" nullBinding="true"/>
    <returnValueBindings name="ProductsHash" nullBinding="true"/>
  </nodes>
<!--@Location 20,26-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector2">
    <configurationValues name="Mode" value="Allow Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode61"/>
    <parameterBindings name="InVector" objectPath="ProductsVector"/>
    <parameterBindings name="Object" objectPath="Product"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="Products"/>
    <returnValueBindings name="OutVector" objectPath="ProductsVector"/>
  </nodes>
<!--@Location 20,27-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode61">
<!--@BendPoints 41,56 40,56 40,49-->
    <nodeSuccessors name="next" next="LoopNode13_Entry"/>
  </nodes>
<!--@Location 21,27-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode19"/>
<!--@Location 8,34-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode29" name="GetClipboard" callMode="Private">
    <nodeSuccessors name="next" next="Pipelet94"/>
  </nodes>
<!--@Location 8,35-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet94">
    <configurationValues name="SessionRegistrationID" value="Products"/>
    <configurationValues name="SetFormValues" value="No"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetClipboard.xml"/>
<!--@BendPoints 17,72-->
    <nodeSuccessors name="next" next="EndNode11"/>
    <returnValueBindings name="UUIDIterator" objectPath="SelectedProductUUIDIterator"/>
  </nodes>
<!--@Location 8,36-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode11"/>
<!--@Location 1,8-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode24" name="GetProviderLink"
      callMode="Private">
<!--@BendPoints 3,18-->
    <nodeSuccessors name="next" next="GetDomainPreference4"/>
  </nodes>
<!--@Location 1,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference4">
    <configurationValues name="DefaultPreferenceKey" value="EmailMarketingProviderLink"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
<!--@BendPoints 3,20-->
    <nodeSuccessors name="next" next="EndNode28"/>
<!--@BendPoints 4,19 4,20-->
    <nodeSuccessors name="pipelet_error" next="EndNode28"/>
    <parameterBindings name="PreferenceDomain" objectPath="Domain"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="EmailMarketingProviderLink"/>
  </nodes>
<!--@Location 1,10-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode28"/>
<!--@Location 2,31-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode31" name="GetRebate" callMode="Private">
    <nodeSuccessors name="next" next="GetRebatesByClassificationTypeCode2"/>
    <parameters name="CurrentChannel" type="com.intershop.beehive.core.capi.domain.Domain"
        optional="true"/>
    <parameters name="Currency" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 2,32-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetRebatesByClassificationTypeCode2">
    <pipelet href="enfinity:/bc_marketing/pipelets/GetRebatesByClassificationTypeCode.xml"/>
    <nodeSuccessors name="next" next="DecisionNode22"/>
    <parameterBindings name="ClassificationTypeCode" constant="(Integer)160"/>
    <parameterBindings name="Domain" objectPath="CurrentChannel:RepositoryDomain"/>
  </nodes>
<!--@Location 2,33-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode22" conditionKey="Currency">
<!--@BendPoints 5,68-->
    <nodeSuccessors name="decision_yes" next="LoopNode9"/>
    <nodeSuccessors name="decision_no" next="GetFirstElementOfIterator1"/>
  </nodes>
<!--@Location 2,34-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode9" loop="Rebates">
<!--@BendPoints 7,69-->
    <nodeSuccessors name="next" next="DecisionNode24"/>
    <entry key="currRebate">
<!--@BendPoints 5,70-->
      <nodeSuccessors name="loop_entry_next" next="DecisionNode23"/>
    </entry>
  </nodes>
<!--@Location 2,35-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode23" conditionKey="currRebate:CurrencyCode"
      operator="str_eq" conditionItem="Currency">
    <nodeSuccessors name="decision_yes" next="KeyMapper4"/>
<!--@BendPoints 6,71 6,75-->
    <nodeSuccessors name="decision_no" next="JoinNode50"/>
  </nodes>
<!--@Location 2,36-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper4">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="JoinNode50"/>
    <parameterBindings name="InValue_1" objectPath="currRebate"/>
    <returnValueBindings name="OutValue_1" objectPath="Rebate"/>
  </nodes>
<!--@Location 2,37-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode50">
<!--@BendPoints 4,75 4,69-->
    <nodeSuccessors name="next" next="LoopNode9_Entry"/>
  </nodes>
<!--@Location 3,36-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode24" conditionKey="Rebate">
<!--@BendPoints 7,76 4,76 4,81-->
    <nodeSuccessors name="decision_yes" next="DecisionNode2"/>
    <nodeSuccessors name="decision_no" next="JoinNode60"/>
  </nodes>
<!--@Location 2,40-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode2" conditionKey="Currency">
<!--@BendPoints 6,81-->
    <nodeSuccessors name="decision_yes" next="DecisionNode1"/>
    <nodeSuccessors name="decision_no" next="JoinNode30"/>
  </nodes>
<!--@Location 3,40-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode1" conditionKey="Rebate:CurrencyCode"
      operator="str_eq" conditionItem="Currency">
<!--@BendPoints 8,81 8,82 6,82 6,83-->
    <nodeSuccessors name="decision_yes" next="JoinNode30"/>
    <nodeSuccessors name="decision_no" next="RemoveRebate0" action="begin"/>
  </nodes>
<!--@Location 2,41-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode30">
    <nodeSuccessors name="next" next="JoinNode49"/>
  </nodes>
<!--@Location 2,46-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode49">
    <nodeSuccessors name="next" next="EndNode18"/>
  </nodes>
<!--@Location 2,47-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode18" strict="true">
    <returnValues name="Rebate" type="com.intershop.component.marketing.capi.rebate.Rebate"
        optional="true"/>
    <returnValues name="Rebates" type="com.intershop.component.marketing.capi.rebate.Rebate"/>
  </nodes>
<!--@Location 3,42-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemoveRebate0">
    <pipelet href="enfinity:/bc_marketing/pipelets/RemoveRebate.xml"/>
<!--@BendPoints 7,87-->
    <nodeSuccessors name="next" next="JoinNode29"/>
  </nodes>
<!--@Location 4,43-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode29">
    <nodeSuccessors name="next" next="CreateRebate3"/>
  </nodes>
<!--@Location 4,44-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateRebate3">
    <pipelet href="enfinity:/bc_marketing/pipelets/CreateRebate.xml"/>
<!--@BendPoints 9,90-->
    <nodeSuccessors name="next" next="Pipelet12"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode16"/>
    <parameterBindings name="CurrencyCode" objectPath="Currency"/>
    <parameterBindings name="Domain" objectPath="CurrentChannel:RepositoryDomain"/>
  </nodes>
<!--@Location 4,45-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet12">
    <pipelet href="enfinity:/bc_marketing/pipelets/UpdateRebate.xml"/>
<!--@BendPoints 9,93-->
    <nodeSuccessors name="next" next="JoinNode49" action="commit"/>
    <parameterBindings name="ClassificationTypeCode" constant="(Integer)160"/>
    <parameterBindings name="ConditionalProductDescription" nullBinding="true"/>
    <parameterBindings name="Description" nullBinding="true"/>
    <parameterBindings name="DiscountedlProductDescription" nullBinding="true"/>
    <parameterBindings name="DisplayName" nullBinding="true"/>
    <parameterBindings name="Enabled" constant="(Boolean)true"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <parameterBindings name="TypeCode" nullBinding="true"/>
  </nodes>
<!--@Location 5,44-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode16">
    <nodeSuccessors name="next" next="EndNode21" action="rollback"/>
  </nodes>
<!--@Location 5,47-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode21" name="ERROR"/>
<!--@Location 4,36-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode60">
    <nodeSuccessors name="next" next="KeyMapper0"/>
  </nodes>
<!--@Location 4,40-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper0">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="JoinNode29" action="begin"/>
    <parameterBindings name="InValue_1" objectPath="ApplicationBO:DefaultCurrency:Mnemonic"/>
    <parameterBindings name="InValue_10" nullBinding="true"/>
    <parameterBindings name="InValue_2" nullBinding="true"/>
    <parameterBindings name="InValue_3" nullBinding="true"/>
    <parameterBindings name="InValue_4" nullBinding="true"/>
    <parameterBindings name="InValue_5" nullBinding="true"/>
    <parameterBindings name="InValue_6" nullBinding="true"/>
    <parameterBindings name="InValue_7" nullBinding="true"/>
    <parameterBindings name="InValue_8" nullBinding="true"/>
    <parameterBindings name="InValue_9" nullBinding="true"/>
    <returnValueBindings name="OutValue_1" objectPath="DefaultCurrencyMnemonic"/>
    <returnValueBindings name="OutValue_10" nullBinding="true"/>
    <returnValueBindings name="OutValue_2" nullBinding="true"/>
    <returnValueBindings name="OutValue_3" nullBinding="true"/>
    <returnValueBindings name="OutValue_4" nullBinding="true"/>
    <returnValueBindings name="OutValue_5" nullBinding="true"/>
    <returnValueBindings name="OutValue_6" nullBinding="true"/>
    <returnValueBindings name="OutValue_7" nullBinding="true"/>
    <returnValueBindings name="OutValue_8" nullBinding="true"/>
    <returnValueBindings name="OutValue_9" nullBinding="true"/>
  </nodes>
<!--@Location 4,33-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetFirstElementOfIterator1">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetFirstElementOfIterator.xml"/>
<!--@BendPoints 10,67-->
    <nodeSuccessors name="next" next="EndNode26"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode60"/>
    <parameterBindings name="Iterator" objectPath="Rebates"/>
    <returnValueBindings name="FirstElement" objectPath="Rebate"/>
  </nodes>
<!--@Location 5,33-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode26">
    <returnValues name="Rebate" type="com.intershop.component.marketing.capi.rebate.Rebate"
        optional="true"/>
    <returnValues name="Rebates" type="com.intershop.component.marketing.capi.rebate.Rebate"/>
  </nodes>
<!--@Location 0,13-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode7" name="GetRule" callMode="Private">
    <nodeSuccessors name="next" next="Pipelet21"/>
  </nodes>
<!--@Location 0,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet21">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetFirstElementOfIterator.xml"/>
<!--@BendPoints 1,32-->
    <nodeSuccessors name="next" next="EndNode3"/>
<!--@BendPoints 3,31 3,32-->
    <nodeSuccessors name="pipelet_error" next="EndNode4"/>
    <parameterBindings name="Iterator" objectPath="Rules"/>
    <returnValueBindings name="FirstElement" objectPath="Rule"/>
  </nodes>
<!--@Location 0,16-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode3"/>
<!--@Location 1,16-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode4" name="ERROR"/>
<!--@Location 23,30-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode16" name="GetSelectedProducts"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode18"/>
  </nodes>
<!--@Location 23,31-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode18" conditionKey="RebateRuleWizardMap:ActionProducts">
    <nodeSuccessors name="decision_yes" next="Pipelet63"/>
<!--@BendPoints 51,63-->
    <nodeSuccessors name="decision_no" next="JoinNode46"/>
  </nodes>
<!--@Location 23,32-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet63">
    <configurationValues name="DefaultKey" value=""/>
    <configurationValues name="DefaultValue" value=""/>
    <configurationValues name="Mode" value="Remove"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
    <nodeSuccessors name="next" next="LoopNode4"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap:ActionProducts"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" nullBinding="true"/>
    <returnValueBindings name="Keys" objectPath="ProductUUIDIterator"/>
  </nodes>
<!--@Location 23,33-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode4" loop="ProductUUIDIterator">
    <nodeSuccessors name="next" next="Pipelet118"/>
    <entry key="ProductUUID">
      <nodeSuccessors name="loop_entry_next" next="Pipelet62"/>
    </entry>
  </nodes>
<!--@Location 23,34-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet62">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductByUUID.xml"/>
    <nodeSuccessors name="next" next="Pipelet60"/>
<!--@BendPoints 48,69 48,73-->
    <nodeSuccessors name="pipelet_error" next="JoinNode47"/>
    <parameterBindings name="ProductDomain" objectPath="CurrentProductRepository:RepositoryDomain"/>
  </nodes>
<!--@Location 23,35-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet60">
    <configurationValues name="Mode" value="Allow Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode47"/>
    <parameterBindings name="InVector" objectPath="ProductsVector"/>
    <parameterBindings name="Object" objectPath="Product"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="ActionProducts"/>
    <returnValueBindings name="OutVector" objectPath="ProductsVector"/>
  </nodes>
<!--@Location 23,36-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode47">
<!--@BendPoints 47,74 46,74 46,67-->
    <nodeSuccessors name="next" next="LoopNode4_Entry"/>
  </nodes>
<!--@Location 24,33-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet118">
    <configurationValues name="Key" value="Product"/>
    <configurationValues name="RemoveFormValues" value="true"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/RemoveDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode46"/>
  </nodes>
<!--@Location 25,33-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode46">
    <nodeSuccessors name="next" next="EndNode12"/>
  </nodes>
<!--@Location 25,34-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode12"/>
<!--@Location 0,8-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode4" name="IncludeProviderLink">
<!--@BendPoints 1,18-->
    <nodeSuccessors name="next" next="GetProviderDefinition2"/>
  </nodes>
<!--@Location 0,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProviderDefinition2">
    <pipelet href="enfinity:/bc_marketing/pipelets/GetProviderDefinition.xml"/>
<!--@BendPoints 1,20-->
    <nodeSuccessors name="next" next="GetDomainPreference1"/>
    <parameterBindings name="Domain" objectPath="CurrentChannel:RepositoryDomain"/>
  </nodes>
<!--@Location 0,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference1">
    <configurationValues name="DefaultPreferenceKey" value="EmailMarketingProviderLink"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
<!--@BendPoints 1,22-->
    <nodeSuccessors name="next" next="InteractionNode1"/>
    <parameterBindings name="PreferenceDomain" objectPath="CurrentChannel:RepositoryDomain"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="EmailMarketingProviderLink"/>
  </nodes>
<!--@Location 0,11-->
  <nodes xsi:type="pipeline:InteractionNode" nodeID="InteractionNode1">
    <template referencedName="marketing/EmailMarketingProviderLink"/>
  </nodes>
<!--@Location 25,16-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode40" strict="true" name="InitFixedAmountMap"
      callMode="Private">
<!--@BendPoints 51,34-->
    <nodeSuccessors name="next" next="DecisionNode3"/>
    <parameters name="Rebates" type="java.util.Iterator"/>
    <parameters name="updateFixedAmount" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 25,17-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode3" conditionKey="updateFixedAmount"
      operator="undef">
    <nodeSuccessors name="decision_yes" next="DecisionNode25"/>
<!--@BendPoints 52,35-->
    <nodeSuccessors name="decision_no" next="EndNode22"/>
  </nodes>
<!--@Location 25,18-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode25" conditionKey="Rebates">
    <nodeSuccessors name="decision_yes" next="ExchangeSessionObject13"/>
<!--@BendPoints 52,37-->
    <nodeSuccessors name="decision_no" next="EndNode24"/>
  </nodes>
<!--@Location 25,19-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject13">
    <configurationValues name="ProcessMethod" value="Get Object from Session"/>
    <configurationValues name="SessionObjectName" value="FixedAmountMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
<!--@BendPoints 51,40-->
    <nodeSuccessors name="next" next="LoopNode7"/>
    <parameterBindings name="SaveObject" objectPath="FixedAmountMap"/>
    <returnValueBindings name="LoadObject" objectPath="FixedAmountMap"/>
  </nodes>
<!--@Location 25,20-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode7" loop="Rebates">
<!--@BendPoints 52,41-->
    <nodeSuccessors name="next" next="ExchangeSessionObject14"/>
    <entry key="Rebate">
<!--@BendPoints 51,42-->
      <nodeSuccessors name="loop_entry_next" next="CallNode12"/>
    </entry>
  </nodes>
<!--@Location 25,21-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode12">
<!--@BendPoints 51,44-->
    <nodeSuccessors name="next" next="DecisionNode21"/>
    <startNode referencedName="ViewEmailMarketing_52-GetRule"/>
  </nodes>
<!--@Location 25,22-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode21" conditionKey="Rule">
    <nodeSuccessors name="decision_yes" next="DecisionNode26"/>
<!--@BendPoints 53,45-->
    <nodeSuccessors name="decision_no" next="JoinNode58"/>
  </nodes>
<!--@Location 25,24-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode26" conditionKey="MainAction">
    <nodeSuccessors name="decision_yes" next="KeyMapper2"/>
    <nodeSuccessors name="decision_no" next="JoinNode58"/>
  </nodes>
<!--@Location 25,26-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper2">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 51,54-->
    <nodeSuccessors name="next" next="DecisionNode27"/>
    <parameterBindings name="InValue_1" objectPath="Rebate:Currency:Mnemonic"/>
    <parameterBindings name="InValue_2" objectPath="BonusPointsValue_Total"/>
    <parameterBindings name="InValue_3" objectPath="BonusPointsValue_Factor"/>
    <parameterBindings name="InValue_4" objectPath="FixedNumberValue"/>
    <parameterBindings name="InValue_5" objectPath="PercentageNumberValue"/>
    <returnValueBindings name="OutValue_1" objectPath="FixedAmountCurrency"/>
    <returnValueBindings name="OutValue_2" objectPath="BonusPoints"/>
    <returnValueBindings name="OutValue_3" objectPath="BonusPointFactor"/>
    <returnValueBindings name="OutValue_4" objectPath="FixedAmountValue"/>
    <returnValueBindings name="OutValue_5" objectPath="PercentageDiscountOnOrder"/>
  </nodes>
<!--@Location 25,27-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode27" conditionKey="FixedNumberValue">
<!--@BendPoints 51,56-->
    <nodeSuccessors name="decision_yes" next="AddEntryToMap7"/>
    <nodeSuccessors name="decision_no" next="JoinNode57"/>
  </nodes>
<!--@Location 25,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddEntryToMap7">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddEntryToMap.xml"/>
    <nodeSuccessors name="next" next="JoinNode56"/>
    <parameterBindings name="InMap" objectPath="FixedAmountMap"/>
    <parameterBindings name="Key" objectPath="Rebate:Currency:Mnemonic"/>
    <parameterBindings name="Value" objectPath="FixedNumberValue"/>
    <returnValueBindings name="OutMap" objectPath="FixedAmountMap"/>
  </nodes>
<!--@Location 25,29-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode56">
<!--@BendPoints 50,59 50,41-->
    <nodeSuccessors name="next" next="LoopNode7_Entry"/>
  </nodes>
<!--@Location 26,27-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode57">
<!--@BendPoints 53,59-->
    <nodeSuccessors name="next" next="JoinNode56"/>
  </nodes>
<!--@Location 26,24-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode58">
    <nodeSuccessors name="next" next="JoinNode57"/>
  </nodes>
<!--@Location 26,20-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject14">
    <configurationValues name="ProcessMethod" value="Put Object to Session"/>
    <configurationValues name="SessionObjectName" value="FixedAmountMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
<!--@BendPoints 54,41-->
    <nodeSuccessors name="next" next="EndNode25"/>
    <parameterBindings name="SaveObject" objectPath="FixedAmountMap"/>
    <returnValueBindings name="LoadObject" objectPath="FixedAmountMap"/>
  </nodes>
<!--@Location 27,20-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode25" strict="true"/>
<!--@Location 26,18-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode24" strict="true"/>
<!--@Location 26,17-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode22" strict="true"/>
<!--@Location 20,8-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode23" name="InitRuleWizardMap"
      callMode="Private">
<!--@BendPoints 41,18-->
    <nodeSuccessors name="next" next="CallNode35"/>
  </nodes>
<!--@Location 20,9-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode35">
<!--@BendPoints 41,20-->
    <nodeSuccessors name="next" next="CallNode9"/>
    <startNode referencedName="ViewEmailMarketing_52-CreateRuleWizardMap"/>
  </nodes>
<!--@Location 20,10-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode9">
    <nodeSuccessors name="next" next="Pipelet42"/>
<!--@BendPoints 43,22 45,22-->
    <nodeSuccessors name="ERROR" next="JoinNode39"/>
    <startNode referencedName="ViewEmailMarketing_52-GetRule"/>
  </nodes>
<!--@Location 20,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet42">
    <configurationValues name="DefaultKey" value="RuleUUID"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
    <nodeSuccessors name="next" next="KeyMapper3"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="Rule:UUID"/>
  </nodes>
<!--@Location 20,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper3">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 41,30-->
    <nodeSuccessors name="next" next="DecisionNode6"/>
    <parameterBindings name="InValue_1" objectPath="Rebate:Currency:Mnemonic"/>
    <parameterBindings name="InValue_2" objectPath="BonusPointsValue_Total"/>
    <parameterBindings name="InValue_3" objectPath="BonusPointsValue_Factor"/>
    <parameterBindings name="InValue_4" objectPath="FixedNumberValue"/>
    <parameterBindings name="InValue_5" objectPath="PercentageNumberValue"/>
    <returnValueBindings name="OutValue_1" objectPath="FixedAmountCurrency"/>
    <returnValueBindings name="OutValue_2" objectPath="BonusPoints"/>
    <returnValueBindings name="OutValue_3" objectPath="BonusPointFactor"/>
    <returnValueBindings name="OutValue_4" objectPath="FixedAmountValue"/>
    <returnValueBindings name="OutValue_5" objectPath="PercentageDiscountOnOrder"/>
  </nodes>
<!--@Location 20,15-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode6" conditionKey="RuleActionType"
      operator="str_eq" conditionValue="bonusItemOfSelected">
<!--@BendPoints 41,32-->
    <nodeSuccessors name="decision_yes" next="CallNode14"/>
    <nodeSuccessors name="decision_no" next="JoinNode39"/>
  </nodes>
<!--@Location 20,16-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode14">
<!--@BendPoints 41,34-->
    <nodeSuccessors name="next" next="CallNode26"/>
    <startNode referencedName="ViewEmailMarketing_52-GetBonusProducts"/>
  </nodes>
<!--@Location 20,17-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode26">
<!--@BendPoints 41,37-->
    <nodeSuccessors name="next" next="JoinNode17"/>
    <startNode referencedName="ViewEmailMarketing_52-InitWizardProductMap"/>
  </nodes>
<!--@Location 22,18-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode17">
    <nodeSuccessors name="next" next="EndNode14"/>
  </nodes>
<!--@Location 22,19-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode14"/>
<!--@Location 22,15-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode39">
    <nodeSuccessors name="next" next="JoinNode17"/>
  </nodes>
<!--@Location 22,22-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode39" name="InitWizardProductMap"
      callMode="Private">
<!--@BendPoints 45,46-->
    <nodeSuccessors name="next" next="Pipelet64"/>
  </nodes>
<!--@Location 22,23-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet64">
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
    <nodeSuccessors name="next" next="LoopNode8"/>
    <parameterBindings name="InMap" nullBinding="true"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" nullBinding="true"/>
    <returnValueBindings name="OutMap" objectPath="ActionProducts"/>
  </nodes>
<!--@Location 22,24-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode8" loop="Products">
<!--@BendPoints 47,49 47,50-->
    <nodeSuccessors name="next" next="Pipelet120"/>
    <entry key="Product">
      <nodeSuccessors name="loop_entry_next" next="Pipelet121"/>
    </entry>
  </nodes>
<!--@Location 22,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet121">
    <configurationValues name="DefaultKey" value=""/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 45,52 44,52 44,49-->
    <nodeSuccessors name="next" next="LoopNode8_Entry"/>
    <parameterBindings name="InMap" objectPath="ActionProducts"/>
    <parameterBindings name="Key" objectPath="Product:UUID"/>
    <parameterBindings name="Value" objectPath="Product:UUID"/>
  </nodes>
<!--@Location 23,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet120">
    <configurationValues name="DefaultKey" value="ActionProducts"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 47,52-->
    <nodeSuccessors name="next" next="Pipelet18"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="ActionProducts"/>
  </nodes>
<!--@Location 23,26-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet18">
    <configurationValues name="Key" value="ProductsVector"/>
    <configurationValues name="RemoveFormValues" value="false"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/RemoveDictionaryValue.xml"/>
<!--@BendPoints 47,54-->
    <nodeSuccessors name="next" next="EndNode20"/>
  </nodes>
<!--@Location 23,27-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode20"/>
<!--@Location 13,22-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode11" name="Paging">
    <nodeSuccessors name="next" next="CallNode17"/>
  </nodes>
<!--@Location 13,23-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode17">
    <nodeSuccessors name="next" next="CallNode19"/>
    <startNode referencedName="This:SearchPrefix"/>
  </nodes>
<!--@Location 13,25-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode19">
    <nodeSuccessors name="next" next="Pipelet32"/>
    <startNode referencedName="This:UpdateClipboard"/>
  </nodes>
<!--@Location 13,26-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet32">
    <configurationValues name="DefaultPageLocatorName" value="ProductsForEmailMarketingList"/>
    <configurationValues name="RestorePageLocatorDictionary" value="False"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetPageLocator.xml"/>
    <nodeSuccessors name="next" next="Pipelet25"/>
  </nodes>
<!--@Location 13,27-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet25">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetPageable.xml"/>
<!--@BendPoints 27,57-->
    <nodeSuccessors name="next" next="JoinNode35"/>
    <nodeSuccessors name="pipelet_error" next="JumpNode7"/>
    <parameterBindings name="PageableID" objectPath="PageLocator:PageableID"/>
    <returnValueBindings name="Pageable" objectPath="Products"/>
  </nodes>
<!--@Location 11,28-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode35">
    <nodeSuccessors name="next" next="DecisionNode7"/>
  </nodes>
<!--@Location 11,29-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode7" conditionKey="PageNumber">
    <nodeSuccessors name="decision_yes" next="Pipelet22"/>
<!--@BendPoints 25,59-->
    <nodeSuccessors name="decision_no" next="DecisionNode8"/>
  </nodes>
<!--@Location 11,30-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet22">
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyInteger.xml"/>
    <nodeSuccessors name="next" next="Pipelet35"/>
<!--@BendPoints 24,61 24,65-->
    <nodeSuccessors name="pipelet_error" next="JoinNode37"/>
    <parameterBindings name="LocalizedString" objectPath="PageNumber"/>
    <returnValueBindings name="IntegerObject" objectPath="PageNumber"/>
  </nodes>
<!--@Location 11,31-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet35">
    <pipelet href="enfinity:/bc_foundation/pipelets/SetPage.xml"/>
    <nodeSuccessors name="next" next="JoinNode37"/>
    <parameterBindings name="Pageable" objectPath="Products"/>
  </nodes>
<!--@Location 11,32-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode37">
    <nodeSuccessors name="next" next="JoinNode33"/>
  </nodes>
<!--@Location 11,33-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode33">
    <nodeSuccessors name="next" next="Pipelet13"/>
  </nodes>
<!--@Location 11,34-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet13">
    <configurationValues name="DefaultHandlerPipeline" value="ViewEmailMarketing_52-Paging"/>
    <configurationValues name="DefaultPageLocatorName" value="ProductsForEmailMarketingList"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetPageLocator.xml"/>
    <nodeSuccessors name="next" next="JoinNode36"/>
    <parameterBindings name="Pageable" objectPath="Products"/>
  </nodes>
<!--@Location 11,36-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode36">
    <nodeSuccessors name="next" next="Pipelet36"/>
  </nodes>
<!--@Location 11,37-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet36">
    <configurationValues name="SelectedMenuItem" value="OnlineMarketing"/>
    <configurationValues name="WorkingTemplate" value="marketing/AbandonedBasketRebateSelectTargetProduct_52"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/PrepareApplicationView.xml"/>
    <nodeSuccessors name="next" next="InteractionNode3"/>
  </nodes>
<!--@Location 11,38-->
  <nodes xsi:type="pipeline:InteractionNode" nodeID="InteractionNode3">
    <template referencedName="application/ApplicationFrame"/>
  </nodes>
<!--@Location 12,30-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode8" conditionKey="PageLocator">
    <nodeSuccessors name="decision_yes" next="Pipelet34"/>
<!--@BendPoints 26,61 26,65-->
    <nodeSuccessors name="decision_no" next="JoinNode31"/>
  </nodes>
<!--@Location 12,31-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet34">
    <pipelet href="enfinity:/bc_foundation/pipelets/SetPage.xml"/>
    <nodeSuccessors name="next" next="JoinNode31"/>
    <parameterBindings name="PageNumber" objectPath="PageLocator:PageNumber"/>
    <parameterBindings name="Pageable" objectPath="Products"/>
  </nodes>
<!--@Location 12,32-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode31">
<!--@BendPoints 25,67-->
    <nodeSuccessors name="next" next="JoinNode33"/>
  </nodes>
<!--@Location 14,27-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode7">
    <startNode referencedName="This:Search"/>
  </nodes>
<!--@Location 11,22-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode14" name="ParametricSearch">
    <nodeSuccessors name="next" next="CallNode20"/>
  </nodes>
<!--@Location 11,23-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode20">
    <nodeSuccessors name="next" next="CallNode18"/>
    <startNode referencedName="This:SearchPrefix"/>
  </nodes>
<!--@Location 11,24-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode18">
    <nodeSuccessors name="next" next="Pipelet23"/>
    <nodeSuccessors name="ERROR" next="JoinNode34"/>
    <startNode referencedName="ValidateWebForms-WFAdvancedSearch"/>
  </nodes>
<!--@Location 11,26-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet23">
    <configurationValues name="SessionRegistrationID" value="Products"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/RemoveClipboard.xml"/>
    <nodeSuccessors name="next" next="CallNode15"/>
  </nodes>
<!--@Location 11,27-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode15">
    <nodeSuccessors name="next" next="JoinNode35"/>
    <nodeSuccessors name="ERROR" next="JoinNode0"/>
    <parameterBindings name="ProductBORepository" objectPath="ApplicationBO:Repository(&quot;ProductBORepository&quot;,ProductDomain:UUID)"/>
    <parameterBindings name="ProductSearchParameters" objectPath="AdvancedSearchParameters"/>
    <startNode referencedName="ProcessProductSearch-AdvancedProductBOSearch"/>
  </nodes>
<!--@Location 10,27-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode0">
<!--@BendPoints 21,73-->
    <nodeSuccessors name="next" next="JoinNode36"/>
  </nodes>
<!--@Location 10,25-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode34">
    <nodeSuccessors name="next" next="JoinNode0"/>
  </nodes>
<!--@Location 8,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode22" name="Prefix" callMode="Private">
<!--@BendPoints 17,2-->
    <nodeSuccessors name="next" next="CallNode29"/>
  </nodes>
<!--@Location 8,1-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode29">
    <nodeSuccessors name="next" next="CallNode41"/>
    <startNode referencedName="This:GetRebate"/>
  </nodes>
<!--@Location 8,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode41">
    <nodeSuccessors name="next" next="KeyMapper5"/>
    <startNode referencedName="This:InitFixedAmountMap"/>
  </nodes>
<!--@Location 8,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper5">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="EndNode13"/>
    <parameterBindings name="InValue_1" objectPath="CurrentProductRepository:RepositoryDomain"/>
    <returnValueBindings name="OutValue_1" objectPath="ProductDomain"/>
  </nodes>
<!--@Location 8,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode13"/>
<!--@Location 0,22-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode6" strict="true" name="RecreateRebate"
      callMode="Private">
    <nodeSuccessors name="next" next="CallNode10"/>
    <parameters name="CurrentChannel" type="com.intershop.component.mvc.capi.catalog.Repository"
        optional="true"/>
    <parameters name="Currency" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 0,23-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode10">
<!--@BendPoints 1,48-->
    <nodeSuccessors name="next" next="DecisionNode4"/>
    <startNode referencedName="This:RemoveRebates"/>
  </nodes>
<!--@Location 0,24-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode4" conditionKey="Currency">
    <nodeSuccessors name="decision_yes" next="JoinNode18"/>
<!--@BendPoints 3,49-->
    <nodeSuccessors name="decision_no" next="KeyMapper6"/>
  </nodes>
<!--@Location 0,26-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode18">
    <nodeSuccessors name="next" next="CreateRebate1" action="begin"/>
  </nodes>
<!--@Location 0,27-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateRebate1">
    <pipelet href="enfinity:/bc_marketing/pipelets/CreateRebate.xml"/>
<!--@BendPoints 1,56-->
    <nodeSuccessors name="next" next="Pipelet15"/>
    <nodeSuccessors name="pipelet_error" next="EndNode2" action="rollback"/>
    <parameterBindings name="CurrencyCode" objectPath="Currency"/>
    <parameterBindings name="Domain" objectPath="CurrentChannel:RepositoryDomain"/>
  </nodes>
<!--@Location 0,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet15">
    <pipelet href="enfinity:/bc_marketing/pipelets/UpdateRebate.xml"/>
<!--@BendPoints 1,58-->
    <nodeSuccessors name="next" next="EndNode1" action="commit"/>
    <parameterBindings name="ClassificationTypeCode" constant="(Integer)160"/>
    <parameterBindings name="ConditionalProductDescription" nullBinding="true"/>
    <parameterBindings name="Description" nullBinding="true"/>
    <parameterBindings name="DiscountedlProductDescription" nullBinding="true"/>
    <parameterBindings name="DisplayName" nullBinding="true"/>
    <parameterBindings name="Enabled" constant="(Boolean)true"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <parameterBindings name="TypeCode" nullBinding="true"/>
  </nodes>
<!--@Location 0,29-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode1" strict="true">
    <returnValues name="Rebate" type="com.intershop.component.marketing.capi.rebate.Rebate"
        optional="true"/>
  </nodes>
<!--@Location 3,27-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode2" name="ERROR" strict="true"/>
<!--@Location 1,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper6">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 3,53-->
    <nodeSuccessors name="next" next="JoinNode18"/>
    <parameterBindings name="InValue_1" objectPath="ApplicationBO:DefaultCurrency:Mnemonic"/>
    <parameterBindings name="InValue_10" nullBinding="true"/>
    <parameterBindings name="InValue_2" nullBinding="true"/>
    <parameterBindings name="InValue_3" nullBinding="true"/>
    <parameterBindings name="InValue_4" nullBinding="true"/>
    <parameterBindings name="InValue_5" nullBinding="true"/>
    <parameterBindings name="InValue_6" nullBinding="true"/>
    <parameterBindings name="InValue_7" nullBinding="true"/>
    <parameterBindings name="InValue_8" nullBinding="true"/>
    <parameterBindings name="InValue_9" nullBinding="true"/>
    <returnValueBindings name="OutValue_1" objectPath="DefaultCurrencyMnemonic"/>
    <returnValueBindings name="OutValue_10" nullBinding="true"/>
    <returnValueBindings name="OutValue_2" nullBinding="true"/>
    <returnValueBindings name="OutValue_3" nullBinding="true"/>
    <returnValueBindings name="OutValue_4" nullBinding="true"/>
    <returnValueBindings name="OutValue_5" nullBinding="true"/>
    <returnValueBindings name="OutValue_6" nullBinding="true"/>
    <returnValueBindings name="OutValue_7" nullBinding="true"/>
    <returnValueBindings name="OutValue_8" nullBinding="true"/>
    <returnValueBindings name="OutValue_9" nullBinding="true"/>
  </nodes>
<!--@Location 18,22-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode9" name="RemoveAllTargetProductsFromMap"
      callMode="Private">
<!--@BendPoints 37,46-->
    <nodeSuccessors name="next" next="Pipelet55"/>
  </nodes>
<!--@Location 18,23-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet55">
    <configurationValues name="ProcessMethod" value="Get Object from Session"/>
    <configurationValues name="SessionObjectName" value="RebateRuleWizardMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
<!--@BendPoints 37,48-->
    <nodeSuccessors name="next" next="Pipelet56"/>
    <returnValueBindings name="LoadObject" objectPath="RebateRuleWizardMap"/>
  </nodes>
<!--@Location 18,24-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet56">
    <configurationValues name="DefaultKey" value="SelectedProduct"/>
    <configurationValues name="Mode" value="Remove"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 37,50-->
    <nodeSuccessors name="next" next="Pipelet57"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" nullBinding="true"/>
  </nodes>
<!--@Location 18,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet57">
    <configurationValues name="DefaultKey" value="ActionProducts"/>
    <configurationValues name="Mode" value="Remove"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 37,52-->
    <nodeSuccessors name="next" next="EndNode5"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" nullBinding="true"/>
  </nodes>
<!--@Location 18,26-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode5"/>
<!--@Location 12,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode34" name="RemoveFixedAmountPricePart">
<!--@BendPoints 25,2-->
    <nodeSuccessors name="next" next="Pipelet38"/>
  </nodes>
<!--@Location 12,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet38">
    <configurationValues name="MinValue" value="0"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyMoney.xml"/>
    <nodeSuccessors name="next" next="ExchangeSessionObject10"/>
<!--@BendPoints 26,3 26,5 26,13-->
    <nodeSuccessors name="pipelet_error" next="JoinNode45"/>
    <parameterBindings name="CurrencyMnemonic" objectPath="DeletedFixedAmountPartCurrency"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <parameterBindings name="LocalizedString" objectPath="DeletedFixedAmountPartValue"/>
    <parameterBindings name="Pattern" nullBinding="true"/>
    <returnValueBindings name="ErrorCode" objectPath="ErrorCode_FixedAmount"/>
    <returnValueBindings name="MoneyValue" objectPath="DeletedFixedAmountPart"/>
  </nodes>
<!--@Location 12,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject10">
    <configurationValues name="ProcessMethod" value="Get Object from Session"/>
    <configurationValues name="SessionObjectName" value="FixedAmountMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
    <nodeSuccessors name="next" next="UpdateMapping2"/>
    <parameterBindings name="SaveObject" objectPath="FixedAmountMap"/>
    <returnValueBindings name="LoadObject" objectPath="FixedAmountMap"/>
  </nodes>
<!--@Location 12,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateMapping2">
    <configurationValues name="Mode" value="Remove"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 25,8-->
    <nodeSuccessors name="next" next="ExchangeSessionObject8"/>
    <parameterBindings name="InMap" objectPath="FixedAmountMap"/>
    <parameterBindings name="Key" objectPath="DeletedFixedAmountPartCurrency"/>
    <returnValueBindings name="OutMap" objectPath="FixedAmountMap"/>
  </nodes>
<!--@Location 12,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject8">
    <configurationValues name="ProcessMethod" value="Put Object to Session"/>
    <configurationValues name="SessionObjectName" value="FixedAmountMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
    <nodeSuccessors name="next" next="SetDictionaryValue5"/>
    <parameterBindings name="SaveObject" objectPath="FixedAmountMap"/>
    <returnValueBindings name="LoadObject" objectPath="FixedAmountMap"/>
  </nodes>
<!--@Location 12,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue5">
    <configurationValues name="Name" value="updateFixedAmount"/>
    <configurationValues name="Value" value="true"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode45"/>
  </nodes>
<!--@Location 12,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode45">
    <nodeSuccessors name="next" next="JoinNode11"/>
  </nodes>
<!--@Location 25,11-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode26" strict="true" name="RemoveRebates"
      callMode="Private">
<!--@BendPoints 51,24-->
    <nodeSuccessors name="next" next="GetRebatesByClassificationTypeCode3"/>
    <parameters name="CurrentChannel" type="com.intershop.component.mvc.capi.catalog.Repository"
        optional="true"/>
  </nodes>
<!--@Location 25,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetRebatesByClassificationTypeCode3">
    <pipelet href="enfinity:/bc_marketing/pipelets/GetRebatesByClassificationTypeCode.xml"/>
<!--@BendPoints 51,26-->
    <nodeSuccessors name="next" next="LoopNode5"/>
    <parameterBindings name="ClassificationTypeCode" constant="(Integer)160"/>
    <parameterBindings name="Domain" objectPath="CurrentChannel:RepositoryDomain"/>
  </nodes>
<!--@Location 25,13-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode5" loop="Rebates">
<!--@BendPoints 52,27-->
    <nodeSuccessors name="next" next="EndNode17"/>
    <entry key="curRebate">
      <nodeSuccessors name="loop_entry_next" next="RemoveRebate1" action="begin"/>
    </entry>
  </nodes>
<!--@Location 25,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemoveRebate1">
    <pipelet href="enfinity:/bc_marketing/pipelets/RemoveRebate.xml"/>
    <nodeSuccessors name="next" next="JoinNode5"/>
  </nodes>
<!--@Location 25,15-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode5">
<!--@BendPoints 50,31 50,27-->
    <nodeSuccessors name="next" next="LoopNode5_Entry"/>
  </nodes>
<!--@Location 26,13-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode17" strict="true"/>
<!--@Location 9,22-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode17" name="Search">
<!--@BendPoints 19,46-->
    <nodeSuccessors name="next" next="CallNode22"/>
  </nodes>
<!--@Location 9,23-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode22">
<!--@BendPoints 19,48-->
    <nodeSuccessors name="next" next="Call13"/>
    <startNode referencedName="This:SearchPrefix"/>
  </nodes>
<!--@Location 9,24-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call13">
    <nodeSuccessors name="next" next="Pipelet14"/>
    <nodeSuccessors name="ERROR" next="JoinNode34"/>
    <startNode referencedName="ValidateWebForms-WFSimpleSearch"/>
  </nodes>
<!--@Location 9,26-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet14">
    <configurationValues name="SessionRegistrationID" value="Products"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/RemoveClipboard.xml"/>
    <nodeSuccessors name="next" next="CallNode21"/>
  </nodes>
<!--@Location 9,27-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode21">
<!--@BendPoints 19,57-->
    <nodeSuccessors name="next" next="JoinNode35"/>
    <nodeSuccessors name="ERROR" next="JoinNode0"/>
    <parameterBindings name="ProductBORepository" objectPath="ApplicationBO:Repository(&quot;ProductBORepository&quot;,ProductDomain:UUID)"/>
    <startNode referencedName="ViewParametricSearch-SimpleProductBOSearch"/>
  </nodes>
<!--@Location 7,22-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode18" name="SearchPrefix" callMode="Private">
<!--@BendPoints 15,46-->
    <nodeSuccessors name="next" next="Pipelet20"/>
  </nodes>
<!--@Location 7,23-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet20">
    <configurationValues name="ProcessMethod" value="Get Object from Session"/>
    <configurationValues name="SessionObjectName" value="RebateRuleWizardMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
<!--@BendPoints 15,48-->
    <nodeSuccessors name="next" next="DecisionNode13"/>
    <returnValueBindings name="LoadObject" objectPath="RebateRuleWizardMap"/>
  </nodes>
<!--@Location 7,24-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode13" conditionKey="RuleActionType">
<!--@BendPoints 15,50-->
    <nodeSuccessors name="decision_yes" next="Pipelet44"/>
<!--@BendPoints 16,49 16,53-->
    <nodeSuccessors name="decision_no" next="JoinNode21"/>
  </nodes>
<!--@Location 7,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet44">
    <configurationValues name="DefaultKey" value="RuleActionType"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
    <nodeSuccessors name="next" next="JoinNode21"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="RuleActionType"/>
  </nodes>
<!--@Location 7,26-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode21">
    <nodeSuccessors name="next" next="KeyMapper7"/>
  </nodes>
<!--@Location 7,27-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper7">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="EndNode8"/>
    <parameterBindings name="InValue_1" objectPath="CurrentProductRepository:RepositoryDomain"/>
    <returnValueBindings name="OutValue_1" objectPath="ProductDomain"/>
  </nodes>
<!--@Location 7,28-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode8"/>
<!--@Location 5,22-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode13" name="SelectProductForBonusItem">
<!--@BendPoints 11,46-->
    <nodeSuccessors name="next" next="Pipelet52"/>
  </nodes>
<!--@Location 5,23-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet52">
    <configurationValues name="DefaultKey" value="RuleActionType"/>
    <configurationValues name="DefaultValue" value="bonusItemOfSelected"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 11,48-->
    <nodeSuccessors name="next" next="Pipelet53"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" nullBinding="true"/>
  </nodes>
<!--@Location 5,24-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet53">
    <configurationValues name="Name" value="MultipleProductSelection"/>
    <configurationValues name="Value" value="true"/>
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JumpNode11"/>
  </nodes>
<!--@Location 5,25-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode11">
    <startNode referencedName="ViewEmailMarketing_52-Search"/>
  </nodes>
<!--@Location 6,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode3" name="Show">
    <nodeSuccessors name="next" next="CallNode3"/>
  </nodes>
<!--@Location 6,1-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode3">
    <nodeSuccessors name="next" next="CallNode11"/>
    <startNode referencedName="ViewEmailMarketing_52-Prefix"/>
  </nodes>
<!--@Location 6,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode11">
<!--@BendPoints 13,7-->
    <nodeSuccessors name="next" next="JoinNode2"/>
    <startNode referencedName="ViewEmailMarketing_52-InitRuleWizardMap"/>
  </nodes>
<!--@Location 3,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode2" name="Update">
<!--@BendPoints 7,2-->
    <nodeSuccessors name="next" next="CallNode30"/>
  </nodes>
<!--@Location 3,1-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode30">
<!--@BendPoints 7,6-->
    <nodeSuccessors name="next" next="GetWebForm1"/>
    <startNode referencedName="This:RecreateRebate"/>
  </nodes>
<!--@Location 3,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetWebForm1">
    <configurationValues name="webform-id" value="AbandonedBasketForm"/>
    <pipelet href="enfinity:/core/pipelets/GetWebForm.xml"/>
    <nodeSuccessors name="next" next="UpdateWebForm1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode2"/>
    <parameterBindings name="WebForm" objectPath="AbandonedBasketForm"/>
    <returnValueBindings name="WebForm" objectPath="AbandonedBasketForm"/>
  </nodes>
<!--@Location 3,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateWebForm1">
    <configurationValues name="mode" value="update"/>
    <configurationValues name="webform-id" value="AbandonedBasketForm"/>
    <pipelet href="enfinity:/core/pipelets/UpdateWebForm.xml"/>
    <nodeSuccessors name="next" next="ValidateWebForm1"/>
    <parameterBindings name="WebForm" objectPath="AbandonedBasketForm"/>
  </nodes>
<!--@Location 3,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ValidateWebForm1">
    <pipelet href="enfinity:/core/pipelets/ValidateWebForm.xml"/>
<!--@BendPoints 7,12-->
    <nodeSuccessors name="next" next="Pipelet16"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode3"/>
    <parameterBindings name="WebForm" objectPath="AbandonedBasketForm"/>
  </nodes>
<!--@Location 3,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet16">
    <configurationValues name="ProcessMethod" value="Get Object from Session"/>
    <configurationValues name="SessionObjectName" value="RebateRuleWizardMap"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
<!--@BendPoints 7,14-->
    <nodeSuccessors name="next" next="DecisionNode9"/>
    <returnValueBindings name="LoadObject" objectPath="RebateRuleWizardMap"/>
  </nodes>
<!--@Location 3,7-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode9" conditionKey="RuleActionType">
    <nodeSuccessors name="decision_yes" next="DecisionNode10"/>
<!--@BendPoints 8,15-->
    <nodeSuccessors name="decision_no" next="Pipelet43"/>
  </nodes>
<!--@Location 3,8-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode10" conditionKey="RuleActionType"
      operator="str_eq" conditionValue="fixedAmount">
<!--@BendPoints 7,20-->
    <nodeSuccessors name="decision_yes" next="JumpNode10"/>
<!--@BendPoints 8,17 8,16 9,16-->
    <nodeSuccessors name="decision_no" next="DecisionNode11"/>
  </nodes>
<!--@Location 3,10-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode10">
    <startNode referencedName="This:AddFixedAmountPrice"/>
  </nodes>
<!--@Location 4,8-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode11" conditionKey="RuleActionType"
      operator="str_eq" conditionValue="percentageDiscountOnOrder">
<!--@BendPoints 9,18-->
    <nodeSuccessors name="decision_yes" next="Pipelet70"/>
<!--@BendPoints 12,17 12,16 13,16-->
    <nodeSuccessors name="decision_no" next="DecisionNode16"/>
  </nodes>
<!--@Location 4,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet70">
    <configurationValues name="MaxValue" value="100"/>
    <configurationValues name="MinValue" value="0"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyDouble.xml"/>
    <nodeSuccessors name="next" next="JoinNode4"/>
<!--@BendPoints 11,19-->
    <nodeSuccessors name="pipelet_error" next="JoinNode15"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <parameterBindings name="LocalizedString" objectPath="PercentageDiscountOnOrder"/>
    <parameterBindings name="Pattern" nullBinding="true"/>
    <returnValueBindings name="DoubleValue" objectPath="PercentageNumberValue"/>
    <returnValueBindings name="ErrorCode" objectPath="ErrorCode_PercentageDiscountOnOrder"/>
  </nodes>
<!--@Location 4,12-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode4">
    <nodeSuccessors name="next" next="CallNode7"/>
  </nodes>
<!--@Location 4,13-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode7">
    <nodeSuccessors name="next" next="CallNode43"/>
    <startNode referencedName="This:UpdateRebateRules"/>
  </nodes>
<!--@Location 4,14-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode43">
    <nodeSuccessors name="next" next="JumpNode2"/>
    <startNode referencedName="This:ClearFixedAmountVector"/>
  </nodes>
<!--@Location 4,15-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode2">
    <startNode referencedName="ViewEmailMarketing_52-Show"/>
  </nodes>
<!--@Location 5,11-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode15">
    <nodeSuccessors name="next" next="JoinNode12"/>
  </nodes>
<!--@Location 7,11-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode12">
<!--@BendPoints 25,23-->
    <nodeSuccessors name="next" next="JoinNode13"/>
  </nodes>
<!--@Location 12,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode13">
    <nodeSuccessors name="next" next="JoinNode14"/>
  </nodes>
<!--@Location 12,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode14">
    <nodeSuccessors name="next" next="JoinNode11"/>
  </nodes>
<!--@Location 6,8-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode16" conditionKey="RuleActionType"
      operator="str_eq" conditionValue="bonusItemOfSelected">
<!--@BendPoints 13,18-->
    <nodeSuccessors name="decision_yes" next="DecisionNode42"/>
<!--@BendPoints 16,17 16,16 17,16-->
    <nodeSuccessors name="decision_no" next="DecisionNode5"/>
  </nodes>
<!--@Location 6,9-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode42" conditionKey="RebateRuleWizardMap:ActionProducts">
    <nodeSuccessors name="decision_yes" next="JoinNode6"/>
<!--@BendPoints 15,19 15,20-->
    <nodeSuccessors name="decision_no" next="Pipelet102"/>
  </nodes>
<!--@Location 6,12-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode6">
    <nodeSuccessors name="next" next="JoinNode4"/>
  </nodes>
<!--@Location 7,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet102">
    <configurationValues name="Name" value="ERROR_RuleAction"/>
    <configurationValues name="Value" value="MissingProduct"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode12"/>
  </nodes>
<!--@Location 8,8-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode5" conditionKey="RuleActionType"
      operator="str_eq" conditionValue="freeShipping">
    <nodeSuccessors name="decision_yes" next="JoinNode7"/>
<!--@BendPoints 18,17 18,16 19,16-->
    <nodeSuccessors name="decision_no" next="Decision5"/>
  </nodes>
<!--@Location 8,12-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode7">
    <nodeSuccessors name="next" next="JoinNode6"/>
  </nodes>
<!--@Location 9,8-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision5" conditionKey="RuleActionType"
      operator="str_eq" conditionValue="bonusPoints">
<!--@BendPoints 19,18-->
    <nodeSuccessors name="decision_yes" next="Pipelet151"/>
<!--@BendPoints 20,17 20,16 21,16-->
    <nodeSuccessors name="decision_no" next="Decision6"/>
  </nodes>
<!--@Location 9,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet151">
    <configurationValues name="MaxValue" value="1000000"/>
    <configurationValues name="MinValue" value="1"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyDouble.xml"/>
    <nodeSuccessors name="next" next="JoinNode8"/>
<!--@BendPoints 20,19 20,21-->
    <nodeSuccessors name="pipelet_error" next="JoinNode13"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <parameterBindings name="LocalizedString" objectPath="BonusPoints"/>
    <parameterBindings name="Pattern" nullBinding="true"/>
    <returnValueBindings name="DoubleValue" objectPath="BonusPointValue"/>
    <returnValueBindings name="ErrorCode" objectPath="ErrorCode_BonusPoints"/>
  </nodes>
<!--@Location 9,12-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode8">
    <nodeSuccessors name="next" next="JoinNode7"/>
  </nodes>
<!--@Location 10,8-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision6" conditionKey="RuleActionType"
      operator="str_eq" conditionValue="bonusPointFactor">
<!--@BendPoints 21,18-->
    <nodeSuccessors name="decision_yes" next="Pipelet152"/>
<!--@BendPoints 23,17 23,25-->
    <nodeSuccessors name="decision_no" next="JoinNode9"/>
  </nodes>
<!--@Location 10,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet152">
    <configurationValues name="MaxValue" value="1000000"/>
    <configurationValues name="MinValue" value="1"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyDouble.xml"/>
    <nodeSuccessors name="next" next="JoinNode9"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode14"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <parameterBindings name="LocalizedString" objectPath="BonusPointFactor"/>
    <parameterBindings name="Pattern" nullBinding="true"/>
    <returnValueBindings name="DoubleValue" objectPath="BonusPointFactorValue"/>
    <returnValueBindings name="ErrorCode" objectPath="ErrorCode_BonusPointFactor"/>
  </nodes>
<!--@Location 10,12-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode9">
    <nodeSuccessors name="next" next="JoinNode8"/>
  </nodes>
<!--@Location 4,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet43">
    <configurationValues name="Name" value="ERROR_RuleAction"/>
    <configurationValues name="Value" value="MissingAction"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode40"/>
  </nodes>
<!--@Location 5,28-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode20" name="UpdateClipboard"
      callMode="Private">
    <nodeSuccessors name="next" next="Pipelet40"/>
  </nodes>
<!--@Location 5,29-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet40">
    <configurationValues name="DefaultParameterName" value="SelectedProductUUID"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetFormSelection.xml"/>
    <nodeSuccessors name="next" next="Pipelet39"/>
    <returnValueBindings name="Selection" objectPath="SelectedProductUUIDIterator"/>
  </nodes>
<!--@Location 5,30-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet39">
    <configurationValues name="DefaultParameterName" value="ProductUUID"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetFormSelection.xml"/>
    <nodeSuccessors name="next" next="Pipelet41"/>
    <returnValueBindings name="Selection" objectPath="ProductUUIDIterator"/>
  </nodes>
<!--@Location 5,31-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet41">
    <configurationValues name="SessionRegistrationID" value="Products"/>
    <configurationValues name="StoreFormValues" value="No"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateClipboard.xml"/>
    <nodeSuccessors name="next" next="EndNode9"/>
    <parameterBindings name="AllObjectUUIDs" objectPath="ProductUUIDIterator"/>
    <parameterBindings name="SelectedObjectUUIDs" objectPath="SelectedProductUUIDIterator"/>
  </nodes>
<!--@Location 5,32-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode9"/>
<!--@Location 7,14-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode28" name="UpdateRebateRules"
      callMode="Private">
<!--@BendPoints 15,30-->
    <nodeSuccessors name="next" next="CallNode36"/>
  </nodes>
<!--@Location 7,15-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode36">
<!--@BendPoints 15,32-->
    <nodeSuccessors name="next" next="CallNode38"/>
    <startNode referencedName="ViewEmailMarketing_52-UpdateRuleWizardMap"/>
  </nodes>
<!--@Location 7,16-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode38">
    <nodeSuccessors name="next" next="JoinNode43"/>
    <nodeSuccessors name="ERROR" next="JoinNode43"/>
    <startNode referencedName="ViewEmailMarketing_52-GetRule"/>
  </nodes>
<!--@Location 7,17-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode43">
    <nodeSuccessors name="next" next="EndNode15"/>
  </nodes>
<!--@Location 7,20-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode15"/>
<!--@Location 20,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode8" name="UpdateRuleWizardMap"
      callMode="Private">
<!--@BendPoints 41,2-->
    <nodeSuccessors name="next" next="Pipelet8"/>
  </nodes>
<!--@Location 20,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet8">
    <configurationValues name="DefaultKey" value="ConditionType"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 41,4-->
    <nodeSuccessors name="next" next="DecisionNode39"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" constant="(Integer)16"/>
  </nodes>
<!--@Location 20,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode39" conditionKey="RuleActionType"
      operator="str_eq" conditionValue="fixedAmount">
<!--@BendPoints 41,6-->
    <nodeSuccessors name="decision_yes" next="Pipelet1"/>
    <nodeSuccessors name="decision_no" next="DecisionNode34"/>
  </nodes>
<!--@Location 20,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet1">
    <configurationValues name="DefaultKey" value="RuleActionType"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 41,8-->
    <nodeSuccessors name="next" next="Pipelet110"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="RuleActionType"/>
  </nodes>
<!--@Location 20,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet110">
    <configurationValues name="DefaultKey" value="FixedAmountValue"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
    <nodeSuccessors name="next" next="JoinNode23"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="FixedAmount"/>
  </nodes>
<!--@Location 20,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode23">
<!--@BendPoints 41,12-->
    <nodeSuccessors name="next" next="EndNode6"/>
  </nodes>
<!--@Location 20,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode6"/>
<!--@Location 21,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode34" conditionKey="RuleActionType"
      operator="str_eq" conditionValue="percentageDiscountOnOrder">
<!--@BendPoints 43,6-->
    <nodeSuccessors name="decision_yes" next="Pipelet4"/>
    <nodeSuccessors name="decision_no" next="DecisionNode32"/>
  </nodes>
<!--@Location 21,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet4">
    <configurationValues name="DefaultKey" value="RuleActionType"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 43,8-->
    <nodeSuccessors name="next" next="Pipelet109"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="RuleActionType"/>
  </nodes>
<!--@Location 21,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet109">
    <configurationValues name="DefaultKey" value="PercentageDiscountOnOrder"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
    <nodeSuccessors name="next" next="JoinNode22"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="PercentageDiscountOnOrder"/>
  </nodes>
<!--@Location 21,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode22">
    <nodeSuccessors name="next" next="JoinNode23"/>
  </nodes>
<!--@Location 22,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode32" conditionKey="RuleActionType"
      operator="str_eq" conditionValue="bonusItemOfThese">
<!--@BendPoints 45,6-->
    <nodeSuccessors name="decision_yes" next="Pipelet5"/>
    <nodeSuccessors name="decision_no" next="DecisionNode33"/>
  </nodes>
<!--@Location 22,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet5">
    <configurationValues name="DefaultKey" value="RuleActionType"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
    <nodeSuccessors name="next" next="JoinNode24"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="RuleActionType"/>
  </nodes>
<!--@Location 22,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode24">
    <nodeSuccessors name="next" next="JoinNode22"/>
  </nodes>
<!--@Location 23,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode33" conditionKey="RuleActionType"
      operator="str_eq" conditionValue="bonusItemOfSelected">
<!--@BendPoints 47,6-->
    <nodeSuccessors name="decision_yes" next="Pipelet6"/>
    <nodeSuccessors name="decision_no" next="DecisionNode30"/>
  </nodes>
<!--@Location 23,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet6">
    <configurationValues name="DefaultKey" value="RuleActionType"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 47,8-->
    <nodeSuccessors name="next" next="CallNode24"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="RuleActionType"/>
  </nodes>
<!--@Location 23,4-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode24">
    <nodeSuccessors name="next" next="JoinNode25"/>
    <startNode referencedName="ViewEmailMarketing_52-GetBonusProducts"/>
  </nodes>
<!--@Location 23,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode25">
    <nodeSuccessors name="next" next="JoinNode24"/>
  </nodes>
<!--@Location 24,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode30" conditionKey="RuleActionType"
      operator="str_eq" conditionValue="freeShipping">
<!--@BendPoints 49,6-->
    <nodeSuccessors name="decision_yes" next="Pipelet7"/>
    <nodeSuccessors name="decision_no" next="DecisionNode29"/>
  </nodes>
<!--@Location 24,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet7">
    <configurationValues name="DefaultKey" value="RuleActionType"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
    <nodeSuccessors name="next" next="JoinNode26"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="RuleActionType"/>
  </nodes>
<!--@Location 24,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode26">
    <nodeSuccessors name="next" next="JoinNode25"/>
  </nodes>
<!--@Location 25,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode29" conditionKey="RuleActionType"
      operator="str_eq" conditionValue="bonusPoints">
<!--@BendPoints 51,6-->
    <nodeSuccessors name="decision_yes" next="Pipelet10"/>
    <nodeSuccessors name="decision_no" next="DecisionNode43"/>
  </nodes>
<!--@Location 25,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet10">
    <configurationValues name="DefaultKey" value="RuleActionType"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 51,8-->
    <nodeSuccessors name="next" next="Pipelet111"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="RuleActionType"/>
  </nodes>
<!--@Location 25,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet111">
    <configurationValues name="DefaultKey" value="BonusPoints"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
    <nodeSuccessors name="next" next="JoinNode27"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="BonusPoints"/>
  </nodes>
<!--@Location 25,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode27">
    <nodeSuccessors name="next" next="JoinNode26"/>
  </nodes>
<!--@Location 26,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode43" conditionKey="RuleActionType"
      operator="str_eq" conditionValue="bonusPointFactor">
<!--@BendPoints 53,6-->
    <nodeSuccessors name="decision_yes" next="Pipelet11"/>
<!--@BendPoints 54,5 54,11-->
    <nodeSuccessors name="decision_no" next="JoinNode28"/>
  </nodes>
<!--@Location 26,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet11">
    <configurationValues name="DefaultKey" value="RuleActionType"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
<!--@BendPoints 53,8-->
    <nodeSuccessors name="next" next="Pipelet130"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="RuleActionType"/>
  </nodes>
<!--@Location 26,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet130">
    <configurationValues name="DefaultKey" value="BonusPointFactor"/>
    <configurationValues name="Mode" value="Add"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateMapping.xml"/>
    <nodeSuccessors name="next" next="JoinNode28"/>
    <parameterBindings name="InMap" objectPath="RebateRuleWizardMap"/>
    <parameterBindings name="Key" nullBinding="true"/>
    <parameterBindings name="Value" objectPath="BonusPointsFactor"/>
  </nodes>
<!--@Location 26,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode28">
    <nodeSuccessors name="next" next="JoinNode27"/>
  </nodes>
<!--@Location 7,34-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode19" name="UpdateSelectedIterator"
      callMode="Private">
<!--@BendPoints 15,70-->
    <nodeSuccessors name="next" next="Pipelet58"/>
  </nodes>
<!--@Location 7,35-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet58">
    <configurationValues name="DefaultParameterName" value="SelectedProductUUID"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetFormSelection.xml"/>
<!--@BendPoints 15,72-->
    <nodeSuccessors name="next" next="Pipelet51"/>
    <returnValueBindings name="Selection" objectPath="SelectedProductUUIDIterator"/>
  </nodes>
<!--@Location 7,36-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet51">
    <configurationValues name="SessionRegistrationID" value="Products"/>
    <configurationValues name="StoreFormValues" value="No"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateClipboard.xml"/>
<!--@BendPoints 15,74-->
    <nodeSuccessors name="next" next="EndNode23"/>
    <parameterBindings name="AllObjectUUIDs" objectPath="ProductUUIDIterator"/>
  </nodes>
<!--@Location 7,37-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode23"/>
</pipeline:Pipeline>
