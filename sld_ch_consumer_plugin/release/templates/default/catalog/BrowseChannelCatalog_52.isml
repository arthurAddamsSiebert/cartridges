<iscontent type="text/html" charset="UTF-8" compact="true">
<isinclude template="preview/Modules">
<%@ page import = "com.intershop.beehive.core.capi.domain.AttributeValue,com.intershop.beehive.xcs.capi.product.Product" %>
<%@page import = "com.intershop.beehive.core.capi.pipeline.PipelineDictionary"%>
<!-- Page Navigator -->
<isif condition="#Category:isRootCategory#">
	<isset name="CatDisplayName" value="#Catalog:DisplayName#" scope="request">
<iselse>
	<ISCategoryDisplayName Category="#Category#" UseIDFallback="true" SkipPrint="true" CatDisplayNameResult="CatDisplayName">
</isif>
<ISBreadcrumbTrail listview="true" id="#Category:UUID.'-Browse'#" link="#URL(Action('ViewChannelCatalog_52-Back'),Parameter('CatalogCategoryID',Category:UUID),Parameter('CatalogID', Catalog:Id),Parameter('ChannelID',ChannelID), Parameter('HideEmpty', HideEmpty), Parameter('SelectedMenuItem', SelectedMenuItem))#" text="#CatDisplayName#">	
<!-- EO Page Navigator -->

<!-- Working Area -->
	<!-- Checks if the category has dynamic product binding (SQD in the current channel domain) -->
<ISCreateMap mapname="GetSQDByNameParamMap" key0="Name" value0="#Category:SearchQueryDefinitionName#">
<ispipeline
  pipeline="ProcessSearchQueryDefinitionBySearchIndex-GetCategorySQDByName"
  params="#GetSQDByNameParamMap#"
  alias="GetSQDByNameResultDict" />

<div><img src="#WebRoot()#/images/space.gif" width="1" height="6" alt="" border="0"/></div>
<table border="0" cellspacing="0" cellpadding="4" width="100%" class="infobox aldi" data-testing-id="bo-catalog-category-overview-channel">
	<isif condition="#isDefined(previewThis)#">
		<isif condition="#(isDefined(PreviewCategoryError))#">
			<tr>
				<td class="w e s">
					<table border="0" cellspacing="0" cellpadding="4" width="100%" class="error_box">
						<tr>
							<td class="error_icon e"><img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
							<td class="error" width="100%"><isPreviewError previewError="#PreviewCategoryError#"
																			parametername1="CatalogCategoryID" parametervalue1="#PreviewCatalogCategoryID#"
																			parametername2="CatalogUUID" parametervalue2="#Catalog:UUID#"
																			parametername3="MasterPageEditingChannel" parametervalue3="#MasterPageEditingChannel#"></td>
						</tr>
					</table>
				</td>
			</tr>
		<iselseif condition="#(isDefined(confirmPreview) AND isDefined(previewTyp))#">
			<isif condition="#previewTyp EQ "category"#">
				<isform action="#URL(Action('ViewCategory-Dispatch'))#" name="confirmForm" method="post">
					<input type="hidden" name="PreviewCatalogCategoryID" value="<isprint value="#PreviewCatalogCategoryID#">" />
					<input type="hidden" name="CatalogUUID" value="<isprint value="#PreviewCatalogUUID#">" />
					<isPreviewMessageBox previewMessage="#confirmPreview#" itemType="category" colspan="4"  class="error_icon top">
				</isform>
			</isif>
		</isif>	
	</isif>	
	<tr>
		<td nowrap="nowrap" class="infobox_title"><ISCategoryDisplayName Category="#Category#" UseIDFallback="true"></td>
		<td width="100%" valign="bottom">
			<isif condition="#Category:isOnline#">
				<img src="#WebRoot()#/images/status_online.gif" alt="#localizeText('sld_ch_consumer_plugin.Online.alt')#" title="#localizeText('sld_ch_consumer_plugin.Online.title')#" border="0"/>
			</isif>&nbsp;
				<isif condition="#isDefined( GetSQDByNameResultDict:SearchQueryDefinition )#">
					<img src="#WebRoot()#/images/status_implicitly_bound.gif" alt="#localizeText('sld_ch_consumer_plugin.DynamicProductBinding.alt')#" title="#localizeText('sld_ch_consumer_plugin.DynamicProductBinding.title')#" border="0"/>
			</isif>
		</td>
	</tr>
	<tr>
		<td class="infobox_description" width="100%" colspan="2">
			<isif condition="#Category:Description NE ''#"><isprint value="#Category:Description#"><iselse>&nbsp;</isif><BR>
			<isif condition="#isDefined( GetSQDByNameResultDict:SearchQueryDefinition )#">
				<istext key="BrowseChannelCatalog_52.ThisCategoryUsesDynamicProductBinding.infobox_description" encoding="off"/>
			</isif>
		</td>
		<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_VIEW_STOREFRONT) and (isDefined(ApplicationBO:getExtension("(Class)com.intershop.sellside.enterprise.capi.preview.ApplicationBOPreviewExtension"):PreviewTargetApplicationBO(CurrentUser)))#">
			<td align="right">
				<isform action="#URL(Action('ViewChannelCatalog_52-PreviewCategory'))#" method="post" name="rootCategoryForm">
					<table border="0" cellspacing="4" cellpadding="0">
						<tr>
							<td class="button">
								<input type="hidden" name="ChannelID" value="<isprint value="#ChannelID#">"/>
								<input type="hidden" name="PreviewCatalogCategoryID" value="<isprint value="#Category:UUID#">"/>
								<input type="hidden" name="ContextPipeline" value="ViewChannelCatalog_52-Paging"/>
								<input type="hidden" name="contextParameter_CatalogID" value="<isprint value="#Catalog:Id#">"/>
								<input type="hidden" name="contextParameter_ChannelID" value="<isprint value="#ChannelID#">"/>
								<input type="hidden" name="contextParameter_CatalogCategoryID" value="<isprint value="#Category:UUID#">"/>
								<input type="submit" name="previewThisCategory" value="#localizeText('BrowseChannelCatalog_52.CategoryPreview.button')#" class="button"/>
							</td>
						</tr>
					</table>
				</isform>
			</td>
		</isif>
		<td align="right">
			<isform action="#URL(Action('ViewChannelCategory_52-Edit'))#" method="post" name="editCategoryForm">
				<table border="0" cellspacing="4" cellpadding="0">
					<tr>
						<td class="button">
							<input type="hidden" name="CatalogID" value="<isprint value="#Catalog:Id#">"/>
							<input type="hidden" name="ParentCategoryID" value="<isprint value="#Category:Parent:UUID#">"/>
							<input type="hidden" name="CatalogCategoryID" value="<isprint value="#Category:UUID#">"/>
							<input type="submit" name="edit" value="<isif condition="#(isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND NOT(Catalog:isProxy))#">#localizeText('BrowseChannelCatalog_52.EditProperties.button')#<iselse>#localizeText('BrowseChannelCatalog_52.ViewProperties.button')#</isif>" class="button"/>
						</td>
					</tr>
				</table>
			</isform>
		</td>
	</tr>
</table>

<!--- category tree --->
<isif condition="#(Catalog:TypeCode EQ '2') AND (NOT Category:isRootCategory)#"><!--- only for classification catalogs with parent categories--->
	<table border="0" cellspacing="0" cellpadding="5" width="100%" class="infobox w e s">
		<isset name="level" value="#0#" scope="request">
		<isloop iterator="CategoriesPath" alias="Cat">
			<tr>
				<isif condition="#isDefined (Catalog:ClassificationSystem)#">
					<td class="infobox_description" style="padding-left:#Val(level * 13)+4#px;">
						<isif condition="#level == 0#">
							<istext key="BrowseChannelCatalog_52.Catalog.infobox_description" encoding="off"/>:
						<iselse>
							<%int level = ((Double)getObject("level")).intValue();%>
							<%=((com.intershop.component.mvc.capi.catalog.ClassificationSystem)getObject("Catalog:ClassificationSystem")).getLevelName(level) %>
						</isif>
					</td>
				</isif>
				<td class="infobox_description" width="90%" style="padding-left:#Val(level * 13)+4#px;">
					<isif condition="#Cat:ID NE Category:UUID#">
						<a href="#URL(Action('ViewChannelCatalog_52-Browse'), Parameter('CatalogCategoryID',Cat:ID), Parameter('ChannelID',ChannelID), Parameter('HideEmpty', HideEmpty))#" class="infobox_link"><isprint value="#pad (Cat:Name, level*2)#">&nbsp;<ISCatalogCategoryBODisplayName CatalogCategoryBO="#Cat#" UseIDFallback="true"></a>
					<iselse>
						<isprint value="#pad (Cat:Name, level*2)#" scope="request">&nbsp;<ISCatalogCategoryBODisplayName CatalogCategoryBO="#Cat#" UseIDFallback="true">
					</isif>
				</td>
			</tr>
			<isset name="level" value="#level + 1#" scope="request">
		</isloop>
		<tr><td colspan="2"><img src="#WebRoot()#/images/space.gif" width="1" height="1" alt="" border="0"/></td></tr>
	</table>
</isif>

<div><img src="#WebRoot()#/images/space.gif" width="1" height="6" alt="" border="0"/></div>

<!-- Main Content -->
<!-- Subcategories -->
<table cellpadding="0" cellspacing="0" border="0" width="100%">
	<tr>
		<td class="table_title aldi" nowrap="nowrap"><istext key="BrowseChannelCatalog_52.Categories.table_title" encoding="off"/></td>
	</tr>
	<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS)#">
		<!-- delete confirmation for sub-categories -->
		<isif condition="#isDefined(confirmCategoriesDelete) AND (hasLoopElements(SortedCategoryUUIDIterator) OR hasLoopElements(UnsortedCategoryUUIDIterator))#">
			<tr>
				<td>
					<isform action="#URL(Action('ViewChannelCatalog_52-Dispatch'))#" method="post" name="deleteCategoryForm">
						<table cellpadding="0" cellspacing="0" border="0" width="100%">
							<ISMessageBox subject="#localizeText('BrowseChannelCatalog_52.Categorie.subject')#"
											type="mdc"
											okbtnname="deleteCategories"
											cancelbtnname="cancelDeleteCategory"
											parametername1="CatalogID"
											parametervalue1="#Catalog:Id#"
											parametername2="CatalogCategoryID"
											parametervalue2="#Category:UUID#">
											
						</table>
					</isform>
				</td>
			</tr>
		</isif>
		<!-- delete confirmation if nothing is selected-->
		<isif condition="#isDefined(confirmCategoriesDelete) AND NOT hasLoopElements(SortedCategoryUUIDIterator) AND NOT hasLoopElements(UnsortedCategoryUUIDIterator)#">
			<ISMessageBox subject="#localizeText('BrowseChannelCatalog_52.Categorie.subject')#" type="mde">
		</isif>
		<isif condition="#isDefined(selectStagingTarget)#">
			<!-- publish request, but nothing is selected-->
			<isif condition="#NOT(hasLoopElements(SortedCategoryUUIDIterator) OR hasLoopElements(UnsortedCategoryUUIDIterator))#">
				<ISMessageBox type="mde" message="#localizeText('BrowseChannelCatalog_52.YouHaveNotSelectedCategoriesToBePublished.message')#" colspan="1">
			</isif>
		</isif>
		<isif condition="#isDefined(copyCategories) and not(hasLoopElements(CategoryUUIDIterator))#">
			<ISMessageBox type="nse" message="#localizeText('BrowseChannelCatalog_52.YouHaveNotSelectedAnythingSelectAtLeastOneCategory.message')#">     
		</isif>
	
		<isif condition="#isDefined(sortCategories) AND (NOT(hasElements(UnsortedCategoryUUIDIterator)))#">
			<tr>
				<td class="w e s">
					<table border="0" cellspacing="0" cellpadding="4" width="100%" class="error_box">
						<tr>
							<td class="error_icon e"><img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
							<td class="error" width="100%">
								<istext key="BrowseChannelCatalog_52.SelectAtLeastOneUnsortedCategoryAndClickSortAgain.error" encoding="off"/></td>
						</tr>
					</table>
				</td>
			</tr>
		</isif>
		<isif condition="#isDefined(unsortCategories) AND (NOT(hasElements(SortedCategoryUUIDIterator)))#">
			<tr>
				<td class="w e s">
					<table border="0" cellspacing="0" cellpadding="4" width="100%" class="error_box">
						<tr>
							<td class="error_icon e"><img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
							<td class="error" width="100%">
								<istext key="BrowseChannelCatalog_52.SelectAtLeastOneSortedCategoryAndClickUnsortAgain.error" encoding="off"/>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</isif>
		<isif condition="#(isDefined(ERROR_SELECTION_MOVE_CATEGORY_UP) OR isDefined(ERROR_SELECTION_MOVE_CATEGORY_DOWN)) AND (NOT(hasElements(SortedCategoryUUIDIterator)))#">
			<tr>
				<td class="w e s">
					<table border="0" cellspacing="0" cellpadding="4" width="100%" class="error_box">
						<tr>
							<td class="error_icon e"><img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
							<td class="error" width="100%">
								<isif condition="#isDefined(ERROR_SELECTION_MOVE_CATEGORY_UP)#">
									<istext key="BrowseChannelCatalog_52.YouHaveNotSelectedAnythingSelectAtLeastOneSortedCategoryUp.error" encoding="off"/>
								<iselse>
									<istext key="BrowseChannelCatalog_52.YouHaveNotSelectedAnythingSelectAtLeastOneSortedCategoryDown.error1" encoding="off"/>
								</isif>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</isif>
		<isif condition="#NOT isDefined(previewThis)#">
			<isif condition="#(isDefined(PreviewCategoryError))#">
				<tr>
					<td class="w e s">
						<table border="0" cellspacing="0" cellpadding="4" width="100%" class="error_box">
							<tr>
								<td class="error_icon e"><img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
								<td class="error" width="100%"><isPreviewError previewError="#PreviewCategoryError#" ></td>
							</tr>
						</table>
					</td>
				</tr>
			<iselseif condition="#(isDefined(confirmPreview) AND isDefined(previewTyp))#">
				<isif condition="#previewTyp EQ "category"#">
					<isform action="#URL(Action('ViewCategory-Dispatch'))#" name="confirmForm" method="post">
						<input type="hidden" name="PreviewCatalogCategoryID" value="<isprint value="#PreviewCatalogCategoryID#">" />
						<input type="hidden" name="CatalogUUID" value="<isprint value="#PreviewCatalogUUID#">" />
						<input type="hidden" name="CategoryID" value="<isprint value="#CategoryID#">">
						<isPreviewMessageBox previewMessage="#confirmPreview#" itemType="category">
					</isform>
				</isif>
			</isif>
		</isif>
		<isif condition="#(isDefined(ERROR_COMPONENT_NOT_FOUND) )#">
			<tr>
				<td class="w e s">
					<table border="0" cellspacing="0" cellpadding="4" width="100%" class="error_box">
						<tr>
							<td class="error_icon e"><img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
							<td class="error" width="100%">
								<istext key="BrowseChannelCatalog_52.ComponentNotFound.error" encoding="off"/>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</isif>
	</isif>
	<isif condition="#hasElements(SubCategories)#">
		<tr>
			<td class="table_title_description w e s">
				<istext key="BrowseChannelCatalog_52.TheseCategoriesAreCustomCategoriesCreatedHereOrImported.table_title_description" encoding="off"/>
					<BR/>
					<isif condition="#NOT isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS)#">
						<istext key="BrowseChannelCatalog_52.TheListShowsAllSubCategoriesOfThisCategory.table_title_description" encoding="off"/>
					<iselseif condition="#NOT Catalog:isProxy#">
						<istext key="BrowseChannelCatalog_52.TheListShowsAllSubCategoriesOfThisCategoryToSort.table_title_description" encoding="off"/>			
					<iselse>
						<istext key="BrowseChannelCatalog_52.TheListShowsAllSubCategoriesOfThisCategoryClickEdit.table_title_description" encoding="off"/>
					</isif>
					<BR>
					<istext key="BrowseChannelCatalog_52.SubcategoriesThatUseDynamicProductBindingAreMarked.table_title_description" parameter0="#WebRoot().'/images/status_implicitly_bound.gif'#" parameter1="#localizeText('BrowseChannelCatalog_52.DynamicProductBinding.table_title_description')#" parameter2="#localizeText('BrowseChannelCatalog_52.DynamicProductBinding.table_title_description')#" encoding="off"/> 
			</td>
		</tr>
	</isif>
</table>
	<!-- SUB CATEGORIES -->
<isform action="#URL(Action('ViewChannelCatalog_52-Dispatch'))#" method="post" name="CategoryForm">
	<input type="hidden" name="ChannelID" value="<isprint value="#ChannelID#">"/>
	<input type="hidden" name="CatalogID" value="<isprint value="#Catalog:Id#">"/>
	<isif condition="#hasLoopElements(SubCategories)#">
		<table width="100%" border="0" cellspacing="0" cellpadding="0" class="w">
				<!--- count subcategories with position attribute --->
				<isset scope="request" name ="CategoryRowSpan" value="#0#">
				<isloop iterator="SubCategories" alias = "SubCategory">
					<isif condition="#NOT SubCategory:PositionNull#">
						<isset scope="request" name ="CategoryRowSpan" value="#CategoryRowSpan + 1#">
					</isif>
				</isloop>
				<tr>
					<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS)#">
						<td class="table_header e s" nowrap="nowrap" width="80">
							<div id="A">
								<table border="0" cellspacing="0" cellpadding="0" class="table_header center" width="80">
									<tr>
										<td nowrap="nowrap">
											<a href="javascript:selectAll('CategoryForm','CategoryUUID','A','B');" class="tableheader"><istext key="sld_ch_consumer_plugin.SelectAll.link" encoding="off"/></a>
										</td>
									</tr>
								</table>
							</div>
							<div id="B" style="display:none">
								<table border="0" cellspacing="0" cellpadding="0" class="table_header center" width="80">
									<tr>
										<td nowrap="nowrap">
											<a href="javascript:selectAll('CategoryForm','CategoryUUID','A','B');" class="tableheader"><istext key="sld_ch_consumer_plugin.ClearAll.link" encoding="off"/></a>
										</td>
									</tr>
								</table>
							</div>
						</td>
					</isif>
					<td class="table_header e s" nowrap="nowrap"><istext key="sld_ch_consumer_plugin.Name.table_header" encoding="off"/></td>
					<td class="table_header e s" width="20%"><istext key="sld_ch_consumer_plugin.ID.table_header" encoding="off"/></td>
					<td class="table_header e s" width="60%">
						<isif condition="#Catalog:TypeCode == 2#"><istext key="BrowseChannelCatalog_52.Keywords.table_header" encoding="off"/>
						<iselse><istext key="BrowseChannelCatalog_52.Description.table_header" encoding="off"/>
						</isif>
					</td>
					<td class="table_header e s" width="10%"><istext key="sld_ch_consumer_plugin.Actions.table_header" encoding="off"/></td>
					<!--- show 'Sorting' tab if there are any subcategories with position attribute --->
					<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND
					(NOT Catalog:isProxy) AND (CategoryRowSpan > 0)#">
						<td class="table_header e s left" nowrap="nowrap"><istext key="sld_ch_consumer_plugin.Sorting.table_header" encoding="off"/></td>
					</isif>
				</tr>
			<isset scope="request" name ="StartCategorySorted" value="False">
			<isset scope="request" name ="StartCategoryUnsorted" value="False">
			<isloop iterator="SubCategories" alias="SubCategory">
				<!-- Checks if the sub-category has dynamic product binding (SQD in the current channel domain) -->
				<ISCreateMap mapname="GetSQDByNameParamMap" key0="Name" value0="#SubCategory:SearchQueryDefinitionName#">
				<ispipeline
				  pipeline="ProcessSearchQueryDefinitionBySearchIndex-GetCategorySQDByName"
				  params="#GetSQDByNameParamMap#"
				  alias="GetSubCategorySQDByNameResultDict" />
				<!--- custom catalog section --->
					<!--- show sorted categories --->
					<!--- add sorting column if there are subcategories with position attribute --->
					<isif condition="#NOT SubCategory:PositionNull#">
						<tr>
							<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS)#">
								<td class="table_detail2 top e s center">
									<input type="hidden" name="SortedCategoryUUID" value="<isprint value="#SubCategory:ID#">"/>
									<input type="checkbox" name="SelectedSortedCategoryUUID" value="<isprint value="#SubCategory:ID#">"	<isif condition="#isDefined(SortedCategoryClipboard) AND (SortedCategoryClipboard:contains(SubCategory:ID))#">checked="checked"</isif>/>
								</td>
							</isif>
							<td class="table_detail2 bold top e s" nowrap="nowrap">
								<ISCatalogCategoryBODisplayName DetailLink="#URL(Action('ViewChannelCatalog_52-Browse'), Parameter('CatalogCategoryID',SubCategory:ID),Parameter('CatalogID', Catalog:Id), Parameter('HideEmpty', HideEmpty))#" CatalogCategoryBO="#SubCategory#" UseIDFallback="true">&nbsp;<isif condition="#SubCategory:isOnline#"><img src="#WebRoot()#/images/status_online.gif" alt="#localizeText('sld_ch_consumer_plugin.Online.alt')#" title="#localizeText('sld_ch_consumer_plugin.Online.title')#" border="0"/></isif>
									<isif condition="#isDefined(GetSubCategorySQDByNameResultDict:SearchQueryDefinition)#"><img src="#WebRoot()#/images/status_implicitly_bound.gif" alt="#localizeText('sld_ch_consumer_plugin.DynamicProductBinding.alt')#" title="#localizeText('sld_ch_consumer_plugin.DynamicProductBinding.title')#" border="0"/></isif>
							</td>
							<td class="table_detail2 bold top e s" nowrap="nowrap">
								<a href="#URL(Action('ViewChannelCatalog_52-Browse'), Parameter('CatalogCategoryID',SubCategory:ID),Parameter('CatalogID', Catalog:Id), Parameter('HideEmpty', HideEmpty))#" class="table_detail_link"><isprint value="#SubCategory:Name#"></a>&nbsp;<isif condition="#SubCategory:isOnline#"><img src="#WebRoot()#/images/status_online.gif" alt="#localizeText('sld_ch_consumer_plugin.Online.alt')#" title="#localizeText('sld_ch_consumer_plugin.Online.title')#" border="0"/></isif>
									<isif condition="#isDefined(GetSubCategorySQDByNameResultDict:SearchQueryDefinition)#"><img src="#WebRoot()#/images/status_implicitly_bound.gif" alt="#localizeText('sld_ch_consumer_plugin.DynamicProductBinding.alt')#" title="#localizeText('sld_ch_consumer_plugin.DynamicProductBinding.title')#" border="0"/></isif>
							</td>
							<td class="table_detail2 e s">
								<isif condition="#SubCategory:Description NE ''#">
									<isprint value="#SubCategory:Description#">
								<iselse>
									<isif condition="#Catalog:TypeCode == 2#">
										<istext key="sld_ch_consumer_plugin.ThereAreNoKeywordsAvailable.catalog_description2" encoding="off"/>
									<iselse>
										&nbsp;
									</isif>
								</isif>
							</td>
							<td class="table_detail2 top e s center">
								<table border="0" cellspacing="0" cellpadding="0" width="100%">
									<tr>
										<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_VIEW_STOREFRONT) and (isDefined(ApplicationBO:getExtension("(Class)com.intershop.sellside.enterprise.capi.preview.ApplicationBOPreviewExtension"):PreviewTargetApplicationBO(CurrentUser)))#">
											<td width="50%" class="table_detail_status">
												<ISPreviewIcon 
													imageTitle="#localizeText('BrowseChannelCatalog_52.OpenASitePreviewDirectlyOnTheCatalogCategoryPage.imageTitle')#"
													imageAlt="#localizeText('BrowseChannelCatalog_52.OpenASitePreviewDirectlyOnTheCatalogCategoryPage.imageAlt')#"
													previewURL="#URL(Action('ViewChannelCatalog_52-PreviewCategory'), Parameter('ChannelID', ChannelID), Parameter('PreviewCatalogCategoryID', SubCategory:ID))#" 
													contextPipeline="ViewChannelCatalog_52-Browse" 
													contextParameter0="ChannelID" contextValue0="#ChannelID#" 
													contextParameter1="CatalogID" contextValue1="#CatalogID#"
													contextParameter2="CatalogCategoryID" contextValue2="#CatalogCategoryID#" >
											</td>
										</isif>
										<td width="50%" class="table_detail_status">
											<isif condition="#	isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND (NOT Catalog:isProxy) AND ((not isdefined(Catalog:ClassificationSystem)) or (Catalog:ClassificationSystem:Name NE 'System'))#">
												<a href="#URL(Action('ViewChannelCatalog_52-Dispatch'), Parameter('editCategory',''),Parameter('SubCatalogCategoryID',SubCategory:ID), Parameter('ChannelID', ChannelID),Parameter('CatalogID', Catalog:Id))#"><img src="#WebRoot()#/images/edit_category.png" alt="#localizeText('sld_ch_consumer_plugin.Edit.alt')#" title="#localizeText('sld_ch_consumer_plugin.Edit.title')#" border="0"/></a>
											<iselse>
												<a href="#URL(Action('ViewChannelCatalog_52-Dispatch'), Parameter('editCategory',''),Parameter('SubCatalogCategoryID',SubCategory:ID), Parameter('ChannelID', ChannelID),Parameter('CatalogID', Catalog:Id))#"><img src="#WebRoot()#/images/view_catalog.png" alt="#localizeText('sld_ch_consumer_plugin.View.alt')#" title="#localizeText('sld_ch_consumer_plugin.View.title')#" border="0"/></a>
											</isif>
										</td>
									</tr>
								</table>
							</td>
							<!--- show manual sorting buttons for subcategories with position attribute ---> 
							<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND 
							(NOT Catalog:isProxy) AND 
							(StartCategorySorted EQ 'False')#">
								<td class="table_detail2 top e s center sort" nowrap="nowrap" rowspan="<isprint value = "#CategoryRowSpan#" style="INTEGER">">
									<table border="0" cellpadding="0" cellspacing="0" align="center">
										<tr>
											<td><input type="image" name="moveCategoriesUp" src="#WebRoot()#/images/sort_up.gif" alt=""/></td>
										</tr>
										<tr><td><img src="#WebRoot()#/images/space.gif" width="1" height="4" alt="" border="0"/></td></tr>
										<tr>
											<td><input type="image" name="moveCategoriesDown" src="#WebRoot()#/images/sort_down.gif" alt=""/></td>
										</tr>
									</table>
								</td>
								<isset scope="request" name="StartCategorySorted" value="True">
							</isif>
						</tr>
						<!--- show unsorted categories --->
					<iselse>
						<isif condition="#(StartCategorySorted EQ 'True') AND(StartCategoryUnsorted EQ 'False')#">
							<tr>
								<td class="w e s" colspan="6"><img src="#WebRoot()#/images/space.gif" width="1" height="2" alt="" border="0"/></td>
							</tr>
						</isif>
						<isset scope="request" name="StartCategoryUnsorted" value="True">
						<tr>
						<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS)#">
							<td class="table_detail e s center">
								<input type="hidden" name="UnsortedCategoryUUID" value="<isprint value="#SubCategory:ID#">"/>
								<input type="checkbox" name="SelectedUnsortedCategoryUUID" value="<isprint value="#SubCategory:ID#">"	<isif condition="#isDefined(UnsortedCategoryClipboard) AND (UnsortedCategoryClipboard:contains(SubCategory:ID))#">checked="checked"</isif>/>
							</td>
						</isif>
						<td class="table_detail e s" nowrap="nowrap"><ISCatalogCategoryBODisplayName DetailLink="#URL(Action('ViewChannelCatalog_52-Browse'), Parameter('CatalogCategoryID',SubCategory:ID),Parameter('CatalogID', Catalog:Id), Parameter('HideEmpty', HideEmpty), Parameter('ParentPage', ParentPage.','.CategoryPageLocator:PageNumber))#" CatalogCategoryBO="#SubCategory#" UseIDFallback="true">&nbsp;<isif condition="#SubCategory:isOnline#"><img src="#WebRoot()#/images/status_online.gif" alt="#localizeText('sld_ch_consumer_plugin.Online.alt')#" title="#localizeText('sld_ch_consumer_plugin.Online.title')#" border="0"/></isif>
							<isif condition="#isDefined(GetSubCategorySQDByNameResultDict:SearchQueryDefinition)#"><img src="#WebRoot()#/images/status_implicitly_bound.gif" alt="#localizeText('sld_ch_consumer_plugin.DynamicProductBinding.alt')#" title="#localizeText('sld_ch_consumer_plugin.DynamicProductBinding.title')#" border="0"/></isif>
						</td>
						<td class="table_detail e s" nowrap="nowrap"><a href="#URL(Action('ViewChannelCatalog_52-Browse'), Parameter('CatalogCategoryID',SubCategory:ID),Parameter('CatalogID', Catalog:Id), Parameter('HideEmpty', HideEmpty), Parameter('ParentPage', ParentPage.','.CategoryPageLocator:PageNumber))#" class="table_detail_link"><isprint value="#SubCategory:Name#"></a>&nbsp;<isif condition="#SubCategory:isOnline#"><img src="#WebRoot()#/images/status_online.gif" alt="#localizeText('sld_ch_consumer_plugin.Online.alt')#" title="#localizeText('sld_ch_consumer_plugin.Online.title')#" border="0"/></isif>
							<isif condition="#isDefined(GetSubCategorySQDByNameResultDict:SearchQueryDefinition)#"><img src="#WebRoot()#/images/status_implicitly_bound.gif" alt="#localizeText('sld_ch_consumer_plugin.DynamicProductBinding.alt')#" title="#localizeText('sld_ch_consumer_plugin.DynamicProductBinding.title')#" border="0"/></isif>
						</td>
						<td class="catalog_description e s">
							<isif condition="#SubCategory:Description NE ''#">
								<isprint value="#SubCategory:Description#">
							<iselse>
								<isif condition="#Catalog:TypeCode == 2#">
									<istext key="sld_ch_consumer_plugin.ThereAreNoKeywordsAvailable.catalog_description" encoding="off"/>
								<iselse>
									&nbsp;
								</isif>
							</isif>
						</td>
						<td class="table_detail top e s center">
							<table border="0" cellspacing="0" cellpadding="0" width="100%">
								<tr>
								    <isif condition="#isDefined(CurrentChannelPermissionMap:SLD_VIEW_STOREFRONT) and (isDefined(ApplicationBO:getExtension("(Class)com.intershop.sellside.enterprise.capi.preview.ApplicationBOPreviewExtension"):PreviewTargetApplicationBO(CurrentUser)))#">
										<td width="50%" class="table_detail_status">
											<ISPreviewIcon 
												imageTitle="#localizeText('BrowseChannelCatalog_52.OpenASitePreviewDirectlyOnTheCatalogCategoryPage.imageTitle')#"
												imageAlt="#localizeText('BrowseChannelCatalog_52.OpenASitePreviewDirectlyOnTheCatalogCategoryPage.imageAlt')#"
												previewURL="#URL(Action('ViewChannelCatalog_52-PreviewCategory'), Parameter('ChannelID', ChannelID), Parameter('PreviewCatalogCategoryID', SubCategory:ID))#" 
												contextPipeline="ViewChannelCatalog_52-Browse" 
												contextParameter0="ChannelID" contextValue0="#ChannelID#" 
												contextParameter1="CatalogID" contextValue1="#CatalogID#"
												contextParameter2="CatalogCategoryID" contextValue2="#CatalogCategoryID#" >
										</td>
									</isif>
									<td width="50%" class="table_detail_status">
										<isif condition="#	isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND (NOT Catalog:isProxy) AND ((not isdefined(Catalog:ClassificationSystem)) or (Catalog:ClassificationSystem:Name NE 'System'))#">
											<a href="#URL(Action('ViewChannelCatalog_52-Dispatch'), Parameter('editCategory',''),Parameter('SubCatalogCategoryID',SubCategory:ID), Parameter('ChannelID', ChannelID),Parameter('CatalogID', Catalog:Id))#"><img src="#WebRoot()#/images/edit_category.png" alt="#localizeText('sld_ch_consumer_plugin.Edit.alt')#" title="#localizeText('sld_ch_consumer_plugin.Edit.title')#" border="0"/></a>
										<iselse>
											<a href="#URL(Action('ViewChannelCatalog_52-Dispatch'), Parameter('editCategory',''),Parameter('SubCatalogCategoryID',SubCategory:ID), Parameter('ChannelID', ChannelID),Parameter('CatalogID', Catalog:Id))#"><img src="#WebRoot()#/images/view_catalog.png" alt="#localizeText('sld_ch_consumer_plugin.View.alt')#" title="#localizeText('sld_ch_consumer_plugin.View.title')#" border="0"/></a>
										</isif>
									</td>
								</tr>
							</table>
						</td>
						<isif condition="#CategoryRowSpan > 0#">
							<td class="table_detail top e s center">&nbsp;</td>
						</isif>
					</tr>
				</isif>
			</isloop>
		</table>
		<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS)#">
			<table width="100%" border="0" cellspacing="0" cellpadding="0" class="w e">
				<tr>
					<isif condition="#Catalog:TypeCode == 2#">
						<td align="left" width="100%" class="s">
							<table border="0" cellspacing="4" cellpadding="0">
								<tr>
									<td class="button">
										<input type="hidden" name="CatalogCategoryID" value="<isprint value="#Category:UUID#">"/>
										<isif condition="#isDefined(hide) AND isDefined(HideEmpty) AND (HideEmpty EQ 'on')#">
											<input type="hidden" name="HideEmpty" value="off"/>
											<input type="submit" name="show" value="#localizeText('sld_ch_consumer_plugin.ShowEmptyClassifications.button')#" class="button"/>
										<iselseif condition="#hasLoopElements(SubCategories)#">
											<input type="hidden" name="HideEmpty" value="on"/>
											<input type="submit" name="hide" value="#localizeText('sld_ch_consumer_plugin.HideEmptyClassifications.button')#" class="button"/>
										</isif>
									</td>
								</tr>
							</table>
						</td>
					</isif>
					<isif condition="#(NOT Catalog:isProxy)#">
						<td align="right" width="100%" class="s">
							<table border="0" cellspacing="4" cellpadding="0">
								<tr>
									<td class="button">
										<input type="submit" name="sortCategories" value="#localizeText('sld_ch_consumer_plugin.Sort.button')#" class="button" <isif condition="#StartCategoryUnsorted EQ 'False'#">disabled="disabled"</isif>/>
									</td>
									<td class="button">
										<input type="submit" name="unsortCategories" value="#localizeText('sld_ch_consumer_plugin.Unsort.button')#" class="button" <isif condition="#CategoryRowSpan == 0#">disabled="disabled"</isif> />
									</td>
								</tr>
							</table>
						</td>
					</isif>
					<isif condition="#(NOT Catalog:isProxy) AND ((not isdefined(Catalog:ClassificationSystem)) or (Catalog:ClassificationSystem:Name NE 'System'))#">
						<td align="right" width="100%" class="s">						
							<table border="0" cellspacing="4" cellpadding="0">
								<tr>
									<td class="button">
										<input type="hidden" name="ParentCategoryID" value="<isprint value="#Category:UUID#">"/>
										<input type="submit" name="newCategory" value="#localizeText('sld_ch_consumer_plugin.New.button')#" class="button"/>
									</td>
									<td class="button">
										<input type="hidden" name="NewCategoryNamePrefix" value="Copy of "/>
										<input type="submit" name="copyCategories" value="#localizeText('BrowseChannelCatalog_52.Copy.button')#" class="button"/>
									</td>
									<td class="button">
										<input type="hidden" name="CatalogCategoryID" value="<isprint value="#Category:UUID#">"/>
										<input type="submit" name="confirmCategoriesDelete" value="#localizeText('sld_ch_consumer_plugin.Delete.button')#" class="button"/>
									</td>
								</tr>
							</table>						
						</td>
					</isif>
					<isif condition="#isDefined(ChannelPermissionMap:SLD_REPLICATE_PRODUCT_WO_PROVIDER)#">
						<isif condition="#hasElements(TargetClusters)#">
							<td align="right" width="100%" class="s">
								<table border="0" cellspacing="4" cellpadding="0">
									<tr>
										<td class="button">
											<input type="submit" name="selectStagingTarget" value="#localizeText('BrowseChannelCatalog_52.PublishToLiveSystem.button')#" class="button"/>
										</td>
									</tr>
								</table>
							</td>
						</isif>
					</isif>
				</tr>
			</table>
		</isif>
		<div><img src="#WebRoot()#/images/space.gif" width="1" height="6" alt="" border="0"/></div>
		<table width="100%" border="0" cellspacing="0" cellpadding="0">
			<tr>
				<td width="100%">
					<ISPagingBar pageable="SubCategories"><input type="hidden" name="CatalogID" value="<isprint value="#Catalog:Id#">"/><input type="hidden" name="CatalogCategoryID" value="<isprint value="#Category:UUID#">"/>
				</td>
			</tr>
		</table>
	<iselse>
		<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS)#">
			<table width="100%" border="0" cellspacing="0" cellpadding="0" class="w e s">
				<tr>
					<td class="table_detail">
						<isif condition="#isDefined(hide) AND isDefined(HideEmpty) AND (HideEmpty EQ 'on')#">
							<istext key="BrowseChannelCatalog_52.ThisCategoryDoesNotContainAnyNonEmptySubCategories.table_detail" encoding="off"/>
						<iselse>
							<istext key="sld_ch_consumer_plugin.ThisCategoryDoesNotContainAnySubCategories.table_detail" encoding="off"/>
						</isif>
					</td>
				</tr>
			</table>
			
			<isif condition="#Catalog:TypeCode == 2#">
				<table width="100%" border="0" cellspacing="0" cellpadding="0" class="w e s">
					<tr>
						<td align="left">
							<table border="0" cellspacing="4" cellpadding="0">
								<tr>
									<td class="button">
										<input type="hidden" name="CatalogCategoryID" value="<isprint value="#Category:UUID#">"/>
										<isif condition="#isDefined(hide) AND isDefined(HideEmpty) AND (HideEmpty EQ 'on')#">
											<input type="hidden" name="HideEmpty" value="off"/>
											<input type="submit" name="show" value="#localizeText('sld_ch_consumer_plugin.ShowEmptyClassifications.button')#" class="button"/>
										<iselseif condition="#hasLoopElements(SubCategories)#">
											<input type="hidden" name="HideEmpty" value="on"/>
											<input type="submit" name="hide" value="#localizeText('sld_ch_consumer_plugin.HideEmptyClassifications.button')#" class="button"/>
										</isif>
									</td>
								</tr>
							</table>
						</td>
						</tr>
				</table>
			</isif>
			<isif condition="#	isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND
										(NOT Catalog:isProxy) AND
										((not isdefined(Catalog:ClassificationSystem)) or (Catalog:ClassificationSystem:Name NE 'System'))#">
				<table width="100%" border="0" cellspacing="0" cellpadding="0" class="w e s">
					<tr>
						<td align="right">
							<table border="0" cellspacing="4" cellpadding="0">
								<tr>
									<td class="button">
										<input type="hidden" name="ParentCategoryID" value="<isprint value="#Category:UUID#">"/>
										<input type="submit" name="newCategory" value="#localizeText('sld_ch_consumer_plugin.New.button')#" class="button"/>
									</td>
								</tr>
							</table>
						</td>
						</tr>
				</table>
			</isif>
		<iselse>
			<table width="100%" border="0" cellspacing="0" cellpadding="0" class="w e s">
				<tr>
					<td class="table_detail" > <istext key="sld_ch_consumer_plugin.ThisCategoryDoesNotContainAnySubCategories.table_detail" encoding="off"/></td>
				</tr>
			</table>
		</isif>
	</isif>
</isform>
<div><img src="#WebRoot()#/images/space.gif" width="1" height="6" alt="" border="0"/></div>

<!-- Products: title messages description and pre-arrange -->
<isform action="#URL(Action('ViewChannelCatalog_52-Dispatch'))#" method="post" name="productForm" id="productForm">
	<input type="hidden" name="webform-id" value="AdvSorting"/>
	<input type="hidden" name="CatalogID" value="<isprint value="#Catalog:Id#">"/>
	<input type="hidden" name="CatalogCategoryID" value="<isprint value="#Category:UUID#">"/>
	<input type="hidden" name="hide" value="<isprint value="#hide#"/>">
	<input type="hidden" name="HideEmpty" value="<isprint value="#HideEmpty#"/>">
	<table cellpadding="0" cellspacing="0" border="0" width="100%">
		<tr>
			<td width="100%" class="table_title aldi"><istext key="BrowseChannelCatalog_52.Products.table_title" encoding="off"/></td>
		</tr>
		<isif condition="#(isDefined(PreviewProductError))#">
			<tr>
				<td class="w e s">
					<table border="0" cellspacing="0" cellpadding="4" width="100%" class="error_box">
						<tr>
							<td class="error_icon e"><img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
							<td class="error" width="100%"><isPreviewError previewError="#PreviewProductError#" ></td>
						</tr>
					</table>
				</td>
			</tr>
		<iselseif condition="#(isDefined(confirmPreview) AND isDefined(previewTyp))#">
			<isif condition="#previewTyp EQ "product"#">
				<input type="hidden" name="ProductID" value="<isprint value="#ProductID#">"/>
				<isPreviewMessageBox previewMessage="#confirmPreview#" itemType="product">
			</isif>  
		</isif>
		
		<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND (IsDefined(sortByStdAttr) OR IsDefined(sortByCustomAttr))#">
			<tr>
				<td>
					<table border="0" cellspacing="0" cellpadding="0" width="100%" class="confirm_box">
						<tr>
							<td class="w e s">
								<table border="0" cellpadding="4" cellspacing="0" width="100%" class="confirm_box">
									<tr>
										<td class="error_icon e"><img src="#WebRoot()#/images/confirmation.gif" width="16" height="15" alt="" border="0"/></td>
										<td class="confirm" width="100%">
											<istext key="BrowseChannelCatalog_52.DoYouWantToApplyManualSortingToAllProductsInThisCa.confirm" encoding="off"/> 
										</td>
										<td>
											<table border="0" cellspacing="0" cellpadding="0">
												<tr>
													<td class="button">
													<isif condition="#IsDefined(sortByStdAttr) AND (NOT IsDefined(sortByCustomAttr))#">
														<input type="hidden" name="sortByStdAttribute" value="sortByStdAttr" />
													</isif>
													<isif condition="#(NOT IsDefined(sortByStdAttr)) AND IsDefined(sortByCustomAttr)#">
														<input type="hidden" name="sortByCstmAttrribute" value="sortByCustomAttr" />
													</isif>
													<input type="submit" name="startSorting" value="#localizeText('sld_ch_consumer_plugin.OK.button')#" class="button"/>
													</td>
													<td><img src="#Webroot()#/images/space.gif" width="4" height="0" alt="" border="0"/></td>
													<td class="button"><input type="submit" id="messageBoxCancel" name="cancelSorting" value="#localizeText('sld_ch_consumer_plugin.Cancel.button')#" class="button"/></td>
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td> 
			</tr>
		</isif>
		<isif condition="#isDefined(Category:ProductBindingType) AND (Category:ProductBindingType == 1)#">
			<tr>
				<td width="100%" class="w e s"><img src="#WebRoot()#/images/space.gif" width="1" height="2" alt="" border="0"/></td>
			</tr>
		<iselse>
			<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS)#">
				<!--- Messages --->
				<isif condition="#isDefined(sort) AND (NOT(hasElements(UnsortedUUIDIterator)))#">
					<tr>
						<td class="w e s">
							<table border="0" cellspacing="0" cellpadding="4" width="100%" class="error_box">
								<tr>
									<td class="error_icon e"><img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
									<td class="error" width="100%">
										<istext key="BrowseChannelCatalog_52.YouHaveNotSelectedAnythingSelectAtLeastOneUnsorted.error" encoding="off"/>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</isif>
				<isif condition="#isDefined(unsort) AND (NOT(hasElements(SortedUUIDIterator)))#">
					<tr>
						<td class="w e s">
							<table border="0" cellspacing="0" cellpadding="4" width="100%" class="error_box">
								<tr>
									<td class="error_icon e"><img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
									<td class="error" width="100%">
										<istext key="BrowseChannelCatalog_52.YouHaveNotSelectedAnythingSelectAtLeastOneSortedPr.error" encoding="off"/>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</isif>
				<isif condition="#(isDefined(ERROR_SELECTION_MOVE_PRODUCT_UP) OR isDefined(ERROR_SELECTION_MOVE_PRODUCT_DOWN)) AND (NOT(hasElements(SortedUUIDIterator)))#">
					<tr>
						<td class="w e s">
							<table border="0" cellspacing="0" cellpadding="4" width="100%" class="error_box">
								<tr>
									<td class="error_icon e"><img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
									<td class="error" width="100%">
										<isif condition="#isDefined(ERROR_SELECTION_MOVE_PRODUCT_UP)#">
											<istext key="BrowseChannelCatalog_52.YouHaveNotSelectedAnythingSelectAtLeastOneSortedPr.error1" encoding="off"/>
										<iselse>
											<istext key="BrowseChannelCatalog_52.YouHaveNotSelectedAnythingSelectAtLeastOneSortedPr.error2" encoding="off"/>
										</isif>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</isif>
				
				<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS)#">
					<isif condition="#isDefined(ConfirmProductsDelete) and (hasLoopElements(SelectedSortedObjectUUIDs) or hasLoopElements(SelectedUnsortedObjectUUIDs))#">
						<tr>
							<td>
								<table width="100%" border="0" cellspacing="0" cellpadding="0">
									<ISMessageBox subject="#localizeText('BrowseChannelCatalog_52.Product.subject')#"
										type="mdc"
										okbtnname="deleteProducts"
										cancelbtnname="cancelDeleteProducts"
										message="#localizeText('BrowseChannelCatalog_52.DeleteAllSelectedProductsU003cbrU003eNoteProductRe.message')#"
										parametername1="CatalogCategoryID"
										parametervalue1="#Category:UUID#">
								</table>
							</td>
						</tr>
					</isif>
					
					<!-- delete confirmation if nothing is selected-->
					<isif condition="#isDefined(ConfirmProductsDelete) and not(hasLoopElements(SelectedSortedObjectUUIDs) or hasLoopElements(SelectedUnsortedObjectUUIDs))#">
						<tr>
							<td>
								<table width="100%" border="0" cellspacing="0" cellpadding="0">
									<ISMessageBox subject="#localizeText('BrowseChannelCatalog_52.Products.subject')#" type="mde" message="#localizeText('BrowseChannelCatalog_52.PleaseSelectAtLeastOneProduct.message')#" colspan="1">
								</table>
							</td>
						</tr>
					</isif>
		
					<!-- delete confirmation if one is selected, script is found in inc/ConfirmationScript.isml-->
					<isif condition="#(isDefined(ProductDeletionFailed) AND (ProductDeletionFailed EQ 'OffersExist'))#">
						<tr>
							<td>
								<table border="0" cellspacing="0" cellpadding="4" width="100%" class="confirm_box w e s">
									<tr>
										<td class="error_icon e"><img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
										<td class="error" width="100%"><istext key="BrowseChannelCatalog_52.SomeProductsCouldNotBeDeletedBecauseTheyAreOffered.error" encoding="off"/></td>
									</tr>
								</table>
							</td>
						</tr>
					</isif>
					<isif condition="#(isDefined(PreviewProductError))#">
						<tr>
							<td>
								<table border="0" cellspacing="0" cellpadding="4" width="100%" class="confirm_box w e s">
									<tr>
										<td class="error_icon e"><img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
										<td class="error" width="100%"><isPreviewError previewError="#PreviewProductError#" ></td>
									</tr>
								</table>
							</td>
						</tr>
					</isif>
					<isif condition="#(isDefined(ProductDeletionFailed) AND (ProductDeletionFailed EQ 'ProductReferencesExist'))#">
						<tr>
							<td>
								<table border="0" cellspacing="0" cellpadding="4" width="100%" class="confirm_box w e s">
									<tr>
										<td class="error_icon e">
											<img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/>
										</td>
										<td class="error" width="100%">
											<istext key="BrowseChannelCatalog_52.YouCannotDeleteAllOfTheSelectedItemsBecauseTheyAre.error" encoding="off"/>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</isif>
					<isif condition="#(isDefined(ProductDeletionFailed) AND (ProductDeletionFailed EQ 'CacheClearFailed'))#">
						<tr>
							<td>
								<table border="0" cellspacing="0" cellpadding="4" width="100%" class="confirm_box w e s">
									<tr>
										<td class="error_icon e">
											<img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/>
										</td>
										<td class="error" width="100%">
											<istext key="BrowseChannelCatalog_52.TheProductSCannotBeDeletedPleaseSeeTheErrorLogForD.error" encoding="off"/>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</isif>
				</isif>								
				
				<isif condition="#isDefined(ConfirmUnassignAllProducts)#">
					<tr>
						<td>
							<table border="0" cellspacing="0" cellpadding="4" width="100%" class="confirm_box w e s">
								<tr>
									<td class="error_icon middle e"><img src="#webroot()#/images/confirmation.gif" width="16" height="15" alt="" border="0"/></td>
									<td class="confirm middle" width="100%">
										<istext key="BrowseChannelCatalog_52.AreYouSureYouWantToUnassignAllProductsFromThisCate.error" encoding="off"/>
									</td>
									<td align="right">
										<table border="0" cellspacing="0" cellpadding="0">
											<tr>
												<td class="button">
													<input type="submit" name="StartUnassignAll" value="#localizeText('sld_ch_consumer_plugin.OK.button')#" class="button"/>
												</td>
												<td>
													<img height="0" border="0" width="4" alt="" src="#WebRoot()#/images/space.gif"/>
													<input type="hidden" name="PageableID" value="<isprint value="#Products:ID#">"/>
													<input type="hidden" name="PageableName" value="Objects"/>
													<input type="hidden" name="ProcessDescription" value="Unassigning all products from category <isprint value="#Category:DisplayName#">."/>
													<input type="hidden" name="OrganizationUUID" value="<isprint value="#Organization:UUID#">"/>
												</td>
												<td class="button">
													<input type="submit" name="cancelDeleteCategory" value="#localizeText('sld_ch_consumer_plugin.Cancel.button')#" class="button"/>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</isif>
				<isif condition="#isDefined(ConfirmUnassignSelectedProducts)#">
					<isif condition="#hasLoopElements(SelectedSortedObjectUUIDs) OR hasLoopElements(SelectedUnsortedObjectUUIDs)#">
						<tr>
							<td>
								<table border="0" cellspacing="0" cellpadding="4" width="100%" class="confirm_box w e s">
									<tr>
										<td class="error_icon middle e"><img src="#webroot()#/images/confirmation.gif" width="16" height="15" alt="" border="0"/></td>
										<td width="100%">
											<table border="0" cellspacing="0" cellpadding="0" width="100%">
												<tr>												
													<td class="confirm middle" width="100%">
														<istext key="BrowseChannelCatalog_52.UnassignTheSelectedProductsFromThisCategory.error" encoding="off"/>
													</td>
												</tr>
												<tr>
													<td class="confirm_subtitle middle" width="100%">
														<istext key="BrowseChannelCatalog_52.UnassignTheSelectedProductsFromThisCategory.errorNote" encoding="off"/>
													</td>
												</tr>
												<tr>
													<isif condition="#isDefined(SharedPCAExists)#">
														<td class="confirm_subtitle middle" width="100%">
															<istext key="BrowseChannelCatalog_52.NoteSharedAssignmentsCannotBeRemovedInTheChannel.error" encoding="off"/>
														</td>
													</isif>
												</tr>
											</table>
										</td>										
										<td align="right">
											<table border="0" cellspacing="0" cellpadding="0">
												<tr>
													<td class="button"><input type="submit" name="StartUnassignSelected" value="#localizeText('sld_ch_consumer_plugin.OK.button')#" class="button"/></td>
													<td><img height="0" border="0" width="4" alt="" src="#WebRoot()#/images/space.gif"/></td>
													<td class="button"><input type="submit" name="cancelDeleteCategory" value="#localizeText('sld_ch_consumer_plugin.Cancel.button')#" class="button"/></td>
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					<iselse>
						<tr>
							<td>
								<table border="0" cellspacing="0" cellpadding="4" width="100%" class="error_box w e s">
									<tr>
										<td class="error_icon middle e"><img src="#webroot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
										<td class="error middle" width="100%">
											<istext key="BrowseChannelCatalog_52.YouHaveNotSelectedAnyProductsToBeUnassigned.error" encoding="off"/>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</isif>
				</isif>
				<isif condition="#isDefined(EditSelectedProducts)#">
					<isif condition="#(NOT hasLoopElements(SelectedSortedObjectUUIDs)) AND (NOT hasLoopElements(SelectedUnsortedObjectUUIDs))#">
						<tr>
							<td>
								<table border="0" cellspacing="0" cellpadding="4" width="100%" class="error_box w e s">
									<tr>
										<td class="error_icon middle e"><img src="#webroot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
										<td class="error middle" width="100%">
											<istext key="BrowseChannelCatalog_52.YouHaveNotSelectedAnyProducts.error" encoding="off"/>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</isif>
				</isif>
				<isif condition="#isDefined(LockedSKUs) AND (LockedSKUs NE '')#">
					<isif condition="#isDefined(assign)#">
						<tr>
							<td>
								<table border="0" cellspacing="0" cellpadding="4" width="100%" class="confirm_box w e s">
									<tr>
										<td class="error_icon e">
											<img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/>
										</td>
										<td class="error" width="100%">
											<istext key="BrowseChannelCatalog_52.TheFollowingProductsCouldNotBeAssignedToThisCategory.error" parameter0="#encodeValue(LockedSKUs)#" encoding="off"/>.
										</td>
									</tr>
								</table>
							</td>
						</tr>
					<iselseif condition="#isDefined(StartUnassignSelected)#"/>
						<tr>
							<td>
								<table border="0" cellspacing="0" cellpadding="4" width="100%" class="confirm_box w e s">
									<tr>
										<td class="error_icon e">
											<img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/>
										</td>
										<td class="error" width="100%">
											<istext key="BrowseChannelCatalog_52.TheFollowingProductsCouldNotBeUnassignedFromThisCa.error" parameter0="#encodeValue(LockedSKUs)#" encoding="off"/>.
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</isif>
				</isif>
				
				<isif condition="#(NOT (isDefined(Category:ProductBindingType))) OR (NOT (Category:ProductBindingType == 1))#">
					<isset scope="request" name ="ShowSorting" value="True">
				<iselse>
					<isset scope="request" name ="ShowSorting" value="False">
				</isif>
				
				<isif condition="#ErrorCode EQ 'AttributesTypeConflict'#">
					<table border="0" cellspacing="0" cellpadding="4" width="100%" class="error_box w e s">
						<tr>
							<td class="error_icon top e"><img src="#WebRoot()#/images/error.gif" width="16" height="15" alt="" border="0"/></td>
							<td class="error top" width="100%">
								<istext key="CatalogCategoryProducts.ProductsCouldNotBeAssignedToTheClassificationCategory.error"/>
							</td>
						</tr>
					</table>
			    </isif>
					
				<isif condition="#isDefined(AttributesWithTheSameType) AND NOT (AttributesWithTheSameType EQ '')#">
				    <table border="0" cellpadding="0" cellspacing="0" width="100%">
				        <tr>
				            <td>
				                <table border="0" cellspacing="0" cellpadding="4" width="100%" class="error_box w e s">
				                    <tr>
										<td class="information e"><img src="#WebRoot()#/images/confirmation_info.gif" alt="#localizeText('CatalogCategoryProducts.ClassificationAttributeValuesHavePriority.info')#" border="0" align="middle"/></td>
										<td class="information" width="100%"><istext key="CatalogCategoryProducts.ClassificationAttributeValuesHavePriority.info"/></td>
				                    </tr>
				                </table>
				            </td>
				        </tr>
				    </table>
				</isif>
			</isif>
		</isif>
				
		<isif condition="#hasElements(Products)#">
			<tr>
				<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND (ShowSorting EQ 'True')#">
					<isif condition="#isDefined(GetSQDByNameResultDict:SearchQueryDefinition)#">
						<td class="table_title_description w e s" colspan='<isif condition="#(RowSpan > 0) AND (ShowSorting EQ 'True') AND isDefined(CurrentUserPermissionMap:SLD_MANAGE_CATALOGS)#">9<iselse>10</isif>'>
							<istext key="BrowseChannelCatalog_52.TheListShowsAllProductsThatHaveBeenDynamicallyAssigned.table_title_description" encoding="off"/>
						</td>
					<iselse>
						<td class="table_title_description w e s">
							<istext key="BrowseChannelCatalog_52.TheListShowsAllProductsInThisCategory.table_title_description" parameter0="#WebRoot().'/help/con_cat.html#con_cat_sort'#" parameter1="selection_link" encoding="off"/>
						</td>
					</isif>
				<iselse>
					<td class="table_title_description w e s"><istext key="BrowseChannelCatalog_52.TheListShowsProductsInThisCategory.table_title_description" encoding="off"/></td>
				</isif>
			</tr>
			<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS)#">
				<tr>
					<td class="w e s">
						<table cellpadding="0" cellspacing="0" border="0">
							<tr>
								<td class="fielditem2" nowrap="nowrap"><istext key="BrowseChannelCatalog_52.PreArrangeProducts.fielditem2" encoding="off"/></td>
							</tr>
							<tr>
								<td class="fielditem2" nowrap="nowrap"><istext key="BrowseChannelCatalog_52.ByStandardProductAttribute.fielditem2" encoding="off"/>:</td>
								<td class="table_detail">
									<select name="AdvSorting_standardAttr" class="select inputfield_en">
										<option value="name" <isif condition="#AdvSorting_standardAttr EQ 'name'#">selected="selected"</isif>><istext key="sld_ch_consumer_plugin.ProductName.option" encoding="off"/></option>
										<option value="manufacturerName" <isif condition="#AdvSorting_standardAttr EQ 'manufacturerName'#">selected="selected"</isif>><istext key="sld_ch_consumer_plugin.ManufacturerName.option" encoding="off"/></option>
										<option value="value" <isif condition="#AdvSorting_standardAttr EQ 'value'#">selected="selected"</isif>><istext key="BrowseChannelCatalog_52.ListPrice.option" encoding="off"/></option>
										<option value="sku" <isif condition="#AdvSorting_standardAttr EQ 'sku'#">selected="selected"</isif>><istext key="BrowseChannelCatalog_52.ProductID.option" encoding="off"/></option>
									</select>
								</td>
								<td class="table_detail">
									<select name="AdvSorting_standardAttrDirection" class="select inputfield_en">
										<option value="ascending" <isif condition="#AdvSorting_standardAttrDirection EQ 'ascending'#">selected="selected"</isif>><istext key="sld_ch_consumer_plugin.Ascending.option" encoding="off"/></option>
										<option value="descending" <isif condition="#AdvSorting_standardAttrDirection EQ 'descending'#">selected="selected"</isif>><istext key="sld_ch_consumer_plugin.Descending.option" encoding="off"/></option>
									</select>
								</td>
								<td>
									<table cellspacing="2" cellpadding="0" border="0">
										<tbody><tr>
											<td class="button">
												<input type="submit" class="button" value="#localizeText('sld_ch_consumer_plugin.Apply.button')#" name="sortByStdAttr" />
											</td>
										</tr></tbody>
									</table>
								</td>
							</tr>
							<isif condition="#isDefined(SortedAttributeDescriptors) AND hasElements(SortedAttributeDescriptors)#">
								<tr>
									<td class="fielditem2" nowrap="nowrap"><istext key="BrowseChannelCatalog_52.ByCustomProductAttribute.fielditem2" encoding="off"/>:</td>
									<td class="table_detail">
										<input type="hidden" name="AttributeLocalizedFlag" value="0" />
										<select name="AdvSorting_customAttr" class="select inputfield_en">
											<option value="none" <isif condition="#(not isdefined(name:Value)) or (name:Value EQ '')#">selected="selected"</isif>><istext key="sld_ch_consumer_plugin.None.option" encoding="off"/></option>
											<!--- Use BackofficeSearchableAttributesGroup:SortedAttributeDescriptorsIterator alternative to sort by position in the group --->
											<isloop iterator="SortedAttributeDescriptors" alias="AttributeDescriptor">
												<option value="<isprint value="#AttributeDescriptor:ID#">" <isif condition="#AdvSorting_customAttr EQ AttributeDescriptor:ID#" >selected="selected"</isif>><isprint value="#AttributeDescriptor:DisplayName#"></option>
											</isloop>
										</select>
									</td>
									<td class="table_detail">
										<select name="AdvSorting_customAttrDirection" class="select inputfield_en">
											<option value="ascending" <isif condition="#AdvSorting_customAttrDirection EQ 'ascending'#">selected="selected"</isif>><istext key="sld_ch_consumer_plugin.Ascending.option" encoding="off"/></option>
											<option value="descending" <isif condition="#AdvSorting_customAttrDirection EQ 'descending'#">selected="selected"</isif>><istext key="sld_ch_consumer_plugin.Descending.option" encoding="off"/></option>
										</select>
									</td>
									<td>
										<table cellspacing="2" cellpadding="0" border="0">
											<tbody><tr>
												<td class="button">
													<input type="submit" class="button" value="#localizeText('sld_ch_consumer_plugin.Apply.button')#" name="sortByCustomAttr" />
												</td>
											</tr></tbody>
										</table>
									</td>
								</tr>
							</isif>
							<tr><td><img src="#WebRoot()#/images/space.gif" width="1" height="4" alt="" border="0"/></td></tr>
						</table>
					</td>
				</tr>
			</isif>
		<iselse>
			<tr>
				<td class="table_detail w e s"><istext key="BrowseChannelCatalog_52.ThisCategoryDoesNotContainAnyProducts.table_detail" encoding="off"/></td>
			</tr>	
		</isif>
	</table>
	
	<!--- Product lists --->
	<isif condition="#isDefined(Category:ProductBindingType) AND (Category:ProductBindingType == 1)#">
		<isif condition="#hasElements(Products)#">
			<table cellpadding="0" cellspacing="0" border="0" width="100%">
				<tr>
					<td class="table_header w e s"><istext key="sld_ch_consumer_plugin.Name.table_header" encoding="off"/></td>
					<td class="table_header e s" nowrap="nowrap" width="10%"><istext key="sld_ch_consumer_plugin.ID.table_header" encoding="off"/></td>
					<isif condition="#IsDefined(Category:PRODUCT_SORTING_ATTRIBUTE_VALUE) AND (Category:PRODUCT_SORTING_ATTRIBUTE_VALUE NE '')#">
						<isif condition="#Category:PRODUCT_SORTING_ATTRIBUTE_VALUE NE 'manufacturerName'#">
							<td class="table_header e s" nowrap="wrap">
								<isprint value="#Category:PRODUCT_SORTING_ATTRIBUTE_VALUE#">
							</td>
						</isif>
					</isif>
					<td class="table_header e s" nowrap="nowrap"><istext key="sld_ch_consumer_plugin.ManufacturerName.table_header" encoding="off"/></td>
					<td class="table_header e s" nowrap="nowrap" width="10%"><istext key="sld_ch_consumer_plugin.Supplier.table_header" encoding="off"/></td>
					<td class="table_header e s right" nowrap="nowrap"  width="10%"><istext key="sld_ch_consumer_plugin.ListPrice0.table_header" parameter0="#encodeValue(CurrentSession:Currency:CurrencyName)#" encoding="off"/></td>
					<td class="table_header e s" nowrap="nowrap" width="10%"><istext key="BrowseChannelCatalog_52.Type.table_header" encoding="off"/></td>
					<td class="table_header e s left" width="10%"><istext key="sld_ch_consumer_plugin.Status.table_header" encoding="off"/></td>
				</tr>
				<isloop iterator="Products" alias="ProductBO">
					<isset name="Product" value="#ProductBO:Extension("PersistentObjectBOExtension"):PersistentObject#" scope="request"/>
					<tr>
						<td class="table_detail top w e s">
							<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_VIEW_PRODUCTS)#">
								<a href="#URL(Action('ViewProduct_52-Edit'), Parameter('ChannelID', ChannelID), Parameter('ProductID', ProductBO:ID), Parameter('CatalogCategoryID', Category:UUID))#" class="table_detail_link"><isprint value="#ProductBO:Name#"></a>&nbsp;
							<iselse>
								<isprint value="#ProductBO:Name#">&nbsp;
							</isif>
						</td>
						<td class="table_detail top e s" nowrap="nowrap">
							<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_VIEW_PRODUCTS)#">
								<a href="#URL(Action('ViewProduct_52-Edit'), Parameter('ChannelID', ChannelID), Parameter('ProductID', ProductBO:ID), Parameter('CatalogCategoryID', Category:UUID))#" class="table_detail_link"><isprint value="#ProductBO:SKU#"></a>&nbsp;
							<iselse>
								<isprint value="#ProductBO:SKU#">&nbsp;
							</isif>
						</td>
						<isif condition="#IsDefined(Category:PRODUCT_SORTING_ATTRIBUTE_VALUE) AND (Category:PRODUCT_SORTING_ATTRIBUTE_VALUE NE '')#">
							<isif condition="#Category:PRODUCT_SORTING_ATTRIBUTE_VALUE NE 'manufacturerName'#">
								<td class="table_detail top e s">
									<isset name="sortingAttributeName" value="#Category:PRODUCT_SORTING_ATTRIBUTE_VALUE#" scope="request">
									<isif condition="#LookupHelper:get(ProductBO:ID):Attribute(sortingAttributeName) NE ''#">
										<isprint value="#LookupHelper:get(ProductBO:ID):Attribute(sortingAttributeName)#"/>
									<iselse>
										&nbsp;
									</isif>
								</td>
							</isif>
						</isif>
						<td class="table_detail top e s" nowrap="nowrap"><isprint value="#ProductBO:ManufacturerName#">&nbsp;</td>
						<td class="table_detail top e s" nowrap="nowrap"><isprint value="#ProductBO:SupplierName#">&nbsp;</td>
						<td class="table_detail top e s right" nowrap="nowrap"><isProductBOPrice ProductBO="#ProductBO#">&nbsp;</td>
						<td class="table_detail e s left" nowrap="nowrap">&nbsp;</td>
						<td class="table_detail e s left" nowrap="nowrap">
							<isinclude template="category/ProductOnlineStatus.isml">							
						
							<isif condition="#ProductBO:isAvailable#">
								<img src="#WebRoot()#/images/status_instock.gif" alt="#localizeText('sld_ch_consumer_plugin.InStock.alt')#" title="#localizeText('sld_ch_consumer_plugin.InStock.title')#" border="0"/>
							<iselse>
								&nbsp;
							</isif>
					
							<isif condition="#ProductBO:hasCatalogCategories#">
								<img src="#WebRoot()#/images/status_explicitly_bound.gif" alt="#localizeText('sld_ch_consumer_plugin.Categorized.alt')#" title="#localizeText('sld_ch_consumer_plugin.Categorized.title')#" border="0"/>
							<iselse>
								&nbsp;
							</isif>
						
							<isif condition="#ProductBO:getOffersCount>0#">
								<img src="#WebRoot()#/images/status_offers.gif" alt="#localizeText('sld_ch_consumer_plugin.Offered.alt')#" title="#localizeText('sld_ch_consumer_plugin.Offered.title')#" border="0"/>
							<iselse>
								&nbsp;
							</isif>
					
							<isif condition="#ProductBO:DerivedProduct#">
								<isif condition="#ProductBO:DerivedProductChanged#">
									<img src="#WebRoot()#/images/status_shared_product_from_m.gif" alt="#localizeText('sld_ch_consumer_plugin.SharedFromAnotherAndEdited.alt')#" title="#localizeText('sld_ch_consumer_plugin.SharedFromAnotherAndEdited.title')#" border="0"/>
								<iselse>
									<img src="#WebRoot()#/images/status_shared_product_from.gif" alt="#localizeText('sld_ch_consumer_plugin.SharedFromAnother.alt')#" title="#localizeText('sld_ch_consumer_plugin.SharedFromAnother.title')#" border="0"/>
								</isif>
							<iselse>
								&nbsp;
							</isif>
					
							<isif condition="#ProductLockActivated EQ 'true'#">
								<isif condition="#LockingLookupHelper:isLockedForMe(Product,CurrentUser)#">
									<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_PRODUCTS)#">
										<a href="#URL(Action('ViewChannelCatalog_52-UnlockProduct'),Parameter('ProductID',ProductBO:ID), Parameter('CatalogCategoryID', CatalogCategoryID),Parameter('JumpTarget', 'ViewChannelCatalog_52-Paging'), Parameter('CatalogID',CatalogID))#">
											<img src="#WebRoot()#/images/lockedForMe.gif" alt="#localizeText('sld_ch_consumer_plugin.LockedForMe.alt')#" title="#localizeText('sld_ch_consumer_plugin.LockedForMe.title')#" border="0"/>
										</a>
									<iselse>
										<img src="#WebRoot()#/images/lockedForMe.gif" alt="#localizeText('sld_ch_consumer_plugin.LockedForMe.alt')#" title="#localizeText('sld_ch_consumer_plugin.LockedForMe.title')#" border="0"/>
									</isif>
								<iselseif condition="#LockingLookupHelper:isLockedForOther(Product,CurrentUser)#">
									<img src="#WebRoot()#/images/lockedForOther.gif" alt="#localizeText('sld_ch_consumer_plugin.LockedByOther.alt')#" title="#localizeText('sld_ch_consumer_plugin.LockedByOther.title')#" border="0"/>
								<iselse>
									<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_PRODUCTS)#">
										<a href="#URL(Action('ViewChannelCatalog_52-LockProduct'),Parameter('ProductID',ProductBO:ID), Parameter('CatalogCategoryID', CatalogCategoryID), Parameter('CatalogID',CatalogID), Parameter('JumpTarget', 'ViewChannelCatalog_52-Paging'))#">
											<img src="#WebRoot()#/images/unlocked.gif" alt="#localizeText('sld_ch_consumer_plugin.Unlocked.alt')#" title="#localizeText('sld_ch_consumer_plugin.Unlocked.title')#" border="0"/>
										</a>
									<iselse>
										<img src="#WebRoot()#/images/unlocked.gif" alt="#localizeText('sld_ch_consumer_plugin.Unlocked.alt')#" title="#localizeText('sld_ch_consumer_plugin.Unlocked.title')#" border="0"/>
									</isif>
								</isif>
							</isif>
						</td>
					</tr>
				</isloop>
			</table>
			<div><img src="#WebRoot()#/images/space.gif" width="1" height="6" alt="" border="0"/></div>
			<table cellpadding="0" cellspacing="0" border="0" width="100%">
				<tr>
					<td>
						<ISFlexPagingBar2 pageable="Products" variablepagesize="true" rowsperpage="#RowsPerPage#">
					</td>
				</tr>
			</table>
		</isif>
	<iselse>
		<!--- Editable Products --->
		<table cellpadding="0" cellspacing="0" border="0" width="100%">
			<!--- Product List --->
			<isif condition="#hasElements(Products)#">
				<isset scope="request" name ="ColSpanOfPagingBar" value="#8#">
				<isset scope="request" name ="RowSpan" value="#0#">
				<isloop iterator="Products" alias = "ProductBO">
					<isset name="Product" value="#ProductBO:Extension("PersistentObjectBOExtension"):PersistentObject#" scope="request"/>
					<isif condition="#NOT Category:ProductPositionNull(Product)#">
						<isset scope="request" name ="RowSpan" value="#RowSpan + 1#">
					</isif>
				</isloop>
				<tr>
					<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS)#">
						<td class="table_header w s" nowrap="nowrap" width="80">
							<div id="C">
								<table border="0" cellspacing="0" cellpadding="0" class="table_header center" width="80">
									<tr>
										<td nowrap="nowrap">
											<a href="javascript:selectAll('productForm','ortedObjectUUID','C','D');" class="tableheader"><istext key="sld_ch_consumer_plugin.SelectAll.link" encoding="off"/></a>
										</td>
									</tr>
								</table>
							</div>
							<div id="D" style="display:none">
								<table border="0" cellspacing="0" cellpadding="0" class="table_header center"  width="80">
									<tr>
										<td nowrap="nowrap">
											<a href="javascript:selectAll('productForm','ortedObjectUUID','C','D');" class="tableheader"><istext key="sld_ch_consumer_plugin.ClearAll.link" encoding="off"/></a>
										</td>
									</tr>
								</table>
							</div>
						</td>
					</isif>
					<td class="table_header w e s" width="100%"><istext key="sld_ch_consumer_plugin.Name.table_header" encoding="off"/></td>
					<td class="table_header e s" nowrap="nowrap"><istext key="sld_ch_consumer_plugin.ID.table_header" encoding="off"/></td>
					<isif condition="#IsDefined(Category:PRODUCT_SORTING_ATTRIBUTE_VALUE) AND (Category:PRODUCT_SORTING_ATTRIBUTE_VALUE NE '')#">
						<isif condition="#Category:PRODUCT_SORTING_ATTRIBUTE_VALUE NE 'manufacturerName'#">
							<td class="table_header e s" nowrap="wrap">
								<isprint value="#Category:PRODUCT_SORTING_ATTRIBUTE_VALUE#">
								<isset scope="request" name ="ColSpanOfPagingBar" value="#ColSpanOfPagingBar + 1#">
							</td>
						</isif>
					</isif>
					<td class="table_header e s" nowrap="nowrap"><istext key="sld_ch_consumer_plugin.ManufacturerName.table_header" encoding="off"/></td>
					<td class="table_header e s" nowrap="nowrap"><istext key="sld_ch_consumer_plugin.Supplier.table_header" encoding="off"/></td>
					<td class="table_header e s right" nowrap="nowrap"><istext key="sld_ch_consumer_plugin.ListPrice0.table_header" parameter0="#encodeValue(CurrentSession:Currency:CurrencyName)#" encoding="off"/></td>
					<td class="table_header e s left" width="5%"><istext key="sld_ch_consumer_plugin.Status.table_header" encoding="off"/></td>
					<td class="table_header e s left" width="5%"><istext key="sld_ch_consumer_plugin.Actions.table_header" encoding="off"/></td>
					<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND ((RowSpan > 0) AND (ShowSorting EQ 'True')) AND NOT(isDefined(GetSQDByNameResultDict:SearchQueryDefinition))#">
						<td class="table_header e s left" nowrap="nowrap"><istext key="sld_ch_consumer_plugin.Sorting.table_header" encoding="off"/></td>
					</isif>
				</tr>
				<isset scope="request" name ="StartSorted" value="False">
				<isset scope="request" name ="StartUnSorted" value="False">
				<isloop iterator="Products" alias="ProductBO">
					<isset name="Product" value="#ProductBO:Extension("PersistentObjectBOExtension"):PersistentObject#" scope="request"/>
					<isif condition="#(NOT Category:ProductPositionNull(Product)) AND (ShowSorting EQ 'True')#">
						<tr>
							<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS)#">
								<td class="w s center" >
									<input type="hidden" name="SortedObjectUUID" value="<isprint value="#ProductBO:ID#">" />
									<input type="checkbox" name="SelectedSortedObjectUUID" value="<isprint value="#ProductBO:ID#">" <isif condition="#isDefined(SortedClipboard) AND (SortedClipboard:contains(ProductBO:ID))#">checked="checked"</isif>/>&nbsp;
								</td>
							</isif>
							<td class="table_detail top w e s">
								<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_VIEW_PRODUCTS)#">
									<a href="#URL(Action('ViewProduct_52-Edit'), Parameter('ChannelID', ChannelID), Parameter('ProductID', ProductBO:ID), Parameter('CatalogCategoryID', Category:UUID))#" class="table_detail_link"><isprint value="#ProductBO:Name#"></a>
								<iselse>
									<isprint value="#ProductBO:Name#">&nbsp;
								</isif>
							</td>
							<td class="table_detail top e s" nowrap="nowrap">
								<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_VIEW_PRODUCTS)#">
									<a href="#URL(Action('ViewProduct_52-Edit'), Parameter('ChannelID', ChannelID), Parameter('ProductID', ProductBO:ID), Parameter('CatalogCategoryID', Category:UUID))#" class="table_detail_link"><isprint value="#ProductBO:SKU#"></a>&nbsp;
								<iselse>
									<isprint value="#ProductBO:SKU#">&nbsp;
								</isif>
							</td>
							<isif condition="#IsDefined(Category:PRODUCT_SORTING_ATTRIBUTE_VALUE) AND (Category:PRODUCT_SORTING_ATTRIBUTE_VALUE NE '')#">
								<isif condition="#Category:PRODUCT_SORTING_ATTRIBUTE_VALUE NE 'manufacturerName'#">
									<td class="table_detail top e s">
										<isset name="sortingAttributeName" value="#Category:PRODUCT_SORTING_ATTRIBUTE_VALUE#" scope="request">
										<isif condition="#LookupHelper:get(ProductBO:ID):Attribute(sortingAttributeName) NE ''#">
											<isprint value="#LookupHelper:get(ProductBO:ID):Attribute(sortingAttributeName)#"/>
										<iselse>
											&nbsp;
										</isif>
									</td>
								</isif>
							</isif>
							<td class="table_detail top e s" nowrap="nowrap"><isprint value="#ProductBO:ManufacturerName#">&nbsp;</td>
							<td class="table_detail top e s" nowrap="nowrap">
								<isprint value="#ProductBO:SupplierName#">&nbsp;
							</td>
							<td class="table_detail top e s right" nowrap="nowrap"><isProductBOPrice ProductBO="#ProductBO#">&nbsp;</td>
							<td class="table_detail_status e s left" nowrap="nowrap">
								<isif condition="#ProductBO:isAvailable#">
									<img src="#WebRoot()#/images/status_instock.gif" alt="#localizeText('sld_ch_consumer_plugin.InStock.alt')#" title="#localizeText('BrowseChannelCatalog_52.InStock.title')#" border="0"/><iselse>&nbsp;</isif>
								<isif condition="#ProductBO:hasCatalogCategories#">
									<img src="#WebRoot()#/images/status_explicitly_bound.gif" alt="#localizeText('sld_ch_consumer_plugin.Categorized.alt')#" title="#localizeText('sld_ch_consumer_plugin.Categorized.title')#" border="0"/>
								<iselse>
									&nbsp;
								</isif>
								<isif condition="#ProductBO:getOffersCount>0#">
									<img src="#WebRoot()#/images/status_offers.gif" alt="#localizeText('sld_ch_consumer_plugin.Offered.alt')#" title="#localizeText('sld_ch_consumer_plugin.Offered.title')#" border="0"/>
								<iselse>
									&nbsp;
								</isif>
								<isif condition="#ProductBO:DerivedProduct#">
									<isif condition="#ProductBO:DerivedProductChanged#">
										<img src="#WebRoot()#/images/status_shared_product_from_m.gif" alt="#localizeText('sld_ch_consumer_plugin.SharedFromAnotherAndEdited.alt')#" title="#localizeText('sld_ch_consumer_plugin.SharedFromAnotherAndEdited.title')#" border="0"/>
									<iselse>
										<img src="#WebRoot()#/images/status_shared_product_from.gif" alt="#localizeText('sld_ch_consumer_plugin.SharedFromAnother.alt')#" title="#localizeText('sld_ch_consumer_plugin.SharedFromAnother.title')#" border="0"/>
									</isif>
								<iselse>
									&nbsp;
								</isif>
							</td>
							<td class="table_detail_status e s left" nowrap="nowrap">
								<table border="0" cellspacing="0" cellpadding="0" width="100%">
									<tr>
										<td width="33%" class="table_detail_status">
											<isinclude template="category/ProductOnlineStatus.isml">
										</td>
										<td width="33%" class="table_detail_status">
											<isif condition="#ProductLockActivated EQ 'true'#">
												<isif condition="#LockingLookupHelper:isLockedForMe(Product,CurrentUser)#">
													<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_PRODUCTS)#">
														<a href="#URL(Action('ViewChannelCatalog_52-UnlockProduct'),Parameter('ProductID',ProductBO:ID), Parameter('CatalogCategoryID', CatalogCategoryID),Parameter('JumpTarget', 'ViewChannelCatalog_52-Paging'), Parameter('CatalogID',CatalogID))#">
															<img src="#WebRoot()#/images/lockedForMe.gif" alt="#localizeText('sld_ch_consumer_plugin.LockedForMe.alt')#" title="#localizeText('sld_ch_consumer_plugin.LockedForMe.title')#" border="0"/>
														</a>
													<iselse>
														<img src="#WebRoot()#/images/lockedForMe.gif" alt="#localizeText('sld_ch_consumer_plugin.LockedForMe.alt')#" title="#localizeText('sld_ch_consumer_plugin.LockedForMe.title')#" border="0"/>
													</isif>
												<iselseif condition="#LockingLookupHelper:isLockedForOther(Product,CurrentUser)#">
													<img src="#WebRoot()#/images/lockedForOther.gif" alt="#localizeText('sld_ch_consumer_plugin.LockedByOther.alt')#" title="#localizeText('sld_ch_consumer_plugin.LockedByOther.title')#" border="0"/>
												<iselse>
													<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_PRODUCTS)#">
														<a href="#URL(Action('ViewChannelCatalog_52-LockProduct'),Parameter('ProductID',ProductBO:ID), Parameter('CatalogCategoryID', CatalogCategoryID), Parameter('CatalogID',CatalogID), Parameter('JumpTarget', 'ViewChannelCatalog_52-Paging'))#">
															<img src="#WebRoot()#/images/unlocked.gif" alt="#localizeText('sld_ch_consumer_plugin.Unlocked.alt')#" title="#localizeText('sld_ch_consumer_plugin.Unlocked.title')#" border="0"/>
														</a>
													<iselse>
														<img src="#WebRoot()#/images/unlocked.gif" alt="#localizeText('sld_ch_consumer_plugin.Unlocked.alt')#" title="#localizeText('sld_ch_consumer_plugin.Unlocked.title')#" border="0"/>
													</isif>
												</isif>
											</isif>
										</td>
										<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_VIEW_STOREFRONT) and (isDefined(ApplicationBO:getExtension("(Class)com.intershop.sellside.enterprise.capi.preview.ApplicationBOPreviewExtension"):PreviewTargetApplicationBO(CurrentUser)))#">
											<!--- Product Preview link --->
											<td width="33%" class="table_detail_status">
												<ISPreviewIcon 
													imageTitle="#localizeText('BrowseChannelCatalog_52.OpenASitePreviewDirectlyOnTheProductDetailPageFor.imageTitle')#"
													imageAlt="#localizeText('BrowseChannelCatalog_52.OpenASitePreviewDirectlyOnTheProductDetailPageFor.imageAlt')#"
													previewURL="#URL(Action('ViewProduct_52-PreviewProduct'), Parameter('ProductID', ProductBO:SKU))#" 
													contextPipeline="ViewChannelCatalog_52-Paging" 
													contextParameter0="ChannelID" contextValue0="#ChannelID#" 
													contextParameter1="CatalogID" contextValue1="#CatalogID#"
													contextParameter2="CatalogCategoryID" contextValue2="#CatalogCategoryID#" >
											</td>
										</isif>
									</tr>
								</table>	
							</td>
							<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND ((StartSorted EQ 'False') AND (ShowSorting EQ 'True')) AND (NOT isDefined(GetSQDByNameResultDict:SearchQueryDefinition))#">
								<td class="table_detail_status e s center sort" nowrap="nowrap" rowspan="<isprint value = "#RowSpan#" style="INTEGER">">
									<table border="0" cellpadding="0" cellspacing="0" align="center">
										<tr>
											<td><input type="image" name="moveUp" src="#WebRoot()#/images/sort_up.gif" alt=""/></td>
										</tr>
										<tr><td><img src="#WebRoot()#/images/space.gif" width="1" height="4" alt="" border="0"/></td></tr>
										<tr>
											<td><input type="image" name="moveDown" src="#WebRoot()#/images/sort_down.gif"  alt=""/></td>
										</tr>
									</table>
								</td>
								<isset scope="request" name ="StartSorted" value="True">
							</isif>
						</tr>
					<iselse>
						<isset scope="request" name ="StartUnSorted" value="True">
						<tr>
							<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS)#">
								<td class="w s center" >
									<input type="hidden" name="UnsortedObjectUUID" value="<isprint value="#ProductBO:ID#">"/>
								<input type="checkbox" name="SelectedUnsortedObjectUUID" value="<isprint value="#ProductBO:ID#">" <isif condition="#isDefined(UnsortedClipboard) AND (UnsortedClipboard:contains(ProductBO:ID))#">checked="checked"</isif> />&nbsp;
								</td>
							</isif>
							<td class="table_detail top w e s">
								<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_VIEW_PRODUCTS)#">
									<a href="#URL(Action('ViewProduct_52-Edit'), Parameter('ChannelID', ChannelID), Parameter('ProductID', ProductBO:ID), Parameter('CatalogCategoryID', Category:UUID))#" class="table_detail_link"><isprint value="#ProductBO:Name#"></a>
								<iselse>
									<isprint value="#ProductBO:Name#">&nbsp;
								</isif>
							</td>
							<td class="table_detail top e s" nowrap="nowrap">
								<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_VIEW_PRODUCTS)#">
									<a href="#URL(Action('ViewProduct_52-Edit'), Parameter('ChannelID', ChannelID), Parameter('ProductID', ProductBO:ID), Parameter('CatalogCategoryID', Category:UUID))#" class="table_detail_link"><isprint value="#ProductBO:SKU#"></a>&nbsp;
								<iselse>
									<isprint value="#ProductBO:SKU#">&nbsp;
								</isif>
							</td>
							<isif condition="#IsDefined(Category:PRODUCT_SORTING_ATTRIBUTE_VALUE) AND (Category:PRODUCT_SORTING_ATTRIBUTE_VALUE NE '')#">
								<isif condition="#Category:PRODUCT_SORTING_ATTRIBUTE_VALUE NE 'manufacturerName'#">
									<td class="table_detail top e s">
										<isset name="sortingAttributeName" value="#Category:PRODUCT_SORTING_ATTRIBUTE_VALUE#" scope="request">
										<isif condition="#LookupHelper:get(ProductBO:ID):Attribute(sortingAttributeName) NE ''#">
											<isprint value="#LookupHelper:get(ProductBO:ID):Attribute(sortingAttributeName)#"/>
										<iselse>
											&nbsp;
										</isif>
									</td>
								</isif>
							</isif>
							<td class="table_detail top e s" nowrap="nowrap"><isprint value="#ProductBO:ManufacturerName#">&nbsp;</td>
							<td class="table_detail top e s" nowrap="nowrap">
								<isprint value="#ProductBO:SupplierName#">&nbsp;
							</td>
							<td class="table_detail top e s right" nowrap="nowrap"><isProductBOPrice ProductBO="#ProductBO#">&nbsp;</td>
							<td class="table_detail_status e s left" nowrap="nowrap" >
								<isif condition="#ProductBO:isAvailable#">
									<img src="#WebRoot()#/images/status_instock.gif" alt="#localizeText('sld_ch_consumer_plugin.InStock.alt')#" title="#localizeText('sld_ch_consumer_plugin.InStock.title')#" border="0" />
								<iselse>&nbsp;</isif>
							
								<isif condition="#ProductBO:hasCatalogCategories#">
									<img src="#WebRoot()#/images/status_explicitly_bound.gif" alt="#localizeText('sld_ch_consumer_plugin.Categorized.alt')#" title="#localizeText('sld_ch_consumer_plugin.Categorized.title')#" border="0" />
								<iselse>&nbsp;</isif>
							
								<isif condition="#ProductBO:getOffersCount>0#">
									<img src="#WebRoot()#/images/status_offers.gif" alt="#localizeText('sld_ch_consumer_plugin.Offered.alt')#" title="#localizeText('sld_ch_consumer_plugin.Offered.title')#" border="0" />
								<iselse>&nbsp;</isif>
						
								<isif condition="#ProductBO:DerivedProduct#">
									<isif condition="#ProductBO:DerivedProductChanged#">
										<img src="#WebRoot()#/images/status_shared_product_from_m.gif" alt="#localizeText('sld_ch_consumer_plugin.SharedFromAnotherAndEdited.alt')#" title="#localizeText('sld_ch_consumer_plugin.SharedFromAnotherAndEdited.title')#" border="0" />
									<iselse>
										<img src="#WebRoot()#/images/status_shared_product_from.gif" alt="#localizeText('sld_ch_consumer_plugin.SharedFromAnother.alt')#" title="#localizeText('sld_ch_consumer_plugin.SharedFromAnother.title')#" border="0" />
									</isif>
								<iselse>&nbsp;</isif>							
							</td>
							<td class="table_detail_status e s left" nowrap="nowrap" >
								
								<table width="100%" cellspacing="0" cellpadding="0" border="0">
									<tr>
										<td class="table_detail_status">
											<isinclude template="category/ProductOnlineStatus.isml">
										</td>
										
										<isif condition="#ProductLockActivated EQ 'true'#">
											<isif condition="#LockingLookupHelper:isLockedForMe(Product,CurrentUser)#">
												<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_PRODUCTS)#">
													<td class="table_detail_status">
														<a href="#URL(Action('ViewChannelCatalog_52-UnlockProduct'),Parameter('ProductID',ProductBO:ID), Parameter('CatalogCategoryID', CatalogCategoryID),Parameter('JumpTarget', 'ViewChannelCatalog_52-Paging'), Parameter('CatalogID',CatalogID))#">
															<img src="#WebRoot()#/images/lockedForMe.gif" alt="#localizeText('sld_ch_consumer_plugin.LockedForMe.alt')#" title="#localizeText('sld_ch_consumer_plugin.LockedForMe.title')#" border="0" />
														</a>
													</td>
												<iselse>
													<td class="table_detail_status"><img src="#WebRoot()#/images/lockedForMe.gif" alt="#localizeText('sld_ch_consumer_plugin.LockedForMe.alt')#" title="#localizeText('sld_ch_consumer_plugin.LockedForMe.title')#" border="0" /></td>
												</isif>
											<iselseif condition="#LockingLookupHelper:isLockedForOther(Product,CurrentUser)#">
												<td class="table_detail_status"><img src="#WebRoot()#/images/lockedForOther.gif" alt="#localizeText('sld_ch_consumer_plugin.LockedByOther.alt')#" title="#localizeText('sld_ch_consumer_plugin.LockedByOther.title')#" border="0" /></td>
											<iselse>
												<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_PRODUCTS)#">
													<td class="table_detail_status">
														<a href="#URL(Action('ViewChannelCatalog_52-LockProduct'),Parameter('ProductID',ProductBO:ID), Parameter('CatalogCategoryID', CatalogCategoryID), Parameter('CatalogID',CatalogID), Parameter('JumpTarget', 'ViewChannelCatalog_52-Paging'))#">
															<img src="#WebRoot()#/images/unlocked.gif" alt="#localizeText('sld_ch_consumer_plugin.Unlocked.alt')#" title="#localizeText('sld_ch_consumer_plugin.Unlocked.title')#" border="0" />
														</a>
													</td>
												<iselse>
													<td class="table_detail_status"><img src="#WebRoot()#/images/unlocked.gif" alt="#localizeText('sld_ch_consumer_plugin.Unlocked.alt')#" title="#localizeText('sld_ch_consumer_plugin.Unlocked.title')#" border="0" /></td>
												</isif>
											</isif>
										</isif>
										
										<td class="table_detail_status">
											<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_VIEW_STOREFRONT) and (isDefined(ApplicationBO:getExtension("(Class)com.intershop.sellside.enterprise.capi.preview.ApplicationBOPreviewExtension"):PreviewTargetApplicationBO(CurrentUser)))#">
												<!--- Product Preview link --->
												<ISPreviewIcon
													imageTitle="#localizeText('BrowseChannelCatalog_52.OpenASitePreviewDirectlyOnTheProductDetailPageFor.imageTitle')#"
													imageAlt="#localizeText('BrowseChannelCatalog_52.OpenASitePreviewDirectlyOnTheProductDetailPageFor.imageAlt')#"
													previewURL="#URL(Action('ViewProduct_52-PreviewProduct'), Parameter('ProductID', ProductBO:SKU))#" 
													contextPipeline="ViewChannelCatalog_52-Paging" 
													contextParameter0="ChannelID" contextValue0="#ChannelID#" 
													contextParameter1="CatalogID" contextValue1="#CatalogID#"
													contextParameter2="CatalogCategoryID" contextValue2="#CatalogCategoryID#" >
												<!--- EO Product Preview link --->
											</isif>
										</td>
										
									</tr>
								</table>
								
							</td>
							<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND ((RowSpan > 0) AND (ShowSorting EQ 'True')) AND (NOT isDefined(GetSQDByNameResultDict:SearchQueryDefinition))#">
								<td class="e s">&nbsp;</td>
							</isif>
						</tr>
					</isif>
				</isloop>
				<!--- Product Action buttons --->
				<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND (ShowSorting EQ 'True')#">
					<tr>
						<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_BATCH_PROCESSES)#">
							<td colspan="2" align="left" class="w s">
								<table border="0" cellspacing="4" cellpadding="0">
									<tr>
										<td class="button"><input type="submit" name="EditAllProducts" value="#localizeText('BrowseChannelCatalog_52.EditAll.button')#" class="button"/></td>
										<td class="button"><input type="submit" name="EditSelectedProducts" value="#localizeText('BrowseChannelCatalog_52.EditSelected.button')#" class="button"/></td>
										<isif condition="#NOT(isDefined( GetSQDByNameResultDict:SearchQueryDefinition ))#">
											<td class="button"><input type="submit" name="ConfirmUnassignAllProducts" value="#localizeText('BrowseChannelCatalog_52.UnassignAll.button')#" class="button"/></td>
										</isif>
									</tr>
								</table>
							</td>
						<iselse>
							<td colspan="2" align="left" class="w s">
								&nbsp;
							</td>
						</isif>
						<td colspan='<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND ((RowSpan > 0) AND (ShowSorting EQ 'True'))#">8<iselse>7</isif>' class="e s" align="right">
							<table border="0" cellspacing="4" cellpadding="0">
								<tr>
									<isif condition="#(Catalog:TypeCode != 2) OR (NOT hasLoopElements(Category:SubCategories)) #"><!--- For classification catalogs check subcategories--->
										<isif condition="#NOT(isDefined( GetSQDByNameResultDict:SearchQueryDefinition ))#">
											<td class="button"><input type="submit" name="AddProducts" value="#localizeText('sld_ch_consumer_plugin.Add.button')#" class="button"/></td>
										</isif>
									</isif>
									<isif condition="#NOT(isDefined( GetSQDByNameResultDict:SearchQueryDefinition ))#">
										<td class="button"><input type="submit" name="ConfirmUnassignSelectedProducts" value="#localizeText('BrowseChannelCatalog_52.Unassign.button')#" class="button"/></td>
										<td class="button"><input type="submit" name="sort" value="#localizeText('sld_ch_consumer_plugin.Sort.button')#" class="button" <isif condition="#StartUnSorted EQ 'False'#">disabled="disabled"</isif> /></td>
										<td class="button"><input type="submit" name="unsort" value="#localizeText('sld_ch_consumer_plugin.Unsort.button')#" class="button" <isif condition="#RowSpan == 0#">disabled="disabled"</isif> /></td>
										<td class="button"><input type="submit" name="ConfirmProductsDelete" value="#localizeText('sld_ch_consumer_plugin.Delete.button')#" class="button"/></td>
									</isif>
								</tr>
							</table>
						</td>
					</tr>
				</isif>
				<tr>
					<td colspan="8"><img src="#WebRoot()#/images/space.gif" width="1" height="6" alt="" border="0"/></td>
				</tr>
				<tr>
					<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND (ShowSorting EQ 'True') AND (NOT isDefined(GetSQDByNameResultDict:SearchQueryDefinition))#">
						<isset scope="request" name ="ColSpanOfPagingBar" value="#ColSpanOfPagingBar + 1#">
					</isif>
					<td colspan="<isprint value="#ColSpanOfPagingBar#" style="INTEGER">">
						<ISFlexPagingBar2 pageable="Products" variablepagesize="true" rowsperpage="#RowsPerPage#">
					</td>
				</tr>
			<iselse>
				<isif condition="#NOT(isDefined( GetSQDByNameResultDict:SearchQueryDefinition ))#">
					<isif condition="#isDefined(CurrentChannelPermissionMap:SLD_MANAGE_CATALOGS) AND ((Catalog:TypeCode != 2) OR ((NOT Category:isRootCategory) AND (NOT hasLoopElements(Category:SubCategories))))#"><!--- For classification catalogs check subcategories--->
						<tr>
							<td class="w e s" align="right">
								<table border="0" cellspacing="4" cellpadding="0">
									<tr>
										<td class="button"><input type="submit" name="AddProducts" value="#localizeText('sld_ch_consumer_plugin.Add.button')#" class="button"/></td>
									</tr>
								</table>
							</td>
						</tr>
					</isif>
				</isif>
			</isif>
		</table>
	</isif>
</isform>

<div> <!--- needed for storefrontediting --->
	<isif condition="#Category:isRootCategory#">
		<isinclude template="inc/BackToList.isml"/>
	<iselse>
		<isform action="#URL(Action('ViewChannelCatalog_52-Parent'))#" name="backToList" method="post">
			<table width="100%" border="0" cellspacing="0" cellpadding="0">
				<tr>
					<td width="100%" class="backbar_left">
						<table border="0" cellspacing="0" cellpadding="0">
							<tr>
								<td class="button">
									<input type="hidden" name="HideEmpty" value="<isprint value="#HideEmpty#">"/>
									<input type="hidden" name="CatalogID" value="<isprint value="#Catalog:Id#">"/>
									<input type="hidden" name="CatalogCategoryID" value="<isprint value="#Category:Parent:UUID#">"/>
									<input type="hidden" name="ParentPage" value="<isprint value="#ParentPage#">"/>
									<isif condition="#(Category:Parent NE null)#">
										<input type="submit" name="back" value="&lt;&lt;&nbsp;#localizeText('BrowseChannelCatalog_52.BackToParent.button')#" class="button"/>
									</isif>
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</isform>
		<isloop iterator="ApplicationState:Breadcrumbs" alias="Entry"><!--- needed to come back to pages list --->
			<isif condition="#'Pages' EQ Entry:ID#">
			<isinclude template="inc/BackToList.isml"/>
			</isif>
		</isloop>
	</isif>
</div>
<!-- EO Working Area -->