<?xml version="1.0" encoding="UTF-8"?>
<!--@Group Product-->

<pipeline:Pipeline xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pipeline="http://www.intershop.de/pipeline/2010"
    name="ProcessProductHistory">
<!--@Location 10,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode3" name="AddDeleteEntry" callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode9"/>
  </nodes>
<!--@Location 10,1-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode9" conditionKey="ProductHistoryState">
    <nodeSuccessors name="decision_yes" next="DecisionNode8"/>
<!--@BendPoints 23,3-->
    <nodeSuccessors name="decision_no" next="JoinNode10"/>
  </nodes>
<!--@Location 10,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode8" conditionKey="ProductHistoryState"
      operator="eq" conditionValue="1">
    <nodeSuccessors name="decision_yes" next="DecisionNode19"/>
    <nodeSuccessors name="decision_no" next="JoinNode10"/>
  </nodes>
<!--@Location 10,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode19" conditionKey="Product:DerivedProduct"
      operator="str_neq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="Pipelet28"/>
    <nodeSuccessors name="decision_no" next="JoinNode22"/>
  </nodes>
<!--@Location 10,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet28">
    <pipelet href="enfinity:/bc_pricing/pipelets/CreatePriceDefinitionSnapShotFromProduct.xml"/>
    <nodeSuccessors name="next" next="CallNode7"/>
  </nodes>
<!--@Location 10,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode7">
    <nodeSuccessors name="next" next="Pipelet4"/>
    <startNode referencedName="ProcessCategoryLinksSnapShot-Start"/>
  </nodes>
<!--@Location 10,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet4">
    <pipelet href="enfinity:/bc_mvc/pipelets/CreateProductSnapShotFromProduct.xml"/>
    <nodeSuccessors name="next" next="Pipelet5"/>
  </nodes>
<!--@Location 10,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet5">
    <configurationValues name="ChangeType" value="Delete"/>
    <configurationValues name="DefaultState" value="Unlocked"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateJournalEntry.xml"/>
    <nodeSuccessors name="next" next="Pipelet6"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode12"/>
    <parameterBindings name="Domain" objectPath="Product:Domain"/>
    <parameterBindings name="PersistentObject" objectPath="Product"/>
  </nodes>
<!--@Location 10,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet6">
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateJournalEntry.xml"/>
    <nodeSuccessors name="next" next="JoinNode11"/>
    <parameterBindings name="ObjectID" objectPath="Product:SKU"/>
    <parameterBindings name="ObjectName" objectPath="Product:Name"/>
    <parameterBindings name="OldSnapShot" objectPath="ProductSnapShot"/>
  </nodes>
<!--@Location 10,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode11">
    <nodeSuccessors name="next" next="EndNode3"/>
  </nodes>
<!--@Location 10,10-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode3"/>
<!--@Location 11,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode12">
<!--@BendPoints 23,19-->
    <nodeSuccessors name="next" next="JoinNode11"/>
  </nodes>
<!--@Location 11,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode22">
    <nodeSuccessors name="next" next="JoinNode12"/>
  </nodes>
<!--@Location 11,2-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode10">
    <nodeSuccessors name="next" next="JoinNode22"/>
  </nodes>
<!--@Location 7,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode2" name="AddInsertEntry" callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode7"/>
  </nodes>
<!--@Location 7,1-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode7" conditionKey="ProductHistoryState">
    <nodeSuccessors name="decision_yes" next="DecisionNode6"/>
<!--@BendPoints 17,3-->
    <nodeSuccessors name="decision_no" next="JoinNode7"/>
  </nodes>
<!--@Location 7,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode6" conditionKey="ProductHistoryState"
      operator="eq" conditionValue="1">
    <nodeSuccessors name="decision_yes" next="DecisionNode18"/>
    <nodeSuccessors name="decision_no" next="JoinNode7"/>
  </nodes>
<!--@Location 7,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode18" conditionKey="Product:DerivedProduct"
      operator="str_neq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="Pipelet27"/>
    <nodeSuccessors name="decision_no" next="JoinNode21"/>
  </nodes>
<!--@Location 7,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet27">
    <pipelet href="enfinity:/bc_pricing/pipelets/CreatePriceDefinitionSnapShotFromProduct.xml"/>
    <nodeSuccessors name="next" next="CallNode5"/>
  </nodes>
<!--@Location 7,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode5">
    <nodeSuccessors name="next" next="Pipelet2"/>
    <startNode referencedName="ProcessCategoryLinksSnapShot-Start"/>
  </nodes>
<!--@Location 7,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet2">
    <pipelet href="enfinity:/bc_mvc/pipelets/CreateProductSnapShotFromProduct.xml"/>
    <nodeSuccessors name="next" next="Pipelet3"/>
  </nodes>
<!--@Location 7,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet3">
    <configurationValues name="ChangeType" value="Insert"/>
    <configurationValues name="DefaultState" value="Unlocked"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateJournalEntry.xml"/>
    <nodeSuccessors name="next" next="Pipelet1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode9"/>
    <parameterBindings name="Domain" objectPath="Product:Domain"/>
    <parameterBindings name="PersistentObject" objectPath="Product"/>
  </nodes>
<!--@Location 7,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet1">
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateJournalEntry.xml"/>
    <nodeSuccessors name="next" next="JoinNode8"/>
    <parameterBindings name="NewSnapShot" objectPath="ProductSnapShot"/>
    <parameterBindings name="ObjectID" objectPath="Product:SKU"/>
    <parameterBindings name="ObjectName" objectPath="Product:Name"/>
  </nodes>
<!--@Location 7,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode8">
    <nodeSuccessors name="next" next="EndNode2"/>
  </nodes>
<!--@Location 7,10-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode2"/>
<!--@Location 8,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode9">
<!--@BendPoints 17,19-->
    <nodeSuccessors name="next" next="JoinNode8"/>
  </nodes>
<!--@Location 8,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode21">
    <nodeSuccessors name="next" next="JoinNode9"/>
  </nodes>
<!--@Location 8,2-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode7">
    <nodeSuccessors name="next" next="JoinNode21"/>
  </nodes>
<!--@Location 18,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode6" name="CompareSnapShots"
      callMode="Private">
    <nodeSuccessors name="next" next="CreateProductSnapShotDetailsComparers1"/>
  </nodes>
<!--@Location 18,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateProductSnapShotDetailsComparers1">
    <pipelet href="enfinity:/bc_mvc/pipelets/CreateProductSnapShotDetailsComparers.xml"/>
    <nodeSuccessors name="next" next="LoopNode2"/>
  </nodes>
<!--@Location 18,2-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode2" loop="ProductSnapShotDetailsComparers">
<!--@BendPoints 39,5 39,6-->
    <nodeSuccessors name="next" next="EndNode20"/>
    <entry key="DetailsComparer">
<!--@BendPoints 37,6-->
      <nodeSuccessors name="loop_entry_next" next="CompareProductSnapShotDetails1"/>
    </entry>
  </nodes>
<!--@Location 18,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CompareProductSnapShotDetails1">
    <pipelet href="enfinity:/bc_mvc/pipelets/CompareProductSnapShotDetails.xml"/>
<!--@BendPoints 37,8-->
    <nodeSuccessors name="next" next="ConcatenateStrings1"/>
    <parameterBindings name="NewSnapShot" objectPath="NewProductSnapShot"/>
    <parameterBindings name="OldSnapShot" objectPath="OldProductSnapShot"/>
  </nodes>
<!--@Location 18,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings1">
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="SetIndirectDictValue1"/>
    <parameterBindings name="String0" constant="Added"/>
    <parameterBindings name="String1" objectPath="DetailsComparer:DictionaryName"/>
    <parameterBindings name="String2" nullBinding="true"/>
    <parameterBindings name="String3" nullBinding="true"/>
    <parameterBindings name="String4" nullBinding="true"/>
    <parameterBindings name="String5" nullBinding="true"/>
    <parameterBindings name="String6" nullBinding="true"/>
    <parameterBindings name="String7" nullBinding="true"/>
    <parameterBindings name="String8" nullBinding="true"/>
    <parameterBindings name="String9" nullBinding="true"/>
    <returnValueBindings name="Concatenated" objectPath="AddedDetailsKeyName"/>
  </nodes>
<!--@Location 18,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetIndirectDictValue1">
    <pipelet href="enfinity:/bc_foundation/pipelets/SetIndirectDictValue.xml"/>
    <nodeSuccessors name="next" next="ConcatenateStrings2"/>
    <parameterBindings name="KeyNameHolder" objectPath="AddedDetailsKeyName"/>
    <parameterBindings name="MappedEntry" objectPath="AddedDetails"/>
  </nodes>
<!--@Location 18,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings2">
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="SetIndirectDictValue2"/>
    <parameterBindings name="String0" constant="Deleted"/>
    <parameterBindings name="String1" objectPath="DetailsComparer:DictionaryName"/>
    <parameterBindings name="String2" nullBinding="true"/>
    <parameterBindings name="String3" nullBinding="true"/>
    <parameterBindings name="String4" nullBinding="true"/>
    <parameterBindings name="String5" nullBinding="true"/>
    <parameterBindings name="String6" nullBinding="true"/>
    <parameterBindings name="String7" nullBinding="true"/>
    <parameterBindings name="String8" nullBinding="true"/>
    <parameterBindings name="String9" nullBinding="true"/>
    <returnValueBindings name="Concatenated" objectPath="DeletedDetailsKeyName"/>
  </nodes>
<!--@Location 18,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetIndirectDictValue2">
    <pipelet href="enfinity:/bc_foundation/pipelets/SetIndirectDictValue.xml"/>
    <nodeSuccessors name="next" next="ConcatenateStrings3"/>
    <parameterBindings name="KeyNameHolder" objectPath="DeletedDetailsKeyName"/>
    <parameterBindings name="MappedEntry" objectPath="DeletedDetails"/>
  </nodes>
<!--@Location 18,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings3">
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
<!--@BendPoints 37,18-->
    <nodeSuccessors name="next" next="SetIndirectDictValue3"/>
    <parameterBindings name="String0" constant="Updated"/>
    <parameterBindings name="String1" objectPath="DetailsComparer:DictionaryName"/>
    <parameterBindings name="String2" nullBinding="true"/>
    <parameterBindings name="String3" nullBinding="true"/>
    <parameterBindings name="String4" nullBinding="true"/>
    <parameterBindings name="String5" nullBinding="true"/>
    <parameterBindings name="String6" nullBinding="true"/>
    <parameterBindings name="String7" nullBinding="true"/>
    <parameterBindings name="String8" nullBinding="true"/>
    <parameterBindings name="String9" nullBinding="true"/>
    <returnValueBindings name="Concatenated" objectPath="UpdatedDetailsKeyName"/>
  </nodes>
<!--@Location 18,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetIndirectDictValue3">
    <pipelet href="enfinity:/bc_foundation/pipelets/SetIndirectDictValue.xml"/>
<!--@BendPoints 37,20 36,5-->
    <nodeSuccessors name="next" next="LoopNode2_Entry"/>
    <parameterBindings name="KeyNameHolder" objectPath="UpdatedDetailsKeyName"/>
    <parameterBindings name="MappedEntry" objectPath="UpdatedDetails"/>
  </nodes>
<!--@Location 19,3-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode20"/>
<!--@Location 1,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode1" name="CreateChangeEntry"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode1"/>
  </nodes>
<!--@Location 1,1-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode1" conditionKey="ProductHistoryState">
    <nodeSuccessors name="decision_yes" next="DecisionNode2"/>
<!--@BendPoints 5,3-->
    <nodeSuccessors name="decision_no" next="JoinNode3"/>
  </nodes>
<!--@Location 1,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode2" conditionKey="ProductHistoryState"
      operator="eq" conditionValue="1">
    <nodeSuccessors name="decision_yes" next="DecisionNode17"/>
    <nodeSuccessors name="decision_no" next="JoinNode3"/>
  </nodes>
<!--@Location 1,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode17" conditionKey="Product:DerivedProduct"
      operator="str_neq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="Pipelet25"/>
    <nodeSuccessors name="decision_no" next="JoinNode18"/>
  </nodes>
<!--@Location 1,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet25">
    <pipelet href="enfinity:/bc_pricing/pipelets/CreatePriceDefinitionSnapShotFromProduct.xml"/>
    <nodeSuccessors name="next" next="CallNode0"/>
  </nodes>
<!--@Location 1,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode0">
    <nodeSuccessors name="next" next="Pipelet8"/>
    <startNode referencedName="ProcessCategoryLinksSnapShot-Start"/>
  </nodes>
<!--@Location 1,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet8">
    <pipelet href="enfinity:/bc_mvc/pipelets/CreateProductSnapShotFromProduct.xml"/>
    <nodeSuccessors name="next" next="Pipelet9"/>
    <returnValueBindings name="ProductSnapShot" objectPath="OldProductSnapShot"/>
  </nodes>
<!--@Location 1,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet9">
    <configurationValues name="ChangeType" value="Update"/>
    <configurationValues name="DefaultState" value="Locked"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateJournalEntry.xml"/>
    <nodeSuccessors name="next" next="Pipelet7"/>
<!--@BendPoints 6,15-->
    <nodeSuccessors name="pipelet_error" next="EndNode11"/>
    <parameterBindings name="Domain" objectPath="Product:Domain"/>
    <parameterBindings name="PersistentObject" objectPath="Product"/>
  </nodes>
<!--@Location 1,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet7">
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateJournalEntry.xml"/>
    <nodeSuccessors name="next" next="JoinNode1"/>
    <parameterBindings name="LockProcessID" objectPath="Process:UUID"/>
    <parameterBindings name="ObjectID" objectPath="Product:SKU"/>
    <parameterBindings name="ObjectName" objectPath="Product:Name"/>
    <parameterBindings name="OldSnapShot" objectPath="OldProductSnapShot"/>
  </nodes>
<!--@Location 1,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode1">
    <nodeSuccessors name="next" next="EndNode1"/>
  </nodes>
<!--@Location 1,10-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode1"/>
<!--@Location 3,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode11" name="ERROR"/>
<!--@Location 2,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode18">
<!--@BendPoints 5,19-->
    <nodeSuccessors name="next" next="JoinNode1"/>
  </nodes>
<!--@Location 2,2-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode3">
    <nodeSuccessors name="next" next="JoinNode18"/>
  </nodes>
<!--@Location 20,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode11" strict="true" name="DetermineProductChanged"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode36"/>
    <parameters name="JournalEntry" type="com.intershop.component.foundation.capi.journal.JournalEntry"/>
  </nodes>
<!--@Location 20,1-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode36" conditionKey="JournalEntry:OldSnapShotData">
    <nodeSuccessors name="decision_yes" next="DecisionNode35"/>
<!--@BendPoints 43,3-->
    <nodeSuccessors name="decision_no" next="JoinNode44"/>
  </nodes>
<!--@Location 20,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode35" conditionKey="JournalEntry:NewSnapShotData">
    <nodeSuccessors name="decision_yes" next="CreateProductSnapShotFromSnapShotData3"/>
    <nodeSuccessors name="decision_no" next="JoinNode44"/>
  </nodes>
<!--@Location 20,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateProductSnapShotFromSnapShotData3">
    <pipelet href="enfinity:/bc_mvc/pipelets/CreateProductSnapShotFromSnapShotData.xml"/>
    <nodeSuccessors name="next" next="CreateProductSnapShotFromSnapShotData4"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode43"/>
    <parameterBindings name="SnapShotData" objectPath="JournalEntry:OldSnapShotData"/>
    <returnValueBindings name="ProductSnapShot" objectPath="OldProductSnapShot"/>
  </nodes>
<!--@Location 20,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateProductSnapShotFromSnapShotData4">
    <pipelet href="enfinity:/bc_mvc/pipelets/CreateProductSnapShotFromSnapShotData.xml"/>
    <nodeSuccessors name="next" next="DetermineProductSnapShotChanged2"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode42"/>
    <parameterBindings name="SnapShotData" objectPath="JournalEntry:NewSnapShotData"/>
    <returnValueBindings name="ProductSnapShot" objectPath="NewProductSnapShot"/>
  </nodes>
<!--@Location 20,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DetermineProductSnapShotChanged2">
    <pipelet href="enfinity:/bc_mvc/pipelets/DetermineProductSnapShotChanged.xml"/>
    <nodeSuccessors name="next" next="JoinNode23"/>
    <parameterBindings name="NewSnapShot" objectPath="NewProductSnapShot"/>
    <parameterBindings name="OldSnapShot" objectPath="OldProductSnapShot"/>
  </nodes>
<!--@Location 20,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode23">
    <nodeSuccessors name="next" next="EndNode14"/>
  </nodes>
<!--@Location 20,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode14" strict="true">
    <returnValues name="ProductChanged" type="java.lang.Boolean" optional="true"/>
  </nodes>
<!--@Location 21,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode42">
<!--@BendPoints 43,9 43,13-->
    <nodeSuccessors name="next" next="JoinNode23"/>
  </nodes>
<!--@Location 21,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode43">
    <nodeSuccessors name="next" next="JoinNode42"/>
  </nodes>
<!--@Location 21,2-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode44">
    <nodeSuccessors name="next" next="JoinNode43"/>
  </nodes>
<!--@Location 1,13-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode13" strict="true" name="FilterJournalEntries"
      callMode="Private">
    <nodeSuccessors name="next" next="CreateIteratorFromPageable1"/>
    <parameters name="JournalEntries" type="com.intershop.beehive.core.capi.paging.PageableIterator"/>
  </nodes>
<!--@Location 1,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateIteratorFromPageable1">
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateIteratorFromPageable.xml"/>
    <nodeSuccessors name="next" next="AddObjectToVector2"/>
    <parameterBindings name="PageableIterator" objectPath="JournalEntries"/>
    <returnValueBindings name="ResettableIterator" objectPath="JournalEntries"/>
  </nodes>
<!--@Location 1,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector2">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="DecisionNode42"/>
    <parameterBindings name="InVector" nullBinding="true"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="HistoryEntriesIterator"/>
    <returnValueBindings name="OutVector" objectPath="HistoryEntries"/>
  </nodes>
<!--@Location 1,16-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode42" conditionKey="JournalEntries"
      operator="has_elements">
<!--@BendPoints 3,34-->
    <nodeSuccessors name="decision_yes" next="LoopNode1"/>
<!--@BendPoints 7,33-->
    <nodeSuccessors name="decision_no" next="JoinNode60"/>
  </nodes>
<!--@Location 1,17-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode1" loop="JournalEntries">
    <nodeSuccessors name="next" next="JoinNode60"/>
    <entry key="JournalEntry">
      <nodeSuccessors name="loop_entry_next" next="DecisionNode44"/>
    </entry>
  </nodes>
<!--@Location 1,18-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode44" conditionKey="JournalEntry:ProductChanged">
    <nodeSuccessors name="decision_yes" next="DecisionNode43"/>
<!--@BendPoints 5,37-->
    <nodeSuccessors name="decision_no" next="JoinNode61"/>
  </nodes>
<!--@Location 1,19-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode43" conditionKey="JournalEntry:ProductChanged"
      operator="eq" conditionValue="1">
    <nodeSuccessors name="decision_yes" next="JoinNode24"/>
    <nodeSuccessors name="decision_no" next="JoinNode61"/>
  </nodes>
<!--@Location 1,21-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode24">
<!--@BendPoints 3,44-->
    <nodeSuccessors name="next" next="Pipelet45"/>
  </nodes>
<!--@Location 1,22-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet45">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode25"/>
    <parameterBindings name="InVector" objectPath="HistoryEntries"/>
    <parameterBindings name="Object" objectPath="JournalEntry"/>
    <returnValueBindings name="Iterator" objectPath="HistoryEntriesIterator"/>
    <returnValueBindings name="OutVector" objectPath="HistoryEntries"/>
  </nodes>
<!--@Location 1,23-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode25">
<!--@BendPoints 2,47 2,35-->
    <nodeSuccessors name="next" next="LoopNode1_Entry"/>
  </nodes>
<!--@Location 2,19-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode61">
    <nodeSuccessors name="next" next="DecisionNode16"/>
  </nodes>
<!--@Location 2,20-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode16" conditionKey="JournalEntry:ProcessName"
      operator="str_eq" conditionValue="Synchronization">
<!--@BendPoints 5,43-->
    <nodeSuccessors name="decision_yes" next="JoinNode24"/>
<!--@BendPoints 6,41 6,47-->
    <nodeSuccessors name="decision_no" next="JoinNode25"/>
  </nodes>
<!--@Location 3,17-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode60">
<!--@BendPoints 7,36-->
    <nodeSuccessors name="next" next="CreatePageableFromIterator1"/>
  </nodes>
<!--@Location 3,18-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreatePageableFromIterator1">
    <configurationValues name="PageableName" value="JournalEntries"/>
    <configurationValues name="Pagesize" value="15"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreatePageableFromIterator.xml"/>
<!--@BendPoints 7,38-->
    <nodeSuccessors name="next" next="EndNode19"/>
    <parameterBindings name="Iterator" objectPath="HistoryEntriesIterator"/>
    <returnValueBindings name="Pageable" objectPath="JournalEntries"/>
  </nodes>
<!--@Location 3,19-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode19" name="END" strict="true">
    <returnValues name="JournalEntries" type="com.intershop.beehive.core.capi.paging.PageableIterator"/>
  </nodes>
<!--@Location 13,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode5" name="PrepareData" callMode="Private">
    <nodeSuccessors name="next" next="Pipelet11"/>
  </nodes>
<!--@Location 13,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet11">
    <configurationValues name="DefaultPreferenceKey" value="JournalState"/>
    <configurationValues name="Type" value="Integer"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="Pipelet13"/>
<!--@BendPoints 33,3-->
    <nodeSuccessors name="pipelet_error" next="JoinNode2"/>
    <returnValueBindings name="PreferenceIntValue" objectPath="ProductHistoryState"/>
  </nodes>
<!--@Location 13,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet13">
    <configurationValues name="DefaultPreferenceKey" value="JournalLifetime"/>
    <configurationValues name="Type" value="Integer"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="DecisionNode13"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode2"/>
    <returnValueBindings name="PreferenceIntValue" objectPath="JournalLifetime"/>
  </nodes>
<!--@Location 13,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode13" conditionKey="UserID">
<!--@BendPoints 27,15-->
    <nodeSuccessors name="decision_yes" next="JoinNode4"/>
<!--@BendPoints 29,7-->
    <nodeSuccessors name="decision_no" next="DecisionNode3"/>
  </nodes>
<!--@Location 14,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode4">
    <nodeSuccessors name="next" next="EndNode5"/>
  </nodes>
<!--@Location 14,8-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode5"/>
<!--@Location 14,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode3" conditionKey="CurrentUser">
    <nodeSuccessors name="decision_yes" next="DecisionNode10"/>
<!--@BendPoints 31,9-->
    <nodeSuccessors name="decision_no" next="JoinNode13"/>
  </nodes>
<!--@Location 14,5-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode10" conditionKey="CurrentUser:Profile">
    <nodeSuccessors name="decision_yes" next="Pipelet33"/>
    <nodeSuccessors name="decision_no" next="JoinNode13"/>
  </nodes>
<!--@Location 14,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet33">
    <configurationValues name="DefaultString0" value=""/>
    <configurationValues name="DefaultString1" value=""/>
    <configurationValues name="DefaultString2" value=""/>
    <configurationValues name="DefaultString4" value=""/>
    <configurationValues name="DefaultString6" value=""/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="JoinNode4"/>
    <parameterBindings name="String0" objectPath="CurrentUser:Profile:BasicCredentials:Login"/>
    <parameterBindings name="String1" constant=" "/>
    <parameterBindings name="String2" constant="("/>
    <parameterBindings name="String3" objectPath="CurrentUser:Profile:FirstName"/>
    <parameterBindings name="String4" constant=" "/>
    <parameterBindings name="String5" objectPath="CurrentUser:Profile:LastName"/>
    <parameterBindings name="String6" constant=")"/>
    <returnValueBindings name="Concatenated" objectPath="UserID"/>
  </nodes>
<!--@Location 15,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode13">
    <nodeSuccessors name="next" next="Pipelet15"/>
  </nodes>
<!--@Location 15,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet15">
    <configurationValues name="Name" value="UserID"/>
    <configurationValues name="Value" value="System"/>
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 31,15-->
    <nodeSuccessors name="next" next="JoinNode4"/>
  </nodes>
<!--@Location 16,2-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode2">
    <nodeSuccessors name="next" next="EndNode6"/>
  </nodes>
<!--@Location 16,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode6"/>
<!--@Location 25,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode8" name="SaveProductSnapShot"
      callMode="Private">
    <nodeSuccessors name="next" next="Pipelet36"/>
  </nodes>
<!--@Location 25,1-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet36">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetRepositoryByRepositoryDomain.xml"/>
    <nodeSuccessors name="next" next="DecisionNode14"/>
    <parameterBindings name="RepositoryDomain" objectPath="Product:Domain"/>
    <returnValueBindings name="Repository" objectPath="PreferenceRepository"/>
  </nodes>
<!--@Location 25,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode14" conditionKey="PreferenceRepository:TypeCode"
      operator="eq" conditionValue="21">
    <nodeSuccessors name="decision_yes" next="Pipelet34"/>
<!--@BendPoints 53,5-->
    <nodeSuccessors name="decision_no" next="Pipelet37"/>
  </nodes>
<!--@Location 25,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet34">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="JoinNode20"/>
    <parameterBindings name="InValue_1" objectPath="Organization:Domain"/>
    <parameterBindings name="InValue_2" objectPath="Process:UUID"/>
    <returnValueBindings name="OutValue_1" objectPath="PreferenceDomain"/>
    <returnValueBindings name="OutValue_2" objectPath="LockProcessID"/>
  </nodes>
<!--@Location 25,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode20">
    <nodeSuccessors name="next" next="CallNode2"/>
  </nodes>
<!--@Location 25,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode2">
    <nodeSuccessors name="next" next="Pipelet35"/>
    <startNode referencedName="ProcessProductHistory-PrepareData"/>
  </nodes>
<!--@Location 25,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet35">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetJournalEntryByProcessUUID.xml"/>
    <nodeSuccessors name="next" next="JoinNode16"/>
<!--@BendPoints 53,13-->
    <nodeSuccessors name="pipelet_error" next="CallNode4"/>
    <parameterBindings name="JournalEntryProcessUUID" objectPath="LockProcessID"/>
  </nodes>
<!--@Location 25,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode16">
    <nodeSuccessors name="next" next="CallNode3"/>
  </nodes>
<!--@Location 25,9-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode3">
<!--@BendPoints 51,20-->
    <nodeSuccessors name="next" next="EndNode10"/>
    <startNode referencedName="ProcessProductHistory-UpdateChangeEntry"/>
  </nodes>
<!--@Location 25,10-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode10"/>
<!--@Location 26,7-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode4">
<!--@BendPoints 53,17-->
    <nodeSuccessors name="next" next="JoinNode16"/>
    <startNode referencedName="ProcessProductHistory-CreateChangeEntry"/>
  </nodes>
<!--@Location 26,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet37">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 53,9-->
    <nodeSuccessors name="next" next="JoinNode20"/>
    <parameterBindings name="InValue_1" objectPath="Product:Domain"/>
    <parameterBindings name="InValue_2" objectPath="Process:UUID"/>
    <returnValueBindings name="OutValue_1" objectPath="PreferenceDomain"/>
    <returnValueBindings name="OutValue_2" objectPath="LockProcessID"/>
  </nodes>
<!--@Location 23,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode7" name="Search" callMode="Private">
    <nodeSuccessors name="next" next="Call1"/>
  </nodes>
<!--@Location 23,1-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call1" callModePermissions="Private">
<!--@BendPoints 47,4-->
    <nodeSuccessors name="next" next="Pipelet29"/>
    <startNode objectPath="DetermineRepositoriesPipeline"/>
  </nodes>
<!--@Location 23,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet29">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckForEmptyString.xml"/>
    <nodeSuccessors name="next" next="CreateStringSplitter0"/>
<!--@BendPoints 49,5 49,15-->
    <nodeSuccessors name="pipelet_error" next="JoinNode14"/>
    <parameterBindings name="FilledString" objectPath="changed_by"/>
  </nodes>
<!--@Location 23,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateStringSplitter0">
    <configurationValues name="Mode" value="Last Occurrence"/>
    <configurationValues name="Separator" value="/"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateStringSplitter.xml"/>
    <nodeSuccessors name="next" next="DecisionNode0"/>
    <returnValueBindings name="Splitter" objectPath="ChangedBySplitter"/>
  </nodes>
<!--@Location 22,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode0" conditionKey="ChangedBySplitter:Begin(changed_by)"
      operator="str_empty">
    <nodeSuccessors name="decision_yes" next="VerifySearchTerm2"/>
<!--@BendPoints 47,9-->
    <nodeSuccessors name="decision_no" next="VerifySearchTerm0"/>
  </nodes>
<!--@Location 22,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="VerifySearchTerm2">
    <configurationValues name="AllowFuzzySearch" value="false"/>
    <configurationValues name="AllowWildcards" value="Multi &amp; Single"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifySearchTerm.xml"/>
<!--@BendPoints 45,15-->
    <nodeSuccessors name="next" next="JoinNode14"/>
<!--@BendPoints 46,14-->
    <nodeSuccessors name="pipelet_error" next="JoinNode14"/>
    <parameterBindings name="UserSearchTerm" objectPath="changed_by"/>
    <returnValueBindings name="SearchExpression" objectPath="ChangedByExpression"/>
  </nodes>
<!--@Location 23,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode14">
    <nodeSuccessors name="next" next="Decision2"/>
  </nodes>
<!--@Location 23,8-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision2" conditionKey="all_repositories"
      operator="undef">
    <nodeSuccessors name="decision_yes" next="Join1"/>
    <nodeSuccessors name="decision_no" next="RemoveDictionaryValue2"/>
  </nodes>
<!--@Location 23,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join1">
    <nodeSuccessors name="next" next="DecisionNode12"/>
  </nodes>
<!--@Location 23,10-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode12" conditionKey="RepositoryFilter">
    <nodeSuccessors name="decision_yes" next="DecisionNode15"/>
<!--@BendPoints 49,21-->
    <nodeSuccessors name="decision_no" next="JoinNode15"/>
  </nodes>
<!--@Location 23,11-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode15" conditionKey="RepositoryFilter"
      operator="str_eq" conditionValue="ContainsOffer">
    <nodeSuccessors name="decision_yes" next="DecisionNode11"/>
<!--@BendPoints 49,23-->
    <nodeSuccessors name="decision_no" next="JoinNode15"/>
  </nodes>
<!--@Location 23,12-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode11" conditionKey="FilterDomain">
    <nodeSuccessors name="decision_yes" next="SetDictionaryValue1"/>
    <nodeSuccessors name="decision_no" next="JoinNode15"/>
  </nodes>
<!--@Location 23,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue1">
    <configurationValues name="Name" value="FilterDomainID"/>
    <configurationValues name="Value" value="FilterDomain:DomainID"/>
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode17"/>
  </nodes>
<!--@Location 23,14-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode17">
    <nodeSuccessors name="next" next="AddMultipleEntriesToMap0"/>
  </nodes>
<!--@Location 23,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddMultipleEntriesToMap0">
    <configurationValues name="Mode" value="OverwriteValue"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddMultipleEntriesToMap.xml"/>
    <nodeSuccessors name="next" next="AddMultipleEntriesToMap1"/>
    <parameterBindings name="InMap" nullBinding="true"/>
    <parameterBindings name="Key1" constant="Repositories"/>
    <parameterBindings name="Key2" constant="FilterDomainID"/>
    <parameterBindings name="Key3" constant="ChangeType"/>
    <parameterBindings name="Key4" constant="ChangedSince"/>
    <parameterBindings name="Key5" constant="ChangedByExpression"/>
    <parameterBindings name="Value1" objectPath="Repositories"/>
    <parameterBindings name="Value2" objectPath="FilterDomainID"/>
    <parameterBindings name="Value3" objectPath="change_type"/>
    <parameterBindings name="Value4" objectPath="changed_since"/>
    <parameterBindings name="Value5" objectPath="ChangedByExpression"/>
    <returnValueBindings name="OutMap" objectPath="QueryParams"/>
  </nodes>
<!--@Location 23,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddMultipleEntriesToMap1">
    <configurationValues name="Mode" value="OverwriteValue"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddMultipleEntriesToMap.xml"/>
    <nodeSuccessors name="next" next="ExecutePageableQuery2"/>
    <parameterBindings name="InMap" objectPath="QueryParams"/>
    <parameterBindings name="Key1" constant="ProcessNameExpression"/>
    <parameterBindings name="Key2" constant="UserIDExpression"/>
    <parameterBindings name="Value1" objectPath="ProcessNameExpression"/>
    <parameterBindings name="Value2" objectPath="UserIDExpression"/>
    <returnValueBindings name="OutMap" objectPath="QueryParams"/>
  </nodes>
<!--@Location 23,17-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExecutePageableQuery2">
    <configurationValues name="DefaultPageSize" value="15"/>
    <configurationValues name="QueryName" value="product/GetJournalEntries"/>
    <pipelet href="enfinity:/core/pipelets/ExecutePageableQuery.xml"/>
<!--@BendPoints 47,36-->
    <nodeSuccessors name="next" next="EndNode9"/>
<!--@BendPoints 49,35 49,36-->
    <nodeSuccessors name="pipelet_error" next="EndNode8"/>
    <parameterBindings name="Connection" nullBinding="true"/>
    <parameterBindings name="PageSize" nullBinding="true"/>
    <parameterBindings name="Parameters" objectPath="QueryParams"/>
    <parameterBindings name="Query" nullBinding="true"/>
    <returnValueBindings name="SearchResult" objectPath="JournalEntries"/>
  </nodes>
<!--@Location 23,18-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode9"/>
<!--@Location 24,18-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode8" name="ERROR"/>
<!--@Location 24,12-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode15">
<!--@BendPoints 49,29-->
    <nodeSuccessors name="next" next="JoinNode17"/>
  </nodes>
<!--@Location 24,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemoveDictionaryValue2">
    <configurationValues name="Key" value="all_repositories"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/RemoveDictionaryValue.xml"/>
<!--@BendPoints 49,19-->
    <nodeSuccessors name="next" next="Join1"/>
  </nodes>
<!--@Location 23,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="VerifySearchTerm0">
    <configurationValues name="AllowFuzzySearch" value="false"/>
    <configurationValues name="AllowWildcards" value="Multi &amp; Single"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifySearchTerm.xml"/>
    <nodeSuccessors name="next" next="VerifySearchTerm1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode14"/>
    <parameterBindings name="UserSearchTerm" objectPath="ChangedBySplitter:Begin(changed_by)"/>
    <returnValueBindings name="SearchExpression" objectPath="ProcessNameExpression"/>
  </nodes>
<!--@Location 23,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="VerifySearchTerm1">
    <configurationValues name="AllowFuzzySearch" value="false"/>
    <configurationValues name="AllowWildcards" value="Multi &amp; Single"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifySearchTerm.xml"/>
    <nodeSuccessors name="next" next="JoinNode14"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode14"/>
    <parameterBindings name="UserSearchTerm" objectPath="ChangedBySplitter:End(changed_by)"/>
    <returnValueBindings name="SearchExpression" objectPath="UserIDExpression"/>
  </nodes>
<!--@Location 4,0-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode4" name="UpdateChangeEntry"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode5"/>
  </nodes>
<!--@Location 4,1-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode5" conditionKey="ProductHistoryState">
    <nodeSuccessors name="decision_yes" next="DecisionNode4"/>
<!--@BendPoints 11,3-->
    <nodeSuccessors name="decision_no" next="JoinNode5"/>
  </nodes>
<!--@Location 4,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode4" conditionKey="ProductHistoryState"
      operator="eq" conditionValue="1">
    <nodeSuccessors name="decision_yes" next="DecisionNode20"/>
    <nodeSuccessors name="decision_no" next="JoinNode5"/>
  </nodes>
<!--@Location 4,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode20" conditionKey="Product:DerivedProduct"
      operator="str_neq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="Pipelet26"/>
    <nodeSuccessors name="decision_no" next="JoinNode19"/>
  </nodes>
<!--@Location 4,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet26">
    <pipelet href="enfinity:/bc_pricing/pipelets/CreatePriceDefinitionSnapShotFromProduct.xml"/>
    <nodeSuccessors name="next" next="CallNode1"/>
  </nodes>
<!--@Location 4,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode1">
    <nodeSuccessors name="next" next="Pipelet10"/>
    <startNode referencedName="ProcessCategoryLinksSnapShot-Start"/>
  </nodes>
<!--@Location 4,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet10">
    <pipelet href="enfinity:/bc_mvc/pipelets/CreateProductSnapShotFromProduct.xml"/>
    <nodeSuccessors name="next" next="Pipelet12"/>
    <returnValueBindings name="ProductSnapShot" objectPath="NewProductSnapShot"/>
  </nodes>
<!--@Location 4,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet12">
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateJournalEntry.xml"/>
    <nodeSuccessors name="next" next="Pipelet14"/>
    <parameterBindings name="LockProcessID" objectPath="Process:UUID"/>
    <parameterBindings name="NewSnapShot" objectPath="NewProductSnapShot"/>
  </nodes>
<!--@Location 4,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet14">
    <configurationValues name="State" value="Unlocked"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetJournalEntryState.xml"/>
    <nodeSuccessors name="next" next="CallNode6"/>
  </nodes>
<!--@Location 4,9-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode6">
    <nodeSuccessors name="next" next="DecisionNode32"/>
    <startNode referencedName="ProcessProductHistory-DetermineProductChanged"/>
  </nodes>
<!--@Location 4,10-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode32" conditionKey="ProductChanged"
      operator="str_eq" conditionValue="true">
<!--@BendPoints 9,22-->
    <nodeSuccessors name="decision_yes" next="UpdateCustomAttribute1"/>
    <nodeSuccessors name="decision_no" next="RemoveCustomAttribute2"/>
  </nodes>
<!--@Location 4,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateCustomAttribute1">
    <configurationValues name="DefaultAttributeName" value="ProductChanged"/>
    <configurationValues name="DefaultAttributeType" value="Integer"/>
    <configurationValues name="DefaultAttributeValue" value="1"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateCustomAttribute.xml"/>
    <nodeSuccessors name="next" next="JoinNode6"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode40"/>
    <parameterBindings name="AttributeName" nullBinding="true"/>
    <parameterBindings name="AttributeType" nullBinding="true"/>
    <parameterBindings name="AttributeValue" nullBinding="true"/>
    <parameterBindings name="ExtensibleObject" objectPath="JournalEntry"/>
    <parameterBindings name="LocaleInformation" nullBinding="true"/>
  </nodes>
<!--@Location 4,12-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode6">
<!--@BendPoints 9,26-->
    <nodeSuccessors name="next" next="EndNode4"/>
  </nodes>
<!--@Location 4,13-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode4"/>
<!--@Location 6,11-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode40">
<!--@BendPoints 13,23 13,25-->
    <nodeSuccessors name="next" next="JoinNode6"/>
  </nodes>
<!--@Location 5,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemoveCustomAttribute2">
    <configurationValues name="DefaultAttributeName" value="ProductChanged"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/RemoveCustomAttribute.xml"/>
    <nodeSuccessors name="next" next="JoinNode53"/>
    <parameterBindings name="AttributeName" constant="ProductChanged"/>
    <parameterBindings name="ExtensibleObject" objectPath="JournalEntry"/>
  </nodes>
<!--@Location 6,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode53">
    <nodeSuccessors name="next" next="JoinNode40"/>
  </nodes>
<!--@Location 5,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode19">
<!--@BendPoints 11,18 13,18-->
    <nodeSuccessors name="next" next="JoinNode53"/>
  </nodes>
<!--@Location 5,2-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode5">
    <nodeSuccessors name="next" next="JoinNode19"/>
  </nodes>
</pipeline:Pipeline>
