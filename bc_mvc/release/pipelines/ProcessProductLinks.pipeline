<?xml version="1.0" encoding="UTF-8"?>
<!--all functionality dealing with productLinks
@Group Product-->

<pipeline:Pipeline xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pipeline="http://www.intershop.de/pipeline/2010"
    name="ProcessProductLinks" type="process">
<!--New Start Node uses
LinkTypeSummary
Objects instead of
TypeCodeNames
doesn't do the 
unnecessary loop
@Location 9,13-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode1"/>
<!--@Location 7,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start2" strict="true" name="Create"
      callMode="Private">
    <nodeSuccessors name="next" next="Loop1"/>
    <parameters name="SourceProduct" type="com.intershop.beehive.xcs.capi.product.Product"/>
    <parameters name="ProductIDs" type="java.util.Iterator"/>
    <parameters name="TypeCodeName" type="java.lang.String"/>
  </nodes>
<!--@Location 7,2-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="Loop1" loop="ProductIDs">
<!--@BendPoints 17,5-->
    <nodeSuccessors name="next" next="Touch1"/>
    <entry key="TargetProductID">
      <nodeSuccessors name="loop_entry_next" next="GetProductByUUID5"/>
    </entry>
  </nodes>
<!--@Location 7,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetProductByUUID5">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetProductByUUID.xml"/>
    <nodeSuccessors name="next" next="CreateProductLink1"/>
<!--@BendPoints 16,7 16,13-->
    <nodeSuccessors name="pipelet_error" next="Join2"/>
    <parameterBindings name="ProductDomain" objectPath="SourceProduct:Domain"/>
    <parameterBindings name="ProductUUID" objectPath="TargetProductID"/>
    <returnValueBindings name="Product" objectPath="TargetProduct"/>
  </nodes>
<!--@Location 7,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateProductLink1">
    <configurationValues name="Type" value="ES_Replacement"/>
    <pipelet href="enfinity:/bc_mvc/pipelets/CreateProductLink.xml"/>
    <nodeSuccessors name="next" next="AddProductLinkPosition1"/>
    <parameterBindings name="Domain" objectPath="SourceProduct:Domain"/>
    <parameterBindings name="LinkType" objectPath="TypeCodeName"/>
  </nodes>
<!--@Location 7,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddProductLinkPosition1">
    <configurationValues name="InitialProsition" value="End"/>
    <pipelet href="enfinity:/bc_mvc/pipelets/AddProductLinkPosition.xml"/>
    <nodeSuccessors name="next" next="Join2"/>
  </nodes>
<!--@Location 7,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join2">
<!--@BendPoints 14,13 14,5-->
    <nodeSuccessors name="next" next="Loop1_Entry"/>
  </nodes>
<!--@Location 8,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Touch1">
    <pipelet href="enfinity:/bc_foundation/pipelets/Touch.xml"/>
    <nodeSuccessors name="next" next="Touch0"/>
    <parameterBindings name="Object" objectPath="SourceProduct"/>
  </nodes>
<!--@Location 8,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Touch0">
    <pipelet href="enfinity:/bc_foundation/pipelets/Touch.xml"/>
    <nodeSuccessors name="next" next="End7"/>
    <parameterBindings name="Object" objectPath="TargetProduct"/>
  </nodes>
<!--@Location 8,5-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End7"/>
<!--Creates product links for multiple source products. Source product is a product which gets a link to a product.
@Location 20,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode11" strict="true" name="CreateForMultipleSourceProducts"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode16"/>
    <parameters name="SourceProducts" type="java.util.Collection"/>
    <parameters name="LinkType" type="java.lang.String"/>
<!--The products which will be linked to the source products.-->
    <parameters name="TargetProducts" type="java.util.Iterator"/>
    <parameters name="LinkDomain" type="com.intershop.beehive.core.capi.domain.Domain"/>
  </nodes>
<!--@Location 20,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode16" conditionKey="SourceProducts"
      operator="has_elements">
<!--@BendPoints 41,6-->
    <nodeSuccessors name="decision_yes" next="DecisionNode23"/>
    <nodeSuccessors name="decision_no" next="SetDictionaryValue0"/>
  </nodes>
<!--@Location 20,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode23" conditionKey="TargetProducts"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="GetCurrentDate0"/>
    <nodeSuccessors name="decision_no" next="SetDictionaryValue1"/>
  </nodes>
<!--@Location 20,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetCurrentDate0">
    <configurationValues name="ForceApplicationServerTimeZone" value="false"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetCurrentDate.xml"/>
    <nodeSuccessors name="next" next="LoopNode11" action="begin"/>
  </nodes>
<!--@Location 20,5-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode11" loop="SourceProducts">
    <nodeSuccessors name="next" next="EndNode11" action="commit"/>
    <entry key="SourceProduct">
      <nodeSuccessors name="loop_entry_next" next="DecisionNode13"/>
    </entry>
  </nodes>
<!--@Location 20,6-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode13" conditionKey="SourceProduct:Extension(&quot;PersistentObjectBOExtension&quot;)">
<!--@BendPoints 43,13-->
    <nodeSuccessors name="decision_yes" next="KeyMapper4"/>
    <nodeSuccessors name="decision_no" next="JoinNode14"/>
  </nodes>
<!--@Location 21,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper4">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="JoinNode14"/>
    <parameterBindings name="InValue_1" objectPath="SourceProduct:Extension(&quot;PersistentObjectBOExtension&quot;):PersistentObject"/>
    <returnValueBindings name="OutValue_1" objectPath="SourceProduct"/>
  </nodes>
<!--@Location 20,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode14">
    <nodeSuccessors name="next" next="CallNode10"/>
  </nodes>
<!--@Location 20,8-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode10">
    <nodeSuccessors name="next" next="LoopNode10"/>
    <nodeSuccessors name="LOCKED" next="CreateLogEntry2"/>
    <parameterBindings name="CheckedUserID" objectPath="CurrentUser:ID"/>
    <parameterBindings name="Product" objectPath="SourceProduct"/>
    <startNode referencedName="ProcessProductLock-CheckUnlocked"/>
  </nodes>
<!--@Location 20,10-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode10" loop="TargetProducts">
<!--@BendPoints 44,21 44,31-->
    <nodeSuccessors name="next" next="BatchCacheClear1"/>
    <entry key="TargetProduct">
      <nodeSuccessors name="loop_entry_next" next="DecisionNode14"/>
    </entry>
  </nodes>
<!--@Location 20,11-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode14" conditionKey="TargetProduct:Extension(&quot;PersistentObjectBOExtension&quot;)">
<!--@BendPoints 43,23-->
    <nodeSuccessors name="decision_yes" next="KeyMapper5"/>
    <nodeSuccessors name="decision_no" next="JoinNode16"/>
  </nodes>
<!--@Location 21,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper5">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="JoinNode16"/>
    <parameterBindings name="InValue_1" objectPath="TargetProduct:Extension(&quot;PersistentObjectBOExtension&quot;):PersistentObject"/>
    <returnValueBindings name="OutValue_1" objectPath="TargetProduct"/>
  </nodes>
<!--@Location 20,12-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode16">
    <nodeSuccessors name="next" next="CallNode11"/>
  </nodes>
<!--@Location 20,13-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode11">
    <nodeSuccessors name="next" next="CreateProductLink2"/>
    <nodeSuccessors name="LOCKED" next="CreateLogEntry3"/>
    <parameterBindings name="CheckedUserID" objectPath="CurrentUser:ID"/>
    <parameterBindings name="Product" objectPath="TargetProduct"/>
    <startNode referencedName="ProcessProductLock-CheckUnlocked"/>
  </nodes>
<!--@Location 20,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateProductLink2">
    <pipelet href="enfinity:/bc_mvc/pipelets/CreateProductLink.xml"/>
<!--@BendPoints 35,29-->
    <nodeSuccessors name="next" next="JoinNode27"/>
    <parameterBindings name="Domain" objectPath="LinkDomain"/>
    <parameterBindings name="LinkType" objectPath="LinkType"/>
  </nodes>
<!--@Location 17,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode27">
<!--@BendPoints 35,21-->
    <nodeSuccessors name="next" next="LoopNode10_Entry"/>
  </nodes>
<!--@Location 18,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateLogEntry3">
    <configurationValues name="LogLevel" value="Warn"/>
    <configurationValues name="MessageKey" value="bc_foundation.ProductIsCurrentlyBeingEditedByAnotherUser"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateLogEntry.xml"/>
    <nodeSuccessors name="next" next="JoinNode27"/>
    <parameterBindings name="Object0" objectPath="TargetProduct:Name"/>
  </nodes>
<!--@Location 20,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="BatchCacheClear1">
    <pipelet href="enfinity:/core/pipelets/BatchCacheClear.xml"/>
<!--@BendPoints 33,31-->
    <nodeSuccessors name="next" next="JoinNode26"/>
    <parameterBindings name="CacheClearProcessID" nullBinding="true"/>
    <parameterBindings name="ClassNames" nullBinding="true"/>
    <parameterBindings name="DesiredCacheClearDate" objectPath="CurrentDate"/>
    <parameterBindings name="Object" objectPath="SourceProduct"/>
    <parameterBindings name="Objects" nullBinding="true"/>
  </nodes>
<!--@Location 16,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode26">
<!--@BendPoints 33,11-->
    <nodeSuccessors name="next" next="LoopNode11_Entry"/>
  </nodes>
<!--@Location 18,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateLogEntry2">
    <configurationValues name="LogLevel" value="Warn"/>
    <configurationValues name="MessageKey" value="bc_foundation.ProductIsCurrentlyBeingEditedByAnotherUser"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateLogEntry.xml"/>
    <nodeSuccessors name="next" next="JoinNode26"/>
    <parameterBindings name="Object0" objectPath="SourceProduct:Name"/>
  </nodes>
<!--@Location 21,5-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode11" strict="true"/>
<!--@Location 21,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue1">
    <configurationValues name="Name" value="ErrorCode"/>
    <configurationValues name="Value" value="TargetProductsMissing"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 45,7-->
    <nodeSuccessors name="next" next="JoinNode25"/>
  </nodes>
<!--@Location 22,2-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode25">
    <nodeSuccessors name="next" next="EndNode12"/>
  </nodes>
<!--Describes what is the cause for the error with an error code.
@Location 23,2-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode12" name="Error" strict="true">
<!--Code abbreviation which describes what is the cause for the error.-->
    <returnValues name="ErrorCode" type="java.lang.String"/>
  </nodes>
<!--@Location 21,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue0">
    <configurationValues name="Name" value="ErrorCode"/>
    <configurationValues name="Value" value="SourceProductsMissing"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode25"/>
  </nodes>
<!--@Location 13,20-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode1" strict="true" name="FilterSharedProduct"
      callMode="Private">
    <nodeSuccessors name="next" next="CreateProductSharingHelper1"/>
    <parameters name="LinkProducts" type="java.util.Iterator" optional="true"/>
    <parameters name="ProductDomain" type="com.intershop.beehive.core.capi.domain.Domain"
        optional="true"/>
  </nodes>
<!--@Location 13,21-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateProductSharingHelper1">
    <pipelet href="enfinity:/xcs/pipelets/CreateProductSharingHelper.xml"/>
    <nodeSuccessors name="next" next="LoopNode3"/>
    <parameterBindings name="Domain" objectPath="ProductDomain"/>
  </nodes>
<!--@Location 13,22-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode3" loop="LinkProducts">
<!--@BendPoints 28,45-->
    <nodeSuccessors name="next" next="EndNode2"/>
    <entry key="LinkProduct">
      <nodeSuccessors name="loop_entry_next" next="KeyMapper1"/>
    </entry>
  </nodes>
<!--@Location 13,23-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper1">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="DecisionNode5"/>
    <parameterBindings name="InValue_1" objectPath="LinkProduct:TargetProduct"/>
    <returnValueBindings name="OutValue_1" objectPath="TargetProduct"/>
  </nodes>
<!--@Location 13,24-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode5" conditionKey="TargetProduct:isDerivedProduct"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="ToString1"/>
<!--@BendPoints 28,49 28,55-->
    <nodeSuccessors name="decision_no" next="JoinNode8"/>
  </nodes>
<!--@Location 13,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ToString1">
    <pipelet href="enfinity:/bc_foundation/pipelets/ToString.xml"/>
    <nodeSuccessors name="next" next="DecisionNode4"/>
    <parameterBindings name="Object1" objectPath="ProductSharingHelper:SharedProduct(TargetProduct:BaseProduct)"/>
    <returnValueBindings name="String1" objectPath="isShared"/>
  </nodes>
<!--@Location 13,26-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode4" conditionKey="isShared"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="JoinNode8"/>
<!--@BendPoints 26,47-->
    <nodeSuccessors name="decision_no" next="JoinNode7"/>
  </nodes>
<!--@Location 13,27-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode8">
<!--@BendPoints 27,56-->
    <nodeSuccessors name="next" next="Pipelet1"/>
  </nodes>
<!--@Location 13,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet1">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
<!--@BendPoints 26,51 25,51-->
    <nodeSuccessors name="next" next="JoinNode7"/>
    <parameterBindings name="InVector" objectPath="SharedProductLinks"/>
    <parameterBindings name="Object" objectPath="LinkProduct"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="SharedProductLinksIterator"/>
    <returnValueBindings name="OutVector" objectPath="SharedProductLinks"/>
  </nodes>
<!--@Location 12,23-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode7">
<!--@BendPoints 25,45-->
    <nodeSuccessors name="next" next="LoopNode3_Entry"/>
  </nodes>
<!--@Location 14,22-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode2" strict="true">
    <returnValues name="SharedProductLinks" type="java.util.Vector" optional="true"/>
  </nodes>
<!--@Location 16,20-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode12" strict="true" name="FilterSharedProductIncomingLinks"
      callMode="Private">
    <nodeSuccessors name="next" next="LoopNode12"/>
    <parameters name="LinkProducts" type="java.util.Iterator" optional="true"/>
  </nodes>
<!--@Location 16,21-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode12" loop="LinkProducts">
    <nodeSuccessors name="next" next="EndNode13"/>
    <entry key="LinkProduct">
      <nodeSuccessors name="loop_entry_next" next="CreateProductSharingHelper0"/>
    </entry>
  </nodes>
<!--@Location 16,22-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateProductSharingHelper0">
    <pipelet href="enfinity:/xcs/pipelets/CreateProductSharingHelper.xml"/>
    <nodeSuccessors name="next" next="KeyMapper0"/>
    <parameterBindings name="Domain" objectPath="LinkProduct:Domain"/>
  </nodes>
<!--@Location 16,23-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper0">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="DecisionNode19"/>
    <parameterBindings name="InValue_1" objectPath="LinkProduct:Source"/>
    <returnValueBindings name="OutValue_1" objectPath="SourceProduct"/>
  </nodes>
<!--@Location 16,24-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode19" conditionKey="SourceProduct:isDerivedProduct"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="ToString0"/>
<!--@BendPoints 32,49 32,55-->
    <nodeSuccessors name="decision_no" next="JoinNode17"/>
  </nodes>
<!--@Location 16,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ToString0">
    <pipelet href="enfinity:/bc_foundation/pipelets/ToString.xml"/>
    <nodeSuccessors name="next" next="DecisionNode18"/>
    <parameterBindings name="Object1" objectPath="ProductSharingHelper:SharedProduct(SourceProduct:BaseProduct)"/>
    <returnValueBindings name="String1" objectPath="isShared"/>
  </nodes>
<!--@Location 16,26-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode18" conditionKey="isShared"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="JoinNode17"/>
<!--@BendPoints 34,53 34,59-->
    <nodeSuccessors name="decision_no" next="JoinNode18"/>
  </nodes>
<!--@Location 16,27-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode17">
    <nodeSuccessors name="next" next="AddObjectToVector0"/>
  </nodes>
<!--@Location 16,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector0">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode18"/>
    <parameterBindings name="InVector" objectPath="SharedProductLinks"/>
    <parameterBindings name="Object" objectPath="LinkProduct"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="SharedProductLinksIterator"/>
    <returnValueBindings name="OutVector" objectPath="SharedProductLinks"/>
  </nodes>
<!--@Location 16,29-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode18">
<!--@BendPoints 31,59 31,43-->
    <nodeSuccessors name="next" next="LoopNode12_Entry"/>
  </nodes>
<!--@Location 17,21-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode13" strict="true">
    <returnValues name="SharedProductLinks" type="java.util.Vector" optional="true"/>
  </nodes>
<!--@Location 4,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode9" strict="true" name="GetAllProductLinks2"
      callMode="Private">
    <nodeSuccessors name="next" next="Pipelet5"/>
    <parameters name="Product" type="com.intershop.beehive.xcs.capi.product.Product"/>
    <parameters name="ProductLinkTypeSummaryIter" type="java.util.Iterator"/>
  </nodes>
<!--@Location 4,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet5">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="LoopNode7"/>
    <parameterBindings name="InVector" nullBinding="true"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="ProductLinksIterator"/>
    <returnValueBindings name="OutVector" objectPath="ProductLinks"/>
  </nodes>
<!--@Location 4,17-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode7" loop="ProductLinkTypeSummaryIter">
<!--@BendPoints 11,35 11,46-->
    <nodeSuccessors name="next" next="EndNode9"/>
    <entry key="ProductLinkTypeSummary">
<!--@BendPoints 9,36-->
      <nodeSuccessors name="loop_entry_next" next="DecisionNode11"/>
    </entry>
  </nodes>
<!--@Location 4,18-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode11" conditionKey="ProductLinkTypeSummary:ProductLinkAllowed"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="DecisionNode12"/>
<!--@BendPoints 10,37 10,47-->
    <nodeSuccessors name="decision_no" next="JoinNode13"/>
  </nodes>
<!--@Location 4,19-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode12" conditionKey="ProductLinkTypeSummary:ProductLinkAvailable"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="GetLinkedProducts6"/>
<!--@BendPoints 10,39 10,47-->
    <nodeSuccessors name="decision_no" next="JoinNode13"/>
  </nodes>
<!--@Location 4,20-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetLinkedProducts6">
    <configurationValues name="Type" value=""/>
    <pipelet href="enfinity:/bc_mvc/pipelets/GetLinkedProducts.xml"/>
    <nodeSuccessors name="next" next="CallNode3"/>
    <parameterBindings name="SourceProduct" objectPath="Product"/>
    <returnValueBindings name="ProductLinks" objectPath="PartialProductLinks"/>
    <returnValueBindings name="Products" nullBinding="true"/>
    <returnValueBindings name="ProductsMap" nullBinding="true"/>
  </nodes>
<!--@Location 4,21-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode3">
    <nodeSuccessors name="next" next="Pipelet6"/>
    <parameterBindings name="LinkProducts" objectPath="PartialProductLinks"/>
    <parameterBindings name="ProductDomain" objectPath="Product:Domain"/>
    <startNode referencedName="ProcessProductLinks-FilterSharedProduct"/>
  </nodes>
<!--@Location 4,22-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet6">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode13"/>
    <parameterBindings name="InVector" objectPath="ProductLinks"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" objectPath="SharedProductLinks"/>
    <returnValueBindings name="Iterator" objectPath="ProductLinksIterator"/>
    <returnValueBindings name="OutVector" objectPath="ProductLinks"/>
  </nodes>
<!--@Location 4,23-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode13">
<!--@BendPoints 8,47 8,35-->
    <nodeSuccessors name="next" next="LoopNode7_Entry"/>
  </nodes>
<!--@Location 5,23-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode9" strict="true">
    <returnValues name="ProductLinksIterator" type="java.util.Iterator" optional="true"/>
  </nodes>
<!--@Location 13,30-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode8" strict="true" name="GetIncomingProductLinks"
      callMode="Private">
    <nodeSuccessors name="next" next="AddObjectToVector4"/>
    <parameters name="TargetProduct" type="com.intershop.beehive.xcs.capi.product.Product"/>
    <parameters name="LinkType" type="java.lang.String"/>
  </nodes>
<!--@Location 13,31-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector4">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
<!--@BendPoints 27,64-->
    <nodeSuccessors name="next" next="GetLinkedProductsByTarget0"/>
    <parameterBindings name="InVector" nullBinding="true"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="IncomingProductLinksIterator"/>
    <returnValueBindings name="OutVector" objectPath="IncomingProductLinks"/>
  </nodes>
<!--@Location 13,32-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetLinkedProductsByTarget0">
    <pipelet href="enfinity:/bc_mvc/pipelets/GetLinkedProductsByTarget.xml"/>
<!--@BendPoints 27,66-->
    <nodeSuccessors name="next" next="CallNode4"/>
    <returnValueBindings name="ProductLinks" objectPath="PartialProductLinks"/>
    <returnValueBindings name="Products" nullBinding="true"/>
    <returnValueBindings name="ProductsMap" nullBinding="true"/>
  </nodes>
<!--@Location 13,33-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode4">
<!--@BendPoints 27,68-->
    <nodeSuccessors name="next" next="AddObjectToVector3"/>
    <parameterBindings name="LinkProducts" objectPath="PartialProductLinks"/>
    <startNode referencedName="This:FilterSharedProductIncomingLinks"/>
  </nodes>
<!--@Location 13,34-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector3">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="EndNode7"/>
    <parameterBindings name="InVector" objectPath="IncomingProductLinks"/>
    <parameterBindings name="Objects" objectPath="SharedProductLinks"/>
    <returnValueBindings name="Iterator" objectPath="IncomingProductLinksIterator"/>
    <returnValueBindings name="OutVector" objectPath="IncomingProductLinks"/>
  </nodes>
<!--@Location 13,35-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode7" name="" strict="true">
    <returnValues name="IncomingProductLinksIterator" type="java.util.Iterator" optional="true"/>
  </nodes>
<!--@Deprecated since 7.4.0 \- use ProcessProductLinks\-GetIncomingProductLinksByTypeSummary instead.
@Location 10,21-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode10" name="GetIncomingProductLinksByLinkTypeSummary"
      callMode="Private">
    <nodeSuccessors name="next" next="CallNode5"/>
    <parameters name="ProductLinkTypeSummaryIter" type="java.util.Iterator"/>
    <parameters name="Product" type="com.intershop.beehive.xcs.capi.product.Product"/>
  </nodes>
<!--@Location 10,22-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode5">
    <nodeSuccessors name="next" next="EndNode10"/>
    <startNode referencedName="This:GetIncomingProductLinksByTypeSummary"/>
  </nodes>
<!--@Location 10,23-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode10"/>
<!--@Location 10,25-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode0" strict="true" name="GetIncomingProductLinksByTypeSummary"
      callMode="Private">
    <nodeSuccessors name="next" next="LoopNode0"/>
    <parameters name="ProductIncomingLinkTypeSummaryIter" type="java.util.Iterator"/>
    <parameters name="Product" type="com.intershop.beehive.xcs.capi.product.Product"/>
  </nodes>
<!--@Location 10,26-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode0" loop="ProductIncomingLinkTypeSummaryIter">
    <nodeSuccessors name="next" next="EndNode0"/>
    <entry key="ProductIncomingLinkTypeSummary">
<!--@BendPoints 21,54-->
      <nodeSuccessors name="loop_entry_next" next="DecisionNode0"/>
    </entry>
  </nodes>
<!--@Location 10,27-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode0" conditionKey="ProductIncomingLinkTypeSummary:ProductLinkAllowed"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="DecisionNode17"/>
<!--@BendPoints 23,55 23,65-->
    <nodeSuccessors name="decision_no" next="JoinNode15"/>
  </nodes>
<!--@Location 10,28-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode17" conditionKey="ProductIncomingLinkTypeSummary:ProductLinkAvailable"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="CallNode0"/>
<!--@BendPoints 22,57 22,65-->
    <nodeSuccessors name="decision_no" next="JoinNode15"/>
  </nodes>
<!--@Location 10,29-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode0">
    <nodeSuccessors name="next" next="AddObjectToVector5"/>
    <parameterBindings name="LinkType" objectPath="ProductIncomingLinkTypeSummary:TypeCodeDefinition:Name"/>
    <parameterBindings name="TargetProduct" objectPath="Product"/>
    <startNode referencedName="ProcessProductLinks-GetIncomingProductLinks"/>
  </nodes>
<!--@Location 10,30-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector5">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="UpdateLinkTypeSummary1"/>
    <parameterBindings name="InVector" nullBinding="true"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" objectPath="IncomingProductLinksIterator"/>
    <returnValueBindings name="Iterator" nullBinding="true"/>
    <returnValueBindings name="OutVector" objectPath="IncomingProductLinks"/>
  </nodes>
<!--@Location 10,31-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateLinkTypeSummary1">
    <pipelet href="enfinity:/bc_mvc/pipelets/UpdateLinkTypeSummary.xml"/>
    <nodeSuccessors name="next" next="JoinNode15"/>
    <parameterBindings name="CategoryLinks" nullBinding="true"/>
    <parameterBindings name="LinkTypeSummary" objectPath="ProductIncomingLinkTypeSummary"/>
    <parameterBindings name="ProductLinks" objectPath="IncomingProductLinks"/>
    <returnValueBindings name="LinkTypeSummaryOut" objectPath="ProductIncomingLinkTypeSummaryOut"/>
  </nodes>
<!--@Location 10,32-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode15">
<!--@BendPoints 20,65 20,53-->
    <nodeSuccessors name="next" next="LoopNode0_Entry"/>
  </nodes>
<!--@Location 11,26-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode0" strict="true"/>
<!--@Location 4,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode13" strict="true" name="GetLinkedProductIDs"
      callMode="Private">
    <nodeSuccessors name="next" next="GetLinkedProducts3"/>
    <parameters name="TypeCodeName" type="java.lang.String"/>
    <parameters name="Product" type="com.intershop.beehive.xcs.capi.product.Product"/>
  </nodes>
<!--@Location 4,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetLinkedProducts3">
    <configurationValues name="Type" value=""/>
    <pipelet href="enfinity:/bc_mvc/pipelets/GetLinkedProducts.xml"/>
<!--@BendPoints 9,6-->
    <nodeSuccessors name="next" next="AddObjectToVector1"/>
    <parameterBindings name="LinkType" objectPath="TypeCodeName"/>
    <parameterBindings name="SourceProduct" objectPath="Product"/>
    <returnValueBindings name="ProductLinks" nullBinding="true"/>
    <returnValueBindings name="Products" objectPath="LinkedProducts"/>
    <returnValueBindings name="ProductsMap" nullBinding="true"/>
  </nodes>
<!--@Location 4,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector1">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
<!--@BendPoints 9,8-->
    <nodeSuccessors name="next" next="LoopNode1"/>
    <parameterBindings name="InVector" nullBinding="true"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="LinkedProductUUIDIterator"/>
    <returnValueBindings name="OutVector" objectPath="LinkedProductUUIDs"/>
  </nodes>
<!--@Location 4,4-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode1" loop="LinkedProducts">
<!--@BendPoints 10,9-->
    <nodeSuccessors name="next" next="EndNode1"/>
    <entry key="LinkedProduct">
<!--@BendPoints 9,10-->
      <nodeSuccessors name="loop_entry_next" next="AddObjectToVector2"/>
    </entry>
  </nodes>
<!--@Location 4,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector2">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
<!--@BendPoints 9,12 8,12 8,9-->
    <nodeSuccessors name="next" next="LoopNode1_Entry"/>
    <parameterBindings name="InVector" objectPath="LinkedProductUUIDs"/>
    <parameterBindings name="Object" objectPath="LinkedProduct:UUID"/>
    <returnValueBindings name="Iterator" objectPath="LinkedProductUUIDIterator"/>
    <returnValueBindings name="OutVector" objectPath="LinkedProductUUIDs"/>
  </nodes>
<!--@Location 5,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode1" strict="true">
    <returnValues name="LinkedProductUUIDIterator" type="java.util.Iterator"/>
  </nodes>
<!--@Location 1,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode2" strict="true" name="GetProductLinks"
      callMode="Private">
    <nodeSuccessors name="next" next="Pipelet11"/>
    <parameters name="TypeCodeNames" type="java.util.Iterator"/>
    <parameters name="SourceProduct" type="com.intershop.beehive.xcs.capi.product.Product"/>
    <parameters name="SelectedLinkType" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 1,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet11">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="LoopNode5"/>
    <parameterBindings name="InVector" nullBinding="true"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="ProductLinksIterator"/>
    <returnValueBindings name="OutVector" objectPath="ProductLinks"/>
  </nodes>
<!--@Location 1,3-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode5" loop="TypeCodeNames">
<!--@BendPoints 4,7-->
    <nodeSuccessors name="next" next="EndNode8"/>
    <entry key="TypeCodeName">
<!--@BendPoints 3,8-->
      <nodeSuccessors name="loop_entry_next" next="DecisionNode2"/>
    </entry>
  </nodes>
<!--@Location 1,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode2" conditionKey="SelectedLinkType">
<!--@BendPoints 3,10-->
    <nodeSuccessors name="decision_yes" next="DecisionNode3"/>
<!--@BendPoints 5,9-->
    <nodeSuccessors name="decision_no" next="JoinNode3"/>
  </nodes>
<!--@Location 1,5-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode3" conditionKey="SelectedLinkType"
      operator="str_neq" conditionValue="0">
<!--@BendPoints 3,12-->
    <nodeSuccessors name="decision_yes" next="DecisionNode1"/>
    <nodeSuccessors name="decision_no" next="JoinNode3"/>
  </nodes>
<!--@Location 1,6-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode1" conditionKey="SelectedLinkType"
      operator="str_neq" conditionItem="TypeCodeName">
    <nodeSuccessors name="decision_yes" next="JoinNode5"/>
    <nodeSuccessors name="decision_no" next="JoinNode4"/>
  </nodes>
<!--@Location 1,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode5">
<!--@BendPoints 2,21 2,7-->
    <nodeSuccessors name="next" next="LoopNode5_Entry"/>
  </nodes>
<!--@Location 2,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode4">
    <nodeSuccessors name="next" next="GetLinkedProducts1"/>
  </nodes>
<!--@Location 2,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetLinkedProducts1">
    <configurationValues name="Type" value=""/>
    <pipelet href="enfinity:/bc_mvc/pipelets/GetLinkedProducts.xml"/>
    <nodeSuccessors name="next" next="CallNode1"/>
    <parameterBindings name="LinkType" objectPath="TypeCodeName"/>
    <returnValueBindings name="ProductLinks" objectPath="PartialProductLinks"/>
    <returnValueBindings name="Products" nullBinding="true"/>
    <returnValueBindings name="ProductsMap" nullBinding="true"/>
  </nodes>
<!--@Location 2,8-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode1">
    <nodeSuccessors name="next" next="Pipelet10"/>
    <parameterBindings name="LinkProducts" objectPath="PartialProductLinks"/>
    <parameterBindings name="ProductDomain" objectPath="SourceProduct:Domain"/>
    <startNode referencedName="ProcessProductLinks-FilterSharedProduct"/>
  </nodes>
<!--@Location 2,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet10">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
<!--@BendPoints 5,21-->
    <nodeSuccessors name="next" next="JoinNode5"/>
    <parameterBindings name="InVector" objectPath="ProductLinks"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" objectPath="SharedProductLinks"/>
    <returnValueBindings name="Iterator" objectPath="ProductLinksIterator"/>
    <returnValueBindings name="OutVector" objectPath="ProductLinks"/>
  </nodes>
<!--@Location 2,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode3">
    <nodeSuccessors name="next" next="JoinNode4"/>
  </nodes>
<!--@Location 2,3-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode8" strict="true">
    <returnValues name="ProductLinksIterator" type="java.util.Iterator"/>
  </nodes>
<!--@Location 7,12-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode6" strict="true" name="GetProductLinks2"
      callMode="Private">
    <nodeSuccessors name="next" next="Pipelet3"/>
<!--The Product to return linked Products for.-->
    <parameters name="SourceProduct" type="com.intershop.beehive.xcs.capi.product.Product"/>
    <parameters name="LinkType" type="java.lang.String"/>
  </nodes>
<!--@Location 7,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet3">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="GetLinkedProducts4"/>
    <parameterBindings name="InVector" nullBinding="true"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="ProductLinksIterator"/>
    <returnValueBindings name="OutVector" objectPath="ProductLinksVector"/>
  </nodes>
<!--@Location 7,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetLinkedProducts4">
    <configurationValues name="Type" value=""/>
    <pipelet href="enfinity:/bc_mvc/pipelets/GetLinkedProducts.xml"/>
    <nodeSuccessors name="next" next="CallNode24"/>
    <returnValueBindings name="ProductLinks" objectPath="PartialProductLinks"/>
    <returnValueBindings name="Products" nullBinding="true"/>
    <returnValueBindings name="ProductsMap" nullBinding="true"/>
  </nodes>
<!--@Location 7,15-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode24">
    <nodeSuccessors name="next" next="Pipelet2"/>
    <parameterBindings name="LinkProducts" objectPath="PartialProductLinks"/>
    <parameterBindings name="ProductDomain" objectPath="SourceProduct:Domain"/>
    <startNode referencedName="ProcessProductLinks-FilterSharedProduct"/>
  </nodes>
<!--@Location 7,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet2">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
<!--@BendPoints 15,34-->
    <nodeSuccessors name="next" next="EndNode5"/>
    <parameterBindings name="InVector" objectPath="ProductLinksVector"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" objectPath="SharedProductLinks"/>
    <returnValueBindings name="Iterator" objectPath="ProductLinksIterator"/>
    <returnValueBindings name="OutVector" objectPath="ProductLinks"/>
  </nodes>
<!--@Location 7,17-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode5" strict="true">
    <returnValues name="ProductLinksIterator" type="java.util.Iterator" optional="true"/>
    <returnValues name="ProductLinksVector" type="java.util.Vector" optional="true"/>
  </nodes>
<!--@Location 1,15-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode5" name="GetProductLinksByLinkTypeSummary"
      callMode="Private">
    <nodeSuccessors name="next" next="LoopNode6"/>
    <parameters name="Product" type="com.intershop.beehive.xcs.capi.product.Product"/>
    <parameters name="ProductLinkTypeSummaryIter" type="java.util.Iterator"/>
  </nodes>
<!--@Location 1,16-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode6" loop="ProductLinkTypeSummaryIter">
    <nodeSuccessors name="next" next="EndNode6"/>
    <entry key="ProductLinkTypeSummary">
<!--@BendPoints 3,34-->
      <nodeSuccessors name="loop_entry_next" next="DecisionNode10"/>
    </entry>
  </nodes>
<!--@Location 1,17-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode10" conditionKey="ProductLinkTypeSummary:ProductLinkAllowed"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="DecisionNode7"/>
<!--@BendPoints 5,35-->
    <nodeSuccessors name="decision_no" next="JoinNode0"/>
  </nodes>
<!--@Location 1,18-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode7" conditionKey="ProductLinkTypeSummary:ProductLinkAvailable"
      operator="str_eq" conditionValue="true">
<!--@BendPoints 3,38-->
    <nodeSuccessors name="decision_yes" next="Call7"/>
    <nodeSuccessors name="decision_no" next="JoinNode0"/>
  </nodes>
<!--@Location 1,19-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call7">
    <nodeSuccessors name="next" next="UpdateLinkTypeSummary0"/>
    <parameterBindings name="LinkType" objectPath="ProductLinkTypeSummary:TypeCodeDefinition:Name"/>
    <parameterBindings name="SourceProduct" objectPath="Product"/>
    <startNode referencedName="ProcessProductLinks-GetProductLinks2"/>
    <returnValueBindings name="ProductLinksVector" objectPath="ProductLinks"/>
  </nodes>
<!--@Location 1,20-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateLinkTypeSummary0">
    <pipelet href="enfinity:/bc_mvc/pipelets/UpdateLinkTypeSummary.xml"/>
    <nodeSuccessors name="next" next="ConcatenateStrings0"/>
    <parameterBindings name="CategoryLinks" nullBinding="true"/>
    <parameterBindings name="LinkTypeSummary" objectPath="ProductLinkTypeSummary"/>
  </nodes>
<!--@Location 1,21-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings0">
    <configurationValues name="DefaultString0" value="ProductLinks"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="SetIndirectDictValue0"/>
    <parameterBindings name="String1" objectPath="ProductLinkTypeSummary:TypeCodeDefinition:Name"/>
    <returnValueBindings name="Concatenated" objectPath="ProductLinksName"/>
  </nodes>
<!--@Location 1,22-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetIndirectDictValue0">
    <pipelet href="enfinity:/bc_foundation/pipelets/SetIndirectDictValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode10"/>
    <parameterBindings name="KeyNameHolder" objectPath="ProductLinksName"/>
    <parameterBindings name="MappedEntry" objectPath="ProductLinks"/>
  </nodes>
<!--@Location 1,23-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode10">
<!--@BendPoints 2,47 2,33-->
    <nodeSuccessors name="next" next="LoopNode6_Entry"/>
  </nodes>
<!--@Location 2,18-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode0">
<!--@BendPoints 5,47-->
    <nodeSuccessors name="next" next="JoinNode10"/>
  </nodes>
<!--@Location 2,16-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode6"/>
<!--@Location 13,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode17" strict="true" name="MoveLinkPositions"
      callMode="Private">
    <nodeSuccessors name="next" next="LoopNode8"/>
    <parameters name="TypeCodeNames" type="java.util.Iterator"/>
    <parameters name="SourceProduct" type="com.intershop.beehive.xcs.capi.product.Product"/>
    <parameters name="SelectedProductLinkUUIDs" type="java.util.Iterator"/>
    <parameters name="moveDirection" type="java.lang.String"/>
  </nodes>
<!--@Location 13,2-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode8" loop="TypeCodeNames">
<!--@BendPoints 28,5-->
    <nodeSuccessors name="next" next="EndNode19"/>
    <entry key="TypeCodeName">
      <nodeSuccessors name="loop_entry_next" next="GetLinkedProducts2"/>
    </entry>
  </nodes>
<!--@Location 13,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetLinkedProducts2">
    <configurationValues name="Type" value=""/>
    <pipelet href="enfinity:/bc_mvc/pipelets/GetLinkedProducts.xml"/>
    <nodeSuccessors name="next" next="Decision1"/>
    <parameterBindings name="LinkType" objectPath="TypeCodeName"/>
    <returnValueBindings name="Products" nullBinding="true"/>
    <returnValueBindings name="ProductsMap" nullBinding="true"/>
  </nodes>
<!--@Location 13,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision1" conditionKey="ProductLinks"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="CallNode16"/>
<!--@BendPoints 28,9 28,13-->
    <nodeSuccessors name="decision_no" next="JoinNode6"/>
  </nodes>
<!--@Location 13,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode16">
    <nodeSuccessors name="next" next="JoinNode6"/>
    <parameterBindings name="SelectedObjectUUIDs" objectPath="SelectedProductLinkUUIDs"/>
    <parameterBindings name="SortedPositionables" objectPath="ProductLinks"/>
    <startNode referencedName="ProcessSorting-MovePositions"/>
  </nodes>
<!--@Location 13,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode6">
<!--@BendPoints 26,13 26,5-->
    <nodeSuccessors name="next" next="LoopNode8_Entry"/>
  </nodes>
<!--@Location 14,2-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode19"/>
<!--@Location 10,12-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode3" strict="true" name="MoveLinkPositions2"
      callMode="Private">
    <nodeSuccessors name="next" next="LoopNode4"/>
    <parameters name="ProductLinkTypeSummaryIter" type="java.util.Iterator"/>
    <parameters name="SourceProduct" type="com.intershop.beehive.xcs.capi.product.Product"/>
    <parameters name="SelectedProductLinkUUIDs" type="java.util.Iterator"/>
    <parameters name="moveDirection" type="java.lang.String"/>
  </nodes>
<!--@Location 10,13-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode4" loop="ProductLinkTypeSummaryIter">
<!--@BendPoints 22,27-->
    <nodeSuccessors name="next" next="EndNode3"/>
    <entry key="LinkTypeSummary">
<!--@BendPoints 21,28-->
      <nodeSuccessors name="loop_entry_next" next="DecisionNode9"/>
    </entry>
  </nodes>
<!--@Location 10,14-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode9" conditionKey="LinkTypeSummary:ProductLinkAllowed"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="DecisionNode8"/>
<!--@BendPoints 23,29-->
    <nodeSuccessors name="decision_no" next="JoinNode12"/>
  </nodes>
<!--@Location 10,15-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode8" conditionKey="LinkTypeSummary:ProductLinkAvailable"
      operator="str_eq" conditionValue="true">
<!--@BendPoints 21,32-->
    <nodeSuccessors name="decision_yes" next="GetLinkedProducts5"/>
    <nodeSuccessors name="decision_no" next="JoinNode12"/>
  </nodes>
<!--@Location 10,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetLinkedProducts5">
    <configurationValues name="Type" value=""/>
    <pipelet href="enfinity:/bc_mvc/pipelets/GetLinkedProducts.xml"/>
    <nodeSuccessors name="next" next="Decision2"/>
    <parameterBindings name="LinkType" objectPath="LinkTypeSummary:TypeCodeDefinition:Name"/>
    <returnValueBindings name="Products" nullBinding="true"/>
    <returnValueBindings name="ProductsMap" nullBinding="true"/>
  </nodes>
<!--@Location 10,17-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision2" conditionKey="ProductLinks"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="CallNode2"/>
<!--@BendPoints 22,35 22,39-->
    <nodeSuccessors name="decision_no" next="JoinNode11"/>
  </nodes>
<!--@Location 10,18-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode2">
    <nodeSuccessors name="next" next="JoinNode11"/>
    <parameterBindings name="SelectedObjectUUIDs" objectPath="SelectedProductLinkUUIDs"/>
    <parameterBindings name="SortedPositionables" objectPath="ProductLinks"/>
    <startNode referencedName="ProcessSorting-MovePositions"/>
  </nodes>
<!--@Location 10,19-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode11">
<!--@BendPoints 20,39 20,27-->
    <nodeSuccessors name="next" next="LoopNode4_Entry"/>
  </nodes>
<!--@Location 11,15-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode12">
<!--@BendPoints 23,39-->
    <nodeSuccessors name="next" next="JoinNode11"/>
  </nodes>
<!--@Location 11,13-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode3"/>
<!--@Location 9,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode4" strict="true" name="RemoveLinks"
      callMode="Private">
    <nodeSuccessors name="next" next="GetCurrentDate2"/>
    <parameters name="UUIDIterator" type="java.util.Iterator"/>
  </nodes>
<!--@Location 9,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetCurrentDate2">
    <configurationValues name="ForceApplicationServerTimeZone" value="false"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetCurrentDate.xml"/>
    <nodeSuccessors name="next" next="LoopNode2"/>
  </nodes>
<!--@Location 9,3-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode2" loop="UUIDIterator">
    <nodeSuccessors name="next" next="EndNode4"/>
    <entry key="UUID">
      <nodeSuccessors name="loop_entry_next" next="GetPersistentObjectByUUID1"/>
    </entry>
  </nodes>
<!--@Location 9,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetPersistentObjectByUUID1">
    <configurationValues name="PersistentObjectPOClass" value="com.intershop.beehive.xcs.internal.product.ProductLinkPO"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetPersistentObjectByUUID.xml"/>
    <nodeSuccessors name="next" next="CallNode8"/>
<!--@BendPoints 25,9-->
    <nodeSuccessors name="pipelet_error" next="JoinNode24"/>
    <returnValueBindings name="PersistentObject" objectPath="ProductLink"/>
  </nodes>
<!--@Location 9,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode8">
    <nodeSuccessors name="next" next="CallNode9"/>
    <nodeSuccessors name="LOCKED" next="CreateLogEntry1"/>
    <parameterBindings name="CheckedUserID" objectPath="CurrentUser:ID"/>
    <parameterBindings name="Product" objectPath="ProductLink:Source"/>
    <startNode referencedName="ProcessProductLock-CheckUnlocked"/>
  </nodes>
<!--@Location 9,6-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode9">
    <nodeSuccessors name="next" next="BatchCacheClear0"/>
    <nodeSuccessors name="LOCKED" next="CreateLogEntry0"/>
    <parameterBindings name="CheckedUserID" objectPath="CurrentUser:ID"/>
    <parameterBindings name="Product" objectPath="ProductLink:TargetProduct"/>
    <startNode referencedName="ProcessProductLock-CheckUnlocked"/>
  </nodes>
<!--@Location 9,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="BatchCacheClear0">
    <pipelet href="enfinity:/core/pipelets/BatchCacheClear.xml"/>
    <nodeSuccessors name="next" next="RemoveProductLinkObject1"/>
    <parameterBindings name="CacheClearProcessID" nullBinding="true"/>
    <parameterBindings name="ClassNames" nullBinding="true"/>
    <parameterBindings name="DesiredCacheClearDate" objectPath="CurrentDate"/>
    <parameterBindings name="Object" objectPath="ProductLink:Source"/>
    <parameterBindings name="Objects" nullBinding="true"/>
  </nodes>
<!--@Location 9,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemoveProductLinkObject1">
    <pipelet href="enfinity:/bc_mvc/pipelets/RemoveProductLinkObject.xml"/>
    <nodeSuccessors name="next" next="JoinNode1"/>
  </nodes>
<!--@Location 9,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode1">
<!--@BendPoints 18,21 18,19 18,15 18,7-->
    <nodeSuccessors name="next" next="LoopNode2_Entry"/>
  </nodes>
<!--@Location 11,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateLogEntry0">
    <configurationValues name="LogLevel" value="Error"/>
    <configurationValues name="MessageKey" value="bc_foundation.ProductIsCurrentlyBeingEditedByAnotherUser"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateLogEntry.xml"/>
    <nodeSuccessors name="next" next="JoinNode2"/>
    <parameterBindings name="Object0" objectPath="ProductLink:TargetProduct:Name"/>
  </nodes>
<!--@Location 12,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode2">
<!--@BendPoints 25,21-->
    <nodeSuccessors name="next" next="JoinNode1"/>
  </nodes>
<!--@Location 11,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateLogEntry1">
    <configurationValues name="LogLevel" value="Error"/>
    <configurationValues name="MessageKey" value="bc_foundation.ProductIsCurrentlyBeingEditedByAnotherUser"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateLogEntry.xml"/>
    <nodeSuccessors name="next" next="JoinNode24"/>
    <parameterBindings name="Object0" objectPath="ProductLink:Source:Name"/>
  </nodes>
<!--@Location 12,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode24">
    <nodeSuccessors name="next" next="JoinNode2"/>
  </nodes>
<!--@Location 10,3-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode4" strict="true"/>
<!--@Location 7,18-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode7" strict="true" name="TypeCodeConfiguration"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode20"/>
    <parameters name="ProductLinkTypeSummaryIter" type="java.util.Iterator" optional="true"/>
    <parameters name="Product" type="com.intershop.beehive.xcs.capi.product.Product"/>
    <parameters name="ChannelID" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 7,19-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode20" conditionKey="ProductLinkTypeSummaryIter"
      operator="undef">
    <nodeSuccessors name="decision_yes" next="JoinNode20"/>
<!--@BendPoints 17,39-->
    <nodeSuccessors name="decision_no" next="DecisionNode6"/>
  </nodes>
<!--@Location 7,20-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode20">
    <nodeSuccessors name="next" next="CallNode6"/>
  </nodes>
<!--@Location 7,21-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode6">
    <nodeSuccessors name="next" next="KeyMapper2"/>
    <nodeSuccessors name="Error" next="JoinNode19"/>
    <parameterBindings name="ProductDomainID" objectPath="Product:DomainID"/>
    <parameterBindings name="ProductUUID" objectPath="Product:UUID"/>
    <startNode referencedName="ProcessLinkTypeSummaryConfiguration-ProductLinkConfigurations"/>
  </nodes>
<!--@Location 7,22-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper2">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="JoinNode9"/>
    <parameterBindings name="InValue_1" objectPath="TypeCodeNames"/>
    <parameterBindings name="InValue_2" objectPath="TypeCodeNames"/>
    <parameterBindings name="InValue_3" objectPath="TypeCodeGroup"/>
    <returnValueBindings name="OutValue_1" objectPath="TypeCodesToShow"/>
    <returnValueBindings name="OutValue_2" objectPath="ProductTypeCodesToShow"/>
    <returnValueBindings name="OutValue_3" objectPath="ProductTypeCodeGroup"/>
  </nodes>
<!--@Location 7,23-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode9">
    <nodeSuccessors name="next" next="EndNode14"/>
  </nodes>
<!--@Location 7,24-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode14" strict="true">
    <returnValues name="ProductLinkTypeSummaryIter" type="java.util.Iterator" optional="true"/>
    <returnValues name="TypeCodeGroup" type="java.lang.String" optional="true"/>
    <returnValues name="ProductTypeCodeGroup" type="java.lang.String" optional="true"/>
    <returnValues name="TypeCodeNames" type="com.intershop.beehive.foundation.util.ResettableIterator"
        optional="true"/>
    <returnValues name="ProductTypeCodesToShow" type="com.intershop.beehive.foundation.util.ResettableIterator"
        optional="true"/>
    <returnValues name="TypeCodesToShow" type="com.intershop.beehive.foundation.util.ResettableIterator"
        optional="true"/>
  </nodes>
<!--@Location 8,21-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode19">
<!--@BendPoints 17,47-->
    <nodeSuccessors name="next" next="JoinNode9"/>
  </nodes>
<!--@Location 8,20-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode6" conditionKey="ProductLinkTypeSummaryIter"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="JoinNode19"/>
    <nodeSuccessors name="decision_no" next="JoinNode20"/>
  </nodes>
<!--@Location 7,25-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode14" strict="true" name="TypeCodeConfigurationForIncomingLinks"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode21"/>
    <parameters name="ProductIncomingLinkTypeSummaryIter" type="java.util.Iterator"
        optional="true"/>
    <parameters name="Product" type="com.intershop.beehive.xcs.capi.product.Product"/>
    <parameters name="ChannelID" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 7,26-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode21" conditionKey="ProductIncomingLinkTypeSummaryIter"
      operator="undef">
    <nodeSuccessors name="decision_yes" next="JoinNode22"/>
<!--@BendPoints 17,53-->
    <nodeSuccessors name="decision_no" next="DecisionNode22"/>
  </nodes>
<!--@Location 7,27-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode22">
    <nodeSuccessors name="next" next="CallNode7"/>
  </nodes>
<!--@Location 7,28-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode7">
    <nodeSuccessors name="next" next="KeyMapper3"/>
    <nodeSuccessors name="Error" next="JoinNode23"/>
    <parameterBindings name="ProductDomainID" objectPath="Product:DomainID"/>
    <parameterBindings name="ProductUUID" objectPath="Product:UUID"/>
    <startNode referencedName="ProcessLinkTypeSummaryConfiguration-ProductLinkConfigurationsForIncomingLinks"/>
  </nodes>
<!--@Location 7,29-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper3">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="JoinNode21"/>
    <parameterBindings name="InValue_1" objectPath="TypeCodeNames"/>
    <parameterBindings name="InValue_2" objectPath="TypeCodeNames"/>
    <parameterBindings name="InValue_3" objectPath="TypeCodeGroup"/>
    <returnValueBindings name="OutValue_1" objectPath="TypeCodesToShow"/>
    <returnValueBindings name="OutValue_2" objectPath="ProductTypeCodesToShow"/>
    <returnValueBindings name="OutValue_3" objectPath="ProductTypeCodeGroup"/>
  </nodes>
<!--@Location 7,30-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode21">
<!--@BendPoints 15,62-->
    <nodeSuccessors name="next" next="EndNode15"/>
  </nodes>
<!--@Location 7,31-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode15" strict="true">
    <returnValues name="ProductIncomingLinkTypeSummaryIter" type="java.util.Iterator"
        optional="true"/>
    <returnValues name="TypeCodeGroup" type="java.lang.String" optional="true"/>
    <returnValues name="ProductTypeCodeGroup" type="java.lang.String" optional="true"/>
    <returnValues name="TypeCodeNames" type="com.intershop.beehive.foundation.util.ResettableIterator"
        optional="true"/>
    <returnValues name="ProductTypeCodesToShow" type="com.intershop.beehive.foundation.util.ResettableIterator"
        optional="true"/>
    <returnValues name="TypeCodesToShow" type="com.intershop.beehive.foundation.util.ResettableIterator"
        optional="true"/>
  </nodes>
<!--@Location 8,28-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode23">
<!--@BendPoints 17,61-->
    <nodeSuccessors name="next" next="JoinNode21"/>
  </nodes>
<!--@Location 8,27-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode22" conditionKey="ProductIncomingLinkTypeSummaryIter"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="JoinNode23"/>
    <nodeSuccessors name="decision_no" next="JoinNode22"/>
  </nodes>
</pipeline:Pipeline>
