<?xml version="1.0" encoding="UTF-8"?>
<!--Pipeline will be used in context of condition configuration in backoffice	
@Group Condition-->

<pipeline:Pipeline xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pipeline="http://www.intershop.de/pipeline/2010"
    name="ProcessConditionConfiguration" type="process">
<!--Set predefined condition type <br>
 (e.g. for type groups)
@Location 3,7-->
  <nodes xsi:type="pipeline:Text" nodeID="TextNode1"/>
<!--@Location 16,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode4" strict="true" name="ChangeOperator"
      callMode="Private">
    <nodeSuccessors name="next" next="UpdateOperatorCondition1"/>
<!--a condition descriptor registry-->
    <parameters name="ConditionDescriptorRegistry" type="com.intershop.component.foundation.capi.condition.ConditionDescriptorRegistry"
        optional="true"/>
<!--a condition repository-->
    <parameters name="ConditionRepository" type="com.intershop.component.foundation.capi.condition.ConditionRepository"
        optional="true"/>
<!--a map containing operators and operator condition descriptor id. The key will be combined using @@-->
    <parameters name="Operators" type="java.util.Map&lt;java.lang.String, java.lang.String>"
        optional="true"/>
  </nodes>
<!--@Location 16,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateOperatorCondition1">
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateOperatorCondition.xml"/>
<!--@BendPoints 33,6-->
    <nodeSuccessors name="next" next="EndNode5"/>
  </nodes>
<!--@Location 16,3-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode5" strict="true"/>
<!--@Location 23,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode5" strict="true" name="CreateCondition"
      callMode="Private">
<!--@BendPoints 47,4 46,4 46,5-->
    <nodeSuccessors name="next" next="DecisionNode1"/>
<!--form data container-->
    <parameters name="ConditionForm" type="com.intershop.beehive.core.capi.webform.Form"/>
    <parameters name="Owner" type="com.intershop.beehive.core.capi.domain.PersistentObject"/>
<!--a condition repository-->
    <parameters name="ConditionRepository" type="com.intershop.component.foundation.capi.condition.ConditionRepository"
        optional="true"/>
<!--a ConditionDescriptorRegistry-->
    <parameters name="ConditionDescriptorRegistry" type="com.intershop.component.foundation.capi.condition.ConditionDescriptorRegistry"
        optional="true"/>
    <parameters name="TargetConditionID" type="java.lang.String" optional="true"/>
<!--user edits  a condition type group-->
    <parameters name="EditConditionTypeGroup" type="com.intershop.component.foundation.capi.condition.Condition"
        optional="true"/>
  </nodes>
<!--@Location 23,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode1" conditionKey="TargetConditionID"
      operator="str_empty">
<!--@BendPoints 49,5-->
    <nodeSuccessors name="decision_yes" next="JoinNode15"/>
<!--@BendPoints 47,6-->
    <nodeSuccessors name="decision_no" next="GetCondition2"/>
  </nodes>
<!--@Location 24,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode15">
<!--@BendPoints 49,9-->
    <nodeSuccessors name="next" next="JoinNode14"/>
  </nodes>
<!--@Location 23,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode14">
<!--@BendPoints 47,10-->
    <nodeSuccessors name="next" next="DecisionNode10" action="begin"/>
  </nodes>
<!--@Location 23,5-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode10" conditionKey="EditConditionTypeGroup">
    <nodeSuccessors name="decision_yes" next="DecisionNode11"/>
<!--@BendPoints 51,11-->
    <nodeSuccessors name="decision_no" next="JoinNode21"/>
  </nodes>
<!--Checks if type grouping is enabled for this condition type
@Location 23,6-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode11" conditionKey="ConditionDescriptorRegistry:TypeGroupingEnabled(EditConditionTypeGroup)"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="JoinNode26"/>
    <nodeSuccessors name="decision_no" next="DecisionNode15"/>
  </nodes>
<!--@Location 23,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode26">
<!--@BendPoints 47,16-->
    <nodeSuccessors name="next" next="CreateCondition1"/>
  </nodes>
<!--@Location 23,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateCondition1">
    <configurationValues name="TypeGroupCondition" value="true"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateCondition.xml"/>
<!--@BendPoints 47,24-->
    <nodeSuccessors name="next" next="KeyMapper1"/>
<!--@BendPoints 48,17-->
    <nodeSuccessors name="pipelet_error" next="EndNode14" action="rollback"/>
    <parameterBindings name="ConditionDescriptorID" objectPath="ConditionForm:ConditionDescriptorID:Value"/>
    <parameterBindings name="CurrentDomain" objectPath="Owner:Domain"/>
    <parameterBindings name="TargetCondition" objectPath="EditConditionTypeGroup"/>
  </nodes>
<!--@Location 23,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper1">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="JoinNode19"/>
    <parameterBindings name="InValue_1" objectPath="Condition:ParentCondition"/>
    <returnValueBindings name="OutValue_1" objectPath="EditConditionTypeGroup"/>
  </nodes>
<!--@Location 23,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode19">
<!--@BendPoints 47,28-->
    <nodeSuccessors name="next" next="GetConditionDescriptorByID4"/>
  </nodes>
<!--@Location 23,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetConditionDescriptorByID4">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetConditionDescriptorByID.xml"/>
    <nodeSuccessors name="next" next="UpdateConfigurationParameters2"/>
    <parameterBindings name="ConditionDescriptorID" objectPath="ConditionForm:ConditionDescriptorID:Value"/>
  </nodes>
<!--@Location 23,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateConfigurationParameters2">
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateConfigurationParameters.xml"/>
    <nodeSuccessors name="next" next="EndNode7" action="commit"/>
    <parameterBindings name="ConfigurationDescriptor" objectPath="ConditionDescriptor"/>
    <parameterBindings name="ExtensibleObject" objectPath="Condition"/>
    <parameterBindings name="Form" objectPath="ConditionForm"/>
  </nodes>
<!--@Location 23,16-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode7" name="ok" strict="true">
<!--a condition-->
    <returnValues name="Condition" type="com.intershop.component.foundation.capi.condition.Condition"/>
    <returnValues name="EditConditionTypeGroup" type="com.intershop.component.foundation.capi.condition.Condition"
        optional="true"/>
  </nodes>
<!--@Location 24,8-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode14" name="error" strict="true"/>
<!--@Location 24,6-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode15" conditionKey="EditConditionTypeGroup:TypeGroupOperator"
      operator="str_neq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="JoinNode21"/>
<!--@BendPoints 49,15-->
    <nodeSuccessors name="decision_no" next="JoinNode26"/>
  </nodes>
<!--@Location 25,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode21">
<!--@BendPoints 51,14-->
    <nodeSuccessors name="next" next="CreateCondition2"/>
  </nodes>
<!--@Location 25,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateCondition2">
    <configurationValues name="TypeGroupCondition" value="false"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateCondition.xml"/>
<!--@BendPoints 51,16-->
    <nodeSuccessors name="next" next="DecisionNode12"/>
<!--@BendPoints 54,15-->
    <nodeSuccessors name="pipelet_error" next="EndNode6" action="rollback"/>
    <parameterBindings name="ConditionDescriptorID" objectPath="ConditionForm:ConditionDescriptorID:Value"/>
    <parameterBindings name="CurrentDomain" objectPath="Owner:Domain"/>
  </nodes>
<!--@Location 25,8-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode12" conditionKey="ConditionDescriptorRegistry:TypeGroupingEnabled(Condition)"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="DecisionNode8"/>
<!--@BendPoints 55,17-->
    <nodeSuccessors name="decision_no" next="JoinNode22"/>
  </nodes>
<!--@Location 25,9-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode8" conditionKey="EditConditionTypeGroup"
      operator="undef">
    <nodeSuccessors name="decision_yes" next="DecisionNode20"/>
    <nodeSuccessors name="decision_no" next="JoinNode22"/>
  </nodes>
<!--@Location 25,10-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode20" conditionKey="Condition:ParentCondition">
    <nodeSuccessors name="decision_yes" next="DecisionNode21"/>
<!--@BendPoints 53,21-->
    <nodeSuccessors name="decision_no" next="JoinNode33"/>
  </nodes>
<!--@Location 25,11-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode21" conditionKey="Condition:ParentCondition:TypeGroupOperator"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="KeyMapper6"/>
    <nodeSuccessors name="decision_no" next="JoinNode33"/>
  </nodes>
<!--@Location 25,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper6">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="JoinNode32"/>
    <parameterBindings name="InValue_1" objectPath="Condition:ParentCondition"/>
    <returnValueBindings name="OutValue_1" objectPath="EditConditionTypeGroup"/>
  </nodes>
<!--@Location 25,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode32">
    <nodeSuccessors name="next" next="JoinNode19"/>
  </nodes>
<!--@Location 26,11-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode33">
<!--@BendPoints 53,24-->
    <nodeSuccessors name="next" next="KeyMapper7"/>
  </nodes>
<!--@Location 26,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper7">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="JoinNode20"/>
    <parameterBindings name="InValue_1" objectPath="Condition"/>
    <returnValueBindings name="OutValue_1" objectPath="EditConditionTypeGroup"/>
  </nodes>
<!--@Location 26,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode20">
    <nodeSuccessors name="next" next="JoinNode32"/>
  </nodes>
<!--@Location 27,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode22">
<!--@BendPoints 55,27-->
    <nodeSuccessors name="next" next="JoinNode20"/>
  </nodes>
<!--@Location 27,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode6" name="error" strict="true"/>
<!--@Location 23,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetCondition2">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetCondition.xml"/>
    <nodeSuccessors name="next" next="JoinNode14"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode15"/>
    <parameterBindings name="ConditionID" objectPath="TargetConditionID"/>
    <parameterBindings name="Owner" nullBinding="true"/>
    <returnValueBindings name="Condition" objectPath="TargetCondition"/>
  </nodes>
<!--@Location 1,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode15" name="CreateConditionForm"
      callMode="Private">
<!--@BendPoints 3,4-->
    <nodeSuccessors name="next" next="CreateForm4"/>
<!--a condition persistent object-->
    <parameters name="EditCondition" type="com.intershop.component.foundation.capi.condition.Condition"
        optional="true"/>
<!--a condition descriptor registry-->
    <parameters name="ConditionDescriptorRegistry" type="com.intershop.component.foundation.capi.condition.ConditionDescriptorRegistry"/>
<!--The name of the form identifier-->
    <parameters name="FormName" type="java.lang.String" optional="true"/>
<!--The resource identifier of the webform resource. In the .webform file this is the content of the 'name' attribute of the 'WebForm' element (which usually is equal to the file name without extension). -->
    <parameters name="FormResource" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 1,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateForm4">
    <configurationValues name="FormName" value="ConditionConfiguration"/>
    <configurationValues name="FormResource" value="ConditionConfiguration"/>
    <pipelet href="enfinity:/core/pipelets/CreateForm.xml"/>
    <nodeSuccessors name="next" next="ValidateForm5"/>
    <returnValueBindings name="Form" objectPath="ConditionForm"/>
  </nodes>
<!--@Location 1,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ValidateForm5">
    <pipelet href="enfinity:/core/pipelets/ValidateForm.xml"/>
    <nodeSuccessors name="next" next="JoinNode11"/>
<!--@BendPoints 4,7 4,9-->
    <nodeSuccessors name="pipelet_error" next="JoinNode11"/>
    <parameterBindings name="Form" objectPath="ConditionForm"/>
  </nodes>
<!--@Location 1,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode11">
    <nodeSuccessors name="next" next="DecisionNode4"/>
  </nodes>
<!--@Location 1,5-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode4" conditionKey="ConditionForm:ConditionType:ValueMissing"
      operator="str_eq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="DecisionNode6"/>
<!--@BendPoints 5,11-->
    <nodeSuccessors name="decision_no" next="JoinNode18"/>
  </nodes>
<!--@Location 1,6-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode6" conditionKey="ConditionType">
    <nodeSuccessors name="decision_yes" next="SetFormParameterValue1"/>
    <nodeSuccessors name="decision_no" next="JoinNode18"/>
  </nodes>
<!--@Location 1,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetFormParameterValue1">
    <pipelet href="enfinity:/core/pipelets/SetFormParameterValue.xml"/>
    <nodeSuccessors name="next" next="JoinNode17"/>
    <parameterBindings name="FormParameter" objectPath="ConditionForm:ConditionType"/>
    <parameterBindings name="Value" objectPath="ConditionType"/>
  </nodes>
<!--@Location 1,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode17">
    <nodeSuccessors name="next" next="DecisionNode7"/>
  </nodes>
<!--@Location 1,9-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode7" conditionKey="EditCondition:ConditionDescriptorID">
    <nodeSuccessors name="decision_yes" next="GetConditionDescriptorByID1"/>
<!--@BendPoints 5,19 5,20-->
    <nodeSuccessors name="decision_no" next="GetConditionDescriptors3"/>
  </nodes>
<!--@Location 1,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetConditionDescriptorByID1">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetConditionDescriptorByID.xml"/>
    <nodeSuccessors name="next" next="AddMultipleEntriesToMap1"/>
    <parameterBindings name="ConditionDescriptorID" objectPath="EditCondition:ConditionDescriptorID"/>
  </nodes>
<!--@Location 1,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddMultipleEntriesToMap1">
    <configurationValues name="Mode" value="OverwriteValue"/>
    <pipelet href="enfinity:/core/pipelets/AddMultipleEntriesToMap.xml"/>
    <nodeSuccessors name="next" next="JoinNode3"/>
    <parameterBindings name="Key1" objectPath="ConditionForm:ConditionType"/>
    <parameterBindings name="Key2" objectPath="ConditionForm:ConditionDescriptorID"/>
    <parameterBindings name="Key3" objectPath="ConditionForm:ConditionID"/>
    <parameterBindings name="Value1" objectPath="EditCondition:Descriptor:Type"/>
    <parameterBindings name="Value2" objectPath="EditCondition:ConditionDescriptorID"/>
    <parameterBindings name="Value3" objectPath="EditCondition:UUID"/>
    <returnValueBindings name="OutMap" objectPath="FormParameterValuesMap"/>
  </nodes>
<!--@Location 1,12-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode3">
<!--@BendPoints 3,26-->
    <nodeSuccessors name="next" next="DecisionNode5"/>
  </nodes>
<!--@Location 1,13-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode5" conditionKey="ConditionDescriptor">
<!--@BendPoints 3,28-->
    <nodeSuccessors name="decision_yes" next="LoopNode4"/>
    <nodeSuccessors name="decision_no" next="JoinNode2"/>
  </nodes>
<!--@Location 1,14-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode4" loop="ConditionDescriptor:Parameters">
    <nodeSuccessors name="next" next="JoinNode12"/>
    <entry key="Param">
      <nodeSuccessors name="loop_entry_next" next="AddFormParameterDefinition2"/>
    </entry>
  </nodes>
<!--@Location 1,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddFormParameterDefinition2">
    <configurationValues name="Optional" value="true"/>
    <pipelet href="enfinity:/core/pipelets/AddFormParameterDefinition.xml"/>
    <nodeSuccessors name="next" next="LoopNode9"/>
    <parameterBindings name="Form" objectPath="ConditionForm"/>
    <parameterBindings name="FormatProperties" objectPath="Param:FormatProperties"/>
    <parameterBindings name="Formatter" objectPath="Param:Formatter"/>
    <parameterBindings name="MessageID" objectPath="Param:MessageID"/>
    <parameterBindings name="Name" objectPath="Param:Name"/>
    <parameterBindings name="Optional" objectPath="Param:Optional"/>
    <parameterBindings name="Type" objectPath="Param:Type"/>
  </nodes>
<!--@Location 1,16-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode9" loop="Param:Validators">
<!--@BendPoints 7,33-->
    <nodeSuccessors name="next" next="LoopNode10"/>
    <entry key="ValidatorID">
<!--@BendPoints 3,34-->
      <nodeSuccessors name="loop_entry_next" next="AddValidateDefinition1"/>
    </entry>
  </nodes>
<!--@Location 1,17-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddValidateDefinition1">
    <pipelet href="enfinity:/core/pipelets/AddValidateDefinition.xml"/>
<!--@BendPoints 3,36 2,36 2,33-->
    <nodeSuccessors name="next" next="LoopNode9_Entry"/>
    <parameterBindings name="Target" objectPath="ConditionForm:get(Param:Name)"/>
    <parameterBindings name="ValidationProperties" objectPath="Param:ValidatorProperties(ValidatorID)"/>
    <parameterBindings name="Validator" objectPath="ValidatorID"/>
  </nodes>
<!--@Location 3,17-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode10" loop="Param:Fields">
<!--@BendPoints 9,35 9,40-->
    <nodeSuccessors name="next" next="DecisionNode9"/>
    <entry key="Field">
<!--@BendPoints 7,36-->
      <nodeSuccessors name="loop_entry_next" next="AddFormFieldDefinition1"/>
    </entry>
  </nodes>
<!--@Location 3,18-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddFormFieldDefinition1">
    <pipelet href="enfinity:/core/pipelets/AddFormFieldDefinition.xml"/>
<!--@BendPoints 7,38-->
    <nodeSuccessors name="next" next="LoopNode8"/>
    <parameterBindings name="FormParameter" objectPath="ConditionForm:get(Param:Name)"/>
    <parameterBindings name="FormatProperties" objectPath="Field:FormatProperties"/>
    <parameterBindings name="Formatter" objectPath="Field:Formatter"/>
    <parameterBindings name="MessageID" objectPath="Field:MessageID"/>
    <parameterBindings name="Name" objectPath="Field:Name"/>
  </nodes>
<!--@Location 3,19-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode8" loop="Field:Validators">
<!--@BendPoints 8,39 8,43 5,43 5,35-->
    <nodeSuccessors name="next" next="LoopNode10_Entry"/>
    <entry key="ValidatorID">
<!--@BendPoints 7,40-->
      <nodeSuccessors name="loop_entry_next" next="AddValidateDefinition2"/>
    </entry>
  </nodes>
<!--@Location 3,20-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddValidateDefinition2">
    <pipelet href="enfinity:/core/pipelets/AddValidateDefinition.xml"/>
<!--@BendPoints 7,42 6,42 6,39-->
    <nodeSuccessors name="next" next="LoopNode8_Entry"/>
    <parameterBindings name="Target" objectPath="ConditionForm:get(Param:Name):get(Field:Name)"/>
    <parameterBindings name="ValidationProperties" objectPath="Field:ValidatorProperties(ValidatorID)"/>
    <parameterBindings name="Validator" objectPath="ValidatorID"/>
  </nodes>
<!--@Location 4,20-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode9" conditionKey="EditCondition:getAttribute(Param:Name)">
    <nodeSuccessors name="decision_yes" next="AddEntryToMap2"/>
<!--@BendPoints 10,41 10,45-->
    <nodeSuccessors name="decision_no" next="JoinNode1"/>
  </nodes>
<!--@Location 4,21-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddEntryToMap2">
    <pipelet href="enfinity:/core/pipelets/AddEntryToMap.xml"/>
    <nodeSuccessors name="next" next="JoinNode1"/>
    <parameterBindings name="InMap" objectPath="FormParameterValuesMap"/>
    <parameterBindings name="Key" objectPath="ConditionForm:get(Param:Name)"/>
    <parameterBindings name="Value" objectPath="EditCondition:getAttribute(Param:Name)"/>
    <returnValueBindings name="OutMap" objectPath="FormParameterValuesMap"/>
  </nodes>
<!--@Location 4,22-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode1">
<!--@BendPoints 1,45 1,29-->
    <nodeSuccessors name="next" next="LoopNode4_Entry"/>
  </nodes>
<!--@Location 3,14-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode12">
<!--@BendPoints 7,30-->
    <nodeSuccessors name="next" next="EndNode4"/>
  </nodes>
<!--@Location 3,15-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode4" strict="true">
<!--webform object for condition configuration-->
    <returnValues name="ConditionForm" type="com.intershop.beehive.core.capi.webform.Form"/>
<!--form parameter values assigned to form parameters-->
    <returnValues name="FormParameterValuesMap" type="java.util.Map" optional="true"/>
  </nodes>
<!--@Location 3,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode2">
    <nodeSuccessors name="next" next="JoinNode12"/>
  </nodes>
<!--@Location 2,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetConditionDescriptors3">
    <configurationValues name="SortByName" value="true"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetConditionDescriptors.xml"/>
    <nodeSuccessors name="next" next="CallNode2"/>
  </nodes>
<!--@Location 2,11-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode2">
    <nodeSuccessors name="next" next="JoinNode3"/>
<!--@BendPoints 7,25-->
    <nodeSuccessors name="error" next="JoinNode2"/>
    <startNode referencedName="This:ResolveConditionDescriptor"/>
  </nodes>
<!--@Location 2,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode18">
<!--@BendPoints 5,17-->
    <nodeSuccessors name="next" next="JoinNode17"/>
  </nodes>
<!--@Location 10,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode3" strict="true" name="GroupConditions"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode17"/>
<!--selected conitions-->
    <parameters name="SelectedConditions" type="java.util.HashMap" optional="true"/>
<!--a condition repository-->
    <parameters name="ConditionRepository" type="com.intershop.component.foundation.capi.condition.ConditionRepository"/>
<!--a condition descriptor registry-->
    <parameters name="ConditionDescriptorRegistry" type="com.intershop.component.foundation.capi.condition.ConditionDescriptorRegistry"/>
  </nodes>
<!--@Location 10,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode17" conditionKey="SelectedConditions:KeySet"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="LoopNode2"/>
<!--@BendPoints 22,5-->
    <nodeSuccessors name="decision_no" next="KeyMapper3"/>
  </nodes>
<!--@Location 10,3-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode2" loop="SelectedConditions:KeySet">
<!--@BendPoints 23,7-->
    <nodeSuccessors name="next" next="DecisionNode2"/>
    <entry key="ConditionID">
<!--@BendPoints 21,8-->
      <nodeSuccessors name="loop_entry_next" next="GetCondition3"/>
    </entry>
  </nodes>
<!--@Location 10,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetCondition3">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetCondition.xml"/>
    <nodeSuccessors name="next" next="AddObjectToVector1"/>
<!--@BendPoints 22,9 22,13-->
    <nodeSuccessors name="pipelet_error" next="JoinNode5"/>
    <parameterBindings name="Owner" nullBinding="true"/>
  </nodes>
<!--@Location 10,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector1">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/core/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode5"/>
    <parameterBindings name="Object" objectPath="Condition"/>
    <parameterBindings name="Objects" objectPath="Conditions"/>
    <returnValueBindings name="Iterator" objectPath="Conditions"/>
  </nodes>
<!--@Location 10,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode5">
<!--@BendPoints 20,13 20,7-->
    <nodeSuccessors name="next" next="LoopNode2_Entry"/>
  </nodes>
<!--@Location 11,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode2" conditionKey="Conditions">
    <nodeSuccessors name="decision_yes" next="GroupConditions1"/>
    <nodeSuccessors name="decision_no" next="JoinNode28"/>
  </nodes>
<!--@Location 11,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GroupConditions1">
    <pipelet href="enfinity:/bc_foundation/pipelets/GroupConditions.xml"/>
<!--@BendPoints 23,12-->
    <nodeSuccessors name="next" next="EndNode3"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode10"/>
  </nodes>
<!--@Location 11,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode3" strict="true"/>
<!--@Location 12,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode10">
<!--@BendPoints 25,12-->
    <nodeSuccessors name="next" next="EndNode9"/>
  </nodes>
<!--@Location 12,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode9" name="error" strict="true">
<!--message key of grouping error-->
    <returnValues name="ERRORGroupConditions" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 12,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode28">
    <nodeSuccessors name="next" next="JoinNode10"/>
  </nodes>
<!--@Location 11,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper3">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
<!--@BendPoints 25,5-->
    <nodeSuccessors name="next" next="JoinNode28"/>
    <parameterBindings name="InValue_1" constant="error.NoElementSelected"/>
    <returnValueBindings name="OutValue_1" objectPath="ERRORGroupConditions"/>
  </nodes>
<!--@Location 32,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode8" strict="true" name="MoveDownCondition"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode19"/>
<!--selected condition IDs-->
    <parameters name="SelectedConditions" type="java.util.HashMap" optional="true"/>
<!--a condition repository-->
    <parameters name="ConditionRepository" type="com.intershop.component.foundation.capi.condition.ConditionRepository"/>
  </nodes>
<!--@Location 32,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode19" conditionKey="SelectedConditions:KeySet"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="LoopNode6"/>
<!--@BendPoints 66,5-->
    <nodeSuccessors name="decision_no" next="KeyMapper5"/>
  </nodes>
<!--@Location 32,3-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode6" loop="SelectedConditions:KeySet">
    <nodeSuccessors name="next" next="JoinNode30"/>
    <entry key="ConditionID">
<!--@BendPoints 65,8-->
      <nodeSuccessors name="loop_entry_next" next="GetCondition5"/>
    </entry>
  </nodes>
<!--@Location 32,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetCondition5">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetCondition.xml"/>
    <nodeSuccessors name="next" next="MoveCondition2"/>
<!--@BendPoints 67,9-->
    <nodeSuccessors name="pipelet_error" next="JoinNode9"/>
    <parameterBindings name="Owner" nullBinding="true"/>
  </nodes>
<!--@Location 32,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="MoveCondition2">
    <configurationValues name="Direction" value="Down"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/MoveCondition.xml"/>
    <nodeSuccessors name="next" next="JoinNode8"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode9"/>
  </nodes>
<!--@Location 32,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode8">
<!--@BendPoints 64,13 64,7-->
    <nodeSuccessors name="next" next="LoopNode6_Entry"/>
  </nodes>
<!--@Location 33,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode9">
<!--@BendPoints 67,13-->
    <nodeSuccessors name="next" next="JoinNode8"/>
  </nodes>
<!--@Location 34,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode30">
<!--@BendPoints 69,12-->
    <nodeSuccessors name="next" next="EndNode11"/>
  </nodes>
<!--@Location 34,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode11" strict="true">
<!--Error message-->
    <returnValues name="ERRORMoveCondition" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 33,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper5">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
<!--@BendPoints 69,5-->
    <nodeSuccessors name="next" next="JoinNode30"/>
    <parameterBindings name="InValue_1" constant="error.NoElementSelected"/>
    <returnValueBindings name="OutValue_1" objectPath="ERRORMoveCondition"/>
  </nodes>
<!--@Location 28,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode7" strict="true" name="MoveUpCondition"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode18"/>
<!--selected condition IDs-->
    <parameters name="SelectedConditions" type="java.util.HashMap" optional="true"/>
<!--a condition repository-->
    <parameters name="ConditionRepository" type="com.intershop.component.foundation.capi.condition.ConditionRepository"/>
  </nodes>
<!--@Location 28,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode18" conditionKey="SelectedConditions:KeySet"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="LoopNode5"/>
<!--@BendPoints 58,5-->
    <nodeSuccessors name="decision_no" next="KeyMapper4"/>
  </nodes>
<!--@Location 28,3-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode5" loop="SelectedConditions:KeySet">
    <nodeSuccessors name="next" next="JoinNode29"/>
    <entry key="ConditionID">
<!--@BendPoints 57,8-->
      <nodeSuccessors name="loop_entry_next" next="GetCondition4"/>
    </entry>
  </nodes>
<!--@Location 28,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetCondition4">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetCondition.xml"/>
    <nodeSuccessors name="next" next="MoveCondition1"/>
<!--@BendPoints 59,9-->
    <nodeSuccessors name="pipelet_error" next="JoinNode7"/>
    <parameterBindings name="Owner" nullBinding="true"/>
  </nodes>
<!--@Location 28,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="MoveCondition1">
    <configurationValues name="Direction" value="Up"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/MoveCondition.xml"/>
    <nodeSuccessors name="next" next="JoinNode6"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode7"/>
  </nodes>
<!--@Location 28,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode6">
<!--@BendPoints 56,13 56,7-->
    <nodeSuccessors name="next" next="LoopNode5_Entry"/>
  </nodes>
<!--@Location 29,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode7">
<!--@BendPoints 59,13-->
    <nodeSuccessors name="next" next="JoinNode6"/>
  </nodes>
<!--@Location 30,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode29">
<!--@BendPoints 61,12-->
    <nodeSuccessors name="next" next="EndNode17"/>
  </nodes>
<!--@Location 30,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode17" strict="true">
<!--Error message-->
    <returnValues name="ERRORMoveCondition" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 29,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper4">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
<!--@BendPoints 61,5-->
    <nodeSuccessors name="next" next="JoinNode29"/>
    <parameterBindings name="InValue_1" constant="error.NoElementSelected"/>
    <returnValueBindings name="OutValue_1" objectPath="ERRORMoveCondition"/>
  </nodes>
<!--@Location 19,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode6" strict="true" name="PrepareDescriptors"
      callMode="Private">
    <nodeSuccessors name="next" next="GetConditionDescriptors1"/>
<!--condition descriptor registry-->
    <parameters name="ConditionDescriptorRegistry" type="com.intershop.component.foundation.capi.condition.ConditionDescriptorRegistry"
        optional="true"/>
  </nodes>
<!--@Location 19,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetConditionDescriptors1">
    <configurationValues name="SortByName" value="true"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetConditionDescriptors.xml"/>
    <nodeSuccessors name="next" next="LoopNode3"/>
  </nodes>
<!--@Location 19,3-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode3" loop="ConditionDescriptors">
<!--@BendPoints 41,7 41,12-->
    <nodeSuccessors name="next" next="EndNode8"/>
    <entry key="ConditionDescriptor">
<!--@BendPoints 39,8-->
      <nodeSuccessors name="loop_entry_next" next="AddEntryToMap4"/>
    </entry>
  </nodes>
<!--@Location 19,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddEntryToMap4">
    <pipelet href="enfinity:/core/pipelets/AddEntryToMap.xml"/>
    <nodeSuccessors name="next" next="AddEntryToMap3"/>
    <parameterBindings name="InMap" objectPath="ConditionDescriptorMap"/>
    <parameterBindings name="Key" objectPath="ConditionDescriptor:ID"/>
    <parameterBindings name="Value" objectPath="ConditionDescriptor"/>
    <returnValueBindings name="OutMap" objectPath="ConditionDescriptorMap"/>
  </nodes>
<!--@Location 19,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddEntryToMap3">
    <pipelet href="enfinity:/core/pipelets/AddEntryToMap.xml"/>
<!--@BendPoints 39,12 38,12 38,7-->
    <nodeSuccessors name="next" next="LoopNode3_Entry"/>
    <parameterBindings name="InMap" objectPath="ConditionTypesMap"/>
    <parameterBindings name="Key" objectPath="ConditionDescriptor:Type"/>
    <parameterBindings name="Value" objectPath="ConditionDescriptor:TypeName"/>
    <returnValueBindings name="Keys" objectPath="ConditionTypes"/>
    <returnValueBindings name="OutMap" objectPath="ConditionTypesMap"/>
  </nodes>
<!--@Location 20,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode8" strict="true">
<!--map with condition descriptors-->
    <returnValues name="ConditionDescriptorMap" type="java.util.Map" optional="true"/>
<!--promotion condition definitions-->
    <returnValues name="ConditionDescriptors" type="java.util.Iterator" optional="true"/>
<!--condition operators-->
    <returnValues name="ConditionOperators" type="java.util.Iterator" optional="true"/>
    <returnValues name="ConditionTypesMap" type="java.util.Map" optional="true"/>
    <returnValues name="ConditionTypes" type="java.util.Iterator" optional="true"/>
  </nodes>
<!--@Location 7,6-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode10" strict="true" name="RemoveCondition"
      callMode="Private">
<!--@BendPoints 15,14-->
    <nodeSuccessors name="next" next="RemoveCondition2"/>
<!--The condition to be removed.-->
    <parameters name="Condition" type="com.intershop.component.foundation.capi.condition.Condition"/>
<!--a condition repository-->
    <parameters name="ConditionRepository" type="com.intershop.component.foundation.capi.condition.ConditionRepository"/>
  </nodes>
<!--@Location 7,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemoveCondition2">
    <pipelet href="enfinity:/bc_foundation/pipelets/RemoveCondition.xml"/>
<!--@BendPoints 15,16-->
    <nodeSuccessors name="next" next="EndNode10"/>
  </nodes>
<!--@Location 7,8-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode10" strict="true"/>
<!--@Location 7,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode2" strict="true" name="RemoveConditionsByIterator"
      callMode="Private">
<!--@BendPoints 15,4-->
    <nodeSuccessors name="next" next="LoopNode1"/>
    <parameters name="SelectedConditions" type="java.util.Iterator" optional="true"/>
<!--a condition repository-->
    <parameters name="ConditionRepository" type="com.intershop.component.foundation.capi.condition.ConditionRepository"/>
  </nodes>
<!--@Location 7,2-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode1" loop="SelectedConditions">
<!--@BendPoints 16,5-->
    <nodeSuccessors name="next" next="EndNode2"/>
    <entry key="ConditionID">
<!--@BendPoints 15,6-->
      <nodeSuccessors name="loop_entry_next" next="GetCondition1"/>
    </entry>
  </nodes>
<!--@Location 7,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetCondition1">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetCondition.xml"/>
<!--@BendPoints 15,8-->
    <nodeSuccessors name="next" next="CallNode1"/>
<!--@BendPoints 16,7 16,11-->
    <nodeSuccessors name="pipelet_error" next="JoinNode4"/>
    <parameterBindings name="Owner" nullBinding="true"/>
  </nodes>
<!--@Location 7,4-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode1">
    <nodeSuccessors name="next" next="JoinNode4"/>
    <startNode referencedName="ProcessConditionConfiguration-RemoveCondition"/>
  </nodes>
<!--@Location 7,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode4">
<!--@BendPoints 14,11 14,5-->
    <nodeSuccessors name="next" next="LoopNode1_Entry"/>
  </nodes>
<!--@Location 8,2-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode2" strict="true"/>
<!--@Location 7,10-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode9" strict="true" name="ResolveConditionDescriptor"
      callMode="Private">
<!--@BendPoints 15,22-->
    <nodeSuccessors name="next" next="DecisionNode13"/>
<!--an condition form-->
    <parameters name="ConditionForm" type="com.intershop.beehive.core.capi.webform.Form"/>
<!--iterator of condition descriptors-->
    <parameters name="ConditionDescriptors" type="java.util.Iterator"/>
<!--a condition descriptor registry-->
    <parameters name="ConditionDescriptorRegistry" type="com.intershop.component.foundation.capi.condition.ConditionDescriptorRegistry"/>
  </nodes>
<!--@Location 7,11-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode13" conditionKey="ConditionForm:ConditionDescriptorID:ValueMissing"
      operator="str_neq" conditionValue="true">
    <nodeSuccessors name="decision_yes" next="GetConditionDescriptorByID5"/>
<!--@BendPoints 17,23-->
    <nodeSuccessors name="decision_no" next="GetFilterIterator1"/>
  </nodes>
<!--@Location 7,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetConditionDescriptorByID5">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetConditionDescriptorByID.xml"/>
    <nodeSuccessors name="next" next="JoinNode24"/>
    <parameterBindings name="ConditionDescriptorID" objectPath="ConditionForm:ConditionDescriptorID:Value"/>
  </nodes>
<!--@Location 7,17-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode24">
<!--@BendPoints 15,36-->
    <nodeSuccessors name="next" next="EndNode13"/>
  </nodes>
<!--@Location 7,18-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode13" strict="true">
<!--an action descriptor-->
    <returnValues name="ConditionDescriptor" type="com.intershop.component.foundation.capi.condition.ConditionDescriptor"
        optional="true"/>
  </nodes>
<!--@Location 8,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetFilterIterator1">
    <configurationValues name="FilterConditionClassName" value="com.intershop.component.foundation.internal.application.ConfigurationDescriptorTypeFilter"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetFilterIterator.xml"/>
    <nodeSuccessors name="next" next="GetIteratorSize1"/>
    <parameterBindings name="FilterConditionParam1" objectPath="ConditionForm:ConditionType:Value"/>
    <parameterBindings name="Iterator" objectPath="ConditionDescriptors"/>
  </nodes>
<!--@Location 8,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetIteratorSize1">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetIteratorSize.xml"/>
    <nodeSuccessors name="next" next="DecisionNode14"/>
    <parameterBindings name="Iterator" objectPath="FilterIterator"/>
  </nodes>
<!--@Location 8,14-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode14" conditionKey="Size"
      operator="eq" conditionValue="1">
    <nodeSuccessors name="decision_yes" next="GetFirstElementOfIterator1"/>
    <nodeSuccessors name="decision_no" next="JoinNode25"/>
  </nodes>
<!--@Location 8,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetFirstElementOfIterator1">
    <pipelet href="enfinity:/core/pipelets/GetFirstElementOfIterator.xml"/>
    <nodeSuccessors name="next" next="SetFormParameterValue2"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode23"/>
    <parameterBindings name="Iterator" objectPath="FilterIterator"/>
    <returnValueBindings name="FirstElement" objectPath="ConditionDescriptor"/>
  </nodes>
<!--@Location 8,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetFormParameterValue2">
    <pipelet href="enfinity:/core/pipelets/SetFormParameterValue.xml"/>
<!--@BendPoints 17,35-->
    <nodeSuccessors name="next" next="JoinNode24"/>
    <parameterBindings name="FormParameter" objectPath="ConditionForm:ConditionDescriptorID"/>
    <parameterBindings name="Value" objectPath="ConditionDescriptor:ID"/>
  </nodes>
<!--@Location 9,15-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode23">
    <nodeSuccessors name="next" next="EndNode12"/>
  </nodes>
<!--@Location 9,18-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode12" name="error" strict="true"/>
<!--@Location 9,14-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode25">
    <nodeSuccessors name="next" next="JoinNode23"/>
  </nodes>
<!--@Location 13,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode11" strict="true" name="UngroupConditions"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode16"/>
<!--selected conitions-->
    <parameters name="SelectedConditions" type="java.util.HashMap" optional="true"/>
<!--a condition repository-->
    <parameters name="ConditionRepository" type="com.intershop.component.foundation.capi.condition.ConditionRepository"/>
<!--a condition descriptor registry-->
    <parameters name="ConditionDescriptorRegistry" type="com.intershop.component.foundation.capi.condition.ConditionDescriptorRegistry"/>
  </nodes>
<!--@Location 13,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode16" conditionKey="SelectedConditions:KeySet"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="LoopNode7"/>
<!--@BendPoints 28,5-->
    <nodeSuccessors name="decision_no" next="KeyMapper2"/>
  </nodes>
<!--@Location 13,3-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode7" loop="SelectedConditions:KeySet">
<!--@BendPoints 29,7-->
    <nodeSuccessors name="next" next="DecisionNode3"/>
    <entry key="ConditionID">
<!--@BendPoints 27,8-->
      <nodeSuccessors name="loop_entry_next" next="GetCondition6"/>
    </entry>
  </nodes>
<!--@Location 13,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetCondition6">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetCondition.xml"/>
    <nodeSuccessors name="next" next="AddObjectToVector2"/>
<!--@BendPoints 28,9 28,13-->
    <nodeSuccessors name="pipelet_error" next="JoinNode13"/>
    <parameterBindings name="Owner" nullBinding="true"/>
  </nodes>
<!--@Location 13,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector2">
    <configurationValues name="Mode" value="Forbid Duplicates"/>
    <pipelet href="enfinity:/core/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode13"/>
    <parameterBindings name="Object" objectPath="Condition"/>
    <parameterBindings name="Objects" objectPath="Conditions"/>
    <returnValueBindings name="Iterator" objectPath="Conditions"/>
  </nodes>
<!--@Location 13,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode13">
<!--@BendPoints 26,13 26,7-->
    <nodeSuccessors name="next" next="LoopNode7_Entry"/>
  </nodes>
<!--@Location 14,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode3" conditionKey="Conditions">
    <nodeSuccessors name="decision_yes" next="UngroupConditions1"/>
    <nodeSuccessors name="decision_no" next="JoinNode27"/>
  </nodes>
<!--@Location 14,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UngroupConditions1">
    <pipelet href="enfinity:/bc_foundation/pipelets/UngroupConditions.xml"/>
    <nodeSuccessors name="next" next="EndNode15"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode16"/>
  </nodes>
<!--@Location 14,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode15" strict="true"/>
<!--@Location 15,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode16">
<!--@BendPoints 31,12-->
    <nodeSuccessors name="next" next="EndNode16"/>
  </nodes>
<!--@Location 15,6-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode16" name="error" strict="true">
<!--message key of grouping error-->
    <returnValues name="ERRORUngroupConditions" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 15,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode27">
    <nodeSuccessors name="next" next="JoinNode16"/>
  </nodes>
<!--@Location 14,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper2">
    <pipelet href="enfinity:/core/pipelets/KeyMapper.xml"/>
<!--@BendPoints 31,5-->
    <nodeSuccessors name="next" next="JoinNode27"/>
    <parameterBindings name="InValue_1" constant="error.NoElementSelected"/>
    <returnValueBindings name="OutValue_1" objectPath="ERRORUngroupConditions"/>
  </nodes>
<!--@Location 4,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode1" strict="true" name="UpdateConfigurationParameters"
      callMode="Private">
    <nodeSuccessors name="next" next="GetConditionDescriptorByID3"/>
<!--a persistent condition-->
    <parameters name="EditCondition" type="com.intershop.beehive.core.capi.domain.ExtensibleObject"/>
<!--a condition form-->
    <parameters name="ConditionForm" type="com.intershop.beehive.core.capi.webform.Form"/>
<!--a condition descriptor registry-->
    <parameters name="ConditionDescriptorRegistry" type="com.intershop.component.foundation.capi.condition.ConditionDescriptorRegistry"
        optional="true"/>
  </nodes>
<!--@Location 4,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetConditionDescriptorByID3">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetConditionDescriptorByID.xml"/>
    <nodeSuccessors name="next" next="MapFormToObject2"/>
    <parameterBindings name="ConditionDescriptorID" objectPath="EditCondition:ConditionDescriptorID"/>
  </nodes>
<!--@Location 4,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="MapFormToObject2">
    <configurationValues name="NameFilterList" value="ConditionID, ConditionDescriptorID, TargetConditionID, ConditionType"/>
    <configurationValues name="NameFilterType" value="exclude"/>
    <pipelet href="enfinity:/core/pipelets/MapFormToObject.xml"/>
    <nodeSuccessors name="next" next="EndNode1"/>
    <parameterBindings name="Form" objectPath="ConditionForm"/>
    <parameterBindings name="TargetObject" objectPath="EditCondition"/>
  </nodes>
<!--@Location 4,4-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode1" strict="true"/>
</pipeline:Pipeline>
