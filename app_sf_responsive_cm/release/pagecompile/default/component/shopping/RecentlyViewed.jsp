<%@  page buffer="none" import="java.util.*,java.io.*,com.intershop.beehive.core.internal.template.*,com.intershop.beehive.core.internal.template.isml.*,com.intershop.beehive.core.capi.log.*,com.intershop.beehive.core.capi.resource.*,com.intershop.beehive.core.capi.util.UUIDMgr,com.intershop.beehive.core.capi.util.XMLHelper,com.intershop.beehive.foundation.util.*,com.intershop.beehive.core.internal.url.*,com.intershop.beehive.core.internal.resource.*,com.intershop.beehive.core.internal.wsrp.*,com.intershop.beehive.core.capi.pipeline.PipelineDictionary,com.intershop.beehive.core.capi.naming.NamingMgr,com.intershop.beehive.core.capi.pagecache.PageCacheMgr,com.intershop.beehive.core.capi.request.SessionMgr,com.intershop.beehive.core.internal.request.SessionMgrImpl,com.intershop.beehive.core.pipelet.PipelineConstants" extends="com.intershop.beehive.core.internal.template.AbstractTemplate" %><% 
boolean _boolean_result=false;
TemplateExecutionConfig context = getTemplateExecutionConfig();
createTemplatePageConfig(context.getServletRequest());
printHeader(out);
 %><% %><%@ page contentType="text/html;charset=utf-8" %><%response.setHeader(TemplateConstants.PERSONALIZED_HEADER, "1");setEncodingType("text/html"); %><% {try{String currentCacheTime = (String)((com.intershop.beehive.core.capi.request.ServletResponse)response).getHeaderValue(TemplateConstants.PAGECACHE_HEADER);if (currentCacheTime!=null && !"00".equals(currentCacheTime)) {Logger.debug(this, "ISCACHE 'forbidden' overwrites prior caching declaration.");}response.setHeader(TemplateConstants.PAGECACHE_HEADER, "00");}catch(Exception e){Logger.error(this,"ISCACHE failed. Line: {2}",e);}} %><% {out.flush();processLocalIncludeByServer((com.intershop.beehive.core.capi.request.ServletResponse)response,"modules/Modules", null, "3");} %><div class="row breadcrumbs"><% processOpenTag(response, pageContext, "breadcrumb", new TagParameter[] {
new TagParameter("trailtext0",localizeText(context.getFormattedValue("application.recentlyViewed.breadcrumb.label",null))),
new TagParameter("showhomelink","true")}, 6); %></div>
<div class="marketing-area"><% processOpenTag(response, pageContext, "slot", new TagParameter[] {
new TagParameter("slot","app_sf_responsive_cm:slot.marketing.base.pagelet2-Slot")}, 10); %></div>
<div class="row"><% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) (hasLoopElements("KeywordSearches") ? Boolean.TRUE : Boolean.FALSE)).booleanValue() || ((Boolean) (hasLoopElements("CategoryBOs") ? Boolean.TRUE : Boolean.FALSE)).booleanValue() || ((Boolean) (hasLoopElements("ProductBOs") ? Boolean.TRUE : Boolean.FALSE)).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",14,e);}if (_boolean_result) { %><div class="col-sm-3"><% {Object temp_obj = (getObject("CurrentDomain:Configuration:Integer(\"RecentlyViewedItemsKeywordSearchListSize\")")); getPipelineDictionary().put("SearchPrefSize", temp_obj);} %><% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) (disableErrorMessages().isDefined(getObject("SearchPrefSize")))).booleanValue() && ((Boolean) ((( ((Number) getObject("SearchPrefSize")).doubleValue() >((Number)(new Double(0))).doubleValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",17,e);}if (_boolean_result) { %><% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) (disableErrorMessages().isDefined(getObject("KeywordSearches")))).booleanValue() && ((Boolean) (hasLoopElements("KeywordSearches") ? Boolean.TRUE : Boolean.FALSE)).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",18,e);}if (_boolean_result) { %><div class="recently-viewed-searches filter-group">
<h3><% {out.write(localizeISText("application.recentlyViewed.search.heading","",null,null,null,null,null,null,null,null,null,null,null));} %></h3>
<ul class="filter-list"><% while (loop("KeywordSearches","Search",null)) { %><li class="filter-item">
<a class="filter-item-name" href="<%=context.getFormattedValue(url(true,(new URLPipelineAction(context.getFormattedValue("ViewParametricSearch-SimpleOfferSearch",null))),(new URLParameterSet().addURLParameter(context.getFormattedValue("SearchTerm",null),context.getFormattedValue(getObject("Search"),null)))),null)%>"><% {String value = null;try{value=context.getFormattedValue(getObject("Search"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {25}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %></a>
</li><% } %></ul>
</div><% } %><% } %><% {Object temp_obj = (getObject("CurrentDomain:Configuration:Integer(\"RecentlyViewedItemsCategoryListSize\")")); getPipelineDictionary().put("CategoryPrefSize", temp_obj);} %><% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) (disableErrorMessages().isDefined(getObject("CategoryPrefSize")))).booleanValue() && ((Boolean) ((( ((Number) getObject("CategoryPrefSize")).doubleValue() >((Number)(new Double(0))).doubleValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",35,e);}if (_boolean_result) { %><% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) (disableErrorMessages().isDefined(getObject("CategoryBOs")))).booleanValue() && ((Boolean) (hasLoopElements("CategoryBOs") ? Boolean.TRUE : Boolean.FALSE)).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",36,e);}if (_boolean_result) { %><div class="recently-viewed-categories filter-group">
<h3><% {out.write(localizeISText("application.recentlyViewed.category.heading","",null,null,null,null,null,null,null,null,null,null,null));} %></h3>
<ul class="filter-list"><% while (loop("CategoryBOs","CategoryBO","CategoryCount")) { %><% {Object temp_obj = (getObject("CategoryBO")); getPipelineDictionary().put("CategoryBO", temp_obj);} %><li class="filter-item">
<a class="filter-item-name" href="<%=context.getFormattedValue(url(true,context.getFormattedValue(getObject("InsecureURL"),null), context.getFormattedValue("",null), (new URLPipelineAction(context.getFormattedValue("ViewStandardCatalog-Browse",null))), (new URLParameterSet().addURLParameter(context.getFormattedValue("CatalogID",null),context.getFormattedValue(getObject("CategoryBO:CatalogBO:Name"),null))).addURLParameter(context.getFormattedValue("CategoryName",null),context.getFormattedValue(getObject("CategoryBO:Name"),null))),null)%>"><% {String value = null;try{value=context.getFormattedValue(getObject("CategoryBO:DisplayName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {44}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %></a>
</li><% } %></ul>
</div><% } %><% } %><a href="<%=context.getFormattedValue(url(true,(new URLPipelineAction(context.getFormattedValue("ViewRecentlyViewedItems-ClearAll",null)))),null)%>"><% {out.write(localizeISText("application.recentlyViewed.clear","",null,null,null,null,null,null,null,null,null,null,null));} %></a>
</div>
<div class="col-sm-9">
<h1><% {out.write(localizeISText("application.recentlyViewed.product.heading","",null,null,null,null,null,null,null,null,null,null,null));} %></h1><% {Object temp_obj = (getObject("CurrentDomain:Configuration:Integer(\"RecentlyViewedItemsProductListSize\")")); getPipelineDictionary().put("ProductPrefSize", temp_obj);} %><% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) (disableErrorMessages().isDefined(getObject("ProductPrefSize")))).booleanValue() && ((Boolean) ((( ((Number) getObject("ProductPrefSize")).doubleValue() >((Number)(new Double(0))).doubleValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",59,e);}if (_boolean_result) { %><% {Object temp_obj = ("col-xs-6 col-md-4 grid-view"); getPipelineDictionary().put("ListItemCSSClass", temp_obj);} %><% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) (disableErrorMessages().isDefined(getObject("PageletConfigurationParameters:ListItemCSSClass")))).booleanValue() && ((Boolean) (((!(context.getFormattedValue(getObject("PageletConfigurationParameters:ListItemCSSClass"),null).equals(context.getFormattedValue("",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",61,e);}if (_boolean_result) { %><% {Object temp_obj = (getObject("PageletConfigurationParameters:ListItemCSSClass")); getPipelineDictionary().put("ListItemCSSClass", temp_obj);} %><% } %><% processOpenTag(response, pageContext, "productlist", new TagParameter[] {
new TagParameter("ProductBOs",getObject("ProductBOs")),
new TagParameter("listItemCssClass",getObject("ListItemCSSClass")),
new TagParameter("maxNumberOfProducts",getObject("ProductPrefSize")),
new TagParameter("viewContext",getObject("PageletConfigurationParameters:ProductView"))}, 64); %><% } %></div><% } else { %><div class="col-sm-12">
<h1><% {out.write(localizeISText("application.recentlyViewed.heading","",null,null,null,null,null,null,null,null,null,null,null));} %></h1>
<p><% {out.write(localizeISText("application.recentlyViewed.empty","",null,null,null,null,null,null,null,null,null,null,null));} %></p>
</div><% } %></div><% printFooter(out); %>