<%@  page buffer="none" import="java.util.*,java.io.*,com.intershop.beehive.core.internal.template.*,com.intershop.beehive.core.internal.template.isml.*,com.intershop.beehive.core.capi.log.*,com.intershop.beehive.core.capi.resource.*,com.intershop.beehive.core.capi.util.UUIDMgr,com.intershop.beehive.core.capi.util.XMLHelper,com.intershop.beehive.foundation.util.*,com.intershop.beehive.core.internal.url.*,com.intershop.beehive.core.internal.resource.*,com.intershop.beehive.core.internal.wsrp.*,com.intershop.beehive.core.capi.pipeline.PipelineDictionary,com.intershop.beehive.core.capi.naming.NamingMgr,com.intershop.beehive.core.capi.pagecache.PageCacheMgr,com.intershop.beehive.core.capi.request.SessionMgr,com.intershop.beehive.core.internal.request.SessionMgrImpl,com.intershop.beehive.core.pipelet.PipelineConstants" extends="com.intershop.beehive.core.internal.template.AbstractTemplate" %><% 
boolean _boolean_result=false;
TemplateExecutionConfig context = getTemplateExecutionConfig();
createTemplatePageConfig(context.getServletRequest());
printHeader(out);
 %><% %><%@ page contentType="text/html;charset=utf-8" %><%setEncodingType("text/html"); %><% {Object temp_obj = (getObject("OrderBO:UserBO:Extension(\"UserBOOrderApprovalExtension\")")); getPipelineDictionary().put("UserApproval", temp_obj);} %><% {Object temp_obj = (getObject("OrderBO:Extension(\"OrderBOOrderApprovalExtension\")")); getPipelineDictionary().put("OrderApproval", temp_obj);} %><div class="col-sm-12">
<div class="infobox">
<h3><% {out.write(localizeISText("approval.order_details.approval_details.heading","",null,null,null,null,null,null,null,null,null,null,null));} %></h3>
<div class="row">
<div class="col-xs-6 col-sm-3">
<strong><% {out.write(localizeISText("approval.order_details.purchaser.label","",null,null,null,null,null,null,null,null,null,null,null));} %></strong>
</div>
<div class="col-xs-6 col-sm-9"><% {String value = null;try{value=context.getFormattedValue(getObject("OrderBO:BuyerFirstName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {15}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %> <% {String value = null;try{value=context.getFormattedValue(getObject("OrderBO:BuyerLastName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {15}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %><br/>
</div>
<div class="col-xs-6 col-sm-3">
<strong><% {out.write(localizeISText("approval.order_details.order_total.label","",null,null,null,null,null,null,null,null,null,null,null));} %></strong>
</div>
<div class="col-xs-6 col-sm-9"><% {String value = null;try{value=context.getFormattedValue(getObject("OrderBO:GrandTotalGross"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {22}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %><br/>
</div>
<div class="col-xs-6 col-sm-3">
<strong><% {out.write(localizeISText("approval.order_details.order_spend_limit.label","",null,null,null,null,null,null,null,null,null,null,null));} %></strong>
</div><% _boolean_result=false;try {_boolean_result=((Boolean)(getObject("UserApproval:SingleOrderThresholdAmount:Available"))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",28,e);}if (_boolean_result) { %><div class="col-xs-6 col-sm-3"><% {String value = null;try{value=context.getFormattedValue(getObject("UserApproval:SingleOrderThresholdAmount"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {30}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %><% } else { %><div class="col-xs-6 col-sm-9">
<strong><% {out.write(localizeISText("approval.details.threshold.unlimited","",null,null,null,null,null,null,null,null,null,null,null));} %></strong><% } %><br/>
</div><% _boolean_result=false;try {_boolean_result=((Boolean)(getObject("UserApproval:Budget(UserApproval:BudgetType):Available"))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",36,e);}if (_boolean_result) { %><div class="col-sm-6"><% processOpenTag(response, pageContext, "userbudgetcalculator", new TagParameter[] {
new TagParameter("UserBudgetCalculator","UserBudgetCalculator"),
new TagParameter("User",getObject("OrderBO:UserBO"))}, 38); %><div data-toggle="popover" data-html="true" data-placement="top" class="progress" data-content="
<div class='row'>
<div class='col-md-6'><label><% {out.write(localizeISText(context.getFormattedValue(context.getFormattedValue("orders.widget.",null) + context.getFormattedValue((context.getFormattedValue(getObject("UserApproval:BudgetType"),null).toLowerCase()),null) + context.getFormattedValue("_budget_left.label",null),null),"",null,null,null,null,null,null,null,null,null,null,null));} %></label></div>
<div class='col-md-6 text-nowrap text-right'><% {String value = null;try{value=context.getFormattedValue(getObject("UserBudgetCalculator:RemainingBudget"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {43}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %></div>
</div>
<div class='row'>
<div class='col-md-6'><label><% {out.write(localizeISText(context.getFormattedValue(context.getFormattedValue("orders.widget.",null) + context.getFormattedValue((context.getFormattedValue(getObject("UserApproval:BudgetType"),null).toLowerCase()),null) + context.getFormattedValue("_spend_limit.label",null),null),"",null,null,null,null,null,null,null,null,null,null,null));} %></label></div>
<div class='col-md-6 text-nowrap text-right'><% {String value = null;try{value=context.getFormattedValue(getObject("UserBudgetCalculator:Budget"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {47}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %></div>
</div>
<div class='row'>
<div class='col-md-6'><label><% {out.write(localizeISText("account.progress_bar.order_spend_limit.label","",null,null,null,null,null,null,null,null,null,null,null));} %></label></div>
<div class='col-md-6 text-nowrap text-right'><% {String value = null;try{value=context.getFormattedValue(getObject("UserBudgetCalculator:OrderSpendLimit"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {51}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %></div>
</div>
">
<div 
class="progress-bar<% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) ((( ((Number) getObject("UserBudgetCalculator:RemainingBudgetPercentage")).doubleValue() <=((Number)(new Double(30.0))).doubleValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue() && ((Boolean) ((( ((Number) getObject("UserBudgetCalculator:RemainingBudgetPercentage")).doubleValue() >((Number)(new Double(10.0))).doubleValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",55,e);}if (_boolean_result) { %> progress-bar-warning<% } else {_boolean_result=false;try {_boolean_result=((Boolean)((( ((Number) getObject("UserBudgetCalculator:RemainingBudgetPercentage")).doubleValue() <=((Number)(new Double(10.0))).doubleValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",55,e);}if (_boolean_result) { %> progress-bar-danger<% }} %>" 
role="progressbar" 
aria-valuenow="<% {String value = null;try{value=context.getFormattedValue(((new Double( ((Number) getObject("UserBudgetCalculator:SpentBudgetPercentage")).doubleValue() *((Number) new Double(100)).doubleValue()))),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {57}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>"
aria-valuemin="0" 
aria-valuemax="100" 
style="width: <% {String value = null;try{value=context.getFormattedValue(getObject("UserBudgetCalculator:SpentBudgetPercentage"),null,"DecimalSeparator=.");}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {60}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>%;"
>
<span class="progress-display"><% {String value = null;try{value=context.getFormattedValue(getObject("UserBudgetCalculator:SpentBudgetPercentage"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {62}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>%</span>
</div>
</div>
</div><% } %><% _boolean_result=false;try {_boolean_result=((Boolean)(((((Boolean) (((!(context.getFormattedValue(getObject("OrderApproval:ApproverFirstName"),null).equals(context.getFormattedValue("",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue() || ((Boolean) (((!(context.getFormattedValue(getObject("OrderApproval:ApproverLastName"),null).equals(context.getFormattedValue("",null)))) ? Boolean.TRUE : Boolean.FALSE))).booleanValue()) ? Boolean.TRUE : Boolean.FALSE))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",67,e);}if (_boolean_result) { %><div class="col-xs-6 col-sm-3">
<strong><% {out.write(localizeISText("approval.order_details.approver","",null,null,null,null,null,null,null,null,null,null,null));} %></strong>
</div>
<div class="col-xs-6 col-sm-9"><% {String value = null;try{value=context.getFormattedValue(getObject("OrderApproval:ApproverFirstName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {72}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %>&nbsp;<% {String value = null;try{value=context.getFormattedValue(getObject("OrderApproval:ApproverLastName"),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {72}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %></div><% } %><% _boolean_result=false;try {_boolean_result=((Boolean)((disableErrorMessages().isDefined(getObject("OrderApproval:ApprovalDate"))))).booleanValue();} catch (Exception e) {Logger.debug(this,"Boolean expression in line {} could not be evaluated. False returned. Consider using the 'isDefined' ISML function.",75,e);}if (_boolean_result) { %><div class="col-xs-6 col-sm-3">
<strong><% {out.write(localizeISText("approval.detailspage.approval_date.label","",null,null,null,null,null,null,null,null,null,null,null));} %></strong>
</div>
<div class="col-xs-6 col-sm-9"><% {String value = null;try{value=context.getFormattedValue(context.getFormattedValue(getObject("OrderApproval:ApprovalDate"),new Integer(DATE_SHORT)),null,null);}catch(Exception e){value=null;Logger.error(this,"ISPRINT has an invalid expression. Returning empty string. Line: {80}",e);}if (value==null) value="";value = encodeString(value);out.write(value);} %></div><% } %></div>
</div>
</div> <% printFooter(out); %>