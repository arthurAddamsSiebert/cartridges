<?xml version="1.0" encoding="UTF-8"?>
<!--View, create, generate and manipulate promotion codes of promotion code groups.
@Group OnlineMarketing-->

<pipeline:Pipeline xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pipeline="http://www.intershop.de/pipeline/2010"
    name="ViewPromotionCodeList" type="view">
<!--@Location 20,17-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode16" strict="true" name="CheckUniqueness"
      callMode="Private">
    <nodeSuccessors name="next" next="AddObjectToVector8"/>
    <parameters name="ChannelRepository" type="com.intershop.component.mvc.capi.catalog.Repository"/>
    <parameters name="Codes" type="java.util.Iterator&lt;String>"/>
    <parameters name="PromotionCodeCreateForm" type="com.intershop.beehive.core.capi.webform.ValidationElement"/>
  </nodes>
<!--@Location 20,18-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector8">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="AddObjectToVector6"/>
    <parameterBindings name="InVector" objectPath="ValidCodesV"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="ValidCodes"/>
    <returnValueBindings name="OutVector" objectPath="ValidCodesV"/>
  </nodes>
<!--@Location 20,19-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector6">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="GetApplicationBO0"/>
    <parameterBindings name="InVector" objectPath="DuplicateCodesV"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="DuplicateCodes"/>
    <returnValueBindings name="OutVector" objectPath="DuplicateCodesV"/>
  </nodes>
<!--@Location 20,20-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetApplicationBO0">
    <pipelet href="enfinity:/bc_application/pipelets/GetApplicationBO.xml"/>
    <nodeSuccessors name="next" next="LoopNode1"/>
  </nodes>
<!--@Location 20,21-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode1" loop="Codes">
    <nodeSuccessors name="next" next="CallNode22"/>
    <entry key="Code">
      <nodeSuccessors name="loop_entry_next" next="CallNode20"/>
    </entry>
  </nodes>
<!--@Location 20,22-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode20">
<!--@BendPoints 39,46-->
    <nodeSuccessors name="IsNotUnique" next="AddObjectToVector5"/>
    <nodeSuccessors name="IsUnique" next="AddObjectToVector7"/>
    <parameterBindings name="PromotionDomain" objectPath="ChannelRepository:Domain"/>
    <parameterBindings name="SingleCode" objectPath="Code"/>
    <startNode referencedName="ProcessPromotionCode-CheckUniquenessForPromotionGodeGroups"/>
  </nodes>
<!--@Location 19,22-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector5">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
<!--@BendPoints 39,43-->
    <nodeSuccessors name="next" next="LoopNode1_Entry"/>
    <parameterBindings name="InVector" objectPath="DuplicateCodesV"/>
    <parameterBindings name="Object" objectPath="Code"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="DuplicateCodes"/>
    <returnValueBindings name="OutVector" objectPath="DuplicateCodesV"/>
  </nodes>
<!--@Location 21,22-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector7">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="LoopNode1_Entry"/>
    <parameterBindings name="InVector" objectPath="ValidCodesV"/>
    <parameterBindings name="Object" objectPath="Code"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="ValidCodes"/>
    <returnValueBindings name="OutVector" objectPath="ValidCodesV"/>
  </nodes>
<!--@Location 22,21-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode22">
    <nodeSuccessors name="next" next="EndNode2"/>
    <parameterBindings name="Codes" objectPath="Codes"/>
    <parameterBindings name="DuplicateCodesVector" objectPath="DuplicateCodesV"/>
    <parameterBindings name="ValidCodesVector" objectPath="ValidCodesV"/>
    <startNode referencedName="ProcessPromotionCode-CheckUniquenessForAllSingleCodes"/>
  </nodes>
<!--@Location 22,22-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode2" strict="true">
    <returnValues name="DuplicateCodes" type="java.util.Iterator"/>
    <returnValues name="ValidCodes" type="java.util.Iterator"/>
    <returnValues name="DuplicateCode" type="java.lang.Object" optional="true"/>
  </nodes>
<!--@Location 17,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode10" name="CreatePageablePromotionCodes"
      callMode="Private">
<!--@BendPoints 35,4-->
    <nodeSuccessors name="next" next="CallNode16"/>
  </nodes>
<!--@Location 17,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode16">
    <nodeSuccessors name="next" next="JoinNode27"/>
    <startNode referencedName="ProcessClipboard-DeleteAllEntries"/>
  </nodes>
<!--@Location 17,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode27">
    <nodeSuccessors name="next" next="JoinNode29"/>
  </nodes>
<!--@Location 17,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode29">
    <nodeSuccessors name="next" next="CallNode19"/>
  </nodes>
<!--@Location 17,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode19">
    <nodeSuccessors name="next" next="SetPageLocator1"/>
    <parameterBindings name="PageSize" constant="(Integer)10"/>
    <parameterBindings name="PromotionCodeGroup" objectPath="PromotionCodeGroup"/>
    <startNode referencedName="ProcessPromotionCode-GetPageablePromotionCodes"/>
  </nodes>
<!--@Location 17,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetPageLocator1">
    <configurationValues name="DefaultHandlerPipeline" value="ViewPromotionCodeList-PagingPromotionCode"/>
    <configurationValues name="DefaultPageLocatorName" value="PromotionCodesPageLocator"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetPageLocator.xml"/>
<!--@BendPoints 35,15-->
    <nodeSuccessors name="next" next="JoinNode28"/>
    <parameterBindings name="HandlerPipeline" nullBinding="true"/>
    <parameterBindings name="PageLocatorName" nullBinding="true"/>
    <parameterBindings name="Pageable" objectPath="PromotionCodes"/>
  </nodes>
<!--@Location 16,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode28">
<!--@BendPoints 33,16-->
    <nodeSuccessors name="next" next="SetPage6"/>
  </nodes>
<!--@Location 16,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetPage6">
    <configurationValues name="DefaultPageNumber" value="0"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetPage.xml"/>
    <nodeSuccessors name="next" next="JoinNode25"/>
    <parameterBindings name="PageNumber" objectPath="PageLocator:PageNumber"/>
    <parameterBindings name="Pageable" objectPath="PromotionCodes"/>
  </nodes>
<!--@Location 16,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode25">
<!--@BendPoints 33,23-->
    <nodeSuccessors name="next" next="JoinNode26"/>
  </nodes>
<!--@Location 15,11-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode26">
    <nodeSuccessors name="next" next="Pipelet5"/>
  </nodes>
<!--@Location 15,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet5">
    <configurationValues name="DefaultHandlerPipeline" value="ViewPromotionCode-PagingPromotionCode"/>
    <configurationValues name="DefaultPageLocatorName" value="PromotionCodesPageLocator"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetPageLocator.xml"/>
    <nodeSuccessors name="next" next="EndNode4"/>
    <parameterBindings name="HandlerPipeline" nullBinding="true"/>
    <parameterBindings name="PageLocatorName" nullBinding="true"/>
    <parameterBindings name="Pageable" objectPath="PromotionCodes"/>
  </nodes>
<!--@Location 15,13-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode4"/>
<!--@Location 26,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode5" name="CreatePromotionCodes">
<!--@BendPoints 53,4-->
    <nodeSuccessors name="next" next="CallNode23"/>
  </nodes>
<!--@Location 26,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode23">
<!--@BendPoints 53,6-->
    <nodeSuccessors name="next" next="CreateForm1"/>
    <startNode referencedName="ViewPromotionCodeList-Prefix"/>
  </nodes>
<!--@Location 26,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateForm1">
    <configurationValues name="FormName" value="PromotionCodeCreate"/>
    <configurationValues name="FormResource" value="PromotionCodeCreate"/>
    <pipelet href="enfinity:/core/pipelets/CreateForm.xml"/>
<!--@BendPoints 53,8-->
    <nodeSuccessors name="next" next="ValidateForm0"/>
    <returnValueBindings name="Form" objectPath="PromotionCodeCreateForm"/>
  </nodes>
<!--@Location 26,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ValidateForm0">
    <pipelet href="enfinity:/core/pipelets/ValidateForm.xml"/>
    <nodeSuccessors name="next" next="SplitString0"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode3"/>
    <parameterBindings name="Form" objectPath="PromotionCodeCreateForm"/>
  </nodes>
<!--@Location 26,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SplitString0">
    <pipelet href="enfinity:/bc_foundation/pipelets/SplitString.xml"/>
    <nodeSuccessors name="next" next="CallNode4"/>
    <parameterBindings name="Delimeter" constant="\r\n"/>
    <parameterBindings name="Trim" constant="(Boolean)true"/>
    <parameterBindings name="ValuesString" objectPath="PromotionCodeCreateForm:Codes:Value"/>
  </nodes>
<!--@Location 26,7-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode4">
    <nodeSuccessors name="next" next="CallNode0"/>
    <parameterBindings name="Codes" objectPath="ValuesIterator"/>
    <startNode referencedName="ViewPromotionCodeList-CheckUniqueness"/>
  </nodes>
<!--@Location 26,8-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode0">
    <nodeSuccessors name="next" next="CallNode2"/>
    <parameterBindings name="ErrorCodes" objectPath="DuplicateCodes"/>
    <startNode referencedName="ProcessPromotionCode-CheckPromotionCodeLength"/>
  </nodes>
<!--@Location 26,9-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode2">
    <nodeSuccessors name="next" next="DecisionNode1"/>
<!--@BendPoints 58,19 56,20-->
    <nodeSuccessors name="ERROR" next="DecisionNode0"/>
    <parameterBindings name="CodeLevel4Commit" constant="(Integer)1"/>
    <parameterBindings name="Codes" objectPath="ValidCodes"/>
    <startNode referencedName="ProcessPromotionCode-CreateCodes"/>
  </nodes>
<!--@Location 26,10-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode1" conditionKey="ErrorCodes"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="DecisionNode0"/>
    <nodeSuccessors name="decision_no" next="JumpNode0"/>
  </nodes>
<!--@Location 27,10-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode0" conditionKey="ErrorPromotionCodes">
<!--@BendPoints 57,21-->
    <nodeSuccessors name="decision_yes" next="CombineIterators0"/>
    <nodeSuccessors name="decision_no" next="AddObjectToVector4"/>
  </nodes>
<!--@Location 28,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CombineIterators0">
    <configurationValues name="ProcessMethod" value="Concatenate Iterators and Remove Duplicates"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CombineIterators.xml"/>
    <nodeSuccessors name="next" next="InvalidatePageLocatorPageable0"/>
    <parameterBindings name="Iterator1" objectPath="ErrorCodes"/>
    <parameterBindings name="Iterator2" objectPath="ErrorPromotionCodes"/>
    <returnValueBindings name="Iterator" objectPath="ErrorPromotionCodes"/>
  </nodes>
<!--@Location 28,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="InvalidatePageLocatorPageable0">
    <pipelet href="enfinity:/bc_foundation/pipelets/InvalidatePageLocatorPageable.xml"/>
    <nodeSuccessors name="next" next="PrepareApplicationView0"/>
    <parameterBindings name="PageLocatorName" objectPath="PromotionCodesPageLocator"/>
  </nodes>
<!--@Location 28,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="PrepareApplicationView0">
    <configurationValues name="SelectedMenuItem" value="OnlineMarketing"/>
    <configurationValues name="WorkingTemplate" value="marketing/PromotionCodeCreate"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/PrepareApplicationView.xml"/>
<!--@BendPoints 57,28-->
    <nodeSuccessors name="next" next="InteractionNode0"/>
    <parameterBindings name="WorkingTemplateSuffix" objectPath="CurrentChannel:TypeCode"/>
  </nodes>
<!--@Location 28,14-->
  <nodes xsi:type="pipeline:InteractionNode" nodeID="InteractionNode0">
    <template referencedName="application/ApplicationFrame"/>
  </nodes>
<!--@Location 27,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector4">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="CombineIterators0"/>
    <parameterBindings name="InVector" nullBinding="true"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="ErrorPromotionCodes"/>
    <returnValueBindings name="OutVector" nullBinding="true"/>
  </nodes>
<!--@Location 26,11-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode0">
    <startNode referencedName="ViewPromotionCodeList-ShowAll"/>
  </nodes>
<!--@Location 29,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode3">
    <nodeSuccessors name="next" next="PrepareApplicationView0"/>
  </nodes>
<!--@Location 23,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode15" name="DeactivatePromotionCode">
<!--@BendPoints 47,4-->
    <nodeSuccessors name="next" next="CallNode17"/>
  </nodes>
<!--@Location 23,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode17">
    <nodeSuccessors name="next" next="Call4"/>
<!--@BendPoints 49,6-->
    <nodeSuccessors name="Failed" next="JoinNode17"/>
    <startNode referencedName="ViewPromotionCodeList-Prefix"/>
  </nodes>
<!--@Location 23,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call4">
<!--@BendPoints 47,8-->
    <nodeSuccessors name="next" next="Loop1"/>
    <startNode referencedName="ProcessClipboard-Get"/>
  </nodes>
<!--@Location 23,4-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="Loop1" loop="UUIDIterator">
    <nodeSuccessors name="next" next="JoinNode17"/>
    <entry key="Code">
<!--@BendPoints 47,10-->
      <nodeSuccessors name="loop_entry_next" next="GetPromotionCodeByCode2"/>
    </entry>
  </nodes>
<!--@Location 23,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetPromotionCodeByCode2">
    <pipelet href="enfinity:/bc_marketing/pipelets/GetPromotionCodeByCode.xml"/>
<!--@BendPoints 47,12-->
    <nodeSuccessors name="next" next="CallNode13"/>
<!--@BendPoints 49,11 49,12-->
    <nodeSuccessors name="pipelet_error" next="SetDictionaryValue2"/>
  </nodes>
<!--@Location 23,6-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode13">
    <nodeSuccessors name="next" next="JoinNode16"/>
    <startNode referencedName="ProcessPromotionCode-Deactivate"/>
  </nodes>
<!--@Location 23,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode16">
<!--@BendPoints 46,15 46,9-->
    <nodeSuccessors name="next" next="Loop1_Entry"/>
  </nodes>
<!--@Location 24,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue2">
    <configurationValues name="Name" value="ERROR_PromotionCode"/>
    <configurationValues name="Value" value="deactivate"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 49,15-->
    <nodeSuccessors name="next" next="JoinNode16"/>
  </nodes>
<!--@Location 24,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode17">
<!--@BendPoints 50,9-->
    <nodeSuccessors name="next" next="Jump1"/>
  </nodes>
<!--@Location 25,4-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="Jump1">
    <startNode referencedName="ViewPromotionCodeList-ShowAll"/>
  </nodes>
<!--@Location 19,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode9" name="DeletePromotionCode">
<!--@BendPoints 39,4-->
    <nodeSuccessors name="next" next="CallNode8"/>
  </nodes>
<!--@Location 19,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode8">
    <nodeSuccessors name="next" next="Call2"/>
<!--@BendPoints 41,6-->
    <nodeSuccessors name="Failed" next="JoinNode7"/>
    <startNode referencedName="ViewPromotionCodeList-Prefix"/>
  </nodes>
<!--@Location 19,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call2">
<!--@BendPoints 39,8-->
    <nodeSuccessors name="next" next="Loop2"/>
    <startNode referencedName="ProcessClipboard-Get"/>
  </nodes>
<!--@Location 19,4-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="Loop2" loop="UUIDIterator">
    <nodeSuccessors name="next" next="JoinNode7"/>
    <entry key="Code">
<!--@BendPoints 39,10-->
      <nodeSuccessors name="loop_entry_next" next="GetPromotionCodeByCode1"/>
    </entry>
  </nodes>
<!--@Location 19,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetPromotionCodeByCode1">
    <pipelet href="enfinity:/bc_marketing/pipelets/GetPromotionCodeByCode.xml"/>
<!--@BendPoints 39,12-->
    <nodeSuccessors name="next" next="CallNode21"/>
<!--@BendPoints 41,11 41,12-->
    <nodeSuccessors name="pipelet_error" next="SetDictionaryValue1"/>
  </nodes>
<!--@Location 19,6-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode21">
    <nodeSuccessors name="next" next="JoinNode8"/>
    <startNode referencedName="ProcessPromotionCode-Remove"/>
  </nodes>
<!--@Location 19,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode8">
<!--@BendPoints 38,15 38,9-->
    <nodeSuccessors name="next" next="Loop2_Entry"/>
  </nodes>
<!--@Location 20,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue1">
    <configurationValues name="Name" value="ERROR_PromotionCode"/>
    <configurationValues name="Value" value="delete"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
<!--@BendPoints 41,15-->
    <nodeSuccessors name="next" next="JoinNode8"/>
  </nodes>
<!--@Location 20,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode7">
<!--@BendPoints 42,9-->
    <nodeSuccessors name="next" next="Jump3"/>
  </nodes>
<!--@Location 21,4-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="Jump3">
    <startNode referencedName="ViewPromotionCodeList-ShowAll"/>
  </nodes>
<!--@Location 3,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode4" name="Dispatch">
<!--@BendPoints 7,4-->
    <nodeSuccessors name="next" next="DispatchFormAction2"/>
  </nodes>
<!--@Location 3,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DispatchFormAction2">
    <configurationValues name="OutValue_0" value="ViewPromotionCodeList-ShowCreatePromotionCodes"/>
    <configurationValues name="OutValue_1" value="ViewPromotionCodeList-ShowGeneratePromotionCodes"/>
    <configurationValues name="OutValue_2" value="ViewPromotionCodeImport-InitPromotionCodeImport"/>
    <configurationValues name="OutValue_3" value="ViewPromotionCodeExport-SelectDetails"/>
    <configurationValues name="OutValue_4" value="ViewPromotionCodeList-PagingPromotionCode"/>
    <configurationValues name="OutValue_5" value="ViewPromotionCodeList-PagingPromotionCode"/>
    <configurationValues name="OutValue_6" value="ViewPromotionCodeList-DeletePromotionCode"/>
    <configurationValues name="OutValue_7" value="ViewPromotionCodeList-DeactivatePromotionCode"/>
    <configurationValues name="OutValue_8" value="ViewPromotionCodeList-PagingPromotionCode"/>
    <configurationValues name="OutValue_9" value="ViewPromotionCodeGroupList-ParametricSearch"/>
    <configurationValues name="PagingPipeline" value="ViewPromotionCodeList-PagingPromotionCode"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/DispatchFormAction.xml"/>
<!--@BendPoints 7,6-->
    <nodeSuccessors name="next" next="JumpNode1"/>
    <parameterBindings name="Key_0" objectPath="createCodes"/>
    <parameterBindings name="Key_1" objectPath="generateCodes"/>
    <parameterBindings name="Key_2" objectPath="importCodes"/>
    <parameterBindings name="Key_3" objectPath="exportCodes"/>
    <parameterBindings name="Key_4" objectPath="confirmDeleteCodes"/>
    <parameterBindings name="Key_5" objectPath="cancel"/>
    <parameterBindings name="Key_6" objectPath="deleteCodes"/>
    <parameterBindings name="Key_7" objectPath="deactivateCodes"/>
    <parameterBindings name="Key_8" objectPath="confirmDeactivateCodes"/>
    <parameterBindings name="Key_9" objectPath="findSimple"/>
    <returnValueBindings name="SelectionKey" objectPath="JumpTarget"/>
  </nodes>
<!--@Location 3,3-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode1">
    <startNode referencedName="SecureJump-Start"/>
  </nodes>
<!--@Location 3,5-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode3" name="DispatchCreateCodes">
<!--@BendPoints 7,12-->
    <nodeSuccessors name="next" next="DispatchFormAction1"/>
  </nodes>
<!--@Location 3,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DispatchFormAction1">
    <configurationValues name="OutValue_0" value="ViewPromotionCodeList-CreatePromotionCodes"/>
    <configurationValues name="OutValue_1" value="ViewPromotionCodeList-ShowAll"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/DispatchFormAction.xml"/>
<!--@BendPoints 7,14-->
    <nodeSuccessors name="next" next="JumpNode2"/>
    <parameterBindings name="Key_0" objectPath="createCodes"/>
    <parameterBindings name="Key_1" objectPath="cancel"/>
    <returnValueBindings name="SelectionKey" objectPath="JumpTarget"/>
  </nodes>
<!--@Location 3,7-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode2">
    <startNode referencedName="SecureJump-Start"/>
  </nodes>
<!--@Location 3,9-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode8" name="DispatchGenerateCodes">
<!--@BendPoints 7,20-->
    <nodeSuccessors name="next" next="DispatchFormAction3"/>
  </nodes>
<!--@Location 3,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DispatchFormAction3">
    <configurationValues name="OutValue_0" value="ViewPromotionCodeList-GeneratePromotionCodes"/>
    <configurationValues name="OutValue_1" value="ViewPromotionCodeList-ShowAll"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/DispatchFormAction.xml"/>
<!--@BendPoints 7,22-->
    <nodeSuccessors name="next" next="JumpNode5"/>
    <parameterBindings name="Key_0" objectPath="generateCodes"/>
    <parameterBindings name="Key_1" objectPath="cancel"/>
    <returnValueBindings name="SelectionKey" objectPath="JumpTarget"/>
  </nodes>
<!--@Location 3,11-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode5">
    <startNode referencedName="SecureJump-Start"/>
  </nodes>
<!--@Location 31,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode14" name="GeneratePromotionCodes">
<!--@BendPoints 63,4-->
    <nodeSuccessors name="next" next="CallNode15"/>
  </nodes>
<!--@Location 31,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode15">
<!--@BendPoints 63,6-->
    <nodeSuccessors name="next" next="CreateForm6"/>
    <startNode referencedName="ViewPromotionCodeList-Prefix"/>
  </nodes>
<!--@Location 31,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateForm6">
    <configurationValues name="FormName" value="PromotionCodeGenerate"/>
    <configurationValues name="FormResource" value="PromotionCodeGenerate"/>
    <pipelet href="enfinity:/core/pipelets/CreateForm.xml"/>
<!--@BendPoints 63,8-->
    <nodeSuccessors name="next" next="ValidateForm3"/>
    <returnValueBindings name="Form" objectPath="PromotionCodeGenerateForm"/>
  </nodes>
<!--@Location 31,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ValidateForm3">
    <pipelet href="enfinity:/core/pipelets/ValidateForm.xml"/>
<!--@BendPoints 63,10-->
    <nodeSuccessors name="next" next="TrimString1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode12"/>
    <parameterBindings name="Form" objectPath="PromotionCodeGenerateForm"/>
  </nodes>
<!--@Location 31,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="TrimString1">
    <pipelet href="enfinity:/bc_foundation/pipelets/TrimString.xml"/>
    <nodeSuccessors name="next" next="SetDomainPreference0"/>
    <parameterBindings name="String" objectPath="PromotionCodeGenerateForm:Prefix:Value"/>
    <returnValueBindings name="TrimmedString" objectPath="TrimmedPrefix"/>
  </nodes>
<!--@Location 31,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDomainPreference0">
    <configurationValues name="DefaultPreferenceKey" value="MisleadingCharactersInPromotionCodes"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="SetFormParameterValue2"/>
<!--@BendPoints 64,13 64,15-->
    <nodeSuccessors name="pipelet_error" next="SetFormParameterValue2"/>
    <parameterBindings name="PreferenceDomain" objectPath="CurrentChannel:Domain"/>
    <parameterBindings name="PreferenceStringValue" objectPath="PromotionCodeGenerate_ExcludedCharacters"/>
  </nodes>
<!--@Location 31,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetFormParameterValue2">
    <pipelet href="enfinity:/core/pipelets/SetFormParameterValue.xml"/>
    <nodeSuccessors name="next" next="GetStringLength1"/>
    <parameterBindings name="FormParameter" objectPath="PromotionCodeGenerateForm:Prefix"/>
    <parameterBindings name="Value" objectPath="TrimmedPrefix"/>
  </nodes>
<!--@Location 31,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetStringLength1">
    <configurationValues name="MaxLength" value="128"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetStringLength.xml"/>
    <nodeSuccessors name="next" next="JoinNode15"/>
<!--@BendPoints 64,17 64,19-->
    <nodeSuccessors name="pipelet_error" next="JoinNode15"/>
    <parameterBindings name="FilledString" objectPath="PromotionCodeGenerateForm:Prefix:Value"/>
    <returnValueBindings name="Length" objectPath="PrefixLength"/>
  </nodes>
<!--@Location 31,9-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode15">
    <nodeSuccessors name="next" next="DecisionNode3"/>
  </nodes>
<!--@Location 31,10-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode3" conditionKey="PrefixLength"
      operator="lte" conditionItem="PromotionCodeGenerateForm:Length:Value">
<!--@BendPoints 63,22-->
    <nodeSuccessors name="decision_yes" next="CalculateInteger1"/>
<!--@BendPoints 64,21-->
    <nodeSuccessors name="decision_no" next="SetFormError2"/>
  </nodes>
<!--@Location 31,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CalculateInteger1">
    <configurationValues name="Operation" value="-"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CalculateInteger.xml"/>
    <nodeSuccessors name="next" next="AddMultipleEntriesToMap1"/>
    <parameterBindings name="Operand1" objectPath="PromotionCodeGenerateForm:Length:Value"/>
    <parameterBindings name="Operand2" objectPath="PrefixLength"/>
    <returnValueBindings name="Result" objectPath="SuffixLength"/>
  </nodes>
<!--@Location 31,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddMultipleEntriesToMap1">
    <configurationValues name="Mode" value="OverwriteValue"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddMultipleEntriesToMap.xml"/>
    <nodeSuccessors name="next" next="ValidateCouponCodeGeneration1"/>
    <parameterBindings name="InMap" nullBinding="true"/>
    <parameterBindings name="Key1" constant="Prefix"/>
    <parameterBindings name="Key2" constant="SuffixLength"/>
    <parameterBindings name="Key3" constant="DomainUUID"/>
    <parameterBindings name="Key4" constant="ExcludedCharacters"/>
    <parameterBindings name="Value1" objectPath="PromotionCodeGenerateForm:Prefix:Value"/>
    <parameterBindings name="Value2" objectPath="SuffixLength"/>
    <parameterBindings name="Value3" objectPath="Domain:UUID"/>
    <parameterBindings name="Value4" objectPath="PromotionCodeGenerateForm:ExcludedCharacters:Value"/>
    <returnValueBindings name="OutMap" objectPath="PromotionCodeParameters"/>
  </nodes>
<!--@Location 31,13-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ValidateCouponCodeGeneration1">
    <pipelet href="enfinity:/bc_marketing/pipelets/ValidateCouponCodeGeneration.xml"/>
    <nodeSuccessors name="next" next="KeyMapper3"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode13"/>
    <parameterBindings name="CouponCodeProviderName" nullBinding="true"/>
    <parameterBindings name="NumberOfCoupons" objectPath="PromotionCodeGenerateForm:Number:Value"/>
    <parameterBindings name="Parameters" objectPath="PromotionCodeParameters"/>
  </nodes>
<!--@displayNearNode@for each $CodeLevel4Commit
codes the CreatePromotionCodes
pipelet calls an commit
@Location 31,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper3">
    <configurationValues name="ValueType" value="Form Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="KeyMapper2"/>
    <parameterBindings name="InValue_1" objectPath="PromotionCodeGenerateForm:Prefix:Value"/>
    <parameterBindings name="InValue_2" objectPath="PromotionCodeGenerateForm:Length:FormattedValue"/>
    <parameterBindings name="InValue_3" objectPath="PromotionCodeGenerateForm:Number:FormattedValue"/>
    <parameterBindings name="InValue_4" objectPath="Domain:UUID"/>
    <parameterBindings name="InValue_5" constant="1000"/>
    <parameterBindings name="InValue_6" objectPath="PromotionCodeGenerateForm:ExcludedCharacters:Value"/>
    <returnValueBindings name="OutValue_1" objectPath="Prefix"/>
    <returnValueBindings name="OutValue_2" objectPath="Length"/>
    <returnValueBindings name="OutValue_3" objectPath="Number"/>
    <returnValueBindings name="OutValue_4" objectPath="PromotionCodeGroupDomainID"/>
    <returnValueBindings name="OutValue_5" objectPath="CodeLevel4Commit"/>
    <returnValueBindings name="OutValue_6" objectPath="ExcludedCharacters"/>
  </nodes>
<!--@Location 31,15-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper2">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 63,32-->
    <nodeSuccessors name="next" next="KeyMapper8"/>
    <parameterBindings name="InValue_1" objectPath="CurrentChannel:RepositoryDomain"/>
    <parameterBindings name="InValue_2" objectPath="CurrentChannel:Domain:Site"/>
    <returnValueBindings name="OutValue_1" objectPath="ProcessOwningDomain"/>
    <returnValueBindings name="OutValue_2" objectPath="ProcessExecutionDomain"/>
  </nodes>
<!--@Location 31,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper8">
    <configurationValues name="ValueType" value="Form Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 63,34-->
    <nodeSuccessors name="next" next="Call3"/>
    <parameterBindings name="InValue_1" constant="ProcessPromotionCode-BatchGenerateCodes"/>
    <parameterBindings name="InValue_2" constant="ProcessPromotionCode-InitBatch"/>
    <parameterBindings name="InValue_3" constant="MarketingGeneratePromotionCodes"/>
    <parameterBindings name="InValue_4" constant="ProcessPromotionCode-PostBatch"/>
    <parameterBindings name="InValue_5" constant="ProcessPromotionCode-ErrorBatchGenerateCodes"/>
    <parameterBindings name="InValue_6" constant="Marketing"/>
    <returnValueBindings name="OutValue_1" objectPath="ProcessPipeline"/>
    <returnValueBindings name="OutValue_2" objectPath="InitPipeline"/>
    <returnValueBindings name="OutValue_3" objectPath="JobName"/>
    <returnValueBindings name="OutValue_4" objectPath="PostPipeline"/>
    <returnValueBindings name="OutValue_5" objectPath="ErrorPipeline"/>
    <returnValueBindings name="OutValue_6" objectPath="JobNamePrefix"/>
  </nodes>
<!--@Location 31,17-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call3">
<!--@BendPoints 63,36-->
    <nodeSuccessors name="next" next="KeyMapper1"/>
    <startNode referencedName="ProcessBatchJob-Create"/>
  </nodes>
<!--@Location 31,18-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper1">
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="CallNode24"/>
    <parameterBindings name="InValue_1" constant="BatchJobStarted"/>
    <parameterBindings name="InValue_2" constant="ViewPromotionCodeList-ShowAll"/>
    <parameterBindings name="InValue_3" constant="PromotionCodeGroupID"/>
    <parameterBindings name="InValue_4" objectPath="PromotionCodeGroupID"/>
    <returnValueBindings name="OutValue_1" objectPath="BatchJobStarted"/>
    <returnValueBindings name="OutValue_2" objectPath="JumpTarget"/>
    <returnValueBindings name="OutValue_3" objectPath="AdditionalParameterName1"/>
    <returnValueBindings name="OutValue_4" objectPath="AdditionalParameterValue1"/>
  </nodes>
<!--@Location 31,19-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode24">
    <nodeSuccessors name="next" next="JumpNode3"/>
    <startNode referencedName="ViewData-SecureForBrowserBack"/>
  </nodes>
<!--@Location 31,20-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode3">
    <startNode referencedName="ViewPromotionCodeList-ShowAll"/>
  </nodes>
<!--@Location 33,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode13">
    <nodeSuccessors name="next" next="PrepareApplicationView4"/>
  </nodes>
<!--@Location 33,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="PrepareApplicationView4">
    <configurationValues name="SelectedMenuItem" value="OnlineMarketing"/>
    <configurationValues name="WorkingTemplate" value="marketing/PromotionCodeGenerate"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/PrepareApplicationView.xml"/>
<!--@BendPoints 67,34-->
    <nodeSuccessors name="next" next="InteractionEnd4"/>
    <parameterBindings name="WorkingTemplateSuffix" objectPath="CurrentChannel:TypeCode"/>
  </nodes>
<!--@Location 33,17-->
  <nodes xsi:type="pipeline:InteractionNode" nodeID="InteractionEnd4">
    <template referencedName="application/ApplicationFrame"/>
  </nodes>
<!--@Location 32,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetFormError2">
    <pipelet href="enfinity:/core/pipelets/SetFormError.xml"/>
    <nodeSuccessors name="next" next="JoinNode18"/>
    <parameterBindings name="ErrorMsg" constant="error.code.prefix.length"/>
    <parameterBindings name="TargetObject" objectPath="PromotionCodeGenerateForm:Prefix"/>
  </nodes>
<!--@Location 33,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode18">
    <nodeSuccessors name="next" next="JoinNode13"/>
  </nodes>
<!--@Location 33,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode12">
    <nodeSuccessors name="next" next="GetDomainPreference0"/>
  </nodes>
<!--@Location 33,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainPreference0">
    <configurationValues name="DefaultPreferenceKey" value="MisleadingCharactersInPromotionCodes"/>
    <configurationValues name="Type" value="String"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetDomainPreference.xml"/>
    <nodeSuccessors name="next" next="JoinNode14"/>
<!--@BendPoints 68,11 68,13-->
    <nodeSuccessors name="pipelet_error" next="JoinNode14"/>
    <parameterBindings name="PreferenceDomain" objectPath="CurrentChannel:Domain"/>
    <returnValueBindings name="Preference" objectPath="MisleadingCharactersInPromotionCodes"/>
    <returnValueBindings name="PreferenceStringValue" objectPath="MisleadingCharactersInPromotionCodesStringValue"/>
  </nodes>
<!--@Location 33,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode14">
    <nodeSuccessors name="next" next="JoinNode18"/>
  </nodes>
<!--@Location 15,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode11" name="GetPageablePromotionCodes"
      callMode="Private">
<!--@BendPoints 31,4-->
    <nodeSuccessors name="next" next="Call1"/>
  </nodes>
<!--@Location 15,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call1">
    <nodeSuccessors name="next" next="GetPageLocator1"/>
    <startNode referencedName="ProcessClipboard-Update"/>
  </nodes>
<!--@Location 15,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetPageLocator1">
    <configurationValues name="DefaultPageLocatorName" value="PromotionCodesPageLocator"/>
    <configurationValues name="RestorePageLocatorDictionary" value="True"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetPageLocator.xml"/>
    <nodeSuccessors name="next" next="GetPageable2"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode27"/>
    <parameterBindings name="PageLocatorName" nullBinding="true"/>
  </nodes>
<!--@Location 15,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetPageable2">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetPageable.xml"/>
    <nodeSuccessors name="next" next="Decision4"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode29"/>
    <parameterBindings name="PageableID" objectPath="PageLocator:PageableID"/>
    <returnValueBindings name="Pageable" objectPath="PromotionCodes"/>
  </nodes>
<!--@Location 15,6-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision4" conditionKey="PageNumber">
    <nodeSuccessors name="decision_yes" next="VerifyInteger2"/>
<!--@BendPoints 33,13-->
    <nodeSuccessors name="decision_no" next="JoinNode28"/>
  </nodes>
<!--@Location 15,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="VerifyInteger2">
    <pipelet href="enfinity:/bc_foundation/pipelets/VerifyInteger.xml"/>
<!--@BendPoints 31,20-->
    <nodeSuccessors name="next" next="SetPage5"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode25"/>
    <parameterBindings name="Locale" nullBinding="true"/>
    <parameterBindings name="LocalizedString" objectPath="PageNumber"/>
    <parameterBindings name="Pattern" nullBinding="true"/>
    <returnValueBindings name="IntegerObject" objectPath="PageNumber"/>
  </nodes>
<!--@Location 15,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetPage5">
    <pipelet href="enfinity:/bc_foundation/pipelets/SetPage.xml"/>
    <nodeSuccessors name="next" next="JoinNode26"/>
    <parameterBindings name="Pageable" objectPath="PromotionCodes"/>
  </nodes>
<!--@Location 12,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode12" name="PagingPromotionCode">
<!--@BendPoints 25,4-->
    <nodeSuccessors name="next" next="CallNode18"/>
  </nodes>
<!--@Location 12,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode18">
<!--@BendPoints 25,6-->
    <nodeSuccessors name="next" next="ExchangeSessionObject3"/>
<!--@BendPoints 27,6 27,15-->
    <nodeSuccessors name="Failed" next="JoinNode6"/>
    <startNode referencedName="This:Prefix"/>
  </nodes>
<!--@Location 12,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject3">
    <configurationValues name="ProcessMethod" value="Get Object from Session"/>
    <configurationValues name="SessionObjectName" value="PromotionCodeSearchForm"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
<!--@BendPoints 25,12-->
    <nodeSuccessors name="next" next="CallNode6"/>
    <returnValueBindings name="LoadObject" objectPath="PromotionCodeSearchForm"/>
  </nodes>
<!--@Location 12,6-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode6">
    <nodeSuccessors name="next" next="JoinNode6"/>
    <startNode referencedName="ViewPromotionCodeList-GetPageablePromotionCodes"/>
  </nodes>
<!--@Location 12,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode6">
    <nodeSuccessors name="next" next="JoinNode5"/>
  </nodes>
<!--@Location 11,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode5">
    <nodeSuccessors name="next" next="PrepareApplicationView1"/>
  </nodes>
<!--@Location 11,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="PrepareApplicationView1">
    <configurationValues name="SelectedMenuItem" value="OnlineMarketing"/>
    <configurationValues name="WorkingTemplate" value="marketing/PromotionCodeList"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/PrepareApplicationView.xml"/>
<!--@BendPoints 23,18-->
    <nodeSuccessors name="next" next="InteractionEnd1"/>
    <parameterBindings name="WorkingTemplateSuffix" objectPath="CurrentChannel:TypeCode"/>
  </nodes>
<!--@Location 11,9-->
  <nodes xsi:type="pipeline:InteractionNode" nodeID="InteractionEnd1">
    <template referencedName="application/ApplicationFrame"/>
  </nodes>
<!--@Location 7,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode6" name="ParametricSearch">
<!--@BendPoints 15,4-->
    <nodeSuccessors name="next" next="CallNode9"/>
  </nodes>
<!--@Location 7,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode9">
<!--@BendPoints 15,6-->
    <nodeSuccessors name="next" next="CreateForm3"/>
    <nodeSuccessors name="Failed" next="JoinNode11"/>
    <startNode referencedName="This:Prefix"/>
  </nodes>
<!--@Location 7,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateForm3">
    <configurationValues name="FormName" value="PromotionCodeSearch"/>
    <configurationValues name="FormResource" value="PromotionCodeSearch"/>
    <pipelet href="enfinity:/core/pipelets/CreateForm.xml"/>
<!--@BendPoints 15,8-->
    <nodeSuccessors name="next" next="ValidateForm1"/>
    <returnValueBindings name="Form" objectPath="PromotionCodeSearchForm"/>
  </nodes>
<!--@Location 7,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ValidateForm1">
    <pipelet href="enfinity:/core/pipelets/ValidateForm.xml"/>
<!--@BendPoints 15,10-->
    <nodeSuccessors name="next" next="ExchangeSessionObject1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode10"/>
    <parameterBindings name="Form" objectPath="PromotionCodeSearchForm"/>
  </nodes>
<!--@Location 7,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject1">
    <configurationValues name="ProcessMethod" value="Put Object to Session"/>
    <configurationValues name="SessionObjectName" value="PromotionCodeSearchForm"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
<!--@BendPoints 15,12-->
    <nodeSuccessors name="next" next="CallNode11"/>
    <parameterBindings name="SaveObject" objectPath="PromotionCodeSearchForm"/>
  </nodes>
<!--@Location 7,6-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode11">
    <nodeSuccessors name="next" next="DecisionNode2"/>
<!--@BendPoints 19,15 19,24-->
    <nodeSuccessors name="Error" next="JumpNode4"/>
    <parameterBindings name="Redeemed" objectPath="PromotionCodeSearchForm:Redeemed:Value"/>
    <parameterBindings name="SearchTerm" objectPath="PromotionCodeSearchForm:Code:Value"/>
    <parameterBindings name="SortBy" objectPath="SortBy"/>
    <parameterBindings name="SortDirection" objectPath="SortDirection"/>
    <startNode referencedName="ProcessPromotionCode-ProcessParametricSearch"/>
  </nodes>
<!--@Location 7,7-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode2" conditionKey="PromotionCodes"
      operator="has_elements">
<!--@BendPoints 15,16-->
    <nodeSuccessors name="decision_yes" next="SetPageLocator2"/>
<!--@BendPoints 17,15 17,21-->
    <nodeSuccessors name="decision_no" next="JoinNode9"/>
  </nodes>
<!--@Location 7,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetPageLocator2">
    <configurationValues name="DefaultHandlerPipeline" value="ViewPromotionCodeList-PagingPromotionCode"/>
    <configurationValues name="DefaultPageLocatorName" value="PromotionCodesPageLocator"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetPageLocator.xml"/>
<!--@BendPoints 15,18-->
    <nodeSuccessors name="next" next="CallNode10"/>
    <parameterBindings name="HandlerPipeline" nullBinding="true"/>
    <parameterBindings name="PageLocatorName" nullBinding="true"/>
    <parameterBindings name="Pageable" objectPath="PromotionCodes"/>
  </nodes>
<!--@Location 7,9-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode10">
    <nodeSuccessors name="next" next="JoinNode9"/>
    <startNode referencedName="ViewPromotionCodeList-GetPageablePromotionCodes"/>
  </nodes>
<!--@Location 7,10-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode9">
    <nodeSuccessors name="next" next="PrepareApplicationView3"/>
  </nodes>
<!--@Location 7,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="PrepareApplicationView3">
    <configurationValues name="SelectedMenuItem" value="OnlineMarketing"/>
    <configurationValues name="WorkingTemplate" value="marketing/PromotionCodeList"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/PrepareApplicationView.xml"/>
<!--@BendPoints 15,24-->
    <nodeSuccessors name="next" next="InteractionEnd3"/>
    <parameterBindings name="WorkingTemplateSuffix" objectPath="CurrentChannel:TypeCode"/>
  </nodes>
<!--@Location 7,12-->
  <nodes xsi:type="pipeline:InteractionNode" nodeID="InteractionEnd3">
    <template referencedName="application/ApplicationFrame"/>
  </nodes>
<!--@Location 9,12-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode4">
    <startNode referencedName="ViewPromotionCodeList-ShowAll"/>
  </nodes>
<!--@Location 11,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode10">
<!--@BendPoints 23,10-->
    <nodeSuccessors name="next" next="ExchangeSessionObject4"/>
  </nodes>
<!--@Location 11,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject4">
    <configurationValues name="ProcessMethod" value="Put Object to Session"/>
    <configurationValues name="SessionObjectName" value="PromotionCodeSearchForm"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
<!--@BendPoints 23,12-->
    <nodeSuccessors name="next" next="CallNode7"/>
    <parameterBindings name="SaveObject" objectPath="PromotionCodeSearchForm"/>
  </nodes>
<!--@Location 11,6-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode7">
    <nodeSuccessors name="next" next="JoinNode5"/>
    <startNode referencedName="ViewPromotionCodeList-CreatePageablePromotionCodes"/>
  </nodes>
<!--@Location 6,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode11">
<!--@BendPoints 13,21-->
    <nodeSuccessors name="next" next="JoinNode9"/>
  </nodes>
<!--@Location 0,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start2" name="Prefix" callMode="Private">
<!--@BendPoints 1,4-->
    <nodeSuccessors name="next" next="Decision3"/>
  </nodes>
<!--@Location 0,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision3" conditionKey="PromotionCodeGroup"
      operator="undef">
<!--@BendPoints 1,6-->
    <nodeSuccessors name="decision_yes" next="Decision2"/>
<!--@BendPoints 4,5 4,13-->
    <nodeSuccessors name="decision_no" next="JoinNode2"/>
  </nodes>
<!--@Location 0,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision2" conditionKey="PromotionCodeGroupID">
<!--@BendPoints 1,8-->
    <nodeSuccessors name="decision_yes" next="CallNode3"/>
<!--@BendPoints 3,7-->
    <nodeSuccessors name="decision_no" next="JoinNode1"/>
  </nodes>
<!--@Location 0,4-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode3">
<!--@BendPoints 1,10-->
    <nodeSuccessors name="next" next="GetPromotionCodeGroupByID1"/>
    <parameterBindings name="Channel" objectPath="CurrentChannel"/>
    <startNode referencedName="ProcessPromotion-GetPromotionDomainByChannel"/>
    <returnValueBindings name="PromotionDomain" objectPath="Domain"/>
  </nodes>
<!--@Location 0,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetPromotionCodeGroupByID1">
    <pipelet href="enfinity:/bc_marketing/pipelets/GetPromotionCodeGroupByID.xml"/>
    <nodeSuccessors name="next" next="JoinNode2"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode1"/>
    <parameterBindings name="GroupID" objectPath="PromotionCodeGroupID"/>
  </nodes>
<!--@Location 0,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode2">
<!--@BendPoints 1,14-->
    <nodeSuccessors name="next" next="End1"/>
  </nodes>
<!--@Location 0,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End1"/>
<!--@Location 1,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode1">
<!--@BendPoints 3,14-->
    <nodeSuccessors name="next" next="EndNode1"/>
  </nodes>
<!--@Location 1,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode1" name="Failed"/>
<!--@Location 11,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode1" name="ShowAll">
<!--@BendPoints 23,4-->
    <nodeSuccessors name="next" next="CallNode1"/>
  </nodes>
<!--@Location 11,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode1">
<!--@BendPoints 23,6-->
    <nodeSuccessors name="next" next="CreateForm5"/>
<!--@BendPoints 21,6 21,15-->
    <nodeSuccessors name="Failed" next="JoinNode5"/>
    <startNode referencedName="ViewPromotionCodeList-Prefix"/>
  </nodes>
<!--@Location 11,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateForm5">
    <configurationValues name="FormName" value="PromotionCodeSearch"/>
    <configurationValues name="FormResource" value="PromotionCodeSearch"/>
    <pipelet href="enfinity:/core/pipelets/CreateForm.xml"/>
    <nodeSuccessors name="next" next="JoinNode10"/>
    <returnValueBindings name="Form" objectPath="PromotionCodeSearchForm"/>
  </nodes>
<!--@Location 29,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode17" name="ShowCreatePromotionCodes">
<!--@BendPoints 59,4-->
    <nodeSuccessors name="next" next="CallNode5"/>
  </nodes>
<!--@Location 29,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode5">
<!--@BendPoints 59,6-->
    <nodeSuccessors name="next" next="CreateForm0"/>
    <startNode referencedName="ViewPromotionCodeList-Prefix"/>
  </nodes>
<!--@Location 29,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateForm0">
    <configurationValues name="FormName" value="PromotionCodeCreate"/>
    <configurationValues name="FormResource" value="PromotionCodeCreate"/>
    <pipelet href="enfinity:/core/pipelets/CreateForm.xml"/>
    <nodeSuccessors name="next" next="JoinNode3"/>
    <returnValueBindings name="Form" objectPath="PromotionCodeCreateForm"/>
  </nodes>
<!--@Location 33,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode13" name="ShowGeneratePromotionCodes">
<!--@BendPoints 67,4-->
    <nodeSuccessors name="next" next="CallNode14"/>
  </nodes>
<!--@Location 33,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode14">
<!--@BendPoints 67,6-->
    <nodeSuccessors name="next" next="CreateForm4"/>
    <startNode referencedName="ViewPromotionCodeList-Prefix"/>
  </nodes>
<!--@Location 33,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateForm4">
    <configurationValues name="FormName" value="PromotionCodeGenerate"/>
    <configurationValues name="FormResource" value="PromotionCodeGenerate"/>
    <pipelet href="enfinity:/core/pipelets/CreateForm.xml"/>
    <nodeSuccessors name="next" next="JoinNode12"/>
    <returnValueBindings name="Form" objectPath="PromotionCodeGenerateForm"/>
  </nodes>
<!--@Location 5,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode7" name="Sort">
<!--@BendPoints 11,4-->
    <nodeSuccessors name="next" next="CallNode12"/>
  </nodes>
<!--@Location 5,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode12">
<!--@BendPoints 11,7 11,10-->
    <nodeSuccessors name="next" next="ExchangeSessionObject2"/>
    <nodeSuccessors name="Failed" next="JoinNode11"/>
    <startNode referencedName="This:Prefix"/>
  </nodes>
<!--@Location 5,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ExchangeSessionObject2">
    <configurationValues name="ProcessMethod" value="Get Object from Session"/>
    <configurationValues name="SessionObjectName" value="PromotionCodeSearchForm"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ExchangeSessionObject.xml"/>
<!--@BendPoints 11,12-->
    <nodeSuccessors name="next" next="CallNode11"/>
    <returnValueBindings name="LoadObject" objectPath="PromotionCodeSearchForm"/>
  </nodes>
<!--@Location 26,17-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode0" strict="true" name="ValidateCodes"
      callMode="Private">
    <nodeSuccessors name="next" next="AddObjectToVector2"/>
    <parameters name="Codes" type="java.util.Iterator"/>
  </nodes>
<!--@Location 26,18-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector2">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="AddObjectToVector3"/>
    <parameterBindings name="InVector" objectPath="ValidCodesV"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="ValidCodes"/>
    <returnValueBindings name="OutVector" objectPath="ValidCodesV"/>
  </nodes>
<!--@Location 26,19-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector3">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="LoopNode0"/>
    <parameterBindings name="InVector" objectPath="ErrorCodesV"/>
    <parameterBindings name="Object" nullBinding="true"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="ErrorCodes"/>
    <returnValueBindings name="OutVector" objectPath="ErrorCodesV"/>
  </nodes>
<!--@Location 26,20-->
  <nodes xsi:type="pipeline:LoopNode" nodeID="LoopNode0" loop="Codes">
    <nodeSuccessors name="next" next="DecisionNode4"/>
    <entry key="Code">
      <nodeSuccessors name="loop_entry_next" next="GetStringLength0"/>
    </entry>
  </nodes>
<!--@Location 26,21-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetStringLength0">
    <configurationValues name="MaxLength" value="128"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetStringLength.xml"/>
    <nodeSuccessors name="next" next="AddObjectToVector0"/>
<!--@BendPoints 51,43-->
    <nodeSuccessors name="pipelet_error" next="AddObjectToVector1"/>
    <parameterBindings name="FilledString" objectPath="Code"/>
  </nodes>
<!--@Location 26,22-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector0">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
    <nodeSuccessors name="next" next="JoinNode0"/>
    <parameterBindings name="InVector" objectPath="ValidCodesV"/>
    <parameterBindings name="Object" objectPath="Code"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="ValidCodes"/>
    <returnValueBindings name="OutVector" objectPath="ValidCodesV"/>
  </nodes>
<!--@Location 26,23-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode0">
    <nodeSuccessors name="next" next="LoopNode0_Entry"/>
  </nodes>
<!--@Location 25,22-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddObjectToVector1">
    <pipelet href="enfinity:/bc_foundation/pipelets/AddObjectToVector.xml"/>
<!--@BendPoints 51,47-->
    <nodeSuccessors name="next" next="JoinNode0"/>
    <parameterBindings name="InVector" objectPath="ErrorCodesV"/>
    <parameterBindings name="Object" objectPath="Code"/>
    <parameterBindings name="Objects" nullBinding="true"/>
    <returnValueBindings name="Iterator" objectPath="ErrorCodes"/>
    <returnValueBindings name="OutVector" objectPath="ErrorCodesV"/>
  </nodes>
<!--@Location 27,20-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode4" conditionKey="ErrorCodes"
      operator="has_elements">
    <nodeSuccessors name="decision_yes" next="KeyMapper4"/>
    <nodeSuccessors name="decision_no" next="JoinNode4"/>
  </nodes>
<!--@Location 27,21-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper4">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="JoinNode4"/>
    <parameterBindings name="InValue_1" constant="CodesToLong"/>
    <returnValueBindings name="OutValue_1" objectPath="ErrorCode"/>
  </nodes>
<!--@Location 27,22-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode4">
    <nodeSuccessors name="next" next="EndNode0"/>
  </nodes>
<!--@Location 27,23-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode0" strict="true">
    <returnValues name="ErrorCodes" type="java.util.Iterator"/>
    <returnValues name="ValidCodes" type="java.util.Iterator"/>
    <returnValues name="ErrorCode" type="java.lang.Object" optional="true"/>
  </nodes>
</pipeline:Pipeline>
