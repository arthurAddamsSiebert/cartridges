<?xml version="1.0" encoding="UTF-8"?>
<!--process for promotion code import handling
@Group ImportExport-->

<pipeline:Pipeline xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pipeline="http://www.intershop.de/pipeline/2010"
    name="ProcessPromotionCodeImport" type="view">
<!--@Location 12,24-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start10" name="ConvertCSV" callMode="Private">
    <nodeSuccessors name="next" next="OpenFile9"/>
  </nodes>
<!--@Location 12,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="OpenFile9">
    <configurationValues name="PipeletID" value="OpenCSVFile1"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="Type" value="SOURCE"/>
    <configurationValues name="UIDescription" value="OpenFile"/>
    <pipelet href="enfinity:/core/pipelets/OpenFile.xml"/>
    <nodeSuccessors name="next" next="OpenFile2"/>
<!--@BendPoints 31,51-->
    <nodeSuccessors name="pipelet_error" next="Join28"/>
    <parameterBindings name="File" objectPath="SourceCsvFile"/>
  </nodes>
<!--@Location 12,26-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="OpenFile2">
    <configurationValues name="PipeletID" value="OpenXMLFile5"/>
    <configurationValues name="StreamID" value="temp"/>
    <configurationValues name="Type" value="TEMP_OUT"/>
    <configurationValues name="UIDescription" value="OpenFile"/>
    <pipelet href="enfinity:/core/pipelets/OpenFile.xml"/>
    <nodeSuccessors name="next" next="ASCIIConvert1"/>
    <nodeSuccessors name="pipelet_error" next="Join28"/>
    <parameterBindings name="File" objectPath="TempXMLFile"/>
  </nodes>
<!--@Location 12,27-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ASCIIConvert1">
    <configurationValues name="Encoding" value="UTF-8"/>
    <configurationValues name="FieldDelimiter" value=";"/>
    <configurationValues name="FormatLine" value="1"/>
    <configurationValues name="Iterator.Name" value="data"/>
    <configurationValues name="PipeletID" value="ASCIIConvert1"/>
    <configurationValues name="SkipLines" value="1"/>
    <configurationValues name="SourceID" value="source"/>
    <configurationValues name="TargetID" value="temp"/>
    <configurationValues name="UIDescription" value="ASCIIConvert"/>
    <pipelet href="enfinity:/core/pipelets/ASCIIConvert.xml"/>
    <nodeSuccessors name="next" next="CloseFile6"/>
    <nodeSuccessors name="pipelet_error" next="CloseFile17"/>
  </nodes>
<!--@Location 12,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile6">
    <configurationValues name="PipeletID" value="CloseXMLFile5"/>
    <configurationValues name="StreamID" value="temp"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="CloseFile2"/>
  </nodes>
<!--@Location 12,29-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile2">
    <configurationValues name="PipeletID" value="CloseASCIIFile1"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseASCIIFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="End11"/>
  </nodes>
<!--@Location 12,30-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End11"/>
<!--@Location 13,27-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile17">
    <configurationValues name="PipeletID" value="CloseXMLFileAASCIIConvertError1"/>
    <configurationValues name="StreamID" value="temp"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="CloseFile18"/>
  </nodes>
<!--@Location 14,27-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile18">
    <configurationValues name="PipeletID" value="CloseXMLFileAASCIIConvertError2"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseASCIIFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="Join27"/>
  </nodes>
<!--@Location 15,27-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join27">
    <nodeSuccessors name="next" next="Call8"/>
  </nodes>
<!--@Location 15,29-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call8">
<!--@BendPoints 31,60-->
    <nodeSuccessors name="next" next="Stop4"/>
    <startNode referencedName="ProcessPromotionImpex-Error"/>
  </nodes>
<!--@Location 15,30-->
  <nodes xsi:type="pipeline:StopNode" nodeID="Stop4"/>
<!--@Location 15,26-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join28">
    <nodeSuccessors name="next" next="Join27"/>
  </nodes>
<!--@Location 17,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode5" name="DBInit" callMode="Private">
    <nodeSuccessors name="next" next="KeyMapper7"/>
  </nodes>
<!--@Location 17,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper7">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="CallNode21"/>
    <parameterBindings name="InValue_1" constant="(Boolean)false"/>
    <returnValueBindings name="OutValue_1" objectPath="PromotionCodesSecured"/>
  </nodes>
<!--@Location 17,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode21">
    <nodeSuccessors name="next" next="CallNode20"/>
    <startNode referencedName="ProcessPromotionCodeImport-PrepareDBInit"/>
  </nodes>
<!--@Location 17,12-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode20">
    <nodeSuccessors name="next" next="CallNode0"/>
<!--@BendPoints 33,25-->
    <nodeSuccessors name="error" next="CallNode23"/>
    <startNode referencedName="ProcessPromotionCodeImport-DBInitImportPromotionCodesXML"/>
  </nodes>
<!--@Location 17,16-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode0">
    <nodeSuccessors name="next" next="EndNode6"/>
    <startNode referencedName="ProcessPromotionCodeImport-DBInitCleanup"/>
  </nodes>
<!--@Location 17,17-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode6"/>
<!--@Location 16,13-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode23">
    <nodeSuccessors name="next" next="StopNode0"/>
    <startNode referencedName="ProcessPromotionImpex-Error"/>
  </nodes>
<!--@Location 16,14-->
  <nodes xsi:type="pipeline:StopNode" nodeID="StopNode0"/>
<!--@Location 21,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode6" name="DBInitCleanup" callMode="Private">
<!--@BendPoints 43,4-->
    <nodeSuccessors name="next" next="CleanUpStagingTables0"/>
  </nodes>
<!--@Location 21,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CleanUpStagingTables0">
    <pipelet href="enfinity:/core/pipelets/CleanUpStagingTables.xml"/>
    <nodeSuccessors name="next" next="UnlockImport0"/>
  </nodes>
<!--@Location 21,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UnlockImport0">
    <configurationValues name="PipeletID" value="UnlockImport"/>
    <configurationValues name="UIDescription" value="UnlockImport"/>
    <pipelet href="enfinity:/core/pipelets/UnlockImport.xml"/>
    <nodeSuccessors name="next" next="JoinNode14"/>
<!--@BendPoints 44,7 44,9-->
    <nodeSuccessors name="pipelet_error" next="JoinNode14"/>
  </nodes>
<!--@Location 21,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode14">
    <nodeSuccessors name="next" next="CloseLoggers1"/>
  </nodes>
<!--@Location 21,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseLoggers1">
    <configurationValues name="PipeletID" value="CloseLoggers"/>
    <configurationValues name="UIDescription" value="Close Loggers"/>
    <pipelet href="enfinity:/core/pipelets/CloseLoggers.xml"/>
    <nodeSuccessors name="next" next="JoinNode9"/>
<!--@BendPoints 44,11 44,13-->
    <nodeSuccessors name="pipelet_error" next="JoinNode9"/>
  </nodes>
<!--@Location 21,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode9">
    <nodeSuccessors name="next" next="EndNode4"/>
  </nodes>
<!--@Location 21,7-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode4"/>
<!--@Location 20,24-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode9" name="DBInitImportPromotionCodesXML"
      callMode="Private">
    <nodeSuccessors name="next" next="CallNode22"/>
  </nodes>
<!--@Location 20,25-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode22">
    <nodeSuccessors name="next" next="GetPromotionCodeGroupByID0"/>
    <parameterBindings name="ChannelDomainName" objectPath="DomainName"/>
    <parameterBindings name="ChannelSite" nullBinding="true"/>
    <startNode referencedName="ProcessPromotionCodeImport-SetChannelSiteOnRequest"/>
  </nodes>
<!--@Location 20,26-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetPromotionCodeGroupByID0">
    <pipelet href="enfinity:/bc_marketing/pipelets/GetPromotionCodeGroupByID.xml"/>
    <nodeSuccessors name="next" next="KeyMapper0"/>
<!--@BendPoints 45,53-->
    <nodeSuccessors name="pipelet_error" next="JoinNode16"/>
    <parameterBindings name="GroupID" objectPath="TargetPromotionCodeGroupID"/>
    <returnValueBindings name="PromotionCodeGroup" objectPath="TargetPromotionCodeGroup"/>
  </nodes>
<!--@Location 20,27-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper0">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="OpenFile0"/>
    <parameterBindings name="InValue_1" objectPath="TargetPromotionCodeGroup:Domain"/>
    <returnValueBindings name="OutValue_1" objectPath="PromotionCodeGroupDomain"/>
  </nodes>
<!--@Location 20,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="OpenFile0">
    <configurationValues name="PipeletID" value="OpenXMLFile1"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="Type" value="SOURCE"/>
    <configurationValues name="UIDescription" value="OpenFile"/>
    <pipelet href="enfinity:/core/pipelets/OpenFile.xml"/>
    <nodeSuccessors name="next" next="Import0"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode16"/>
    <parameterBindings name="File" objectPath="SourceFile"/>
  </nodes>
<!--@Location 20,29-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Import0">
    <configurationValues name="Bulker.Class" value="com.intershop.component.marketingimpex.internal.promotion.code.PromotionCodeElementBulker"/>
    <configurationValues name="Bulker.NumberThreads" value="1"/>
    <configurationValues name="ContentHandler.Class" value="com.intershop.component.marketingimpex.internal.promotion.code.PromotionCodeHandler"/>
    <configurationValues name="ImportManager.Class" value="com.intershop.beehive.core.internal.impex.orm.ORMImportMgr"/>
    <configurationValues name="MaximumErrorsAllowed" value="0"/>
    <configurationValues name="PipeletID" value="ImportPromotionCodes"/>
    <configurationValues name="SourceID" value="source"/>
    <configurationValues name="StatisticsID" value="statistics"/>
    <configurationValues name="UIDescription" value="Import Promotion Codes"/>
    <configurationValues name="Validator.Class" value="com.intershop.component.marketingimpex.internal.promotion.code.PromotionCodeElementValidator"/>
    <configurationValues name="Validator.NumberThreads" value="1"/>
    <pipelet href="enfinity:/core/pipelets/Import.xml"/>
    <nodeSuccessors name="next" next="CloseFile1"/>
<!--@BendPoints 42,59-->
    <nodeSuccessors name="pipelet_error" next="CloseFile0"/>
  </nodes>
<!--@Location 20,30-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile1">
    <configurationValues name="PipeletID" value="CloseXMLFile1"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="CallNode26"/>
  </nodes>
<!--@Location 20,31-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode26">
    <nodeSuccessors name="next" next="EndNode10"/>
    <parameterBindings name="ChannelDomainName" nullBinding="true"/>
    <parameterBindings name="ChannelSite" objectPath="OriginalRequestChannelSite"/>
    <startNode referencedName="ProcessPromotionCodeImport-SetChannelSiteOnRequest"/>
  </nodes>
<!--@Location 20,32-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode10"/>
<!--@Location 21,29-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile0">
    <configurationValues name="PipeletID" value="CloseXMLFileRelation"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="JoinNode17"/>
  </nodes>
<!--@Location 22,29-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode17">
    <nodeSuccessors name="next" next="CallNode25"/>
  </nodes>
<!--@Location 22,31-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode25">
    <nodeSuccessors name="next" next="EndNode9"/>
    <parameterBindings name="ChannelDomainName" nullBinding="true"/>
    <parameterBindings name="ChannelSite" objectPath="OriginalRequestChannelSite"/>
    <startNode referencedName="ProcessPromotionCodeImport-SetChannelSiteOnRequest"/>
  </nodes>
<!--@Location 22,32-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode9" name="error"/>
<!--@Location 22,28-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode16">
    <nodeSuccessors name="next" next="JoinNode17"/>
  </nodes>
<!--@Location 14,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode4" name="DeleteSourceFile"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode8"/>
    <parameters name="DeleteSourceFile" type="java.lang.String" optional="true"/>
    <parameters name="DomainName" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 14,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode8" conditionKey="DeleteSourceFile"
      operator="str_eq" conditionValue="true">
<!--@BendPoints 29,6-->
    <nodeSuccessors name="decision_yes" next="DecisionNode1"/>
<!--@BendPoints 33,5-->
    <nodeSuccessors name="decision_no" next="JoinNode4"/>
  </nodes>
<!--@Location 14,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode1" conditionKey="DomainName">
<!--@BendPoints 29,8-->
    <nodeSuccessors name="decision_yes" next="DetermineUnit1"/>
    <nodeSuccessors name="decision_no" next="JoinNode4"/>
  </nodes>
<!--@Location 14,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DetermineUnit1">
    <pipelet href="enfinity:/core/pipelets/DetermineUnit.xml"/>
    <nodeSuccessors name="next" next="DeleteFile1"/>
<!--@BendPoints 31,9 31,15-->
    <nodeSuccessors name="pipelet_error" next="Join32"/>
    <parameterBindings name="UnitName" objectPath="DomainName"/>
    <returnValueBindings name="Unit" objectPath="UnitDomain"/>
  </nodes>
<!--@Location 14,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DeleteFile1">
    <configurationValues name="UnitDirectory" value="IMPEX_DIR"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/DeleteFile.xml"/>
    <nodeSuccessors name="next" next="Join33"/>
<!--@BendPoints 30,11 30,13-->
    <nodeSuccessors name="pipelet_error" next="Join33"/>
    <parameterBindings name="FileName" objectPath="SourceFile"/>
  </nodes>
<!--@Location 14,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join33">
    <nodeSuccessors name="next" next="Join32"/>
  </nodes>
<!--@Location 14,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join32">
    <nodeSuccessors name="next" next="Join38"/>
  </nodes>
<!--@Location 14,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join38">
<!--@BendPoints 29,18-->
    <nodeSuccessors name="next" next="EndNode3"/>
  </nodes>
<!--@Location 14,9-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode3"/>
<!--@Location 16,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode4">
<!--@BendPoints 33,17-->
    <nodeSuccessors name="next" next="Join38"/>
  </nodes>
<!--@Location 12,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start11" name="Error" callMode="Private">
    <nodeSuccessors name="next" next="UnlockImport2"/>
  </nodes>
<!--@Location 12,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UnlockImport2">
    <configurationValues name="PipeletID" value="UnlockImport1"/>
    <configurationValues name="UIDescription" value="UnlockImport"/>
    <pipelet href="enfinity:/core/pipelets/UnlockImport.xml"/>
    <nodeSuccessors name="next" next="Join41"/>
<!--@BendPoints 26,5 26,7-->
    <nodeSuccessors name="pipelet_error" next="Join41"/>
  </nodes>
<!--@Location 12,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join41">
    <nodeSuccessors name="next" next="CloseLoggers2"/>
  </nodes>
<!--@Location 12,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseLoggers2">
    <configurationValues name="PipeletID" value="CloseLoggers1"/>
    <configurationValues name="UIDescription" value="CloseLoggers"/>
    <pipelet href="enfinity:/core/pipelets/CloseLoggers.xml"/>
    <nodeSuccessors name="next" next="Join42"/>
<!--@BendPoints 26,9 26,11-->
    <nodeSuccessors name="pipelet_error" next="Join42"/>
  </nodes>
<!--@Location 12,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join42">
    <nodeSuccessors name="next" next="DecisionNode0"/>
  </nodes>
<!--@Location 12,6-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode0" conditionKey="ImpexJobInteractor">
    <nodeSuccessors name="decision_yes" next="RemoveJobInteractor2"/>
<!--@BendPoints 26,13 26,17-->
    <nodeSuccessors name="decision_no" next="JoinNode15"/>
  </nodes>
<!--@Location 12,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="RemoveJobInteractor2">
    <pipelet href="enfinity:/bc_foundation/pipelets/RemoveJobInteractor.xml"/>
    <nodeSuccessors name="next" next="JoinNode15"/>
  </nodes>
<!--@Location 12,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode15">
    <nodeSuccessors name="next" next="Decision1"/>
  </nodes>
<!--@Location 12,9-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision1" conditionKey="JobConfiguration">
    <nodeSuccessors name="decision_yes" next="UpdateCustomAttribute1"/>
<!--@BendPoints 27,19 27,27-->
    <nodeSuccessors name="decision_no" next="Join7"/>
  </nodes>
<!--@Location 12,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateCustomAttribute1">
    <configurationValues name="DefaultAttributeName" value="FinishedWithError"/>
    <configurationValues name="DefaultAttributeType" value="String"/>
    <configurationValues name="DefaultAttributeValue" value="true"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateCustomAttribute.xml"/>
    <nodeSuccessors name="next" next="Join25"/>
<!--@BendPoints 26,21 26,23-->
    <nodeSuccessors name="pipelet_error" next="Join25"/>
    <parameterBindings name="ExtensibleObject" objectPath="JobConfiguration"/>
  </nodes>
<!--@Location 12,11-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join25">
    <nodeSuccessors name="next" next="Call5"/>
  </nodes>
<!--@Location 12,12-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call5">
    <nodeSuccessors name="next" next="Join7"/>
    <startNode referencedName="ProcessImpexJob-Finish"/>
  </nodes>
<!--@Location 12,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join7">
<!--@BendPoints 25,28-->
    <nodeSuccessors name="next" next="End5"/>
  </nodes>
<!--@Location 12,14-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End5"/>
<!--@Location 9,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start12" name="GetConversionParameters"
      callMode="Private">
    <nodeSuccessors name="next" next="Decision4"/>
  </nodes>
<!--@Location 9,2-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision4" conditionKey="CustomFormatLine">
    <nodeSuccessors name="decision_yes" next="CheckForEmptyString1"/>
<!--@BendPoints 21,5-->
    <nodeSuccessors name="decision_no" next="Join29"/>
  </nodes>
<!--@Location 9,3-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CheckForEmptyString1">
    <pipelet href="enfinity:/bc_foundation/pipelets/CheckForEmptyString.xml"/>
    <nodeSuccessors name="next" next="KeyMapper4"/>
    <nodeSuccessors name="pipelet_error" next="Join29"/>
    <parameterBindings name="FilledString" objectPath="CustomFormatLine"/>
  </nodes>
<!--@Location 9,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper4">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="SetDictionaryValue3"/>
    <parameterBindings name="InValue_1" objectPath="CustomFormatLine"/>
    <returnValueBindings name="OutValue_1" objectPath="ASCIIConvert1.Format"/>
  </nodes>
<!--@Location 9,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue3">
    <configurationValues name="Name" value="ASCIIConvert1.SkipLines"/>
    <configurationValues name="Value" value="0"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="SetDictionaryValue2"/>
  </nodes>
<!--@Location 9,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue2">
    <configurationValues name="Name" value="ASCIIConvert1.FormatLine"/>
    <configurationValues name="Value" value="0"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="Join30"/>
  </nodes>
<!--@Location 9,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join30">
<!--@BendPoints 19,18-->
    <nodeSuccessors name="next" next="GetStringSubstitution1"/>
  </nodes>
<!--@Location 9,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetStringSubstitution1">
    <configurationValues name="DefaultPattern" value="default(\\|\/)(.+)"/>
    <configurationValues name="DefaultSubstitutionPattern" value="\2"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetStringSubstitution.xml"/>
    <nodeSuccessors name="next" next="End20"/>
    <parameterBindings name="InputString" objectPath="MappingTemplate"/>
    <returnValueBindings name="OutputString" objectPath="ASCIIConvert1.Template"/>
  </nodes>
<!--@Location 9,10-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End20"/>
<!--@Location 10,3-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join29">
    <nodeSuccessors name="next" next="Decision3"/>
  </nodes>
<!--@Location 10,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision3" conditionKey="FormatLineNumber">
    <nodeSuccessors name="decision_yes" next="KeyMapper3"/>
<!--@BendPoints 22,9 22,13-->
    <nodeSuccessors name="decision_no" next="Join31"/>
  </nodes>
<!--@Location 10,5-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper3">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="Join31"/>
    <parameterBindings name="InValue_1" objectPath="FormatLineNumber"/>
    <parameterBindings name="InValue_2" objectPath="FormatLineNumber"/>
    <returnValueBindings name="OutValue_1" objectPath="ASCIIConvert1.FormatLine"/>
    <returnValueBindings name="OutValue_2" objectPath="ASCIIConvert1.SkipLines"/>
  </nodes>
<!--@Location 10,6-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join31">
    <nodeSuccessors name="next" next="KeyMapper2"/>
  </nodes>
<!--@Location 10,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper2">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 21,17-->
    <nodeSuccessors name="next" next="Join30"/>
    <parameterBindings name="InValue_1" objectPath="FieldDelimiter"/>
    <returnValueBindings name="OutValue_1" objectPath="ASCIIConvert1.FieldDelimiter"/>
  </nodes>
<!--@Location 18,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start13" name="Import" callMode="Private">
    <nodeSuccessors name="next" next="KeyMapper9"/>
    <parameters name="StoreName" type="java.lang.String" optional="true"/>
    <parameters name="Interactor" type="com.intershop.beehive.core.capi.impex.ImpexInteractor"
        optional="true"/>
  </nodes>
<!--@Location 18,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper9">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="CallNode13"/>
    <parameterBindings name="InValue_1" constant="(Boolean)false"/>
    <returnValueBindings name="OutValue_1" objectPath="PromotionCodesSecured"/>
  </nodes>
<!--@Location 18,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode13">
    <nodeSuccessors name="next" next="CallNode11"/>
    <startNode referencedName="ProcessPromotionCodeImport-Prepare"/>
  </nodes>
<!--@Location 18,4-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode11">
    <nodeSuccessors name="next" next="Decision5"/>
<!--@BendPoints 41,10-->
    <nodeSuccessors name="ERROR" next="JumpNode1"/>
    <startNode referencedName="ProcessPromotionImpex-LockFile"/>
  </nodes>
<!--@Location 18,5-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision5" conditionKey="TempXMLFile">
<!--@BendPoints 37,12-->
    <nodeSuccessors name="decision_yes" next="KeyMapper5"/>
<!--@BendPoints 39,11-->
    <nodeSuccessors name="decision_no" next="KeyMapper6"/>
  </nodes>
<!--@Location 18,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper5">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="JoinNode23"/>
    <parameterBindings name="InValue_1" objectPath="TempXMLFile"/>
    <parameterBindings name="InValue_2" objectPath="ImportMode"/>
    <returnValueBindings name="OutValue_1" objectPath="SourceFile"/>
    <returnValueBindings name="OutValue_2" objectPath="DefaultImportMode"/>
  </nodes>
<!--@Location 18,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode23">
<!--@BendPoints 37,16-->
    <nodeSuccessors name="next" next="SetDictionaryValue5"/>
  </nodes>
<!--@Location 18,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue5">
    <configurationValues name="Name" value="PromotionCodeTag"/>
    <configurationValues name="Value" value="unique-promotion-code-list"/>
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="SetDictionaryValue6"/>
  </nodes>
<!--@Location 18,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue6">
    <configurationValues name="Name" value="Type"/>
    <configurationValues name="Value" value="TEMP_IN"/>
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="CallNode10"/>
  </nodes>
<!--@Location 18,10-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode10">
    <nodeSuccessors name="next" next="DecisionNode2"/>
    <startNode referencedName="ProcessPromotionImpex-Statistics"/>
  </nodes>
<!--@Location 18,11-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode2" conditionKey="statistics:SourceCounter(PromotionCodeTag)"
      operator="gt" conditionValue="0">
    <nodeSuccessors name="decision_yes" next="CallNode8"/>
<!--@BendPoints 38,23 38,27-->
    <nodeSuccessors name="decision_no" next="JoinNode7"/>
  </nodes>
<!--@Location 18,12-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode8">
    <nodeSuccessors name="next" next="JoinNode7"/>
    <startNode referencedName="ProcessPromotionCodeImport-ImportPromotionCodes"/>
  </nodes>
<!--@Location 18,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode7">
    <nodeSuccessors name="next" next="ConcatenateStrings4"/>
  </nodes>
<!--@Location 18,14-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings4">
    <configurationValues name="DefaultString1" value="temp"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="CallNode18"/>
    <returnValueBindings name="Concatenated" objectPath="DirectoryPath"/>
  </nodes>
<!--@Location 18,15-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode18">
    <nodeSuccessors name="next" next="CallNode9"/>
    <startNode referencedName="ProcessPromotionCodeImport-DeleteSourceFile"/>
  </nodes>
<!--@Location 18,16-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode9">
<!--@BendPoints 37,34-->
    <nodeSuccessors name="next" next="End21"/>
    <startNode referencedName="ProcessPromotionImpex-Cleanup"/>
  </nodes>
<!--@Location 18,17-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End21"/>
<!--@Location 19,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper6">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
<!--@BendPoints 39,15-->
    <nodeSuccessors name="next" next="JoinNode23"/>
    <parameterBindings name="InValue_1" objectPath="SelectedFile"/>
    <parameterBindings name="InValue_2" objectPath="ImportMode"/>
    <returnValueBindings name="OutValue_1" objectPath="SourceFile"/>
    <returnValueBindings name="OutValue_2" objectPath="DefaultImportMode"/>
  </nodes>
<!--@Location 20,17-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode1">
    <startNode referencedName="ProcessPromotionImpex-Error"/>
  </nodes>
<!--@Location 0,24-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start4" name="ImportPromotionCodes"
      callMode="Private">
    <nodeSuccessors name="next" next="CallNode7"/>
  </nodes>
<!--@Location 0,25-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode7">
    <nodeSuccessors name="next" next="CallNode24"/>
    <startNode referencedName="This:StartBadPromotionCodeLogging"/>
  </nodes>
<!--@Location 0,26-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode24">
    <nodeSuccessors name="next" next="CallNode12"/>
<!--@BendPoints 5,56-->
    <nodeSuccessors name="error" next="CallNode15"/>
    <startNode referencedName="ProcessPromotionCodeImport-ImportPromotionCodesXML"/>
  </nodes>
<!--@Location 0,27-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode12">
    <nodeSuccessors name="next" next="SetDictionaryValue4"/>
    <startNode referencedName="This:StopBadPromotionCodeLogging"/>
  </nodes>
<!--@Location 0,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue4">
    <configurationValues name="Name" value="TableNames"/>
    <configurationValues name="Value" value="promotioncode"/>
    <configurationValues name="ValueType" value="Dictionary Value"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="CallNode14"/>
  </nodes>
<!--@Location 0,29-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode14">
<!--@BendPoints 1,60-->
    <nodeSuccessors name="next" next="End7"/>
    <startNode referencedName="ProcessImpexJob-AnalyzeTables"/>
  </nodes>
<!--@Location 0,30-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End7"/>
<!--@Location 2,28-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode15">
    <nodeSuccessors name="next" next="Call7"/>
    <startNode referencedName="This:StopBadPromotionCodeLogging"/>
  </nodes>
<!--@Location 2,29-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call7">
    <nodeSuccessors name="next" next="Stop3"/>
    <startNode referencedName="ProcessPromotionImpex-Error"/>
  </nodes>
<!--@Location 2,30-->
  <nodes xsi:type="pipeline:StopNode" nodeID="Stop3"/>
<!--@Location 4,24-->
  <nodes xsi:type="pipeline:StartNode" nodeID="Start7" name="ImportPromotionCodesXML"
      callMode="Private">
    <nodeSuccessors name="next" next="CallNode16"/>
  </nodes>
<!--@Location 4,25-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode16">
    <nodeSuccessors name="next" next="GetPromotionCodeGroupByID1"/>
    <parameterBindings name="ChannelDomainName" objectPath="DomainName"/>
    <parameterBindings name="ChannelSite" nullBinding="true"/>
    <startNode referencedName="ProcessPromotionCodeImport-SetChannelSiteOnRequest"/>
  </nodes>
<!--@Location 4,26-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetPromotionCodeGroupByID1">
    <pipelet href="enfinity:/bc_marketing/pipelets/GetPromotionCodeGroupByID.xml"/>
    <nodeSuccessors name="next" next="KeyMapper11"/>
<!--@BendPoints 13,53-->
    <nodeSuccessors name="pipelet_error" next="JoinNode5"/>
    <parameterBindings name="GroupID" objectPath="TargetPromotionCodeGroupID"/>
    <returnValueBindings name="PromotionCodeGroup" objectPath="TargetPromotionCodeGroup"/>
  </nodes>
<!--@Location 4,27-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper11">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="OpenFile4"/>
    <parameterBindings name="InValue_1" objectPath="TargetPromotionCodeGroup:Domain"/>
    <returnValueBindings name="OutValue_1" objectPath="PromotionCodeGroupDomain"/>
  </nodes>
<!--@Location 4,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="OpenFile4">
    <configurationValues name="PipeletID" value="OpenXMLFile1"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="Type" value="TEMP_IN"/>
    <configurationValues name="UIDescription" value="OpenFile"/>
    <pipelet href="enfinity:/core/pipelets/OpenFile.xml"/>
    <nodeSuccessors name="next" next="Import1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode5"/>
    <parameterBindings name="File" objectPath="SourceFile"/>
  </nodes>
<!--@Location 4,29-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Import1">
    <configurationValues name="Bulker.Class" value="com.intershop.component.marketingimpex.internal.promotion.code.PromotionCodeElementBulker"/>
    <configurationValues name="Bulker.NumberThreads" value="1"/>
    <configurationValues name="ContentHandler.Class" value="com.intershop.component.marketingimpex.internal.promotion.code.PromotionCodeHandler"/>
    <configurationValues name="ImportManager.Class" value="com.intershop.beehive.core.internal.impex.orm.ORMImportMgr"/>
    <configurationValues name="MaximumErrorsAllowed" value="0"/>
    <configurationValues name="PipeletID" value="ImportPromotionCodes"/>
    <configurationValues name="SourceID" value="source"/>
    <configurationValues name="StatisticsID" value="statistics"/>
    <configurationValues name="UIDescription" value="Import Promotion Codes"/>
    <configurationValues name="Validator.Class" value="com.intershop.component.marketingimpex.internal.promotion.code.PromotionCodeElementValidator"/>
    <configurationValues name="Validator.NumberThreads" value="1"/>
    <pipelet href="enfinity:/core/pipelets/Import.xml"/>
    <nodeSuccessors name="next" next="CloseFile3"/>
<!--@BendPoints 10,59-->
    <nodeSuccessors name="pipelet_error" next="CloseFile5"/>
  </nodes>
<!--@Location 4,30-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile3">
    <configurationValues name="PipeletID" value="CloseXMLFile1"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="CallNode17"/>
  </nodes>
<!--@Location 4,31-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode17">
    <nodeSuccessors name="next" next="End16"/>
    <parameterBindings name="ChannelDomainName" nullBinding="true"/>
    <parameterBindings name="ChannelSite" objectPath="OriginalRequestChannelSite"/>
    <startNode referencedName="ProcessPromotionCodeImport-SetChannelSiteOnRequest"/>
  </nodes>
<!--@Location 4,32-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End16"/>
<!--@Location 5,29-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseFile5">
    <configurationValues name="PipeletID" value="CloseXMLFileRelation"/>
    <configurationValues name="StreamID" value="source"/>
    <configurationValues name="UIDescription" value="CloseXMLFile"/>
    <pipelet href="enfinity:/core/pipelets/CloseFile.xml"/>
    <nodeSuccessors name="next" next="Join13"/>
  </nodes>
<!--@Location 6,29-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join13">
    <nodeSuccessors name="next" next="CallNode19"/>
  </nodes>
<!--@Location 6,31-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode19">
    <nodeSuccessors name="next" next="EndNode5"/>
    <parameterBindings name="ChannelDomainName" nullBinding="true"/>
    <parameterBindings name="ChannelSite" objectPath="OriginalRequestChannelSite"/>
    <startNode referencedName="ProcessPromotionCodeImport-SetChannelSiteOnRequest"/>
  </nodes>
<!--@Location 6,32-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode5" name="error"/>
<!--@Location 6,28-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode5">
    <nodeSuccessors name="next" next="Join13"/>
  </nodes>
<!--@Location 5,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode1" name="Prepare" callMode="Private">
<!--@BendPoints 11,4-->
    <nodeSuccessors name="next" next="GetJobConfiguration1"/>
  </nodes>
<!--@Location 5,2-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetJobConfiguration1">
    <pipelet href="enfinity:/bc_foundation/pipelets/GetJobConfiguration.xml"/>
<!--@BendPoints 11,6-->
    <nodeSuccessors name="next" next="DecisionNode5"/>
<!--@BendPoints 15,5-->
    <nodeSuccessors name="pipelet_error" next="JoinNode19"/>
    <parameterBindings name="JobUUID" objectPath="JobConfigurationUUID"/>
  </nodes>
<!--@Location 5,3-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode5" conditionKey="CurrentOrganizationUUID">
    <nodeSuccessors name="decision_yes" next="GetOrganization1"/>
<!--@BendPoints 13,7 13,11-->
    <nodeSuccessors name="decision_no" next="JoinNode18"/>
  </nodes>
<!--@Location 5,4-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetOrganization1">
    <configurationValues name="Source" value="PipelineDictionary"/>
    <pipelet href="enfinity:/bc_organization/pipelets/GetOrganization.xml"/>
    <nodeSuccessors name="next" next="JoinNode18"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode19"/>
    <parameterBindings name="OrganizationUUID" objectPath="CurrentOrganizationUUID"/>
    <returnValueBindings name="Organization" objectPath="CurrentOrganization"/>
  </nodes>
<!--@Location 5,5-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode18">
    <nodeSuccessors name="next" next="Pipelet3"/>
  </nodes>
<!--@Location 5,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet3">
    <pipelet href="enfinity:/core/pipelets/CreateImpexUnitFileStructure.xml"/>
    <nodeSuccessors name="next" next="Pipelet5"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode1"/>
  </nodes>
<!--@Location 5,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet5">
    <configurationValues name="CartridgeName" value="bc_marketing_impex"/>
    <configurationValues name="Controller.Class" value="com.intershop.beehive.core.capi.impex.Controller"/>
    <configurationValues name="File" value="PromotionCodeImport.properties"/>
    <configurationValues name="PerformAccessControl" value="false"/>
    <configurationValues name="PipeletID" value="DetermineConfiguration1"/>
    <configurationValues name="UIDescription" value="DetermineConfiguration"/>
    <pipelet href="enfinity:/core/pipelets/DetermineConfiguration.xml"/>
    <nodeSuccessors name="next" next="CreateJobInteractor1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode2"/>
  </nodes>
<!--@Location 5,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateJobInteractor1">
    <configurationValues name="UpdateInterval" value="1"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/CreateJobInteractor.xml"/>
    <nodeSuccessors name="next" next="ConcatenateStrings1"/>
  </nodes>
<!--@Location 5,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings1">
    <configurationValues name="DefaultString2" value=".log"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="Pipelet4"/>
    <parameterBindings name="String1" objectPath="JobConfiguration:UUID"/>
    <returnValueBindings name="Concatenated" objectPath="LogFile"/>
  </nodes>
<!--@Location 5,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet4">
    <configurationValues name="BufferSize" value="1024"/>
    <configurationValues name="Facility" value="default"/>
    <configurationValues name="FlushTime" value="0"/>
    <configurationValues name="Level" value="ERROR | WARN"/>
    <configurationValues name="PipeletID" value="CreateFileLogger1"/>
    <configurationValues name="RolloverSize" value="102400"/>
    <configurationValues name="UIDescription" value="CreateFileLogger"/>
    <pipelet href="enfinity:/core/pipelets/CreateFileLogger.xml"/>
    <nodeSuccessors name="next" next="Pipelet1"/>
    <parameterBindings name="File" objectPath="LogFile"/>
  </nodes>
<!--@Location 5,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="Pipelet1">
    <configurationValues name="IsDomainSpecific" value="true"/>
    <configurationValues name="PipeletID" value="LockImport1"/>
    <configurationValues name="ResourceList" value="MARKETING_PromotionCode"/>
    <configurationValues name="Timeout" value="60"/>
    <configurationValues name="UIDescription" value="LockImport"/>
    <pipelet href="enfinity:/core/pipelets/LockImport.xml"/>
    <nodeSuccessors name="next" next="EndNode1"/>
    <nodeSuccessors name="pipelet_error" next="UpdateCustomAttribute5"/>
  </nodes>
<!--@Location 5,14-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode1"/>
<!--@Location 6,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateCustomAttribute5">
    <configurationValues name="DefaultAttributeName" value="FinishedWithError"/>
    <configurationValues name="DefaultAttributeType" value="String"/>
    <configurationValues name="DefaultAttributeValue" value="true"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/UpdateCustomAttribute.xml"/>
    <nodeSuccessors name="next" next="Stop1"/>
    <nodeSuccessors name="pipelet_error" next="Stop1"/>
    <parameterBindings name="ExtensibleObject" objectPath="JobConfiguration"/>
  </nodes>
<!--@Location 7,14-->
  <nodes xsi:type="pipeline:StopNode" nodeID="Stop1"/>
<!--@Location 7,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode2">
    <nodeSuccessors name="next" next="Stop1"/>
  </nodes>
<!--@Location 7,7-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode1">
    <nodeSuccessors name="next" next="JoinNode2"/>
  </nodes>
<!--@Location 7,4-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode19">
    <nodeSuccessors name="next" next="JoinNode1"/>
  </nodes>
<!--@Location 3,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode0" name="PrepareDBInit" callMode="Private">
    <nodeSuccessors name="next" next="CreateImpexUnitFileStructure0"/>
  </nodes>
<!--@Location 3,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateImpexUnitFileStructure0">
    <pipelet href="enfinity:/core/pipelets/CreateImpexUnitFileStructure.xml"/>
    <nodeSuccessors name="next" next="DetermineConfiguration0"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode0"/>
  </nodes>
<!--@Location 3,8-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DetermineConfiguration0">
    <configurationValues name="CartridgeName" value="bc_marketing_impex"/>
    <configurationValues name="Config.Directory" value="DBInit-PromotionCodeImport.properties"/>
    <configurationValues name="Controller.Class" value="com.intershop.beehive.core.capi.impex.Controller"/>
    <configurationValues name="PerformAccessControl" value="false"/>
    <configurationValues name="PipeletID" value="DetermineConfigurationDBInit"/>
    <configurationValues name="UIDescription" value="DetermineConfiguration"/>
    <pipelet href="enfinity:/core/pipelets/DetermineConfiguration.xml"/>
    <nodeSuccessors name="next" next="CreateLogger0"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode0"/>
  </nodes>
<!--@Location 3,11-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateLogger0">
    <configurationValues name="Class" value="com.intershop.beehive.core.internal.impex.NativeLogger"/>
    <configurationValues name="Facility" value="default"/>
    <configurationValues name="Level" value="ERROR|WARN"/>
    <configurationValues name="PipeletID" value="CreateLogger"/>
    <configurationValues name="UIDescription" value="CreateLogger"/>
    <pipelet href="enfinity:/core/pipelets/CreateLogger.xml"/>
    <nodeSuccessors name="next" next="LockImport0"/>
  </nodes>
<!--@Location 3,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="LockImport0">
    <configurationValues name="IsDomainSpecific" value="true"/>
    <configurationValues name="PipeletID" value="LockImportDBInit"/>
    <configurationValues name="ResourceList" value="MARKETING_PromotionCode"/>
    <configurationValues name="Timeout" value="60"/>
    <configurationValues name="UIDescription" value="LockImport"/>
    <pipelet href="enfinity:/core/pipelets/LockImport.xml"/>
    <nodeSuccessors name="next" next="JoinNode8"/>
    <nodeSuccessors name="pipelet_error" next="CloseLoggers0"/>
  </nodes>
<!--@Location 3,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode8">
    <nodeSuccessors name="next" next="EndNode0"/>
  </nodes>
<!--@Location 3,14-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode0"/>
<!--@Location 4,12-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseLoggers0">
    <configurationValues name="PipeletID" value="CloseLoggers"/>
    <configurationValues name="UIDescription" value="Close Loggers"/>
    <pipelet href="enfinity:/core/pipelets/CloseLoggers.xml"/>
    <nodeSuccessors name="next" next="JoinNode3"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode3"/>
  </nodes>
<!--@Location 4,13-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode3">
    <nodeSuccessors name="next" next="JoinNode8"/>
  </nodes>
<!--@Location 4,8-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode0">
    <nodeSuccessors name="next" next="CloseLoggers0"/>
  </nodes>
<!--@Location 16,24-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode8" strict="true" name="SetChannelSiteOnRequest"
      callMode="Private">
    <nodeSuccessors name="next" next="DecisionNode6"/>
    <parameters name="ChannelDomainName" type="java.lang.String" optional="true"/>
    <parameters name="ChannelSite" type="com.intershop.beehive.core.capi.domain.Domain"
        optional="true"/>
  </nodes>
<!--@Location 16,25-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode6" conditionKey="ChannelSite">
<!--@BendPoints 33,58-->
    <nodeSuccessors name="decision_yes" next="KeyMapper10"/>
<!--@BendPoints 34,51 34,53-->
    <nodeSuccessors name="decision_no" next="DecisionNode4"/>
  </nodes>
<!--@Location 17,29-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper10">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="SetChannelSiteOnRequest1"/>
    <parameterBindings name="InValue_1" objectPath="CurrentRequest:ChannelSite"/>
    <returnValueBindings name="OutValue_1" objectPath="OriginalRequestChannelSite"/>
  </nodes>
<!--@Location 17,30-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetChannelSiteOnRequest1">
    <pipelet href="enfinity:/core/pipelets/SetChannelSiteOnRequest.xml"/>
<!--@BendPoints 35,62-->
    <nodeSuccessors name="next" next="EndNode8"/>
    <parameterBindings name="ChannelRepositorySite" objectPath="ChannelSite"/>
  </nodes>
<!--@Location 17,31-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode8" strict="true">
    <returnValues name="OriginalRequestChannelSite" type="com.intershop.beehive.core.capi.domain.Domain"
        optional="true"/>
    <returnValues name="ChannelSite" type="com.intershop.beehive.core.capi.domain.Domain"
        optional="true"/>
  </nodes>
<!--@Location 17,26-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="DecisionNode4" conditionKey="ChannelDomainName"
      operator="str_empty">
<!--@BendPoints 37,53-->
    <nodeSuccessors name="decision_yes" next="JoinNode6"/>
<!--@BendPoints 35,54-->
    <nodeSuccessors name="decision_no" next="ConcatenateStrings8"/>
  </nodes>
<!--@Location 18,28-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode6">
<!--@BendPoints 37,62-->
    <nodeSuccessors name="next" next="EndNode8"/>
  </nodes>
<!--@Location 17,27-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings8">
    <configurationValues name="DefaultString1" value="-Site"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
<!--@BendPoints 35,56-->
    <nodeSuccessors name="next" next="GetDomainByName1"/>
    <parameterBindings name="String0" objectPath="ChannelDomainName"/>
    <returnValueBindings name="Concatenated" objectPath="ChannelSiteName"/>
  </nodes>
<!--@Location 17,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetDomainByName1">
    <pipelet href="enfinity:/core/pipelets/GetDomainByName.xml"/>
    <nodeSuccessors name="next" next="KeyMapper10"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode6"/>
    <parameterBindings name="DomainName" objectPath="ChannelSiteName"/>
    <returnValueBindings name="Domain" objectPath="ChannelSite"/>
  </nodes>
<!--@Location 8,24-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode3" strict="true" name="StartBadPromotionCodeLogging"
      callMode="Private">
    <nodeSuccessors name="next" next="ConcatenateStrings6"/>
<!--the import job configuration-->
    <parameters name="JobConfiguration" type="com.intershop.beehive.core.capi.job.JobConfiguration"
        optional="true"/>
<!--ConcatenateStrings (bc_foundation)
ConcatenateStrings (bc_foundation)
bc_foundation-->
    <parameters name="Controller" type="com.intershop.beehive.core.capi.impex.Controller"
        optional="true"/>
<!--name of selected file-->
    <parameters name="SelectedFile" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 8,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings6">
    <configurationValues name="DefaultString0" value="BadPromotionCodes_"/>
    <configurationValues name="DefaultString2" value="_"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="ConcatenateStrings7"/>
    <parameterBindings name="String1" objectPath="SelectedFile"/>
    <parameterBindings name="String3" objectPath="JobConfiguration:UUID"/>
    <returnValueBindings name="Concatenated" objectPath="OutputFileName"/>
  </nodes>
<!--@Location 8,26-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings7">
    <configurationValues name="DefaultString1" value="/marketing"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="AddMultipleEntriesToMap1"/>
    <parameterBindings name="String0" objectPath="Controller:SourceDirectory"/>
    <returnValueBindings name="Concatenated" objectPath="OutputDirectory"/>
  </nodes>
<!--@Location 8,27-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="AddMultipleEntriesToMap1">
    <configurationValues name="Mode" value="OverwriteValue"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/AddMultipleEntriesToMap.xml"/>
    <nodeSuccessors name="next" next="CreateProcessTemplateBasedLogAppender1"/>
    <parameterBindings name="Key1" constant="FileName"/>
    <parameterBindings name="Key2" constant="OutputDirectory"/>
    <parameterBindings name="Key3" constant="CSVHeader"/>
    <parameterBindings name="Value1" objectPath="OutputFileName"/>
    <parameterBindings name="Value2" objectPath="OutputDirectory"/>
    <parameterBindings name="Value3" constant="promotion-code"/>
    <returnValueBindings name="OutMap" objectPath="AppenderMap"/>
  </nodes>
<!--@Location 8,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CreateProcessTemplateBasedLogAppender1">
    <configurationValues name="AppenderDefinition" value="intershop.cartridges.bc_marketing.BadPromotionCodes"/>
    <pipelet href="enfinity:/core/pipelets/CreateProcessTemplateBasedLogAppender.xml"/>
<!--@BendPoints 17,58-->
    <nodeSuccessors name="next" next="EndNode7"/>
    <parameterBindings name="AppenderDefinition" nullBinding="true"/>
    <parameterBindings name="ProcessID" objectPath="JobConfiguration:UUID"/>
    <parameterBindings name="ProcessType" objectPath="JobConfiguration:CurrentProcess:Type"/>
    <parameterBindings name="Properties" objectPath="AppenderMap"/>
    <returnValueBindings name="ProcessTemplateBasedAppender" objectPath="BadPromotionCodeAppender"/>
  </nodes>
<!--@Location 8,29-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode7" strict="true">
<!--a log file appender to write bad promotion codes-->
    <returnValues name="BadPromotionCodeAppender" type="com.intershop.beehive.core.capi.log.ProcessTemplateBasedAppender"/>
  </nodes>
<!--@Location 10,24-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode7" strict="true" name="StopBadPromotionCodeLogging"
      callMode="Private">
<!--@BendPoints 21,50-->
    <nodeSuccessors name="next" next="CloseProcessLogAppender1"/>
<!--a log file appender to write bad promotion codes-->
    <parameters name="BadPromotionCodeAppender" type="com.intershop.beehive.core.capi.log.ProcessAppender"
        optional="true"/>
<!--name of selected file-->
    <parameters name="SelectedFile" type="java.lang.String" optional="true"/>
<!--the import job configuration-->
    <parameters name="JobConfigurationUUID" type="java.lang.String" optional="true"/>
    <parameters name="DomainName" type="java.lang.String" optional="true"/>
  </nodes>
<!--@Location 10,25-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CloseProcessLogAppender1">
    <pipelet href="enfinity:/core/pipelets/CloseProcessLogAppender.xml"/>
<!--@BendPoints 21,52-->
    <nodeSuccessors name="next" next="ConcatenateStrings10"/>
    <parameterBindings name="ProcessLogAppender" objectPath="BadPromotionCodeAppender"/>
  </nodes>
<!--@Location 10,26-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings10">
    <configurationValues name="DefaultString0" value="BadPromotionCodes_"/>
    <configurationValues name="DefaultString2" value="_"/>
    <configurationValues name="DefaultString4" value=".csv"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="DetermineUnit2"/>
    <parameterBindings name="String1" objectPath="SelectedFile"/>
    <parameterBindings name="String3" objectPath="JobConfigurationUUID"/>
    <returnValueBindings name="Concatenated" objectPath="OutputFileName"/>
  </nodes>
<!--@Location 10,27-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DetermineUnit2">
    <pipelet href="enfinity:/core/pipelets/DetermineUnit.xml"/>
    <nodeSuccessors name="next" next="GetFileContent1"/>
<!--@BendPoints 23,55-->
    <nodeSuccessors name="pipelet_error" next="JoinNode12"/>
    <parameterBindings name="UnitName" objectPath="DomainName"/>
    <returnValueBindings name="Unit" objectPath="UnitDomain"/>
  </nodes>
<!--@Location 10,28-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="GetFileContent1">
    <configurationValues name="UnitDirectory" value="IMPEX_SRC_DIR"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/GetFileContent.xml"/>
    <nodeSuccessors name="next" next="TrimString1"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode12"/>
    <parameterBindings name="DirectoryPath" constant="marketing"/>
    <parameterBindings name="FileName" objectPath="OutputFileName"/>
  </nodes>
<!--line breaks and spaces have to be removed
@Location 10,29-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="TrimString1">
    <pipelet href="enfinity:/bc_foundation/pipelets/TrimString.xml"/>
    <nodeSuccessors name="next" next="CompareValues1"/>
    <parameterBindings name="String" objectPath="FileContent"/>
    <returnValueBindings name="TrimmedString" objectPath="FileContent"/>
  </nodes>
<!--@Location 10,30-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="CompareValues1">
    <pipelet href="enfinity:/bc_foundation/pipelets/CompareValues.xml"/>
    <nodeSuccessors name="next" next="DeleteFile2"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode13"/>
    <parameterBindings name="FirstValue" objectPath="FileContent"/>
    <parameterBindings name="SecondValue" constant="promotion-code"/>
  </nodes>
<!--@Location 10,31-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="DeleteFile2">
    <configurationValues name="UnitDirectory" value="IMPEX_SRC_DIR"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/DeleteFile.xml"/>
    <nodeSuccessors name="next" next="JoinNode10"/>
    <nodeSuccessors name="pipelet_error" next="JoinNode11"/>
    <parameterBindings name="DirectoryPath" constant="marketing"/>
    <parameterBindings name="FileName" objectPath="OutputFileName"/>
  </nodes>
<!--@Location 10,32-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode10">
<!--@BendPoints 21,66-->
    <nodeSuccessors name="next" next="EndNode2"/>
  </nodes>
<!--@Location 10,33-->
  <nodes xsi:type="pipeline:EndNode" nodeID="EndNode2" strict="true"/>
<!--@Location 11,31-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode11">
<!--@BendPoints 23,65-->
    <nodeSuccessors name="next" next="JoinNode10"/>
  </nodes>
<!--@Location 11,30-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode13">
    <nodeSuccessors name="next" next="JoinNode11"/>
  </nodes>
<!--@Location 11,28-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="JoinNode12">
    <nodeSuccessors name="next" next="JoinNode13"/>
  </nodes>
<!--@Location 0,1-->
  <nodes xsi:type="pipeline:StartNode" nodeID="StartNode2" name="Validate" callMode="Private">
<!--@BendPoints 1,4-->
    <nodeSuccessors name="next" next="CallNode2"/>
  </nodes>
<!--@Location 0,2-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode2">
    <nodeSuccessors name="next" next="CallNode6"/>
    <startNode referencedName="ProcessPromotionCodeImport-Prepare"/>
  </nodes>
<!--@Location 0,3-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode6">
<!--@BendPoints 1,8-->
    <nodeSuccessors name="next" next="Decision2"/>
<!--@BendPoints 5,9 5,36-->
    <nodeSuccessors name="ERROR" next="JumpNode2"/>
    <startNode referencedName="ProcessPromotionImpex-LockFileForValidation"/>
  </nodes>
<!--@Location 0,4-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision2" conditionKey="MappingTemplate">
    <nodeSuccessors name="decision_yes" next="CallNode3"/>
<!--@BendPoints 3,9-->
    <nodeSuccessors name="decision_no" next="ConcatenateStrings2"/>
  </nodes>
<!--@Location 0,5-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode3">
    <nodeSuccessors name="next" next="ConcatenateStrings3"/>
    <startNode referencedName="ProcessPromotionCodeImport-GetConversionParameters"/>
  </nodes>
<!--@Location 0,6-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings3">
    <configurationValues name="DefaultString1" value="marketing/"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="ConcatenateStrings5"/>
    <parameterBindings name="String2" objectPath="SelectedFile"/>
    <returnValueBindings name="Concatenated" objectPath="SourceCsvFile"/>
  </nodes>
<!--@Location 0,7-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings5">
    <configurationValues name="DefaultString2" value=".xml"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
    <nodeSuccessors name="next" next="CallNode4"/>
    <parameterBindings name="String1" objectPath="JobConfiguration:UUID"/>
    <returnValueBindings name="Concatenated" objectPath="TempXMLFile"/>
  </nodes>
<!--@Location 0,8-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode4">
    <nodeSuccessors name="next" next="SetDictionaryValue1"/>
    <startNode referencedName="ProcessPromotionCodeImport-ConvertCSV"/>
  </nodes>
<!--@Location 0,9-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="SetDictionaryValue1">
    <configurationValues name="Name" value="Type"/>
    <configurationValues name="Value" value="TEMP_IN"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/SetDictionaryValue.xml"/>
    <nodeSuccessors name="next" next="KeyMapper1"/>
  </nodes>
<!--@Location 0,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="KeyMapper1">
    <pipelet href="enfinity:/bc_foundation/pipelets/KeyMapper.xml"/>
    <nodeSuccessors name="next" next="Join26"/>
    <parameterBindings name="InValue_1" objectPath="TempXMLFile"/>
    <returnValueBindings name="OutValue_1" objectPath="SourceFile"/>
  </nodes>
<!--@Location 0,11-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join26">
    <nodeSuccessors name="next" next="CallNode5"/>
  </nodes>
<!--@Location 0,12-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode5">
    <nodeSuccessors name="next" next="CallNode1"/>
    <startNode referencedName="ProcessPromotionImpex-Statistics"/>
  </nodes>
<!--@Location 0,13-->
  <nodes xsi:type="pipeline:CallNode" nodeID="CallNode1">
    <nodeSuccessors name="next" next="Call2"/>
    <startNode referencedName="ProcessPromotionImpex-Verify"/>
  </nodes>
<!--@Location 0,14-->
  <nodes xsi:type="pipeline:CallNode" nodeID="Call2">
    <nodeSuccessors name="next" next="Decision11"/>
    <startNode referencedName="ProcessPromotionImpex-Unlock"/>
  </nodes>
<!--@Location 0,15-->
  <nodes xsi:type="pipeline:DecisionNode" nodeID="Decision11" conditionKey="MappingTemplate">
    <nodeSuccessors name="decision_yes" next="UpdateCustomAttributes1"/>
<!--@BendPoints 2,31 2,35-->
    <nodeSuccessors name="decision_no" next="Join45"/>
  </nodes>
<!--@Location 0,16-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="UpdateCustomAttributes1">
    <configurationValues name="Attribute_1_Name" value="TempXMLFile"/>
    <configurationValues name="Attribute_1_Type" value="String"/>
    <pipelet href="enfinity:/core/pipelets/UpdateCustomAttributes.xml"/>
    <nodeSuccessors name="next" next="Join45"/>
    <parameterBindings name="Attribute_1_Value" objectPath="TempXMLFile"/>
    <parameterBindings name="ExtensibleObject" objectPath="JobConfiguration"/>
  </nodes>
<!--@Location 0,17-->
  <nodes xsi:type="pipeline:JoinNode" nodeID="Join45">
    <nodeSuccessors name="next" next="End10"/>
  </nodes>
<!--@Location 0,18-->
  <nodes xsi:type="pipeline:EndNode" nodeID="End10"/>
<!--@Location 1,10-->
  <nodes xsi:type="pipeline:PipeletNode" nodeID="ConcatenateStrings2">
    <configurationValues name="DefaultString1" value="marketing/"/>
    <pipelet href="enfinity:/bc_foundation/pipelets/ConcatenateStrings.xml"/>
<!--@BendPoints 3,23-->
    <nodeSuccessors name="next" next="Join26"/>
    <parameterBindings name="String2" objectPath="SelectedFile"/>
    <returnValueBindings name="Concatenated" objectPath="SourceFile"/>
  </nodes>
<!--@Location 2,18-->
  <nodes xsi:type="pipeline:JumpNode" nodeID="JumpNode2">
    <startNode referencedName="ProcessPromotionImpex-Error"/>
  </nodes>
</pipeline:Pipeline>
